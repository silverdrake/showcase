{"version":3,"sources":["main-es5.js","webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.html","webpack:///src/app/scene-ui/scene-ui.component.html","webpack:///src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.html","webpack:///src/app/story-tester/scenes/test-green-screen/test-green-screen.component.html","webpack:///src/app/story-tester/story-tester.component.html","webpack:///src/app/storyteller/charsheet/quest-journal/quest-journal.component.html","webpack:///src/app/storyteller/scenes/journey-step/journey-step.component.html","webpack:///src/app/storyteller/scenes/narration-pages/narration-pages.component.html","webpack:///src/app/storyteller/scenes/passage-through/passage-through.component.html","webpack:///src/app/storyteller/scenes/roaming-step/roaming-step.component.html","webpack:///src/app/storyteller/scenes/skill-action/skill-action.component.html","webpack:///src/app/storyteller/scenes/story-choice/story-choice.component.html","webpack:///src/app/storyteller/scenes/town-ui/town-ui.component.html","webpack:///src/app/storyteller/scenes/world-map-view/world-map-view.component.html","webpack:///src/app/storyteller/storyteller.component.html","webpack:///node_modules/tslib/tslib.es6.js","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.scss","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/rpg-engine/quests/quest-ref.ts","webpack:///src/app/rpg-engine/quests/quest-task-condition.ts","webpack:///src/app/rpg-engine/quests/quest-task.ts","webpack:///src/app/rpg-engine/scene-factory.ts","webpack:///src/app/rpg-engine/scenes/branching-meta-scene.ts","webpack:///src/app/rpg-engine/scenes/journey-departure.ts","webpack:///src/app/rpg-engine/scenes/journey.ts","webpack:///src/app/rpg-engine/scenes/meta-scene.ts","webpack:///src/app/rpg-engine/scenes/narration.ts","webpack:///src/app/rpg-engine/scenes/passage-trail.ts","webpack:///src/app/rpg-engine/scenes/roaming.ts","webpack:///src/app/rpg-engine/scenes/skill-test.ts","webpack:///src/app/rpg-engine/scenes/story-branch.ts","webpack:///src/app/rpg-engine/scenes/struct/multi-scene.ts","webpack:///src/app/rpg-engine/scenes/struct/wander-scene-trigger-condition.ts","webpack:///src/app/rpg-engine/scenes/struct/wander-scene-trigger.ts","webpack:///src/app/rpg-engine/scenes/town-nav.ts","webpack:///src/app/rpg-engine/skill-system/simple-skill-set.ts","webpack:///src/app/rpg-engine/skill-system/simple-skill-system.ts","webpack:///src/app/rpg-engine/skill-system/simple-skill-throw.ts","webpack:///src/app/rpg-engine/wander-game-state.ts","webpack:///src/app/rpg-engine/wander-game.ts","webpack:///src/app/rpg-engine/wander-hero.ts","webpack:///src/app/rpg-engine/wander-scene.ts","webpack:///src/app/rpg-engine/world/locs/Place.ts","webpack:///src/app/rpg-engine/world/locs/PlaceFactory.ts","webpack:///src/app/rpg-engine/world/locs/TerrainPass.ts","webpack:///src/app/rpg-engine/world/locs/Town.ts","webpack:///src/app/rpg-engine/world/world-map.ts","webpack:///src/app/rpg-engine/world/world-position.ts","webpack:///src/app/scene-ui/char-sheet.directive.ts","webpack:///src/app/scene-ui/insertion.directive.ts","webpack:///src/app/scene-ui/scene-injector.ts","webpack:///src/app/scene-ui/scene-ref.ts","webpack:///src/app/scene-ui/scene-ui.component.scss","webpack:///src/app/scene-ui/scene-ui.component.ts","webpack:///src/app/scene-ui/scene-ui.module.ts","webpack:///src/app/scene-ui/scene-ui.service.ts","webpack:///src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.scss","webpack:///src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.ts","webpack:///src/app/story-tester/scenes/test-green-screen/test-green-screen.component.scss","webpack:///src/app/story-tester/scenes/test-green-screen/test-green-screen.component.ts","webpack:///src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.scss","webpack:///src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.ts","webpack:///src/app/story-tester/story-tester.component.scss","webpack:///src/app/story-tester/story-tester.component.ts","webpack:///src/app/story-tester/tester-scene.ts","webpack:///src/app/storyteller/charsheet/quest-journal/quest-journal.component.scss","webpack:///src/app/storyteller/charsheet/quest-journal/quest-journal.component.ts","webpack:///src/app/storyteller/scenes/journey-step/journey-step.component.scss","webpack:///src/app/storyteller/scenes/journey-step/journey-step.component.ts","webpack:///src/app/storyteller/scenes/lib/art-renderer.ts","webpack:///src/app/storyteller/scenes/lib/walk-renderer.ts","webpack:///src/app/storyteller/scenes/narration-pages/narration-pages.component.scss","webpack:///src/app/storyteller/scenes/narration-pages/narration-pages.component.ts","webpack:///src/app/storyteller/scenes/passage-through/passage-through.component.scss","webpack:///src/app/storyteller/scenes/passage-through/passage-through.component.ts","webpack:///src/app/storyteller/scenes/roaming-step/roaming-step.component.scss","webpack:///src/app/storyteller/scenes/roaming-step/roaming-step.component.ts","webpack:///src/app/storyteller/scenes/scene-renderer-loader.ts","webpack:///src/app/storyteller/scenes/scene-renderer.ts","webpack:///src/app/storyteller/scenes/skill-action/skill-action.component.scss","webpack:///src/app/storyteller/scenes/skill-action/skill-action.component.ts","webpack:///src/app/storyteller/scenes/story-choice/story-choice.component.scss","webpack:///src/app/storyteller/scenes/story-choice/story-choice.component.ts","webpack:///src/app/storyteller/scenes/town-ui/town-ui.component.scss","webpack:///src/app/storyteller/scenes/town-ui/town-ui.component.ts","webpack:///src/app/storyteller/scenes/world-map-view/world-map-view.component.scss","webpack:///src/app/storyteller/scenes/world-map-view/world-map-view.component.ts","webpack:///src/app/storyteller/storyteller-interface.ts","webpack:///src/app/storyteller/storyteller.component.scss","webpack:///src/app/storyteller/storyteller.component.ts","webpack:///src/app/support/res-loader.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":[],"mappings":"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","file":"x","sourcesContent":["(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[\"main\"],{\n\n/***/ \"./$$_lazy_route_resource lazy recursive\":\n/*!******************************************************!*\\\n  !*** ./$$_lazy_route_resource lazy namespace object ***!\n  \\******************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html\":\n/*!**************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html ***!\n  \\**************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"\\n\\n\\t<router-outlet></router-outlet>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/scene-ui/scene-ui.component.html\":\n/*!****************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/scene-ui/scene-ui.component.html ***!\n  \\****************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"uiwrapper\\\" (click)=\\\"onOverlayClicked($event)\\\">\\n\\t<ng-template appInsertion> </ng-template>\\n</div>\\n\\n<div id=gamecontrols>\\n\\n\\t<a (click)=\\\"openCharSheet()\\\">CHAR</a>\\n\\t&nbsp;&nbsp;\\n\\n    <a (click)=\\\"doLoadGame()\\\" >LOAD</a>\\n        &nbsp;\\n\\t<a (click)=\\\"doSaveGame()\\\" >SAVE</a>\\n\\n</div>\\n\\n<div id=\\\"charsheetmodal\\\" [class.visible]=\\\"this.showCharSheet\\\">\\n\\n\\n\\t<div id=\\\"charsheet\\\">\\n\\t\\t<div id=\\\"charsheetcontrols\\\">\\n\\t\\t\\t<a (click)=\\\"closeCharSheet()\\\">CLOSE</a>\\n\\t\\t</div>\\n\\n\\t\\t<div id=\\\"charsheetpage\\\">\\n\\t\\t\\t<ng-template charsheetInsertion></ng-template>\\n\\t\\t</div>\\n\\n\\t</div>\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.html\":\n/*!****************************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.html ***!\n  \\****************************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"overlay\\\">\\n\\t<div class=\\\"dialog\\\">\\n\\t\\t<div class=\\\"scenescreen\\\">test-blue-screen works!</div>\\n\\t\\t<button (click)=\\\"onClose()\\\">BYE!</button>\\n\\t</div>\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.html\":\n/*!******************************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.html ***!\n  \\******************************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"overlay\\\">\\n\\t<div class=\\\"dialog\\\">\\n\\t\\t<div class=\\\"scenescreen\\\">test-green-screen works!</div>\\n\\t\\t<button (click)=\\\"onClose()\\\">BYE!</button>\\n\\t</div>\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/story-tester.component.html\":\n/*!************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/story-tester.component.html ***!\n  \\************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"storyteller-outside\\\">\\n\\n\\t<div id=\\\"storyteller-tester\\\">\\n\\t\\t<p>story-tester works!</p>\\n\\n\\n\\t\\t<div id=\\\"scenerender-test\\\"></div>\\n\\n\\n\\t\\t<button (click)=\\\"loadGreenScreen()\\\">GREEN</button>\\n\\t\\t<button (click)=\\\"loadBlueScreen()\\\">BLUE</button>\\n\\t</div>\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/charsheet/quest-journal/quest-journal.component.html\":\n/*!************************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/charsheet/quest-journal/quest-journal.component.html ***!\n  \\************************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"questlist\\\" >\\n\\n\\t<ul>\\n\\t\\t<li *ngFor=\\\"let entry of this.game.quests | keyvalue\\\">\\n\\t\\t\\t{{entry.value.journal_title}} ({{entry.value.completed}}):\\n\\t\\t\\t<span *ngIf=\\\"!entry.value.completed\\\">{{entry.value.journal_entry}}</span>\\n\\t\\t\\t<span *ngIf=\\\"entry.value.completed\\\">COMPLETED</span>\\n\\t\\t</li>\\n\\t</ul>\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/journey-step/journey-step.component.html\":\n/*!*******************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/journey-step/journey-step.component.html ***!\n  \\*******************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"journeyrender\\\" #renderholder>\\n\\t<div id=\\\"viewrender\\\" #renderview></div>\\n</div>\\n\\n<div id=\\\"journeyinfo\\\" #sceneinfo>\\n\\tTravelling {{getDirectionDescription()}} to {{journeyscene.dest.name}}, day {{journeyscene.stepid}}/{{journeyscene.course.length}};\\n\\n\\t\\t<br>\\n\\n\\t<div class=\\\"journeycontrols\\\">\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"setCamp()\\\">SET CAMP</button> <button class=\\\"journeychoice\\\" (click)=\\\"continueJourney()\\\">JOURNEY ONWARDS</button> <button class=\\\"journeychoice\\\" (click)=\\\"showMap()\\\">SHOW MAP</button>\\n\\n\\t</div>\\n\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/narration-pages/narration-pages.component.html\":\n/*!*************************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/narration-pages/narration-pages.component.html ***!\n  \\*************************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"narration_scene\\\" >\\n\\t<div id=\\\"narration_render\\\">\\n\\t\\t    {{tale.paragraphs[tale.progress]}}\\n\\t</div>\\n</div>\\n\\n\\n\\n<div id=\\\"narration_info\\\" #sceneinfo>\\n\\n\\n\\t<div class=\\\"narration_controls\\\">\\n\\n\\t\\t<button class=\\\"pageturn\\\" *ngIf=\\\"tale.progress > 0 || !tale.allowReadBack\\\" (click)=\\\"readBackwards()\\\">BACK</button>\\n\\t\\t<button class=\\\"pageturn\\\" *ngIf=\\\"tale.progress < tale.paragraphs.length - 1\\\" (click)=\\\"readForward()\\\">FORWARD</button>\\n\\t\\t<button class=\\\"pageturn\\\" *ngIf=\\\"tale.progress === tale.paragraphs.length - 1\\\" (click)=\\\"readOut()\\\">END</button>\\n\\t</div>\\n\\n\\n</div>\\n\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/passage-through/passage-through.component.html\":\n/*!*************************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/passage-through/passage-through.component.html ***!\n  \\*************************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<ng-template *ngIf=\\\"isTrailing(); then TrailingScene; else AccessScene\\\">\\n\\n</ng-template>\\n\\n<ng-template #AccessScene>\\n\\n\\t<div class=\\\"trailview\\\"></div>\\n\\t<div class=\\\"trailcontext\\\">\\n\\n\\t\\t<div class=\\\"traildescdebug\\\">\\n\\t\\t\\tAt the start of {{ trail.passage.name }}, {{trail.passage.length()}} days journey.\\n\\t\\t</div>\\n\\n\\t\\t\\t<button class=\\\"trailcontrols\\\"  (click)=\\\"journeyOnwards()\\\">ENTER</button>\\n\\t\\t\\t<button class=\\\"trailcontrols\\\" (click)=\\\"leaveTrail()\\\">LEAVE</button>\\n\\t</div>\\n\\n</ng-template>\\n\\n<ng-template #TrailingScene>\\n\\n\\t<div class=\\\"trailview\\\"></div>\\n\\t<div class=\\\"trailcontext\\\">\\n\\n\\t\\t<div class=\\\"traildescdebug\\\">\\n\\t\\t\\tDay {{trail.progress + 1}} of {{trail.passage.length()}} through the {{ trail.passage.name }}.\\n\\t\\t</div>\\n\\n\\t\\t<button class=\\\"trailcontrols\\\" (click)=\\\"journeyOnwards()\\\">FORWARD</button>\\n\\n\\t</div>\\n\\n\\n</ng-template>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/roaming-step/roaming-step.component.html\":\n/*!*******************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/roaming-step/roaming-step.component.html ***!\n  \\*******************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"journeyrender\\\" #renderholder>\\n\\t<div id=\\\"viewrender\\\" #renderview></div>\\n</div>\\n\\n<div id=\\\"journeyinfo\\\" #sceneinfo>\\n\\tTravelling {{getDirectionDescription()}}, day {{getDayOfTravel()}}<span *ngIf=\\\"roamingscene.startloc !== null\\\"> from {{roamingscene.startloc.name}}</span>.\\n\\n\\t\\t<br>\\n\\n\\t<div class=\\\"journeycontrols\\\">\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"moveTurnLeft()\\\">TURN LEFT</button>\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"moveForward()\\\">JOURNEY ONWARDS</button>\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"moveTurnRight()\\\">TURN RIGHT</button>\\n\\t\\t<br>\\n\\n\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"actionSetCamp()\\\">SET CAMP</button>  <button class=\\\"journeychoice\\\" (click)=\\\"showMap()\\\">SHOW MAP</button>\\n\\n\\t</div>\\n\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/skill-action/skill-action.component.html\":\n/*!*******************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/skill-action/skill-action.component.html ***!\n  \\*******************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"choicescenery\\\" >\\n\\t<div id=\\\"sceneryview\\\" #scenerender></div>\\n</div>\\n\\n\\n\\n<div id=\\\"choiceinfo\\\" #sceneinfo>\\n\\n\\n\\t<div class=\\\"choicecontrols\\\" *ngIf=\\\"narr_done == null\\\">\\n\\n\\t\\t<span>{{this.skilltest.situation}}</span>\\n\\t\\t<br>\\n\\t\\t<span *ngIf=\\\"narr_fail != null\\\">\\n\\t\\t\\t{{narr_fail}}\\n\\t\\t</span>\\n\\n\\t\\t<table>\\n\\t\\t\\t<tr *ngFor=\\\"let option of this.skilltest.options\\\">\\n\\t\\t\\t\\t<td style=\\\"text-align: left\\\">{{option.description}}</td>\\n\\t\\t\\t\\t<td>({{option.tried}}/{{option.max_tries}}></td>\\n\\t\\t\\t\\t<td>\\n\\t\\t\\t\\t\\t<button class=\\\"skillchoice\\\" (click)=\\\"this.tryOption(option, true)\\\">DO</button>\\n\\t\\t\\t\\t\\t<button class=\\\"skillchoice\\\"(click)=\\\"this.tryOption(option, false)\\\">FAIL</button>\\n<!--\\t\\t\\t\\t\\t<span (click)=\\\"this.tryOption(option, true)\\\">[DO]</span>-->\\n<!--\\t\\t\\t\\t\\t<span (click)=\\\"this.tryOption(option, false)\\\">[FAIL]</span>-->\\n\\t\\t\\t\\t</td>\\n\\n\\t\\t\\t</tr>\\n\\t\\t</table>\\n\\n\\t\\t<!--\\n\\t\\t<ul class=\\\"choices-prompt\\\">\\n\\n\\t\\t\\t<li *ngFor=\\\"let option of this.skilltest.options\\\">{{option.description}} ({{option.tried}}/{{option.max_tries}})\\n\\t\\t\\t\\t<span (click)=\\\"this.tryOption(option, true)\\\">[DO]</span>\\n\\t\\t\\t\\t<span (click)=\\\"this.tryOption(option, false)\\\">[FAIL]</span>\\n\\t\\t\\t</li>\\n\\t\\t</ul>\\n\\t\\t-->\\n\\n\\t</div>\\n\\n\\t<div class=\\\"choicecontrols\\\" *ngIf=\\\"narr_done != null\\\">\\n\\t\\t<span>{{this.narr_done}}</span>\\n\\t\\t<ul class=\\\"choices-prompt\\\">\\n\\t\\t\\t<li><span (click)=\\\"this.leaveScene()\\\">[OK]</span></li>\\n\\t\\t</ul>\\n\\n\\t</div>\\n\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/story-choice/story-choice.component.html\":\n/*!*******************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/story-choice/story-choice.component.html ***!\n  \\*******************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"choicescenery\\\" >\\n\\t<div id=\\\"sceneryview\\\" #scenerender></div>\\n</div>\\n\\n\\n\\n<div id=\\\"choiceinfo\\\" #sceneinfo>\\n\\n\\n\\t<div class=\\\"choicecontrols\\\">\\n\\n\\t\\t<span>{{this.choice.prompt}}</span>\\n\\n\\t\\t<ul class=\\\"choices-prompt\\\">\\n\\n\\t\\t\\t<li *ngFor=\\\"let option of this.choice.options\\\" (click)=\\\"selectOption(option)\\\">{{option.description}}</li>\\n\\t\\t</ul>\\n\\n\\n\\t</div>\\n\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/town-ui/town-ui.component.html\":\n/*!*********************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/town-ui/town-ui.component.html ***!\n  \\*********************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"townscene\\\" >\\n\\t<div id=\\\"locrender\\\" #locrender></div>\\n</div>\\n\\n\\n\\n<div id=\\\"towninfo\\\" #sceneinfo>\\n\\n\\n\\t<div class=\\\"movecontrols\\\">\\n\\n\\t\\t<span>{{this.localizeTextAsset(this.townscene.currentloc.description)}}</span>\\n\\n\\t\\t<ul class=\\\"townnav-prompt\\\">\\n\\t\\t\\t<li (click)=\\\"moveToLoc(direction.target)\\\" *ngFor=\\\"let direction of this.townscene.currentloc.moves\\\">{{this.localizeTextAsset(direction.prompt)}}</li>\\n\\t\\t\\t<li (click)=\\\"activatePrompt(task)\\\" *ngFor=\\\"let task of this.taskprompts\\\">{{task.prompt}}</li>\\n\\t\\t</ul>\\n\\n\\n\\t</div>\\n\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/world-map-view/world-map-view.component.html\":\n/*!***********************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/world-map-view/world-map-view.component.html ***!\n  \\***********************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"mapholder\\\" #mapholder>\\n\\t<div id=\\\"maprender\\\" #mapview></div>\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/storyteller.component.html\":\n/*!**********************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/storyteller.component.html ***!\n  \\**********************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"st-page\\\">\\n\\n\\n</div>\\n\\n\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/tslib/tslib.es6.js\":\n/*!*****************************************!*\\\n  !*** ./node_modules/tslib/tslib.es6.js ***!\n  \\*****************************************/\n/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __exportStar, __values, __read, __spread, __spreadArrays, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__extends\", function() { return __extends; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__assign\", function() { return __assign; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__rest\", function() { return __rest; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__decorate\", function() { return __decorate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__param\", function() { return __param; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__metadata\", function() { return __metadata; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__awaiter\", function() { return __awaiter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__generator\", function() { return __generator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__exportStar\", function() { return __exportStar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__values\", function() { return __values; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__read\", function() { return __read; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spread\", function() { return __spread; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spreadArrays\", function() { return __spreadArrays; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__await\", function() { return __await; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncGenerator\", function() { return __asyncGenerator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncDelegator\", function() { return __asyncDelegator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncValues\", function() { return __asyncValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__makeTemplateObject\", function() { return __makeTemplateObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__importStar\", function() { return __importStar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__importDefault\", function() { return __importDefault; });\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nfunction __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nfunction __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nfunction __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nfunction __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./src/app/app-routing.module.ts\":\n/*!***************************************!*\\\n  !*** ./src/app/app-routing.module.ts ***!\n  \\***************************************/\n/*! exports provided: AppRoutingModule */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppRoutingModule\", function() { return AppRoutingModule; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ \"./node_modules/@angular/router/fesm2015/router.js\");\n/* harmony import */ var _story_tester_story_tester_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./story-tester/story-tester.component */ \"./src/app/story-tester/story-tester.component.ts\");\n/* harmony import */ var _storyteller_storyteller_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./storyteller/storyteller.component */ \"./src/app/storyteller/storyteller.component.ts\");\n\n\n\n\n\nconst routes = [\n    { path: '', redirectTo: '/game', pathMatch: 'full' },\n    { path: 'tester', component: _story_tester_story_tester_component__WEBPACK_IMPORTED_MODULE_3__[\"StoryTesterComponent\"] },\n    { path: 'game', component: _storyteller_storyteller_component__WEBPACK_IMPORTED_MODULE_4__[\"StorytellerComponent\"] },\n];\nlet AppRoutingModule = class AppRoutingModule {\n};\nAppRoutingModule = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"NgModule\"])({\n        imports: [_angular_router__WEBPACK_IMPORTED_MODULE_2__[\"RouterModule\"].forRoot(routes)],\n        exports: [_angular_router__WEBPACK_IMPORTED_MODULE_2__[\"RouterModule\"]]\n    })\n], AppRoutingModule);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/app.component.scss\":\n/*!************************************!*\\\n  !*** ./src/app/app.component.scss ***!\n  \\************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJ9 */\");\n\n/***/ }),\n\n/***/ \"./src/app/app.component.ts\":\n/*!**********************************!*\\\n  !*** ./src/app/app.component.ts ***!\n  \\**********************************/\n/*! exports provided: AppComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppComponent\", function() { return AppComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n\n\nlet AppComponent = class AppComponent {\n    constructor() {\n        this.title = 'WanderANG';\n    }\n};\nAppComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-root',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./app.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./app.component.scss */ \"./src/app/app.component.scss\")).default]\n    })\n], AppComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/app.module.ts\":\n/*!*******************************!*\\\n  !*** ./src/app/app.module.ts ***!\n  \\*******************************/\n/*! exports provided: AppModule */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppModule\", function() { return AppModule; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ \"./node_modules/@angular/platform-browser/fesm2015/platform-browser.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _app_routing_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app-routing.module */ \"./src/app/app-routing.module.ts\");\n/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./app.component */ \"./src/app/app.component.ts\");\n/* harmony import */ var _storyteller_storyteller_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./storyteller/storyteller.component */ \"./src/app/storyteller/storyteller.component.ts\");\n/* harmony import */ var _scene_ui_scene_ui_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./scene-ui/scene-ui.component */ \"./src/app/scene-ui/scene-ui.component.ts\");\n/* harmony import */ var _story_tester_scenes_test_green_screen_test_green_screen_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./story-tester/scenes/test-green-screen/test-green-screen.component */ \"./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.ts\");\n/* harmony import */ var _story_tester_scenes_test_blue_screen_test_blue_screen_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./story-tester/scenes/test-blue-screen/test-blue-screen.component */ \"./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.ts\");\n/* harmony import */ var _story_tester_story_tester_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./story-tester/story-tester.component */ \"./src/app/story-tester/story-tester.component.ts\");\n/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common/http */ \"./node_modules/@angular/common/fesm2015/http.js\");\n/* harmony import */ var _storyteller_scenes_world_map_view_world_map_view_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./storyteller/scenes/world-map-view/world-map-view.component */ \"./src/app/storyteller/scenes/world-map-view/world-map-view.component.ts\");\n/* harmony import */ var _storyteller_scenes_journey_step_journey_step_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./storyteller/scenes/journey-step/journey-step.component */ \"./src/app/storyteller/scenes/journey-step/journey-step.component.ts\");\n/* harmony import */ var _storyteller_scenes_town_ui_town_ui_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./storyteller/scenes/town-ui/town-ui.component */ \"./src/app/storyteller/scenes/town-ui/town-ui.component.ts\");\n/* harmony import */ var _storyteller_scenes_roaming_step_roaming_step_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./storyteller/scenes/roaming-step/roaming-step.component */ \"./src/app/storyteller/scenes/roaming-step/roaming-step.component.ts\");\n/* harmony import */ var _storyteller_scenes_passage_through_passage_through_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./storyteller/scenes/passage-through/passage-through.component */ \"./src/app/storyteller/scenes/passage-through/passage-through.component.ts\");\n/* harmony import */ var _storyteller_scenes_narration_pages_narration_pages_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./storyteller/scenes/narration-pages/narration-pages.component */ \"./src/app/storyteller/scenes/narration-pages/narration-pages.component.ts\");\n/* harmony import */ var _storyteller_scenes_story_choice_story_choice_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./storyteller/scenes/story-choice/story-choice.component */ \"./src/app/storyteller/scenes/story-choice/story-choice.component.ts\");\n/* harmony import */ var _storyteller_scenes_skill_action_skill_action_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./storyteller/scenes/skill-action/skill-action.component */ \"./src/app/storyteller/scenes/skill-action/skill-action.component.ts\");\n/* harmony import */ var _storyteller_charsheet_quest_journal_quest_journal_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./storyteller/charsheet/quest-journal/quest-journal.component */ \"./src/app/storyteller/charsheet/quest-journal/quest-journal.component.ts\");\n/* harmony import */ var _scene_ui_scene_ui_module__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./scene-ui/scene-ui.module */ \"./src/app/scene-ui/scene-ui.module.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nlet AppModule = class AppModule {\n};\nAppModule = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__[\"NgModule\"])({\n        declarations: [\n            _app_component__WEBPACK_IMPORTED_MODULE_4__[\"AppComponent\"],\n            _storyteller_storyteller_component__WEBPACK_IMPORTED_MODULE_5__[\"StorytellerComponent\"],\n            _story_tester_scenes_test_green_screen_test_green_screen_component__WEBPACK_IMPORTED_MODULE_7__[\"TestGreenScreenComponent\"],\n            _story_tester_scenes_test_blue_screen_test_blue_screen_component__WEBPACK_IMPORTED_MODULE_8__[\"TestBlueScreenComponent\"],\n            _story_tester_story_tester_component__WEBPACK_IMPORTED_MODULE_9__[\"StoryTesterComponent\"],\n            _storyteller_scenes_world_map_view_world_map_view_component__WEBPACK_IMPORTED_MODULE_11__[\"WorldMapViewComponent\"],\n            _storyteller_scenes_journey_step_journey_step_component__WEBPACK_IMPORTED_MODULE_12__[\"JourneyStepComponent\"],\n            _storyteller_scenes_town_ui_town_ui_component__WEBPACK_IMPORTED_MODULE_13__[\"TownUIComponent\"],\n            _storyteller_scenes_roaming_step_roaming_step_component__WEBPACK_IMPORTED_MODULE_14__[\"RoamingStepComponent\"],\n            _storyteller_scenes_passage_through_passage_through_component__WEBPACK_IMPORTED_MODULE_15__[\"PassageThroughComponent\"],\n            _storyteller_scenes_narration_pages_narration_pages_component__WEBPACK_IMPORTED_MODULE_16__[\"NarrationPagesComponent\"],\n            _storyteller_scenes_story_choice_story_choice_component__WEBPACK_IMPORTED_MODULE_17__[\"StoryChoiceComponent\"],\n            _storyteller_scenes_skill_action_skill_action_component__WEBPACK_IMPORTED_MODULE_18__[\"SkillActionComponent\"],\n            _storyteller_charsheet_quest_journal_quest_journal_component__WEBPACK_IMPORTED_MODULE_19__[\"QuestJournalComponent\"],\n        ],\n        imports: [\n            _angular_common_http__WEBPACK_IMPORTED_MODULE_10__[\"HttpClientModule\"],\n            _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__[\"BrowserModule\"],\n            _app_routing_module__WEBPACK_IMPORTED_MODULE_3__[\"AppRoutingModule\"],\n            _scene_ui_scene_ui_module__WEBPACK_IMPORTED_MODULE_20__[\"SceneUIModule\"]\n        ],\n        providers: [],\n        bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_4__[\"AppComponent\"]],\n        exports: [\n            _storyteller_charsheet_quest_journal_quest_journal_component__WEBPACK_IMPORTED_MODULE_19__[\"QuestJournalComponent\"]\n        ],\n        entryComponents: [\n            _scene_ui_scene_ui_component__WEBPACK_IMPORTED_MODULE_6__[\"SceneUIComponent\"],\n            _story_tester_scenes_test_green_screen_test_green_screen_component__WEBPACK_IMPORTED_MODULE_7__[\"TestGreenScreenComponent\"],\n            _story_tester_scenes_test_blue_screen_test_blue_screen_component__WEBPACK_IMPORTED_MODULE_8__[\"TestBlueScreenComponent\"],\n            _storyteller_scenes_world_map_view_world_map_view_component__WEBPACK_IMPORTED_MODULE_11__[\"WorldMapViewComponent\"],\n            _storyteller_scenes_journey_step_journey_step_component__WEBPACK_IMPORTED_MODULE_12__[\"JourneyStepComponent\"],\n            _storyteller_scenes_roaming_step_roaming_step_component__WEBPACK_IMPORTED_MODULE_14__[\"RoamingStepComponent\"],\n            _storyteller_scenes_town_ui_town_ui_component__WEBPACK_IMPORTED_MODULE_13__[\"TownUIComponent\"],\n            _storyteller_scenes_passage_through_passage_through_component__WEBPACK_IMPORTED_MODULE_15__[\"PassageThroughComponent\"],\n            _storyteller_scenes_narration_pages_narration_pages_component__WEBPACK_IMPORTED_MODULE_16__[\"NarrationPagesComponent\"],\n            _storyteller_scenes_story_choice_story_choice_component__WEBPACK_IMPORTED_MODULE_17__[\"StoryChoiceComponent\"],\n            _storyteller_scenes_skill_action_skill_action_component__WEBPACK_IMPORTED_MODULE_18__[\"SkillActionComponent\"],\n            _storyteller_charsheet_quest_journal_quest_journal_component__WEBPACK_IMPORTED_MODULE_19__[\"QuestJournalComponent\"]\n        ]\n    })\n], AppModule);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/quests/quest-ref.ts\":\n/*!************************************************!*\\\n  !*** ./src/app/rpg-engine/quests/quest-ref.ts ***!\n  \\************************************************/\n/*! exports provided: QuestRef */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"QuestRef\", function() { return QuestRef; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _quest_task_condition__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./quest-task-condition */ \"./src/app/rpg-engine/quests/quest-task-condition.ts\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\n\n/**\n * QuestRef representes a pointer to all quest resources with a specific ID.\n * It contains a number of QuestTaskState object describing the internal \"live\" state of the quest and can be used by QuestLoader to know which data must be loaded to provide a certain Scene inside it\n */\nclass QuestRef {\n    constructor(questid, fileref) {\n        this.questid = questid;\n        this.fileref = fileref;\n        this.conditions = new Map();\n        this.completers = [];\n        this.completed = false;\n        this.states = new Map();\n        this.journal_entry = null;\n        this.journal_title = questid;\n    }\n    static fromJSON(src, fileref) {\n        let generated = new QuestRef(src[\"questid\"], fileref);\n        for (let taskid in src[\"tasks\"]) {\n            let taskraw = src[\"tasks\"][taskid];\n            let taskconditions = [];\n            if (!!taskraw[\"conditions\"]) {\n                for (let conditionraw of taskraw[\"conditions\"]) {\n                    taskconditions.push(_quest_task_condition__WEBPACK_IMPORTED_MODULE_1__[\"QuestTaskCondition\"].fromJSON(conditionraw));\n                }\n            }\n            generated.journal_title = src[\"title\"];\n            generated.journal_entry = src[\"journal\"];\n            // an unconditional task would appear ALWAYS\n            if (taskconditions.length > 0) {\n                generated.conditions.set(taskid, taskconditions);\n                generated.states.set(taskid, -1);\n            }\n        }\n        return generated;\n    }\n    isTaskCompleted(taskid) {\n        return this.states.get(taskid) !== _wander_scene__WEBPACK_IMPORTED_MODULE_2__[\"WanderScene\"].LEAVESTATE_UNFINISHED;\n    }\n    setCompletedTask(task) {\n        let taskid = task.taskid;\n        // let ctask = this.loadTask(taskid);\n        // TODO: re-add journal entry\n        // this.journal_entry = task.journal_after;\n        this.journal_entry = task.journal_after;\n        console.log(\"updating quest journal from task\", task, task.journal_after);\n        let returnstates = task.getReturnStates();\n        // Map<String, Integer> returnstates = ctask.getReturnStates();\n        for (let tasksceneid of returnstates.keys()) {\n            this.states.set(tasksceneid, returnstates.get(tasksceneid));\n        }\n        if (this.completers.indexOf(taskid) !== -1) {\n            this.completed = true;\n        }\n    }\n    getAvailableTasks(game) {\n        let available = [];\n        for (let taskid of this.conditions.keys()) {\n            // let task = this.tasks.get(taskid);\n            // console.log(\"checking quest task \", taskid, \" w conditions\", this.conditions, \"for \", this.conditions);\n            if ((!this.isTaskCompleted(taskid)) && this.conditions.has(taskid)) {\n                let satisfied = true;\n                for (let current of this.conditions.get(taskid)) {\n                    if (!current.verifyCondition(game, this)) {\n                        satisfied = false;\n                        break;\n                    }\n                }\n                if (satisfied) {\n                    available.push(taskid);\n                }\n            }\n        }\n        return available;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/quests/quest-task-condition.ts\":\n/*!***********************************************************!*\\\n  !*** ./src/app/rpg-engine/quests/quest-task-condition.ts ***!\n  \\***********************************************************/\n/*! exports provided: QuestTaskCondition, QuestTaskConditionType */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"QuestTaskCondition\", function() { return QuestTaskCondition; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"QuestTaskConditionType\", function() { return QuestTaskConditionType; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass QuestTaskCondition {\n    constructor(type, target_value) {\n        this.type = type;\n        this.target = target_value;\n    }\n    verifyCondition(game, quest) {\n        // console.log(\"checking condition \", this, \" type \", this.type, \" target \", this.target);\n        if (this.type === QuestTaskConditionType.LOCATION) {\n            return this.verifyConditionLocation(game, quest);\n        }\n        else if (this.type === QuestTaskConditionType.COMPLETION) {\n            return this.verifyConditionCompletion(game, quest);\n        }\n        else if (this.type === QuestTaskConditionType.TRIGGER) {\n            return this.verifyConditionTrigger(game, quest);\n        }\n        // no extra case since the enum cannot run over?\n    }\n    static fromJSON(src) {\n        return new QuestTaskCondition(src[\"test\"], src[\"target\"]);\n    }\n    // NOTE: we might want to subclass conditions if the handling becomes more complex\n    verifyConditionLocation(game, quest) {\n        try {\n            // console.log(\"matching pos \", game.hero.pos, game.hero.locpos, \"w\", this.target);\n            let loc = game.worldmap.getLocationById(this.target[\"locid\"]);\n            let hasloc = game.hero.pos != null && game.hero.pos.matches(loc.pos);\n            if (hasloc && this.target[\"roomid\"]) {\n                hasloc = game.hero.locpos[\"roomid\"] === this.target[\"roomid\"];\n            }\n            return hasloc;\n        }\n        catch (err) {\n            console.warn(\"illegal loc target for location condition: \", this.target);\n            return false;\n        }\n    }\n    verifyConditionCompletion(game, quest) {\n        return quest.isTaskCompleted(this.target);\n    }\n    verifyConditionTrigger(game, quest) {\n        // technically the TRIGGER condition is implicit so this should not be needed but we keep it just in case\n        return quest.isTaskCompleted(this.target);\n    }\n}\nvar QuestTaskConditionType;\n(function (QuestTaskConditionType) {\n    QuestTaskConditionType[\"LOCATION\"] = \"location\";\n    QuestTaskConditionType[\"TRIGGER\"] = \"trigger\";\n    QuestTaskConditionType[\"COMPLETION\"] = \"completed\";\n})(QuestTaskConditionType || (QuestTaskConditionType = {}));\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/quests/quest-task.ts\":\n/*!*************************************************!*\\\n  !*** ./src/app/rpg-engine/quests/quest-task.ts ***!\n  \\*************************************************/\n/*! exports provided: QuestTask */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"QuestTask\", function() { return QuestTask; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _scene_factory__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scene-factory */ \"./src/app/rpg-engine/scene-factory.ts\");\n\n\nclass QuestTask {\n    constructor(taskid, scene, prompt, journal_after) {\n        this.taskid = taskid;\n        this.scene = scene;\n        this.journal_after = journal_after;\n        this.prompt = prompt;\n        this.completed = false;\n        this.caller = null;\n        this.triggered = null;\n    }\n    getReturnStates() {\n        let states = new Map();\n        // TODO: handle multiscene per Java example\n        /*\n        if (this.scene instanceof MultiScene)\n        {\n            // this should flatten the hierarchy under it\n            Map<String, Integer> scenestates = ((MultiScene)this.scene).returnStates();\n            for (String sceneid: scenestates.keySet())\n            {\n                String sceneidcombo = this.taskid+\".\"+sceneid;\n                states.put(sceneidcombo, scenestates.get(sceneid));\n            }\n        }\n        else\n        {\n            states.put(this.taskid, this.scene.returnState());\n        }\n        */\n        states.set(this.taskid, this.scene.returnState());\n        return states;\n    }\n    setCaller(questref) {\n        this.caller = questref;\n    }\n    isCompleted() {\n        return this.completed;\n    }\n    setCompleted() {\n        this.completed = true;\n        if (this.caller != null) {\n            this.caller.setCompletedTask(this);\n        }\n    }\n    setTriggered(taskid) {\n        this.triggered = taskid;\n    }\n    static fromJSON(src) {\n        // NOTE: we may want to generate the scene ON THE FLY later\n        let taskid = src[\"taskid\"];\n        let scene = _scene_factory__WEBPACK_IMPORTED_MODULE_1__[\"SceneFactory\"].fromJSON(src[\"scene\"]);\n        let prompt = src[\"prompt\"];\n        let journal_after = !!src[\"journal_after\"] ? src[\"journal_after\"] : null;\n        let task = new QuestTask(taskid, scene, prompt, journal_after);\n        return task;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scene-factory.ts\":\n/*!*********************************************!*\\\n  !*** ./src/app/rpg-engine/scene-factory.ts ***!\n  \\*********************************************/\n/*! exports provided: SceneFactory */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneFactory\", function() { return SceneFactory; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _scenes_narration__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scenes/narration */ \"./src/app/rpg-engine/scenes/narration.ts\");\n/* harmony import */ var _scenes_branching_meta_scene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scenes/branching-meta-scene */ \"./src/app/rpg-engine/scenes/branching-meta-scene.ts\");\n/* harmony import */ var _scenes_story_branch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scenes/story-branch */ \"./src/app/rpg-engine/scenes/story-branch.ts\");\n/* harmony import */ var _scenes_skill_test__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scenes/skill-test */ \"./src/app/rpg-engine/scenes/skill-test.ts\");\n/* harmony import */ var _scenes_struct_wander_scene_trigger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./scenes/struct/wander-scene-trigger */ \"./src/app/rpg-engine/scenes/struct/wander-scene-trigger.ts\");\n/* harmony import */ var _scenes_meta_scene__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./scenes/meta-scene */ \"./src/app/rpg-engine/scenes/meta-scene.ts\");\n\n\n\n\n\n\n\nclass SceneFactory {\n    static fromJSON(src) {\n        const GENERATORS_BYTYPE = {\n            \"narrative\": SceneFactory.createSceneNarration,\n            \"branching\": SceneFactory.createSceneBranchingMeta,\n            \"choice\": SceneFactory.createSceneStoryBranch,\n            \"skill\": SceneFactory.createSceneSkillTest\n        };\n        // console.log(\"generating scen from json: \", src[\"type\"], src[\"data\"]);\n        try {\n            return GENERATORS_BYTYPE[src[\"type\"]](src[\"data\"]);\n        }\n        catch (err) {\n            console.error(err);\n            console.warn(\"cannot yet create scene of type \", src[\"type\"]);\n            return null;\n        }\n    }\n    // NOTE: we CANNOT put the individual factory methods in the respective classes\n    // because some of them will need to use others (e.g. metascenes) and create a circular import\n    static createSceneNarration(src) {\n        const paragraphs = src[\"text\"];\n        if (!paragraphs) {\n            throw \"Narrative type scene needs at least one text paragraph\";\n        }\n        // TODO: TBA\n        let title = null;\n        let images = null;\n        return new _scenes_narration__WEBPACK_IMPORTED_MODULE_1__[\"Narration\"](null, null, paragraphs, images);\n    }\n    static createSceneStoryBranch(src) {\n        // console.warn (\"generating STORYBRANCH scene from \", src);\n        const generated = new _scenes_story_branch__WEBPACK_IMPORTED_MODULE_3__[\"StoryBranch\"](null);\n        generated.prompt = src[\"prompt\"];\n        for (let optdesc of src[\"options\"]) {\n            let endstate = optdesc.hasOwnProperty(\"value\") ? optdesc[\"value\"] : 0;\n            let note = optdesc.hasOwnProperty(\"note\") ? optdesc[\"note\"] : null;\n            generated.addOption(optdesc[\"description\"], endstate, note);\n        }\n        generated.setImage(src[\"image\"]);\n        return generated;\n    }\n    static createSceneSkillTest(src) {\n        const scene = new _scenes_skill_test__WEBPACK_IMPORTED_MODULE_4__[\"SkillTest\"](null);\n        if (!!src[\"description\"]) {\n            scene.setDesc(src[\"description\"]);\n        }\n        for (let optdesc of src[\"options\"]) {\n            scene.addAction(_scenes_skill_test__WEBPACK_IMPORTED_MODULE_4__[\"SkillTestOption\"].fromJSON(optdesc));\n        }\n        if (!!src[\"image\"]) {\n            scene.setImage(src[\"image\"]);\n        }\n        return scene;\n    }\n    static createSceneMeta(src) {\n        let generated = new _scenes_meta_scene__WEBPACK_IMPORTED_MODULE_6__[\"MetaScene\"](null);\n        for (let json_scene of src[\"scenes\"]) {\n            let sceneid = json_scene[\"id\"];\n            let scene = SceneFactory.fromJSON(json_scene);\n            // console.log(\"Generated sceneobject \", scene, \" w id \" + sceneid);\n            scene.setNarrative(generated);\n            if (scene != null) {\n                generated.addScene(scene, sceneid);\n            }\n        }\n        for (let key in src[\"triggers\"]) {\n            generated.setTrigger(key, src[\"triggers\"][key]);\n        }\n        generated.setStarter(src[\"starter\"]);\n        return generated;\n    }\n    static createSceneBranchingMeta(src) {\n        let generated = new _scenes_branching_meta_scene__WEBPACK_IMPORTED_MODULE_2__[\"BranchingMetaScene\"](null);\n        // console.log(\"Creating BMS from \", src);\n        for (let json_scene of src[\"scenes\"]) {\n            let sceneid = json_scene[\"id\"];\n            let scene = SceneFactory.fromJSON(json_scene);\n            // console.log(\"QUEST\", \"Generated sceneobject \", scene, \" w id \" + sceneid);\n            if (scene != null) {\n                scene.setNarrative(generated);\n                generated.addScene(scene, sceneid);\n            }\n        }\n        for (let sceneid in src[\"triggers\"]) {\n            let trigger = _scenes_struct_wander_scene_trigger__WEBPACK_IMPORTED_MODULE_5__[\"WanderSceneTrigger\"].fromJSON(src[\"triggers\"][sceneid]);\n            generated.setTriggered(sceneid, trigger);\n        }\n        generated.setStarter(src[\"starter\"]);\n        return generated;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/branching-meta-scene.ts\":\n/*!***********************************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/branching-meta-scene.ts ***!\n  \\***********************************************************/\n/*! exports provided: BranchingMetaScene */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BranchingMetaScene\", function() { return BranchingMetaScene; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n/* harmony import */ var _meta_scene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./meta-scene */ \"./src/app/rpg-engine/scenes/meta-scene.ts\");\n\n\n\nclass BranchingMetaScene extends _meta_scene__WEBPACK_IMPORTED_MODULE_2__[\"MetaScene\"] {\n    constructor(game) {\n        super(game);\n        this.initStructure();\n    }\n    initStructure() {\n        this.subs = new Map();\n        this.triggers_byscene = new Map();\n        this.returncodes = new Map();\n        this.starter = null;\n        this.activesub = null;\n    }\n    setTriggered(sceneid, trigger) {\n        this.triggers_byscene.set(sceneid, trigger);\n    }\n    moveOn() {\n        // NOTE: this method ASSUMES we have a sceneFinished call returning true right before\n        console.log(\"Quest/BranchingScene: MetaScene \" + this + \" MoveOn from \" + this.activesub);\n        this.returncodes.set(this.activesub, this.getCurrent().returnState());\n        // switches to the next scene in the flow\n        // NOTE: it takes the FIRST active trigger, conflicts are not handled\n        this.activesub = null;\n        for (let candidate of this.triggers_byscene.keys()) {\n            let trigger = this.triggers_byscene.get(candidate);\n            let candidatestate = this.returncodes.get(candidate);\n            if (trigger.isActive(this.returncodes) && candidatestate === _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"].LEAVESTATE_UNFINISHED) {\n                // we have triggered a new scene\n                this.activesub = candidate;\n            }\n        }\n        console.log(\"Quest/MetaScene\", \"MetaScene \" + this + \" MoveOn to \" + this.activesub);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/journey-departure.ts\":\n/*!********************************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/journey-departure.ts ***!\n  \\********************************************************/\n/*! exports provided: JourneyDeparture */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"JourneyDeparture\", function() { return JourneyDeparture; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n/* harmony import */ var _roaming__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./roaming */ \"./src/app/rpg-engine/scenes/roaming.ts\");\n/* harmony import */ var _world_world_position__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../world/world-position */ \"./src/app/rpg-engine/world/world-position.ts\");\n\n\n\n\nclass JourneyDeparture extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    constructor(game) {\n        super(game);\n        this.worldmap = game.worldmap;\n    }\n    sceneFinished() {\n        return !!this.destination;\n    }\n    setDestination(dest) {\n        // let startingpos = this.game.hero.coordinates;\n        // let destcoords = dest[\"coords\"];\n        this.destination = dest;\n    }\n    getFollowingScene() {\n        let next = null;\n        if (!this.destination.matchesPosition(this.game.hero.pos)) {\n            let direction = _world_world_position__WEBPACK_IMPORTED_MODULE_3__[\"WorldPosition\"].getRelativeGeneralDirection(this.game.hero.pos, this.destination.pos);\n            next = new _roaming__WEBPACK_IMPORTED_MODULE_2__[\"Roaming\"](this.game, this.game.hero.pos, direction);\n            // next.setStops(this.game.hero.coordinates, this.destination[\"coords\"]);\n        }\n        return next;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/journey.ts\":\n/*!**********************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/journey.ts ***!\n  \\**********************************************/\n/*! exports provided: Journey */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Journey\", function() { return Journey; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\nclass Journey extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    // NOTE that start is optional and will default to player's position\n    constructor(game, dest, start) {\n        super(game);\n        this.start = !start ? game.hero.pos : start;\n        this.dest = dest;\n        this.course = game.worldmap.getCourse(this.start, this.dest.pos);\n        this.stepid = 0;\n    }\n    // TODO: add support for custom stops in case the player can  (interpolating)\n    step() {\n        this.stepid++;\n    }\n    getCurrentCoordinates() {\n        if (this.stepid < this.course.length) {\n            return this.course[this.stepid];\n        }\n        else {\n            return this.dest.pos;\n        }\n    }\n    sceneFinished() {\n        return this.stepid >= this.course.length;\n    }\n    getStepDirection(stepid) {\n        let cpos = this.course[stepid];\n        let nextpos = stepid + 1 < this.course.length ? this.course[stepid + 1] : this.dest.pos;\n        return [nextpos.x - cpos.x, nextpos.y - cpos.y];\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/meta-scene.ts\":\n/*!*************************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/meta-scene.ts ***!\n  \\*************************************************/\n/*! exports provided: MetaScene */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MetaScene\", function() { return MetaScene; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _struct_multi_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./struct/multi-scene */ \"./src/app/rpg-engine/scenes/struct/multi-scene.ts\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\n\n/**\n *  MetaScene is a Scene that contains several different scenes and has a logic to connect them all\n *  as such it seems to transparently work like a normal scene, but its getFollowing checks on the internal scene graph before giving back the narrative.\n *  Technically each sub-scene is the current active scene except all calls are mediated by the MetaScene above them\n *  NOTE: due to how this works the MetaScene cannot be leaved, the same as with a normal scene.\n *  While it incorporates several scenes, for the purpose of the game all of these act as a single multi-interface scene\n */\nclass MetaScene extends _struct_multi_scene__WEBPACK_IMPORTED_MODULE_1__[\"MultiScene\"] {\n    // NOTE: the following may not be needed for now since we check getFollowing\n    // only after checking that the current scene is finished. Keep in mind this can be easily\n    // broken if the storyteller flow gets messed up. WATCH THIS FOR DEBUG then\n    // completion status IF COMPLETED ONLY is set in this map for quicker checking\n    // when the trigger sequence is rechecked so we can quickly see if the whole chain is complete\n    // NOTE: we use a map because in the future conditions may be more complex and we may have\n    // chains completed without all possible scenes completed\n    // (or we could template the thing so we create a complex set of scene but only enable\n    // chaining on a subset of them)\n    // private Map<String, Boolean> completion;\n    constructor(game) {\n        super(game);\n        this.initStructure();\n    }\n    initStructure() {\n        this.subs = new Map();\n        this.triggers = new Map();\n        this.returncodes = new Map();\n        this.starter = null;\n        this.activesub = null;\n    }\n    getFollowing() {\n        this.moveOn();\n        if (this.subs.has(this.activesub)) {\n            return this;\n        }\n        else {\n            return this.getNarrative();\n        }\n    }\n    getCurrent() {\n        let current = this.getSceneById(this.activesub);\n        if (current instanceof _struct_multi_scene__WEBPACK_IMPORTED_MODULE_1__[\"MultiScene\"]) {\n            let ms = current;\n            return ms.getCurrent();\n        }\n        else {\n            return current;\n        }\n    }\n    returnStates() {\n        return this.returncodes;\n    }\n    sceneFinished() {\n        return this.activesub == null || this.getSceneById(this.activesub).sceneFinished();\n    }\n    // addScene, setTrigger, setStarter are separated\n    // so it's easier to use factory methods or static fromjson creators\n    addScene(candidate, sceneid) {\n        this.subs.set(sceneid, candidate);\n        this.returncodes.set(sceneid, _wander_scene__WEBPACK_IMPORTED_MODULE_2__[\"WanderScene\"].LEAVESTATE_UNFINISHED);\n    }\n    setTrigger(triggerer, triggered) {\n        this.triggers.set(triggerer, triggered);\n    }\n    setStarter(sceneid) {\n        console.log(\"Quest/MetaScene\", \"Setting starter for metascene to \" + sceneid);\n        this.starter = sceneid;\n        if (this.activesub == null) {\n            this.activesub = this.starter;\n        }\n    }\n    getSceneById(sceneid) {\n        console.log(\"Loading META SUB scene \" + sceneid + \" from \", this.subs);\n        try {\n            return this.subs.get(sceneid);\n        }\n        catch (err) {\n            console.warn(\"error retrieving sub \" + sceneid + \": \", err);\n            return null;\n        }\n    }\n    moveOn() {\n        // NOTE: this method ASSUMES we have a sceneFinished call returning true right before\n        console.warn(\"Quest/MetaScene\", \"MetaScene \" + this + \" MoveOn from \" + this.activesub);\n        // retrieving and adding return codes for subscenes if current active is a MultiScene\n        let active = this.subs.get(this.activesub);\n        if (active instanceof _struct_multi_scene__WEBPACK_IMPORTED_MODULE_1__[\"MultiScene\"]) {\n            let ms = active;\n            let states = ms.returnStates();\n            for (let sceneid of states.keys()) {\n                let sceneidcombo = this.activesub + \".\" + sceneid;\n                this.returncodes.set(sceneidcombo, states.get(sceneid));\n            }\n        }\n        this.returncodes.set(this.activesub, active.returnState());\n        // switches to the next scene in the flow\n        // so we can remove flow control from getFollowing\n        if (this.triggers.has(this.activesub)) {\n            // we have triggered a new scene\n            this.activesub = this.triggers.get(this.activesub);\n        }\n        else {\n            // there was already no active subscene OR we are at the end of our trigger chain\n            this.activesub = null;\n        }\n        console.log(\"Quest/MetaScene\", \"MetaScene \" + this + \" MoveOn to \" + this.activesub);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/narration.ts\":\n/*!************************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/narration.ts ***!\n  \\************************************************/\n/*! exports provided: Narration */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Narration\", function() { return Narration; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\nclass Narration extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    constructor(game, title, paragraphs, images = []) {\n        super(game);\n        this.progress = 0;\n        this.allowReadBack = true;\n        this.keepTitleOn = true;\n        this.paragraphs = paragraphs;\n        this.images = images;\n        this.title = title;\n    }\n    sceneFinished() {\n        return this.progress >= this.paragraphs.length - 1;\n    }\n    advanceNarration() {\n        this.progress = Math.min(this.progress + 1, this.paragraphs.length - 1);\n    }\n    backtrackNarration() {\n        this.progress = Math.max(this.progress - 1, 0);\n    }\n    getCurrent() {\n        return this.paragraphs[this.progress];\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/passage-trail.ts\":\n/*!****************************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/passage-trail.ts ***!\n  \\****************************************************/\n/*! exports provided: PassageTrail */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PassageTrail\", function() { return PassageTrail; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n/* harmony import */ var _journey_departure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./journey-departure */ \"./src/app/rpg-engine/scenes/journey-departure.ts\");\n\n\n\nclass PassageTrail extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    constructor(game, passage, started = false) {\n        super(game);\n        this.passage = passage;\n        // progress is the speed, negative allows to go back and reverse\n        this.resetTrail(started);\n        this.days = 0;\n        this.leaving = false;\n    }\n    resetTrail(started = false) {\n        const reversed = this.passage.exitpoint.matches(this.game.hero.pos);\n        this.trail_start = reversed ? this.passage.exitpoint : this.passage.pos;\n        this.trail_end = reversed ? this.passage.pos : this.passage.exitpoint;\n        this.trail_length = this.passage.length();\n        this.progress = started ? 0 : -1;\n    }\n    sceneFinished() {\n        // boolean set by UI\n        console.log(\"is at exit? \" + this.isAtExitPoint() + \"is leaving? \" + this.leaving);\n        return this.isAtExitPoint() && this.leaving;\n    }\n    getFollowingScene() {\n        return new _journey_departure__WEBPACK_IMPORTED_MODULE_2__[\"JourneyDeparture\"](this.game);\n    }\n    isAtExitPoint() {\n        return this.progress === -1 || this.progress === this.passage.length();\n    }\n    step() {\n        this.progress += 1;\n        // this.progress += direction;\n        this.progress = Math.min(Math.max(this.progress, -1), this.passage.length());\n        if (this.progress === this.passage.length()) {\n            this.game.hero.setCoordinates(this.trail_end);\n            this.resetTrail();\n        }\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/roaming.ts\":\n/*!**********************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/roaming.ts ***!\n  \\**********************************************/\n/*! exports provided: Roaming */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Roaming\", function() { return Roaming; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\nclass Roaming extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    // NOTE that start is optional and will default to player's position, direction to N?\n    constructor(game, start, direction) {\n        super(game);\n        this.direction = !direction ? [0, -1] : direction;\n        this.start = !start ? this.game.hero.pos : start;\n        this.current = this.start;\n        this.steps = 0;\n        this.startloc = this.game.worldmap.getLocationAt(this.start.getCoords());\n    }\n    sceneFinished() {\n        // scene ends when you reach a Place\n        return this.game.worldmap.getLocationAt(this.current.getCoords()) != null;\n    }\n    stepInto(pos) {\n        this.direction = [pos.x - this.current.x, pos.y - this.current.y];\n        this.current = pos;\n    }\n    stepForward() {\n        this.steps++;\n        this.stepInto(this.current.getShifted(this.direction[0], this.direction[1]));\n    }\n    getCurrentDirectionIndex() {\n        for (let i = 0; i < Roaming.DIRECTIONS.length; i++) {\n            if (Roaming.DIRECTIONS[i][0] === this.direction[0] && Roaming.DIRECTIONS[i][1] === this.direction[1]) {\n                return i;\n            }\n        }\n        return null;\n    }\n    // steps are in CLOCKWISE order\n    changeDirection(steps) {\n        let cidx = this.getCurrentDirectionIndex();\n        let nidx = (cidx + Roaming.DIRECTIONS.length + steps) % Roaming.DIRECTIONS.length;\n        this.direction = Roaming.DIRECTIONS[nidx];\n    }\n}\nRoaming.DIRECTIONS = [\n    [0, -1],\n    [1, -1],\n    [1, 0],\n    [1, 1],\n    [0, 1],\n    [-1, 1],\n    [-1, 0],\n    [-1, -1]\n];\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/skill-test.ts\":\n/*!*************************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/skill-test.ts ***!\n  \\*************************************************/\n/*! exports provided: SkillTest, SkillTestOption */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SkillTest\", function() { return SkillTest; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SkillTestOption\", function() { return SkillTestOption; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\nclass SkillTest extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    constructor(game) {\n        super(game);\n        // a skill test is a scene in which the player is given a set of possible skill throws, each with its own return code\n        this.options = [];\n        this.canleave = true;\n        this.success = 0;\n        this.played = false;\n        this.image = null;\n    }\n    sceneFinished() {\n        console.log(\"checking scene finished for SkillTest\", this.played);\n        return this.played;\n    }\n    setImage(filename) {\n        this.image = filename;\n    }\n    returnState() {\n        // 0 is not finished/played yet\n        // all alternatives are X for success, -X for failure\n        // TODO: add other standard return codes (plus handling for custom results)\n        // also see the addAction todo note\n        // NOTE: Leaving the skilltest without trying (when allowed by the scene design)\n        // implies getting a status of 0 and a sceneFinished = True\n        // TODO: find a way to set this\n        return this.success;\n    }\n    setDesc(situation) {\n        this.situation = situation;\n    }\n    setCanLeave(allow) {\n        this.canleave = allow;\n    }\n    addAction(option) {\n        this.options.push(option);\n    }\n    playActionDebug(option, succeed) {\n        // ONLY for debug, dev can force success or fail while we develop and balance the skill system\n        if (succeed) {\n            this.success = option.returncode;\n            this.played = true;\n            return true;\n        }\n        else {\n            // 0 is infinitely repeatable\n            if (!option.isInfinitelyRepeatable()) {\n                option.addTry();\n                if (!option.isStillRepeatable()) {\n                    this.success = -option.returncode;\n                    this.played = true;\n                }\n            }\n            return false;\n        }\n    }\n    playAction(option, rules, user) {\n        // TODO: get SkillSystem and AgentEntity from game\n        const actionid = option.skillactionid;\n        const target = option.target;\n        const performance = rules.applySkill(actionid, user);\n        if (performance >= target) {\n            this.success = option.returncode;\n            this.played = true;\n            return true;\n        }\n        else {\n            // 0 is infinitely repeatable\n            if (!option.isInfinitelyRepeatable()) {\n                option.addTry();\n                if (!option.isStillRepeatable()) {\n                    this.success = -option.returncode;\n                    this.played = true;\n                }\n            }\n            return false;\n        }\n    }\n    leaveAction() {\n        this.played = true;\n        // redundant, for clarity\n        this.success = 0;\n    }\n}\nclass SkillTestOption {\n    constructor(skillactionid, target) {\n        this.skillactionid = skillactionid;\n        this.target = target;\n        // default is infinite retries\n        this.max_tries = 0;\n        this.tried = 0;\n    }\n    addTry() {\n        this.tried++;\n    }\n    isStillRepeatable() {\n        return this.max_tries != 0 || this.tried < this.max_tries;\n    }\n    isRepeatable() {\n        return this.max_tries != 1;\n    }\n    isInfinitelyRepeatable() {\n        return this.max_tries == 0;\n    }\n    setRepeatable(max_tries) {\n        this.max_tries = max_tries;\n    }\n    setText(description, success, failure) {\n        this.description = description;\n        this.story_success = success;\n        this.story_failure = failure;\n    }\n    getFeedbackSuccess() {\n        if (this.story_success != null) {\n            return this.story_success;\n        }\n        else {\n            return \"You succeed\";\n        }\n    }\n    getFeedbackFailure() {\n        if (this.story_failure != null) {\n            return this.story_failure;\n        }\n        else {\n            return \"You failed\";\n        }\n    }\n    getDescription() {\n        if (this.description != null) {\n            return this.description;\n        }\n        else {\n            return \"Try your \" + this.skillactionid + \" ability\";\n        }\n    }\n    static fromJSON(src) {\n        const actionid = src[\"action\"];\n        const target = src[\"target\"];\n        let created = new SkillTestOption(actionid, target);\n        if (src.hasOwnProperty(\"repeatable\")) {\n            created.setRepeatable(src[\"repeat\"]);\n        }\n        let description = !!src[\"prompt\"] ? src[\"prompt\"] : \"Use your ability at \" + actionid;\n        let success = !!src[\"success\"] ? src[\"successs\"] : \"Succeded in \" + actionid;\n        let failure = !!src[\"failure\"] ? src[\"failure\"] : \"Failed at \" + actionid;\n        created.setText(description, success, failure);\n        // note that the match does not get LEAVESTATE_FINISHED as a value, but falls back to it anyway\n        created.returncode = !!src[\"returncode\"] ? src[\"returncode\"] : _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"].LEAVESTATE_FINISHED;\n        return created;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/story-branch.ts\":\n/*!***************************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/story-branch.ts ***!\n  \\***************************************************/\n/*! exports provided: StoryBranch */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StoryBranch\", function() { return StoryBranch; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\nclass StoryBranch extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    constructor(game) {\n        // a skill test is a scene in which the player is given a set of possible skill throws, each with its own return code\n        super(game);\n        this.prompt = null;\n        this.options = [];\n        // this.options = new Map<number, number>();\n        // this.descriptions = new Map<number, string>();\n        // this.notes = new Map<number, string>();\n        this.selected = null;\n        this.image = null;\n    }\n    sceneFinished() {\n        return this.returnState() !== _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"].LEAVESTATE_UNFINISHED;\n    }\n    setImage(filename) {\n        this.image = filename;\n    }\n    addOption(desc, endstate = 0, note = null) {\n        let nextcode = this.options.length + 1;\n        this.options.push({\n            optionid: nextcode,\n            leavestate: endstate,\n            description: desc,\n            notes: note\n        });\n    }\n    setSelected(opt) {\n        this.selected = opt;\n    }\n    returnState() {\n        return !!this.selected ? this.selected.leavestate : -1;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/struct/multi-scene.ts\":\n/*!*********************************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/struct/multi-scene.ts ***!\n  \\*********************************************************/\n/*! exports provided: MultiScene */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MultiScene\", function() { return MultiScene; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\nclass MultiScene extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/struct/wander-scene-trigger-condition.ts\":\n/*!****************************************************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/struct/wander-scene-trigger-condition.ts ***!\n  \\****************************************************************************/\n/*! exports provided: WanderSceneTriggerCondition */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WanderSceneTriggerCondition\", function() { return WanderSceneTriggerCondition; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\nclass WanderSceneTriggerCondition {\n    constructor(sceneid, valuestate, mustmeet) {\n        this.sceneid = sceneid;\n        this.statevalue = valuestate;\n        this.mustmeet = mustmeet;\n    }\n    checkCondition(leavestates) {\n        let leavestate = leavestates.has(this.sceneid) ? leavestates.get(this.sceneid) : _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"].LEAVESTATE_UNFINISHED;\n        return this.mustmeet ? leavestate === this.statevalue : leavestate !== this.statevalue;\n    }\n    static fromJSON(src) {\n        const sceneid = src[\"sceneid\"];\n        const statevalue = src[\"endstate\"];\n        let mustmeet = true;\n        if (src.hasOwnProperty(\"mustnot\")) {\n            mustmeet = !src[\"mustnot\"];\n        }\n        return new WanderSceneTriggerCondition(sceneid, statevalue, mustmeet);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/struct/wander-scene-trigger.ts\":\n/*!******************************************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/struct/wander-scene-trigger.ts ***!\n  \\******************************************************************/\n/*! exports provided: WanderSceneTrigger */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WanderSceneTrigger\", function() { return WanderSceneTrigger; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene_trigger_condition__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wander-scene-trigger-condition */ \"./src/app/rpg-engine/scenes/struct/wander-scene-trigger-condition.ts\");\n\n\nclass WanderSceneTrigger {\n    constructor() {\n        this.needed = [];\n        this.blockers = [];\n    }\n    /**\n     * Adds a condition, by default as needed unless specified as blocker\n     * @param condition trigger condition for this scene\n     * @param asblocker whether the condition is a blocker, defaults to needed\n     */\n    addCondition(condition, asblocker = false) {\n        (asblocker ? this.blockers : this.needed).push(condition);\n    }\n    isActive(leavestates) {\n        for (let triggercondition of this.blockers) {\n            if (triggercondition.checkCondition(leavestates)) {\n                return false;\n            }\n        }\n        for (let triggercondition of this.needed) {\n            if (!triggercondition.checkCondition(leavestates)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    static fromJSON(src) {\n        const trigger = new WanderSceneTrigger();\n        if (src.hasOwnProperty(\"c_for\")) {\n            for (let conditiondef of src[\"c_for\"]) {\n                trigger.addCondition(_wander_scene_trigger_condition__WEBPACK_IMPORTED_MODULE_1__[\"WanderSceneTriggerCondition\"].fromJSON(conditiondef), false);\n            }\n        }\n        if (src.hasOwnProperty(\"c_against\")) {\n            for (let conditiondef of src[\"c_against\"]) {\n                trigger.addCondition(_wander_scene_trigger_condition__WEBPACK_IMPORTED_MODULE_1__[\"WanderSceneTriggerCondition\"].fromJSON(conditiondef), true);\n            }\n        }\n        return trigger;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/town-nav.ts\":\n/*!***********************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/town-nav.ts ***!\n  \\***********************************************/\n/*! exports provided: TownNav */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TownNav\", function() { return TownNav; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n/* harmony import */ var _journey_departure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./journey-departure */ \"./src/app/rpg-engine/scenes/journey-departure.ts\");\n\n\n\nclass TownNav extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    constructor(game, place) {\n        super(game);\n        this.town = place;\n        console.log(game.worldmeta);\n        this.townstruct = game.worldmeta[\"townstructure\"][\"major\"];\n        this.locpoint = TownNav.LOC_OUTSKIRTS;\n        this.updateLocation();\n    }\n    updateLocation() {\n        this.currentloc = this.getLocStructure();\n        if (this.locpoint !== TownNav.LOC_LEAVE) {\n            this.game.hero.locpos = {\n                \"locid\": this.town.locid,\n                \"roomid\": this.locpoint\n            };\n        }\n        else {\n            this.game.hero.locpos = null;\n        }\n    }\n    getFollowingScene() {\n        return new _journey_departure__WEBPACK_IMPORTED_MODULE_2__[\"JourneyDeparture\"](this.game);\n    }\n    sceneFinished() {\n        return this.locpoint === TownNav.LOC_LEAVE;\n    }\n    getLocStructure() {\n        return this.townstruct[\"locs\"][this.locpoint];\n    }\n    moveToLoc(locid) {\n        this.locpoint = locid;\n        this.updateLocation();\n    }\n}\nTownNav.LOC_LEAVE = \"OUT\";\nTownNav.LOC_OUTSKIRTS = \"LEAVE\";\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/skill-system/simple-skill-set.ts\":\n/*!*************************************************************!*\\\n  !*** ./src/app/rpg-engine/skill-system/simple-skill-set.ts ***!\n  \\*************************************************************/\n/*! exports provided: SimpleSkillSet */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SimpleSkillSet\", function() { return SimpleSkillSet; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass SimpleSkillSet {\n    constructor() {\n        this.potentials = new Map();\n        this.developments = new Map();\n    }\n    registerPotential(id, basevalue) {\n        this.potentials.set(id, basevalue);\n    }\n    registerDevelopment(id, basevalue) {\n        this.developments.set(id, basevalue);\n    }\n    getPotential(id) {\n        return this.potentials.has(id) ? this.potentials.get(id) : 0;\n    }\n    getDevelopment(id) {\n        return this.developments.has(id) ? this.developments.get(id) : 0;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/skill-system/simple-skill-system.ts\":\n/*!****************************************************************!*\\\n  !*** ./src/app/rpg-engine/skill-system/simple-skill-system.ts ***!\n  \\****************************************************************/\n/*! exports provided: SimpleSkillSystem */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SimpleSkillSystem\", function() { return SimpleSkillSystem; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _simple_skill_throw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./simple-skill-throw */ \"./src/app/rpg-engine/skill-system/simple-skill-throw.ts\");\n\n\nclass SimpleSkillSystem {\n    constructor() {\n        this.potentials = [];\n        this.actions = new Map();\n    }\n    static fromJSON(src) {\n        let created = new SimpleSkillSystem();\n        created.potentials = src[\"potentials\"];\n        for (let actionid in src[\"actions\"]) {\n            created.actions.set(actionid, _simple_skill_throw__WEBPACK_IMPORTED_MODULE_1__[\"SimpleSkillThrow\"].fromJson(src[\"actions\"][actionid]));\n        }\n        return created;\n    }\n    static getLowestBalanced(series) {\n        let lowest = series[0];\n        for (let current of series) {\n            lowest = Math.min(lowest, current);\n        }\n        let numlowest = 0;\n        for (let current of series) {\n            if (current === lowest) {\n                numlowest++;\n            }\n        }\n        if (numlowest < 2) {\n            return numlowest + 1;\n        }\n        else {\n            return numlowest;\n        }\n    }\n    static getHighest(series) {\n        let highest = series[0];\n        for (let current of series) {\n            highest = Math.max(highest, current);\n        }\n        return highest;\n    }\n    applySkill(actionid, agent) {\n        const agentskills = agent.getSkills();\n        const action = this.actions.get(actionid);\n        let pot_vals = [];\n        for (let potential of action.potentials) {\n            pot_vals.push(agentskills.getPotential(potential));\n        }\n        let dev_vals = [];\n        for (let development of action.developments) {\n            dev_vals.push(agentskills.getDevelopment(development));\n        }\n        let potval = pot_vals.length > 1 ? SimpleSkillSystem.getLowestBalanced(pot_vals) : pot_vals[0];\n        let devval = dev_vals.length > 1 ? SimpleSkillSystem.getHighest(dev_vals) : dev_vals[0];\n        let dicethrow = 0;\n        for (let i = 0; i < devval; i++) {\n            dicethrow += Math.floor(Math.random() * potval) + 1;\n        }\n        return dicethrow;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/skill-system/simple-skill-throw.ts\":\n/*!***************************************************************!*\\\n  !*** ./src/app/rpg-engine/skill-system/simple-skill-throw.ts ***!\n  \\***************************************************************/\n/*! exports provided: SimpleSkillThrow */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SimpleSkillThrow\", function() { return SimpleSkillThrow; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass SimpleSkillThrow {\n    constructor(req_pots, req_devs) {\n        this.potentials = req_pots;\n        this.developments = req_devs;\n    }\n    static fromJson(src) {\n        return new SimpleSkillThrow(src[\"pot\"], src[\"dev\"]);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/wander-game-state.ts\":\n/*!*************************************************!*\\\n  !*** ./src/app/rpg-engine/wander-game-state.ts ***!\n  \\*************************************************/\n/*! exports provided: WanderGameState */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WanderGameState\", function() { return WanderGameState; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\n/**\n * Saves game state to a SINGLE save space\n */\nclass WanderGameState {\n    static loadFromBrowser() {\n        console.log(\"loading game state from browser WebStorage\");\n        let loaded = localStorage.getItem(WanderGameState.KEY_SAVESTATE_DATA);\n        console.log(\"loaded\", loaded);\n        if (loaded !== null) {\n            loaded = JSON.parse(loaded);\n            if (!loaded[\"qstates\"]) {\n                loaded[\"qstates\"] = {};\n            }\n        }\n        return loaded;\n    }\n    static saveToBrowser(game) {\n        console.log(\"saving game state to browser for Game\");\n        console.log(\"saving hero state, position\", game.hero.pos);\n        let qstates = {};\n        for (let quest of game.quests.values()) {\n            let tasks = {};\n            // console.log(\"saving state for quest \", quest.questid, quest);\n            // console.log(quest.states.keys());\n            for (let taskid of quest.states.keys()) {\n                // console.log(\"checking quest \",quest.questid,\"task\", taskid);\n                tasks[taskid] = quest.states.get(taskid);\n            }\n            qstates[quest.questid] = {\n                \"tasks\": tasks,\n                \"completed\": quest.completed\n            };\n        }\n        let savegame = {\n            hero: {\n                position: [game.hero.pos.x, game.hero.pos.y]\n            },\n            quests: qstates\n        };\n        console.log(\"saving game as \", savegame);\n        localStorage.setItem(WanderGameState.KEY_SAVESTATE_DATA, JSON.stringify(savegame));\n    }\n}\nWanderGameState.KEY_SAVESTATE_DATA = \"WanderSaveGame\";\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/wander-game.ts\":\n/*!*******************************************!*\\\n  !*** ./src/app/rpg-engine/wander-game.ts ***!\n  \\*******************************************/\n/*! exports provided: WanderGame */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WanderGame\", function() { return WanderGame; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _world_world_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./world/world-map */ \"./src/app/rpg-engine/world/world-map.ts\");\n/* harmony import */ var _wander_hero__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wander-hero */ \"./src/app/rpg-engine/wander-hero.ts\");\n/* harmony import */ var _quests_quest_ref__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./quests/quest-ref */ \"./src/app/rpg-engine/quests/quest-ref.ts\");\n/* harmony import */ var _support_res_loader__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/res-loader */ \"./src/app/support/res-loader.ts\");\n/* harmony import */ var _skill_system_simple_skill_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./skill-system/simple-skill-system */ \"./src/app/rpg-engine/skill-system/simple-skill-system.ts\");\n/* harmony import */ var _scenes_meta_scene__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./scenes/meta-scene */ \"./src/app/rpg-engine/scenes/meta-scene.ts\");\n\n\n\n\n\n\n\nclass WanderGame {\n    constructor(loader) {\n        this.loader = loader;\n        this.quests = new Map();\n    }\n    static loadGame(http, callback) {\n        const loader = new GameFactory(http);\n        loader.loadDemoGame(function (game, factory) {\n            console.log(\"loaded game \", game);\n            console.log(\"built from factory \", factory);\n            callback(game);\n        });\n    }\n    // DEBUG FUNCTIONS FOR QUICK TESTING\n    setHero(hero) {\n        this.hero = hero;\n    }\n    setWorldMap(worldmap) {\n        this.worldmap = worldmap;\n    }\n    setWorldMeta(src) {\n        // TODO: placeholder\n        this.worldmeta = src;\n    }\n    setSkillSystem(skillsys) {\n        this.skillsystem = skillsys;\n    }\n    setActiveScene(scene) {\n        console.log(\"setting activescene to \", scene);\n        if (scene instanceof _scenes_meta_scene__WEBPACK_IMPORTED_MODULE_6__[\"MetaScene\"]) {\n            console.log(\"should switch to internal scene for metascene\");\n            this.activescene = scene.getCurrent();\n        }\n        else {\n            this.activescene = scene;\n        }\n        console.log(\"ACTIVESCENE:\", this.activescene);\n    }\n    getActiveScene() {\n        return this.activescene;\n    }\n    addQuest(qref) {\n        this.quests.set(qref.questid, qref);\n    }\n}\nclass GameFactory {\n    constructor(http) {\n        this.http = http;\n        this.dataset = {\n            \"locs\": null,\n            \"terrain\": null,\n            \"player\": null,\n            \"quests\": null,\n            \"worldmeta\": null,\n            \"skillsys\": null\n        };\n        this.loader = new _support_res_loader__WEBPACK_IMPORTED_MODULE_4__[\"ResLoader\"](this.http);\n    }\n    loadDemoGame(callback) {\n        const sources = {\n            \"locs\": \"./assets/gamedata/testlocations.json\",\n            \"terrain\": \"./assets/gamedata/testmapgame.json\",\n            \"player\": \"./assets/gamedata/playerdata.json\",\n            \"worldmeta\": \"./assets/gamedata/worlddesign.json\",\n            \"skillsys\": \"./assets/gamedata/simpleskillactions.json\"\n        };\n        let loader = this;\n        function getCheckerFunction(key) {\n            return function (data) {\n                loader.setData(key, data, callback);\n            };\n        }\n        for (let key of Object.keys(sources)) {\n            let path = sources[key];\n            let checker = getCheckerFunction(key);\n            this.loader.loadDataFile(path, checker);\n        }\n        let QPATH = \"./assets/gamedata/quests/\";\n        let QUESTS = [\n            QPATH + \"drunkquest.json\",\n            QPATH + \"sidestreetquest.json\",\n            // QPATH + \"simpleskillactions.json\",\n            QPATH + \"testquest.json\",\n            QPATH + \"triggerquest.json\"\n        ];\n        this.loader.loadDataFiles(QUESTS, function (quests) {\n            loader.setData(\"quests\", quests, callback);\n        });\n    }\n    setData(key, data, completer) {\n        this.dataset[key] = data;\n        let has_all = true;\n        for (let datakey of Object.keys(this.dataset)) {\n            if (this.dataset[datakey] == null) {\n                has_all = false;\n            }\n        }\n        if (has_all) {\n            // completer(this);\n            this.createGameInstance(completer);\n        }\n    }\n    createGameInstance(completer) {\n        let game = new WanderGame(new _support_res_loader__WEBPACK_IMPORTED_MODULE_4__[\"ResLoader\"](this.http));\n        console.log(\"loaded terrain\", this.dataset[\"terrain\"]);\n        console.log(\"loaded locs\", this.dataset[\"locs\"]);\n        console.log(\"loaded player\", this.dataset[\"player\"]);\n        console.log(\"loaded quests: \", this.dataset[\"quests\"]);\n        let worldmap = _world_world_map__WEBPACK_IMPORTED_MODULE_1__[\"WorldMap\"].fromJSON(this.dataset[\"terrain\"], this.dataset[\"locs\"]);\n        let hero = _wander_hero__WEBPACK_IMPORTED_MODULE_2__[\"WanderHero\"].fromJSON(this.dataset[\"player\"]);\n        let skillsys = _skill_system_simple_skill_system__WEBPACK_IMPORTED_MODULE_5__[\"SimpleSkillSystem\"].fromJSON(this.dataset[\"skillsys\"]);\n        game.setWorldMap(worldmap);\n        game.setHero(hero);\n        game.setWorldMeta(this.dataset[\"worldmeta\"]);\n        game.setSkillSystem(skillsys);\n        for (let questfile in this.dataset[\"quests\"]) {\n            let qref = _quests_quest_ref__WEBPACK_IMPORTED_MODULE_3__[\"QuestRef\"].fromJSON(this.dataset[\"quests\"][questfile], questfile);\n            console.log(\"created from \", questfile, \"questref \", qref);\n            // let quest = Quest.fromJSON(this.dataset[\"quests\"][questfile]);\n            // console.log(\"created from \", questfile, \" quest object \", quest);\n            game.addQuest(qref);\n        }\n        completer(game, this);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/wander-hero.ts\":\n/*!*******************************************!*\\\n  !*** ./src/app/rpg-engine/wander-hero.ts ***!\n  \\*******************************************/\n/*! exports provided: WanderHero */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WanderHero\", function() { return WanderHero; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _world_world_position__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./world/world-position */ \"./src/app/rpg-engine/world/world-position.ts\");\n/* harmony import */ var _skill_system_simple_skill_set__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./skill-system/simple-skill-set */ \"./src/app/rpg-engine/skill-system/simple-skill-set.ts\");\n\n\n\nclass WanderHero {\n    constructor() {\n        this.pos = null;\n        this.locpos = null;\n        this.skills = new _skill_system_simple_skill_set__WEBPACK_IMPORTED_MODULE_2__[\"SimpleSkillSet\"]();\n    }\n    static fromJSON(src) {\n        let hero = new WanderHero();\n        hero.setCoordinates(_world_world_position__WEBPACK_IMPORTED_MODULE_1__[\"WorldPosition\"].fromCoordsArray(src[\"position\"][\"coords\"]));\n        for (let potential in src[\"record\"][\"potentials\"]) {\n            let range = src[\"record\"][\"potentials\"][potential];\n            let value = Math.round(Math.random() * range[1] - range[0]) + (range[1] - range[0]);\n            hero.skills.registerPotential(potential, value);\n        }\n        for (let development in src[\"record\"][\"developments\"]) {\n            let range = src[\"record\"][\"developments\"][development];\n            let value = Math.round(Math.random() * range[1] - range[0]) + (range[1] - range[0]);\n            hero.skills.registerDevelopment(development, value);\n        }\n        let range = src[\"record\"][\"health\"];\n        hero.maxhealth = Math.round(Math.random() * range[1] - range[0]) + (range[1] - range[0]);\n        hero.health = hero.maxhealth;\n        return hero;\n    }\n    setCoordinates(pos) {\n        // console.log(\"replacing coords\", this.pos, \"w pos \", pos);\n        this.pos = pos;\n    }\n    getSkills() {\n        return this.skills;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/wander-scene.ts\":\n/*!********************************************!*\\\n  !*** ./src/app/rpg-engine/wander-scene.ts ***!\n  \\********************************************/\n/*! exports provided: WanderScene, LeaveStatesMap */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WanderScene\", function() { return WanderScene; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LeaveStatesMap\", function() { return LeaveStatesMap; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass WanderScene {\n    constructor(game) {\n        this.game = game;\n        // narrative should be set outside the constructor\n        this.narrative = null;\n        // TODO: TBA (note: should get value AFTER constructor anyway?)\n        this.leaf = null;\n        this.driver = null;\n    }\n    setNarrative(narrative) {\n        this.narrative = narrative;\n    }\n    getNarrative() {\n        return this.narrative;\n    }\n    /**\n     * Acts as default, subclasses can override if they have specific return codes > 0 (for success and < -1 for failure?)\n     * If the scene is unfinished, subclasses should still respect the UNFINISHED constant\n     */\n    returnState() {\n        // Scenes that do not have a set of return values always return 0 on end OR -1 if not finished\n        return this.sceneFinished() ? WanderScene.LEAVESTATE_FINISHED : WanderScene.LEAVESTATE_UNFINISHED;\n    }\n    /**\n     * Acts as default, subclasses can override if they chain to a scene they create\n     */\n    getFollowingScene() {\n        return this.narrative;\n    }\n    static fromJSON(src) {\n        // TODO: placeholder, implement for all the scenes that can be JSON-generated\n        return null;\n    }\n}\nWanderScene.LEAVESTATE_UNFINISHED = -1;\nWanderScene.LEAVESTATE_FINISHED = 0;\n/**\n * Wrapper for Map type for syntactical cleanup\n */\nclass LeaveStatesMap extends Map {\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/world/locs/Place.ts\":\n/*!************************************************!*\\\n  !*** ./src/app/rpg-engine/world/locs/Place.ts ***!\n  \\************************************************/\n/*! exports provided: Place */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Place\", function() { return Place; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass Place {\n    constructor(pos) {\n        this.pos = pos;\n    }\n    // public abstract getName (): string;\n    getCoords() {\n        return this.pos.getCoords();\n    }\n    matchesPosition(pos) {\n        return this.pos.matches(pos);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/world/locs/PlaceFactory.ts\":\n/*!*******************************************************!*\\\n  !*** ./src/app/rpg-engine/world/locs/PlaceFactory.ts ***!\n  \\*******************************************************/\n/*! exports provided: PlaceFactory */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlaceFactory\", function() { return PlaceFactory; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _Town__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Town */ \"./src/app/rpg-engine/world/locs/Town.ts\");\n/* harmony import */ var _TerrainPass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TerrainPass */ \"./src/app/rpg-engine/world/locs/TerrainPass.ts\");\n\n\n\nclass PlaceFactory {\n    static fromJSON(placetype, placeid, src) {\n        let builderclass = PlaceFactory.CLASSES[placetype];\n        return builderclass.fromJSON(placeid, src);\n    }\n}\nPlaceFactory.CLASSES = {\n    \"towns\": _Town__WEBPACK_IMPORTED_MODULE_1__[\"Town\"],\n    \"passes\": _TerrainPass__WEBPACK_IMPORTED_MODULE_2__[\"TerrainPass\"]\n};\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/world/locs/TerrainPass.ts\":\n/*!******************************************************!*\\\n  !*** ./src/app/rpg-engine/world/locs/TerrainPass.ts ***!\n  \\******************************************************/\n/*! exports provided: TerrainPass */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TerrainPass\", function() { return TerrainPass; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _Place__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Place */ \"./src/app/rpg-engine/world/locs/Place.ts\");\n/* harmony import */ var _world_position__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../world-position */ \"./src/app/rpg-engine/world/world-position.ts\");\n\n\n\nclass TerrainPass extends _Place__WEBPACK_IMPORTED_MODULE_1__[\"Place\"] {\n    constructor(locid, entrypos, exitpos, course) {\n        super(entrypos);\n        this.loctype = \"passes\";\n        this.locid = locid;\n        this.exitpoint = exitpos;\n        this.course = course;\n    }\n    length() {\n        return this.course.length;\n    }\n    static fromJSON(placeid, desc) {\n        let entrypoint = desc[\"entry\"];\n        let exitpoint = desc[\"exit\"];\n        let course = desc[\"sequence\"];\n        let loaded = new TerrainPass(placeid, new _world_position__WEBPACK_IMPORTED_MODULE_2__[\"WorldPosition\"](entrypoint[0], entrypoint[1]), new _world_position__WEBPACK_IMPORTED_MODULE_2__[\"WorldPosition\"](exitpoint[0], exitpoint[1]), course);\n        loaded.name = desc[\"name\"];\n        return loaded;\n    }\n    matchesPosition(pos) {\n        return this.pos.matches(pos) || this.exitpoint.matches(pos);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/world/locs/Town.ts\":\n/*!***********************************************!*\\\n  !*** ./src/app/rpg-engine/world/locs/Town.ts ***!\n  \\***********************************************/\n/*! exports provided: Town */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Town\", function() { return Town; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _Place__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Place */ \"./src/app/rpg-engine/world/locs/Place.ts\");\n/* harmony import */ var _world_position__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../world-position */ \"./src/app/rpg-engine/world/world-position.ts\");\n\n\n\nclass Town extends _Place__WEBPACK_IMPORTED_MODULE_1__[\"Place\"] {\n    constructor(locid, coords) {\n        super(coords);\n        this.loctype = \"towns\";\n        this.locid = locid;\n    }\n    static fromJSON(placeid, desc) {\n        let coords = desc[\"coords\"];\n        let loaded = new Town(placeid, new _world_position__WEBPACK_IMPORTED_MODULE_2__[\"WorldPosition\"](coords[0], coords[1]));\n        loaded.name = desc[\"name\"];\n        return loaded;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/world/world-map.ts\":\n/*!***********************************************!*\\\n  !*** ./src/app/rpg-engine/world/world-map.ts ***!\n  \\***********************************************/\n/*! exports provided: WorldMap */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WorldMap\", function() { return WorldMap; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _locs_TerrainPass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locs/TerrainPass */ \"./src/app/rpg-engine/world/locs/TerrainPass.ts\");\n/* harmony import */ var _locs_PlaceFactory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./locs/PlaceFactory */ \"./src/app/rpg-engine/world/locs/PlaceFactory.ts\");\n/* harmony import */ var _world_position__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./world-position */ \"./src/app/rpg-engine/world/world-position.ts\");\n\n\n\n\nclass WorldMap {\n    constructor(sizeX, sizeY) {\n        this.sizeX = sizeX;\n        this.sizeY = sizeY;\n        this.locs = [];\n        this.terrain = [];\n        for (let x = 0; x < sizeX; x++) {\n            let tercol = [];\n            let loccol = [];\n            for (let y = 0; y < sizeY; y++) {\n                tercol.push(null);\n                loccol.push(null);\n            }\n            this.terrain.push(tercol);\n            this.locs.push(loccol);\n        }\n        this.places_bytypebyid = new Map();\n    }\n    static getCoordsHash(coordX, coordY) {\n        return coordX + \":\" + coordY;\n    }\n    static fromJSON(griddata, locationdata) {\n        // console.log(griddata);\n        let gridsizeX = griddata[\"mapgrid\"].length;\n        let gridsizeY = griddata[\"mapgrid\"][0].length;\n        let worldmap = new WorldMap(gridsizeX, gridsizeY);\n        // console.log(worldmap.terrain);\n        for (let x = 0; x < gridsizeX; x++) {\n            for (let y = 0; y < gridsizeY; y++) {\n                worldmap.terrain[x][y] = griddata[\"mapgrid\"][x][y];\n            }\n        }\n        // loop not technically needed but we might want to run generations etc on data in the future\n        // TODO : replace\n        for (let placetype of Object.keys(locationdata)) {\n            let places = locationdata[placetype];\n            let listed = new Map();\n            for (let placeid of Object.keys(places)) {\n                let placedesc = places[placeid];\n                let place = _locs_PlaceFactory__WEBPACK_IMPORTED_MODULE_2__[\"PlaceFactory\"].fromJSON(placetype, placeid, placedesc);\n                // let place = new Place(Position.fromCoords(placedesc[\"coords\"]));\n                // place.loctype = placetype;\n                // place.locid = placeid;\n                listed.set(placeid, place);\n                // console.log(\"adding place\", placetype, placedesc);\n                let coords;\n                worldmap.locs[place.pos.x][place.pos.y] = place;\n                if (place instanceof _locs_TerrainPass__WEBPACK_IMPORTED_MODULE_1__[\"TerrainPass\"]) {\n                    let exitpos = place.exitpoint;\n                    worldmap.locs[exitpos.x][exitpos.y] = place;\n                }\n            }\n            worldmap.places_bytypebyid.set(placetype, listed);\n        }\n        return worldmap;\n    }\n    getLocationById(locid) {\n        for (let places_byid of this.places_bytypebyid.values()) {\n            if (places_byid.has(locid)) {\n                return places_byid.get(locid);\n            }\n        }\n        return null;\n    }\n    getAllLocations() {\n        let listing = [];\n        for (let placetype of this.places_bytypebyid.keys()) {\n            // console.log(\"getting loctype \", loctype, this.places[loctype]);\n            for (let loc of this.places_bytypebyid.get(placetype).values()) {\n                listing.push(loc);\n            }\n        }\n        // console.log(\"all locations: \", listing);\n        return listing;\n    }\n    getLocationAt(coords) {\n        let loc = null;\n        try {\n            loc = this.locs[coords[0]][coords[1]];\n        }\n        catch (err) {\n            // return null;\n        }\n        // console.log(\"found loc \", loc);\n        // TODO: DEBUG ONLY!\n        // loc = null;\n        return loc;\n        /*\n        var coordhash = WorldMap.getCoordsHash(coordX, coordY);\n        // TODO: optimize so we don't go through the whole places data\n        for (var placetype in this.places)\n        {\n            for (var placeid in this.places[placetype])\n            {\n                var placecoords = this.places[placetype][placeid][\"coords\"];\n                if (WorldMap.getCoordsHash(placecoords[0], placecoords[1])==coordhash)\n                {\n                    return this.places[placetype][placeid];\n                }\n            }\n        }\n        return null;\n        */\n    }\n    getCourse(cfrom, cto) {\n        // TODO: straight course for now\n        let distX = cto.x - cfrom.x;\n        let distY = cto.y - cfrom.y;\n        let maxdist = Math.max(Math.abs(distX), Math.abs(distY));\n        let course = [];\n        for (let i = 0; i < maxdist; i++) {\n            let section = i / maxdist;\n            let sectionX = Math.round(distX * section);\n            let sectionY = Math.round(distY * section);\n            course.push(new _world_position__WEBPACK_IMPORTED_MODULE_3__[\"WorldPosition\"](cfrom.x + sectionX, cfrom.y + sectionY));\n        }\n        console.log(\"course from \", cfrom, \" to \", cto, \": \" + course.length + \" steps (\", course, \")\");\n        return course;\n    }\n    getTerrainAt(x, y) {\n        try {\n            return this.terrain[x][y];\n        }\n        catch (err) {\n            return null;\n        }\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/world/world-position.ts\":\n/*!****************************************************!*\\\n  !*** ./src/app/rpg-engine/world/world-position.ts ***!\n  \\****************************************************/\n/*! exports provided: WorldPosition */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WorldPosition\", function() { return WorldPosition; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass WorldPosition {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    static fromCoordsArray(coords) {\n        return new WorldPosition(coords[0], coords[1]);\n    }\n    getCoords() {\n        return [this.x, this.y];\n    }\n    getShifted(x, y) {\n        return new WorldPosition(this.x + x, this.y + y);\n    }\n    matches(other) {\n        // console.log(\"checking if we have a match between \", this, \"and\", other);\n        return this.x === other.x && this.y === other.y;\n    }\n    static getRelativeGeneralDirection(pfrom, pto) {\n        const distX = pto.x - pfrom.x;\n        const distY = pto.y - pfrom.y;\n        let dirX = 0;\n        let dirY = 0;\n        if (distX === 0) {\n            dirX = 0;\n            dirY = distY > 0 ? 1 : -1;\n        }\n        else if (distY === 0) {\n            dirY = 0;\n            dirX = distX > 0 ? 1 : -1;\n        }\n        else {\n            let absX = Math.abs(distX);\n            let absY = Math.abs(distY);\n            if (absY > 3 * absY) {\n                dirX = 0;\n                dirY = distY > 0 ? 1 : -1;\n            }\n            else if (absY * 3 < absX) {\n                dirX = distX > 0 ? 1 : -1;\n                dirY = 0;\n            }\n            else {\n                dirX = distX > 0 ? 1 : -1;\n                dirY = distY > 0 ? 1 : -1;\n            }\n        }\n        return [dirX, dirY];\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/char-sheet.directive.ts\":\n/*!**************************************************!*\\\n  !*** ./src/app/scene-ui/char-sheet.directive.ts ***!\n  \\**************************************************/\n/*! exports provided: CharSheetDirective */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CharSheetDirective\", function() { return CharSheetDirective; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n\n\nlet CharSheetDirective = class CharSheetDirective {\n    constructor(viewContainerRef) {\n        this.viewContainerRef = viewContainerRef;\n    }\n};\nCharSheetDirective.ctorParameters = () => [\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewContainerRef\"] }\n];\nCharSheetDirective = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Directive\"])({\n        selector: '[charsheetInsertion]',\n    })\n], CharSheetDirective);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/insertion.directive.ts\":\n/*!*************************************************!*\\\n  !*** ./src/app/scene-ui/insertion.directive.ts ***!\n  \\*************************************************/\n/*! exports provided: InsertionDirective */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InsertionDirective\", function() { return InsertionDirective; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n\n\nlet InsertionDirective = class InsertionDirective {\n    constructor(viewContainerRef) {\n        this.viewContainerRef = viewContainerRef;\n    }\n};\nInsertionDirective.ctorParameters = () => [\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewContainerRef\"] }\n];\nInsertionDirective = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Directive\"])({\n        selector: '[appInsertion]',\n    })\n], InsertionDirective);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/scene-injector.ts\":\n/*!********************************************!*\\\n  !*** ./src/app/scene-ui/scene-injector.ts ***!\n  \\********************************************/\n/*! exports provided: SceneInjector */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneInjector\", function() { return SceneInjector; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass SceneInjector {\n    constructor(_parentInjector, _additionalTokens) {\n        this._parentInjector = _parentInjector;\n        this._additionalTokens = _additionalTokens;\n    }\n    get(token, notFoundValue, flags) {\n        const value = this._additionalTokens.get(token);\n        if (value) {\n            return value;\n        }\n        return this._parentInjector.get(token, notFoundValue);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/scene-ref.ts\":\n/*!***************************************!*\\\n  !*** ./src/app/scene-ui/scene-ref.ts ***!\n  \\***************************************/\n/*! exports provided: SceneRef */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneRef\", function() { return SceneRef; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm2015/index.js\");\n\n\nclass SceneRef {\n    constructor() {\n        this._afterClosed = new rxjs__WEBPACK_IMPORTED_MODULE_1__[\"Subject\"]();\n        this.afterClosed = this._afterClosed.asObservable();\n        this._sceneCheck = new rxjs__WEBPACK_IMPORTED_MODULE_1__[\"Subject\"]();\n        this.sceneCheck = this._sceneCheck.asObservable();\n        this._subSwitch = new rxjs__WEBPACK_IMPORTED_MODULE_1__[\"Subject\"]();\n        this.subSwitch = this._subSwitch.asObservable();\n    }\n    setContext(scene) {\n        this.scene = scene;\n        this.game = scene.game;\n    }\n    close(result) {\n        this._afterClosed.next(result);\n    }\n    triggerSceneCheck() {\n        console.log(\"sending check event for scene \", this.scene, this.scene.sceneFinished());\n        this._sceneCheck.next();\n    }\n    triggerSubScene(scene) {\n        this._subSwitch.next(scene);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/scene-ui.component.scss\":\n/*!**************************************************!*\\\n  !*** ./src/app/scene-ui/scene-ui.component.scss ***!\n  \\**************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".uiwrapper {\\n  display: flex;\\n  flex-direction: column;\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background: transparent;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n#gamecontrols {\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  text-align: right;\\n  border-bottom: 1px solid black;\\n  border-left: 1px solid black;\\n  border-bottom-left-radius: 8px;\\n  padding: 4px 8px 4px 16px;\\n}\\n\\n#charsheetmodal {\\n  position: fixed;\\n  bottom: 0;\\n  top: 0;\\n  right: 0;\\n  left: 0;\\n  background-color: rgba(0, 0, 0, 0.56);\\n  display: none;\\n}\\n\\n#charsheetmodal.visible {\\n  display: block;\\n  bottom: 0;\\n  top: 0;\\n  right: 0;\\n  left: 0;\\n  background-color: rgba(0, 0, 0, 0.56);\\n}\\n\\n#charsheetcontrols {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  padding: 4px 8px;\\n  border-left: 1px solid black;\\n  border-bottom: 1px solid black;\\n  border-bottom-left-radius: 4px;\\n}\\n\\n#charsheet {\\n  position: fixed;\\n  bottom: 0;\\n  left: 10vw;\\n  right: 10vw;\\n  height: 60vh;\\n  background-image: url(\\\"/assets/ui/temporaryparchment.jpg\\\");\\n  background-color: #eae1c6;\\n  border: 1px solid #803b0c;\\n  border-top-left-radius: 8px;\\n  border-top-right-radius: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3NjZW5lLXVpL3NjZW5lLXVpLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zY2VuZS11aS9zY2VuZS11aS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLGVBQUE7RUFDQSxNQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FDQ0Y7O0FER0E7RUFFRSxlQUFBO0VBQ0EsTUFBQTtFQUNBLFFBQUE7RUFDQSxpQkFBQTtFQUNBLDhCQUFBO0VBQ0EsNEJBQUE7RUFDQSw4QkFBQTtFQUNBLHlCQUFBO0FDREY7O0FEVUE7RUFFQyxlQUFBO0VBQ0EsU0FBQTtFQUNBLE1BQUE7RUFDQSxRQUFBO0VBQ0EsT0FBQTtFQUNBLHFDQUFBO0VBQ0EsYUFBQTtBQ1JEOztBRFdBO0VBRUMsY0FBQTtFQUNBLFNBQUE7RUFDQSxNQUFBO0VBQ0EsUUFBQTtFQUNBLE9BQUE7RUFDQSxxQ0FBQTtBQ1REOztBRFlBO0VBRUMsa0JBQUE7RUFDQSxNQUFBO0VBQ0EsUUFBQTtFQUNBLGdCQUFBO0VBQ0EsNEJBQUE7RUFDQSw4QkFBQTtFQUNBLDhCQUFBO0FDVkQ7O0FEYUE7RUFFQyxlQUFBO0VBQ0EsU0FBQTtFQUNBLFVBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLDBEQUFBO0VBQ0EseUJBQUE7RUFDQSx5QkFBQTtFQUNBLDJCQUFBO0VBQ0EsNEJBQUE7QUNYRCIsImZpbGUiOiJzcmMvYXBwL3NjZW5lLXVpL3NjZW5lLXVpLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnVpd3JhcHBlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAwO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cblxuI2dhbWVjb250cm9sc1xue1xuICBwb3NpdGlvbjogICBmaXhlZDtcbiAgdG9wOiAgICAgICAgMDtcbiAgcmlnaHQ6ICAgICAgMDtcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gIGJvcmRlci1ib3R0b206ICAgICAxcHggc29saWQgYmxhY2s7XG4gIGJvcmRlci1sZWZ0OiAgICAgMXB4IHNvbGlkIGJsYWNrO1xuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA4cHg7XG4gIHBhZGRpbmc6ICAgICAgNHB4IDhweCA0cHggMTZweDtcblx0Ly9iYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIvYXNzZXRzL3VpL3RlbXBvcmFyeXBhcmNobWVudC5qcGdcIik7XG5cbiAgLy8gei1pbmRleDpcdFx0OTk5OTk5OTtcbn1cblxuXG5cblxuI2NoYXJzaGVldG1vZGFsXG57XG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdHRvcDpcdFx0XHQwO1xuXHRyaWdodDpcdFx0XHQwO1xuXHRsZWZ0Olx0XHRcdDA7XG5cdGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41Nik7XG5cdGRpc3BsYXk6IG5vbmU7XG59XG5cbiNjaGFyc2hlZXRtb2RhbC52aXNpYmxlXG57XG5cdGRpc3BsYXk6XHRcdGJsb2NrO1xuXHRib3R0b206XHRcdFx0MDtcblx0dG9wOlx0XHRcdDA7XG5cdHJpZ2h0Olx0XHRcdDA7XG5cdGxlZnQ6XHRcdFx0MDtcblx0YmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjU2KTtcbn1cblxuI2NoYXJzaGVldGNvbnRyb2xzXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblx0dG9wOlx0XHRcdDA7XG5cdHJpZ2h0Olx0XHRcdDA7XG5cdHBhZGRpbmc6XHRcdDRweCA4cHg7XG5cdGJvcmRlci1sZWZ0Olx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0Ym9yZGVyLWJvdHRvbTpcdFx0XHQxcHggc29saWQgYmxhY2s7XG5cdGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDtcbn1cblxuI2NoYXJzaGVldFxue1xuXHRwb3NpdGlvbjpcdGZpeGVkO1xuXHRib3R0b206XHRcdDA7XG5cdGxlZnQ6XHRcdDEwdnc7XG5cdHJpZ2h0Olx0XHQxMHZ3O1xuXHRoZWlnaHQ6XHRcdDYwdmg7XG5cdGJhY2tncm91bmQtaW1hZ2U6IHVybChcIi9hc3NldHMvdWkvdGVtcG9yYXJ5cGFyY2htZW50LmpwZ1wiKTtcblx0YmFja2dyb3VuZC1jb2xvcjogI2VhZTFjNjtcblx0Ym9yZGVyOlx0XHQxcHggc29saWQgIzgwM2IwYztcblx0Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czogOHB4O1xuXHRib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogOHB4O1xufVxuIiwiLnVpd3JhcHBlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAwO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbiNnYW1lY29udHJvbHMge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgYmxhY2s7XG4gIGJvcmRlci1sZWZ0OiAxcHggc29saWQgYmxhY2s7XG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDhweDtcbiAgcGFkZGluZzogNHB4IDhweCA0cHggMTZweDtcbn1cblxuI2NoYXJzaGVldG1vZGFsIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBib3R0b206IDA7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIGxlZnQ6IDA7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41Nik7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbiNjaGFyc2hlZXRtb2RhbC52aXNpYmxlIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGJvdHRvbTogMDtcbiAgdG9wOiAwO1xuICByaWdodDogMDtcbiAgbGVmdDogMDtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjU2KTtcbn1cblxuI2NoYXJzaGVldGNvbnRyb2xzIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAwO1xuICBwYWRkaW5nOiA0cHggOHB4O1xuICBib3JkZXItbGVmdDogMXB4IHNvbGlkIGJsYWNrO1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgYmxhY2s7XG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDtcbn1cblxuI2NoYXJzaGVldCB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAxMHZ3O1xuICByaWdodDogMTB2dztcbiAgaGVpZ2h0OiA2MHZoO1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIvYXNzZXRzL3VpL3RlbXBvcmFyeXBhcmNobWVudC5qcGdcIik7XG4gIGJhY2tncm91bmQtY29sb3I6ICNlYWUxYzY7XG4gIGJvcmRlcjogMXB4IHNvbGlkICM4MDNiMGM7XG4gIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDhweDtcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDhweDtcbn0iXX0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/scene-ui.component.ts\":\n/*!************************************************!*\\\n  !*** ./src/app/scene-ui/scene-ui.component.ts ***!\n  \\************************************************/\n/*! exports provided: SceneUIComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneUIComponent\", function() { return SceneUIComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm2015/index.js\");\n/* harmony import */ var _insertion_directive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./insertion.directive */ \"./src/app/scene-ui/insertion.directive.ts\");\n/* harmony import */ var _char_sheet_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./char-sheet.directive */ \"./src/app/scene-ui/char-sheet.directive.ts\");\n/* harmony import */ var _storyteller_charsheet_quest_journal_quest_journal_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../storyteller/charsheet/quest-journal/quest-journal.component */ \"./src/app/storyteller/charsheet/quest-journal/quest-journal.component.ts\");\n\n\n\n\n\n\n/**\n * Holder component for {@link SceneRenderer} objects.\n * Is instantiated by {@link SceneUIService} for {@link StorytellerComponent} and injected with the chosen renderer.\n */\nlet SceneUIComponent = class SceneUIComponent {\n    constructor(componentFactoryResolver, cd) {\n        this.componentFactoryResolver = componentFactoryResolver;\n        this.cd = cd;\n        this._onClose = new rxjs__WEBPACK_IMPORTED_MODULE_2__[\"Subject\"]();\n        this.onClose = this._onClose.asObservable();\n        this.showCharSheet = false;\n    }\n    // LIFECYCLE\n    // note: ngOnInit not strictly necessary for this use\n    // ngOnInit() {\n    // }\n    ngAfterViewInit() {\n        this.loadChildComponent(this.childComponentType);\n        this.cd.detectChanges();\n    }\n    ngOnDestroy() {\n        if (this.componentRef) {\n            this.componentRef.destroy();\n        }\n    }\n    // child loading\n    loadChildComponent(componentType) {\n        let componentFactory = this.componentFactoryResolver.resolveComponentFactory(componentType);\n        let viewContainerRef = this.insertionPoint.viewContainerRef;\n        viewContainerRef.clear();\n        this.componentRef = viewContainerRef.createComponent(componentFactory);\n    }\n    // charsheet loading, could probably be merged with loadChildComponent\n    loadCharSheetComponent(componentType) {\n        let componentFactory = this.componentFactoryResolver.resolveComponentFactory(componentType);\n        let viewContainerRef = this.charsheetPoint.viewContainerRef;\n        viewContainerRef.clear();\n        this.componentRef = viewContainerRef.createComponent(componentFactory);\n    }\n    // for dialog-like behaviour, revise\n    onOverlayClicked(evt) {\n        console.warn(\"on overlay click\");\n    }\n    onDialogClicked(evt) {\n        evt.stopPropagation();\n    }\n    doSaveGame() {\n        console.log(\"Saving game state... to outer Storyteller\", this.controller);\n        // WanderGameState.saveToBrowser(this.game);\n        this.controller.doSaveGame();\n    }\n    doLoadGame() {\n        console.log(\"Loading game state... to outer Storyteller\", this.controller);\n        this.controller.doLoadGame();\n    }\n    openCharSheet() {\n        this.loadCharSheetComponent(_storyteller_charsheet_quest_journal_quest_journal_component__WEBPACK_IMPORTED_MODULE_5__[\"QuestJournalComponent\"]);\n        this.controller.openCharSheet();\n        console.log(\"opening char sheet\");\n        this.showCharSheet = true;\n    }\n    closeCharSheet() {\n        console.log(\"closing char sheet\");\n        this.controller.closeCharSheet();\n        this.showCharSheet = false;\n    }\n};\nSceneUIComponent.ctorParameters = () => [\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ComponentFactoryResolver\"] },\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ChangeDetectorRef\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(_insertion_directive__WEBPACK_IMPORTED_MODULE_3__[\"InsertionDirective\"], { static: false })\n], SceneUIComponent.prototype, \"insertionPoint\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(_char_sheet_directive__WEBPACK_IMPORTED_MODULE_4__[\"CharSheetDirective\"], { static: false })\n], SceneUIComponent.prototype, \"charsheetPoint\", void 0);\nSceneUIComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-scene-ui',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./scene-ui.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/scene-ui/scene-ui.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./scene-ui.component.scss */ \"./src/app/scene-ui/scene-ui.component.scss\")).default]\n    })\n], SceneUIComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/scene-ui.module.ts\":\n/*!*********************************************!*\\\n  !*** ./src/app/scene-ui/scene-ui.module.ts ***!\n  \\*********************************************/\n/*! exports provided: SceneUIModule */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneUIModule\", function() { return SceneUIModule; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ \"./node_modules/@angular/common/fesm2015/common.js\");\n/* harmony import */ var _insertion_directive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./insertion.directive */ \"./src/app/scene-ui/insertion.directive.ts\");\n/* harmony import */ var _scene_ui_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scene-ui.component */ \"./src/app/scene-ui/scene-ui.component.ts\");\n/* harmony import */ var _char_sheet_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./char-sheet.directive */ \"./src/app/scene-ui/char-sheet.directive.ts\");\n\n\n\n\n\n\nlet SceneUIModule = class SceneUIModule {\n};\nSceneUIModule = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"NgModule\"])({\n        imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__[\"CommonModule\"]],\n        declarations: [_scene_ui_component__WEBPACK_IMPORTED_MODULE_4__[\"SceneUIComponent\"], _insertion_directive__WEBPACK_IMPORTED_MODULE_3__[\"InsertionDirective\"], _char_sheet_directive__WEBPACK_IMPORTED_MODULE_5__[\"CharSheetDirective\"]],\n        entryComponents: [_scene_ui_component__WEBPACK_IMPORTED_MODULE_4__[\"SceneUIComponent\"]],\n    })\n], SceneUIModule);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/scene-ui.service.ts\":\n/*!**********************************************!*\\\n  !*** ./src/app/scene-ui/scene-ui.service.ts ***!\n  \\**********************************************/\n/*! exports provided: SceneUIService */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneUIService\", function() { return SceneUIService; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scene-ui.component */ \"./src/app/scene-ui/scene-ui.component.ts\");\n/* harmony import */ var _scene_ref__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _scene_injector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scene-injector */ \"./src/app/scene-ui/scene-injector.ts\");\n/* harmony import */ var _storyteller_storyteller_interface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../storyteller/storyteller-interface */ \"./src/app/storyteller/storyteller-interface.ts\");\n/* harmony import */ var _storyteller_charsheet_quest_journal_quest_journal_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../storyteller/charsheet/quest-journal/quest-journal.component */ \"./src/app/storyteller/charsheet/quest-journal/quest-journal.component.ts\");\n\n\n\n\n\n\n\nlet SceneUIService = class SceneUIService {\n    constructor(componentFactoryResolver, appRef, injector) {\n        this.componentFactoryResolver = componentFactoryResolver;\n        this.appRef = appRef;\n        this.injector = injector;\n    }\n    bindStoryTellerUI(stref) {\n        this.stref = stref;\n    }\n    open(componentType, scene) {\n        let sceneref = this.appendSceneUI(scene);\n        this.sceneRef.instance.childComponentType = componentType;\n        return sceneref;\n    }\n    appendSceneUI(scene) {\n        const map = new WeakMap();\n        // map.set(DialogConfig, config);\n        // add the DialogRef to dependency injection\n        const sceneRef = new _scene_ref__WEBPACK_IMPORTED_MODULE_3__[\"SceneRef\"]();\n        sceneRef.setContext(scene);\n        map.set(_scene_ref__WEBPACK_IMPORTED_MODULE_3__[\"SceneRef\"], sceneRef);\n        map.set(_storyteller_storyteller_interface__WEBPACK_IMPORTED_MODULE_5__[\"StorytellerInterface\"], this.stref);\n        // we want to know when somebody called the close mehtod\n        const sub = sceneRef.afterClosed.subscribe(() => {\n            // close the dialog\n            console.log(\"running AFTERCLOSE\");\n            this.removeSceneUI();\n            sub.unsubscribe();\n            console.log(\"getting follower scene \", scene.getFollowingScene());\n            this.stref.checkUpdateSceneRender();\n        });\n        const checksub = sceneRef.sceneCheck.subscribe(() => {\n            console.log(\"running SCENECHECK on scene \", scene);\n            if (scene.sceneFinished()) {\n                console.log(\"scene IS finished!\");\n            }\n            else {\n                console.log(\"scene NOT finished\");\n            }\n            if (scene.sceneFinished()) {\n                sceneRef.close();\n            }\n        });\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(_scene_ui_component__WEBPACK_IMPORTED_MODULE_2__[\"SceneUIComponent\"]);\n        console.warn(\"istancing sceneUI: component factory\", componentFactory, \"params map\", map);\n        const sceneInject = new _scene_injector__WEBPACK_IMPORTED_MODULE_4__[\"SceneInjector\"](this.injector, map);\n        const componentRef = componentFactory.create(sceneInject);\n        console.warn(\"used injector \", sceneInject, \" to add component\", componentRef, \"w hostview\", componentRef.hostView);\n        this.appRef.attachView(componentRef.hostView);\n        const domElem = componentRef.hostView.rootNodes[0];\n        document.body.appendChild(domElem);\n        this.sceneRef = componentRef;\n        // console.log(\"SceneUI.sceneRef: \", this.sceneRef);\n        // console.log(\"SceneUI.sceneRef.instance: \", this.sceneRef.instance);\n        this.sceneRef.instance.controller = this.stref.getStoryteller();\n        // console.log(\"SceneUI.sceneRef.childCompo: \", this.sceneRef.instance.componentRef);\n        this.sceneRef.instance.onClose.subscribe(() => {\n            console.log(\"running ONCLOSE\");\n            this.removeSceneUI();\n            // console.log(\"getting follower scene \", scene.getFollowingScene());\n            // this.storyteller.checkUpdateSceneRender();\n        });\n        // return the dialogRef\n        return sceneRef;\n    }\n    removeSceneUI() {\n        console.log(\"removing scene ref \", this.sceneRef);\n        this.appRef.detachView(this.sceneRef.hostView);\n        this.sceneRef.destroy();\n    }\n    openCharSheet() {\n        const map = new WeakMap();\n        // map.set(DialogConfig, config);\n        // add the DialogRef to dependency injection\n        map.set(_storyteller_storyteller_interface__WEBPACK_IMPORTED_MODULE_5__[\"StorytellerInterface\"], this.stref);\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(_storyteller_charsheet_quest_journal_quest_journal_component__WEBPACK_IMPORTED_MODULE_6__[\"QuestJournalComponent\"]);\n        const injector = new _scene_injector__WEBPACK_IMPORTED_MODULE_4__[\"SceneInjector\"](this.injector, map);\n        const componentRef = componentFactory.create(injector);\n        console.warn(\"used injector \", injector, \" to add component\", componentRef, \"w hostview\", componentRef.hostView);\n        this.appRef.attachView(componentRef.hostView);\n        const domElem = componentRef.hostView.rootNodes[0];\n        document.body.appendChild(domElem);\n        componentRef.instance.controller = this.stref.getStoryteller();\n    }\n};\nSceneUIService.ctorParameters = () => [\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ComponentFactoryResolver\"] },\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ApplicationRef\"] },\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Injector\"] }\n];\nSceneUIService = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Injectable\"])({\n        providedIn: 'root'\n    })\n], SceneUIService);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.scss\":\n/*!**************************************************************************************!*\\\n  !*** ./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.scss ***!\n  \\**************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".scenescreen {\\n  background-color: darkseagreen;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1ibHVlLXNjcmVlbi90ZXN0LWJsdWUtc2NyZWVuLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3QtYmx1ZS1zY3JlZW4vdGVzdC1ibHVlLXNjcmVlbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLDhCQUFBO0FDQUQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3QtYmx1ZS1zY3JlZW4vdGVzdC1ibHVlLXNjcmVlbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zY2VuZXNjcmVlblxue1xuXHRiYWNrZ3JvdW5kLWNvbG9yOlx0XHRcdGRhcmtzZWFncmVlbjtcbn1cbiIsIi5zY2VuZXNjcmVlbiB7XG4gIGJhY2tncm91bmQtY29sb3I6IGRhcmtzZWFncmVlbjtcbn0iXX0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.ts\":\n/*!************************************************************************************!*\\\n  !*** ./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.ts ***!\n  \\************************************************************************************/\n/*! exports provided: TestBlueScreenComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TestBlueScreenComponent\", function() { return TestBlueScreenComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _test_screen_generic_test_screen_generic_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../test-screen-generic/test-screen-generic.component */ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.ts\");\n/* harmony import */ var _storyteller_storyteller_interface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../storyteller/storyteller-interface */ \"./src/app/storyteller/storyteller-interface.ts\");\n\n\n\n\n\nlet TestBlueScreenComponent = class TestBlueScreenComponent extends _test_screen_generic_test_screen_generic_component__WEBPACK_IMPORTED_MODULE_3__[\"TestScreenGenericComponent\"] {\n    constructor(sceneref, sti = null) {\n        super();\n        this.sceneref = sceneref;\n    }\n    ngOnInit() {\n    }\n    onClose() {\n        this.sceneref.close('BYE BLUE');\n    }\n};\nTestBlueScreenComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__[\"SceneRef\"] },\n    { type: _storyteller_storyteller_interface__WEBPACK_IMPORTED_MODULE_4__[\"StorytellerInterface\"] }\n];\nTestBlueScreenComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-test-blue-screen',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./test-blue-screen.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ../test-screen-generic/test-screen-generic.component.scss */ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.scss\")).default, tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./test-blue-screen.component.scss */ \"./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.scss\")).default]\n    })\n], TestBlueScreenComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.scss\":\n/*!****************************************************************************************!*\\\n  !*** ./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.scss ***!\n  \\****************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".scenescreen {\\n  background-color: lightsteelblue;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1ncmVlbi1zY3JlZW4vdGVzdC1ncmVlbi1zY3JlZW4uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1ncmVlbi1zY3JlZW4vdGVzdC1ncmVlbi1zY3JlZW4uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFQyxnQ0FBQTtBQ0FEIiwiZmlsZSI6InNyYy9hcHAvc3RvcnktdGVzdGVyL3NjZW5lcy90ZXN0LWdyZWVuLXNjcmVlbi90ZXN0LWdyZWVuLXNjcmVlbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zY2VuZXNjcmVlblxue1xuXHRiYWNrZ3JvdW5kLWNvbG9yOlx0XHRcdGxpZ2h0c3RlZWxibHVlO1xufVxuIiwiLnNjZW5lc2NyZWVuIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRzdGVlbGJsdWU7XG59Il19 */\");\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.ts\":\n/*!**************************************************************************************!*\\\n  !*** ./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.ts ***!\n  \\**************************************************************************************/\n/*! exports provided: TestGreenScreenComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TestGreenScreenComponent\", function() { return TestGreenScreenComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _test_screen_generic_test_screen_generic_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../test-screen-generic/test-screen-generic.component */ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.ts\");\n/* harmony import */ var _storyteller_storyteller_interface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../storyteller/storyteller-interface */ \"./src/app/storyteller/storyteller-interface.ts\");\n\n\n\n\n\nlet TestGreenScreenComponent = class TestGreenScreenComponent extends _test_screen_generic_test_screen_generic_component__WEBPACK_IMPORTED_MODULE_3__[\"TestScreenGenericComponent\"] {\n    constructor(sceneref, sti = null) {\n        super();\n        this.sceneref = sceneref;\n    }\n    ngOnInit() {\n    }\n    onClose() {\n        this.sceneref.close('BYE GREEN');\n    }\n};\nTestGreenScreenComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__[\"SceneRef\"] },\n    { type: _storyteller_storyteller_interface__WEBPACK_IMPORTED_MODULE_4__[\"StorytellerInterface\"] }\n];\nTestGreenScreenComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-test-green-screen',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./test-green-screen.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ../test-screen-generic/test-screen-generic.component.scss */ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.scss\")).default, tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./test-green-screen.component.scss */ \"./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.scss\")).default]\n    })\n], TestGreenScreenComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.scss\":\n/*!********************************************************************************************!*\\\n  !*** ./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.scss ***!\n  \\********************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".overlay {\\n  display: flex;\\n  flex-direction: column;\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background: rgba(0, 0, 0, 0.7);\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.dialog {\\n  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\\n  background-color: white;\\n  width: 50%;\\n  height: 50%;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1zY3JlZW4tZ2VuZXJpYy90ZXN0LXNjcmVlbi1nZW5lcmljLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3Qtc2NyZWVuLWdlbmVyaWMvdGVzdC1zY3JlZW4tZ2VuZXJpYy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLGVBQUE7RUFDQSxNQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsOEJBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FDQ0Y7O0FERUE7RUFDRSw0RUFBQTtFQUNBLHVCQUFBO0VBQ0EsVUFBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxZQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3Qtc2NyZWVuLWdlbmVyaWMvdGVzdC1zY3JlZW4tZ2VuZXJpYy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5vdmVybGF5IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5kaWFsb2cge1xuICBib3gtc2hhZG93OiAwIDE0cHggMjhweCByZ2JhKDAsIDAsIDAsIDAuMjUpLCAwIDEwcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMjIpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgd2lkdGg6IDUwJTtcbiAgaGVpZ2h0OiA1MCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDhweDtcbn1cbiIsIi5vdmVybGF5IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5kaWFsb2cge1xuICBib3gtc2hhZG93OiAwIDE0cHggMjhweCByZ2JhKDAsIDAsIDAsIDAuMjUpLCAwIDEwcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMjIpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgd2lkdGg6IDUwJTtcbiAgaGVpZ2h0OiA1MCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDhweDtcbn0iXX0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.ts\":\n/*!******************************************************************************************!*\\\n  !*** ./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.ts ***!\n  \\******************************************************************************************/\n/*! exports provided: TestScreenGenericComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TestScreenGenericComponent\", function() { return TestScreenGenericComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\n// @Component({\n// \tselector: 'app-test-screen-generic',\n// \ttemplateUrl: './test-screen-generic.component.html',\n// \tstyleUrls: ['./test-screen-generic.component.scss']\n// })\nclass TestScreenGenericComponent {\n    constructor() {\n        this.stint = null;\n    }\n    ngOnInit() {\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/story-tester.component.scss\":\n/*!**********************************************************!*\\\n  !*** ./src/app/story-tester/story-tester.component.scss ***!\n  \\**********************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#storyteller-outside {\\n  background-color: #9a93ff;\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n#storyteller-tester {\\n  position: fixed;\\n  top: 8px;\\n  left: 8px;\\n  right: 8px;\\n  bottom: 8px;\\n  /*background-color:\\t\\tlightgreen;*/\\n  background-image: url(\\\"/assets/ui/temporaryparchment.jpg\\\");\\n}\\n\\n#scenerender-test {\\n  background-color: grey;\\n  width: 200px;\\n  height: 300px;\\n  border: 2px solid white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zdG9yeS10ZXN0ZXIuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N0b3J5LXRlc3Rlci9zdG9yeS10ZXN0ZXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFQyx5QkFBQTtFQUNBLGVBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0FDQUQ7O0FESUE7RUFFQyxlQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLGlDQUFBO0VBQ0EsMERBQUE7QUNGRDs7QURPQTtFQUdDLHNCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtBQ05EIiwiZmlsZSI6InNyYy9hcHAvc3RvcnktdGVzdGVyL3N0b3J5LXRlc3Rlci5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNzdG9yeXRlbGxlci1vdXRzaWRlXG57XG5cdGJhY2tncm91bmQtY29sb3I6ICM5YTkzZmY7XG5cdHBvc2l0aW9uOlx0XHRcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHRcdFx0MDtcblx0bGVmdDpcdFx0XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0XHRcdDA7XG5cdGJvdHRvbTpcdFx0XHRcdFx0MDtcbn1cblxuXG4jc3Rvcnl0ZWxsZXItdGVzdGVyXG57XG5cdHBvc2l0aW9uOlx0XHRcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHRcdFx0OHB4O1xuXHRsZWZ0Olx0XHRcdFx0XHQ4cHg7XG5cdHJpZ2h0Olx0XHRcdFx0XHQ4cHg7XG5cdGJvdHRvbTpcdFx0XHRcdFx0OHB4O1xuXHQvKmJhY2tncm91bmQtY29sb3I6XHRcdGxpZ2h0Z3JlZW47Ki9cblx0YmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy91aS90ZW1wb3JhcnlwYXJjaG1lbnQuanBnXCIpO1xuXG59XG5cblxuI3NjZW5lcmVuZGVyLXRlc3RcbntcblxuXHRiYWNrZ3JvdW5kLWNvbG9yOlx0XHRncmV5O1xuXHR3aWR0aDpcdFx0XHRcdFx0MjAwcHg7XG5cdGhlaWdodDpcdFx0XHRcdFx0MzAwcHg7XG5cdGJvcmRlcjpcdFx0XHRcdFx0MnB4IHNvbGlkIHdoaXRlO1xufVxuXG5cbiIsIiNzdG9yeXRlbGxlci1vdXRzaWRlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzlhOTNmZjtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbiNzdG9yeXRlbGxlci10ZXN0ZXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogOHB4O1xuICBsZWZ0OiA4cHg7XG4gIHJpZ2h0OiA4cHg7XG4gIGJvdHRvbTogOHB4O1xuICAvKmJhY2tncm91bmQtY29sb3I6XHRcdGxpZ2h0Z3JlZW47Ki9cbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy91aS90ZW1wb3JhcnlwYXJjaG1lbnQuanBnXCIpO1xufVxuXG4jc2NlbmVyZW5kZXItdGVzdCB7XG4gIGJhY2tncm91bmQtY29sb3I6IGdyZXk7XG4gIHdpZHRoOiAyMDBweDtcbiAgaGVpZ2h0OiAzMDBweDtcbiAgYm9yZGVyOiAycHggc29saWQgd2hpdGU7XG59Il19 */\");\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/story-tester.component.ts\":\n/*!********************************************************!*\\\n  !*** ./src/app/story-tester/story-tester.component.ts ***!\n  \\********************************************************/\n/*! exports provided: StoryTesterComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StoryTesterComponent\", function() { return StoryTesterComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ui_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scene-ui/scene-ui.service */ \"./src/app/scene-ui/scene-ui.service.ts\");\n/* harmony import */ var _scenes_test_blue_screen_test_blue_screen_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scenes/test-blue-screen/test-blue-screen.component */ \"./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.ts\");\n/* harmony import */ var _scenes_test_green_screen_test_green_screen_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scenes/test-green-screen/test-green-screen.component */ \"./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.ts\");\n/* harmony import */ var _tester_scene__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tester-scene */ \"./src/app/story-tester/tester-scene.ts\");\n/* harmony import */ var _storyteller_storyteller_interface__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../storyteller/storyteller-interface */ \"./src/app/storyteller/storyteller-interface.ts\");\n\n\n\n\n\n\n\nlet StoryTesterComponent = class StoryTesterComponent {\n    constructor(sceneui, sti = null) {\n        this.sceneui = sceneui;\n    }\n    ngOnInit() {\n    }\n    loadBlueScreen() {\n        let scene = new _tester_scene__WEBPACK_IMPORTED_MODULE_5__[\"TesterScene\"]();\n        let ref = this.sceneui.open(_scenes_test_blue_screen_test_blue_screen_component__WEBPACK_IMPORTED_MODULE_3__[\"TestBlueScreenComponent\"], scene);\n        ref.afterClosed.subscribe(result => {\n            console.log('Scene (BLUE) closed', result);\n        });\n    }\n    loadGreenScreen() {\n        let scene = new _tester_scene__WEBPACK_IMPORTED_MODULE_5__[\"TesterScene\"]();\n        let ref = this.sceneui.open(_scenes_test_green_screen_test_green_screen_component__WEBPACK_IMPORTED_MODULE_4__[\"TestGreenScreenComponent\"], scene);\n        ref.afterClosed.subscribe(result => {\n            console.log('Scene (GREEN) closed', result);\n        });\n    }\n};\nStoryTesterComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ui_service__WEBPACK_IMPORTED_MODULE_2__[\"SceneUIService\"] },\n    { type: _storyteller_storyteller_interface__WEBPACK_IMPORTED_MODULE_6__[\"StorytellerInterface\"] }\n];\nStoryTesterComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-story-tester',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./story-tester.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/story-tester.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./story-tester.component.scss */ \"./src/app/story-tester/story-tester.component.scss\")).default]\n    })\n], StoryTesterComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/tester-scene.ts\":\n/*!**********************************************!*\\\n  !*** ./src/app/story-tester/tester-scene.ts ***!\n  \\**********************************************/\n/*! exports provided: TesterScene */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TesterScene\", function() { return TesterScene; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _rpg_engine_wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../rpg-engine/wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\n/**\n * Empty scene object so test layouts can work without loading an actual game\n */\nclass TesterScene extends _rpg_engine_wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    constructor() {\n        super(null);\n    }\n    sceneFinished() {\n        return false;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/charsheet/quest-journal/quest-journal.component.scss\":\n/*!**********************************************************************************!*\\\n  !*** ./src/app/storyteller/charsheet/quest-journal/quest-journal.component.scss ***!\n  \\**********************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3N0b3J5dGVsbGVyL2NoYXJzaGVldC9xdWVzdC1qb3VybmFsL3F1ZXN0LWpvdXJuYWwuY29tcG9uZW50LnNjc3MifQ== */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/charsheet/quest-journal/quest-journal.component.ts\":\n/*!********************************************************************************!*\\\n  !*** ./src/app/storyteller/charsheet/quest-journal/quest-journal.component.ts ***!\n  \\********************************************************************************/\n/*! exports provided: QuestJournalComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"QuestJournalComponent\", function() { return QuestJournalComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _storyteller_interface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../storyteller-interface */ \"./src/app/storyteller/storyteller-interface.ts\");\n\n\n\nlet QuestJournalComponent = class QuestJournalComponent {\n    constructor(storytellerinterface = null) {\n        console.warn(\"creating charsheet w controller interface\", storytellerinterface);\n        this.controller = storytellerinterface.getStoryteller();\n        this.game = this.controller.game;\n    }\n    ngOnInit() {\n        console.warn(\"showing charsheet w controller\", this.controller);\n    }\n};\nQuestJournalComponent.ctorParameters = () => [\n    { type: _storyteller_interface__WEBPACK_IMPORTED_MODULE_2__[\"StorytellerInterface\"] }\n];\nQuestJournalComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-quest-journal',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./quest-journal.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/charsheet/quest-journal/quest-journal.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./quest-journal.component.scss */ \"./src/app/storyteller/charsheet/quest-journal/quest-journal.component.scss\")).default]\n    })\n], QuestJournalComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/journey-step/journey-step.component.scss\":\n/*!*****************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/journey-step/journey-step.component.scss ***!\n  \\*****************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#journeyrender {\\n  position: fixed;\\n  top: 8px;\\n  left: 8px;\\n  right: 8px;\\n  bottom: 30vh;\\n  border: 1px dashed black;\\n  overflow: auto;\\n}\\n\\n#viewrender {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n#journeyinfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 28vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\nbutton.journeychoice {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9qb3VybmV5LXN0ZXAvam91cm5leS1zdGVwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvam91cm5leS1zdGVwL2pvdXJuZXktc3RlcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLFVBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7RUFDQSxjQUFBO0FDQUQ7O0FER0E7RUFFQyxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7QUNERDs7QURJQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDSEQ7O0FET0E7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ05EIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL2pvdXJuZXktc3RlcC9qb3VybmV5LXN0ZXAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjam91cm5leXJlbmRlclxue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHQ4cHg7XG5cdGxlZnQ6XHRcdFx0OHB4O1xuXHRyaWdodDpcdFx0XHQ4cHg7XG5cdGJvdHRvbTpcdFx0XHQzMHZoO1xuXHRib3JkZXI6XHRcdFx0MXB4IGRhc2hlZCBibGFjaztcblx0b3ZlcmZsb3c6XHRcdGF1dG87XG59XG5cbiN2aWV3cmVuZGVyXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblx0dG9wOlx0XHRcdDA7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG59XG5cbiNqb3VybmV5aW5mb1xue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdGhlaWdodDpcdFx0XHQyOHZoO1xuXHRmb250LXNpemU6XHRcdDh2aDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG59XG5cblxuYnV0dG9uLmpvdXJuZXljaG9pY2Vcbntcblx0Ym9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0cGFkZGluZzpcdFx0MnB0IDhwdDtcblxuXHRmb250LXNpemU6XHRcdDR2aDtcbn1cbiIsIiNqb3VybmV5cmVuZGVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDhweDtcbiAgbGVmdDogOHB4O1xuICByaWdodDogOHB4O1xuICBib3R0b206IDMwdmg7XG4gIGJvcmRlcjogMXB4IGRhc2hlZCBibGFjaztcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG5cbiN2aWV3cmVuZGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbiNqb3VybmV5aW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiAyOHZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5idXR0b24uam91cm5leWNob2ljZSB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBwYWRkaW5nOiAycHQgOHB0O1xuICBmb250LXNpemU6IDR2aDtcbn0iXX0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/journey-step/journey-step.component.ts\":\n/*!***************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/journey-step/journey-step.component.ts ***!\n  \\***************************************************************************/\n/*! exports provided: JourneyStepComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"JourneyStepComponent\", function() { return JourneyStepComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _lib_walk_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/walk-renderer */ \"./src/app/storyteller/scenes/lib/walk-renderer.ts\");\n\n\n\n\n\nlet JourneyStepComponent = class JourneyStepComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_2__[\"SceneRenderer\"] {\n    constructor(sceneref) {\n        super(sceneref);\n        this.sceneref = sceneref;\n        this.journeyscene = this.sceneref.scene;\n        console.log(\"journey path: \", JSON.stringify(this.journeyscene.course));\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n        this.viewrenderer = new _lib_walk_renderer__WEBPACK_IMPORTED_MODULE_4__[\"WalkRenderer\"](this.journeyscene.game.worldmap, this.renderview);\n        let ui = this;\n        this.viewrenderer.loadAssets(function () {\n            ui.renderStep();\n        });\n    }\n    setCamp() {\n        console.log(\"clicked SET CAMP\");\n    }\n    continueJourney() {\n        console.log(\"clicked JOURNEY ONWARDs\");\n        this.journeyscene.step();\n        this.journeyscene.game.hero.setCoordinates(this.journeyscene.getCurrentCoordinates());\n        if (!this.journeyscene.sceneFinished()) {\n            this.renderStep();\n        }\n        else {\n            this.sceneref.triggerSceneCheck();\n        }\n    }\n    renderStep() {\n        const vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n        this.viewrenderer.renderView(this.journeyscene.getCurrentCoordinates(), vector);\n    }\n    showMap() {\n        console.log(\"clicked SHOW MAP\");\n    }\n    getDirectionDescription() {\n        let vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n        let dirstring = \"\";\n        if (vector[1] > 0) {\n            dirstring += \"South\";\n        }\n        else if (vector[1] < 0) {\n            dirstring += \"North\";\n        }\n        if (vector[0] > 0) {\n            dirstring += \"East\";\n        }\n        else if (vector[0] < 0) {\n            dirstring += \"West\";\n        }\n        return dirstring;\n    }\n};\nJourneyStepComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__[\"SceneRef\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"renderholder\", { static: false })\n], JourneyStepComponent.prototype, \"renderholder\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"renderview\", { static: false })\n], JourneyStepComponent.prototype, \"renderview\", void 0);\nJourneyStepComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-journey-step',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./journey-step.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/journey-step/journey-step.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./journey-step.component.scss */ \"./src/app/storyteller/scenes/journey-step/journey-step.component.scss\")).default]\n    })\n], JourneyStepComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/lib/art-renderer.ts\":\n/*!********************************************************!*\\\n  !*** ./src/app/storyteller/scenes/lib/art-renderer.ts ***!\n  \\********************************************************/\n/*! exports provided: ArtRenderer */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ArtRenderer\", function() { return ArtRenderer; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! konva */ \"./node_modules/konva/lib/index.js\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(konva__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass ArtRenderer {\n    constructor(target) {\n        console.log(\"creating art renderer on element \", target);\n        this.renderview = target;\n    }\n    loadRenderImage(urlpath) {\n        console.log(\"trying render on \", this.renderview, \"for\", urlpath);\n        let ui = this;\n        let imageObj = new Image();\n        imageObj.onload = function () {\n            ui.renderLoadedImage(imageObj);\n        };\n        imageObj.src = urlpath;\n    }\n    renderLoadedImage(image) {\n        const VPW = this.renderview.nativeElement.clientWidth;\n        const VPH = this.renderview.nativeElement.clientHeight;\n        let stage = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Stage({\n            container: this.renderview.nativeElement.id,\n            width: VPW,\n            height: VPH,\n        });\n        let composer = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Layer({});\n        stage.add(composer);\n        let widthratio = image.width / VPW;\n        let heightratio = image.height / VPH;\n        let ratio = Math.max(widthratio, heightratio);\n        let renderwidth = image.width / ratio;\n        let renderheight = image.height / ratio;\n        let msg = `rendering ${image.width}*${image.height} backdrop on ${VPW}*${VPH} stage as ${renderwidth}*${renderheight} px`;\n        console.log(msg);\n        let backdrop = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Image({\n            image: image,\n            x: (VPW - renderwidth) / 2,\n            y: (VPH - renderheight) / 2,\n            width: renderwidth,\n            height: renderheight\n        });\n        console.log(\"adding\", backdrop, \"to\", composer);\n        composer.add(backdrop);\n        composer.batchDraw();\n        function parchifyWhite(imageData) {\n            // let ctx = canvas.getContext('2d');\n            // let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n            let nPixels = imageData.data.length;\n            for (let i = 0; i < nPixels; i += 4) {\n                let r = imageData.data[i];\n                let g = imageData.data[i + 1];\n                let b = imageData.data[i + 2];\n                let a = imageData.data[i + 3];\n                if (a > 200) {\n                    // using brightness (0.21  R) + (0.72  G) + (0.07  B)\n                    let brightness = (0.21 * r) + (0.72 * g) + (0.07 * b);\n                    let greyavrg = brightness / 3;\n                    greyavrg = Math.round(greyavrg / 32) * 32;\n                    imageData.data[i] = greyavrg;\n                    imageData.data[i + 1] = greyavrg;\n                    imageData.data[i + 2] = greyavrg;\n                    imageData.data[i + 3] = 255 - brightness;\n                }\n            }\n        }\n        composer.cache();\n        composer.filters([konva__WEBPACK_IMPORTED_MODULE_1___default.a.Filters.Brighten]);\n        composer.brightness(0.8);\n        composer.filters([parchifyWhite]);\n        composer.batchDraw();\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/lib/walk-renderer.ts\":\n/*!*********************************************************!*\\\n  !*** ./src/app/storyteller/scenes/lib/walk-renderer.ts ***!\n  \\*********************************************************/\n/*! exports provided: WalkRenderer */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WalkRenderer\", function() { return WalkRenderer; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! konva */ \"./node_modules/konva/lib/index.js\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(konva__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass WalkRenderer {\n    constructor(worldmap, target) {\n        // NOTE: these could be configured via a tileset theme\n        // TILESBYTERRRAIN = {\n        // \t\"M\": \"basetilemountain400.png\",\n        // \t\"H\": \"basetilehills400.png\",\n        // \t\"F\": \"basetileforest400.png\",\n        // \t\"P\": \"basetileplains400.png\",\n        // };\n        this.TILESBYTERRRAIN = {\n            \"M\": \"basetilemountain.png\",\n            \"H\": \"basetilehills.png\",\n            \"F\": \"basetileforest.png\",\n            \"P\": \"basetileplains.png\",\n        };\n        this.PATH_TILES = \"assets/graph/fptiles/\";\n        this.MARKERSBYID = {\n            \"towns\": \"basetilecitadel.png\",\n        };\n        this.PATH_MARKERS = \"assets/graph/fptiles/\";\n        this.EXTRAIMGS = {\n            // \"skybgr\": \"/assets/graph/bgr/sunspearsky.jpg\",\n            \"skybgr\": \"assets/graph/bgr/sunspearsky_gscale.png\"\n        };\n        this.worldmap = worldmap;\n        this.renderview = target;\n        console.log(this.renderview);\n        console.log(\"render view id\", this.renderview.nativeElement.id);\n    }\n    loadAssets(callback) {\n        this.terraintiles = new Map();\n        this.tileimages = new Map();\n        this.markerfiles = new Map();\n        this.markerimages = new Map();\n        this.extrafiles = new Map();\n        this.extraimages = new Map();\n        for (let key in this.TILESBYTERRRAIN) {\n            this.terraintiles.set(key, this.PATH_TILES + this.TILESBYTERRRAIN[key]);\n        }\n        this.tileimages = new Map();\n        for (let terrain of this.terraintiles.keys()) {\n            this.tileimages.set(terrain, null);\n        }\n        for (let key in this.MARKERSBYID) {\n            this.markerfiles.set(key, this.PATH_MARKERS + this.MARKERSBYID[key]);\n        }\n        this.markerimages = new Map();\n        for (let markerid of this.markerfiles.keys()) {\n            this.markerimages.set(markerid, null);\n        }\n        for (let key in this.EXTRAIMGS) {\n            this.extrafiles.set(key, this.EXTRAIMGS[key]);\n        }\n        this.extraimages = new Map();\n        for (let fileid of this.extrafiles.keys()) {\n            this.extraimages.set(fileid, null);\n        }\n        // LOADING ASSETS\n        let ui = this;\n        for (let terrain of this.terraintiles.keys()) {\n            let imageObj = new Image();\n            imageObj.onload = function () {\n                ui.tileimages.set(terrain, imageObj);\n                ui.checkReadyRender(callback);\n            };\n            imageObj.src = this.terraintiles.get(terrain);\n        }\n        for (let markerid of this.markerfiles.keys()) {\n            let imageObj = new Image();\n            imageObj.onload = function () {\n                ui.markerimages.set(markerid, imageObj);\n                ui.checkReadyRender(callback);\n            };\n            imageObj.src = this.markerfiles.get(markerid);\n        }\n        for (let fileid of this.extrafiles.keys()) {\n            let imageObj = new Image();\n            imageObj.onload = function () {\n                ui.extraimages.set(fileid, imageObj);\n                ui.checkReadyRender(callback);\n            };\n            imageObj.src = this.extrafiles.get(fileid);\n        }\n    }\n    checkReadyRender(callback) {\n        for (let terrain of this.tileimages.keys()) {\n            if (this.tileimages.get(terrain) == null) {\n                // console.log(\"missing maptile\", terrain, \"wait\");\n                return;\n            }\n        }\n        for (let markerid of this.markerimages.keys()) {\n            if (this.markerimages.get(markerid) == null) {\n                // console.log(\"missing mapmarker\", markerid, \"wait\");\n                return;\n            }\n        }\n        for (let fileid of this.extraimages.keys()) {\n            if (this.extraimages.get(fileid) == null) {\n                // console.log(\"missing mapmarker\", markerid, \"wait\");\n                return;\n            }\n        }\n        callback();\n    }\n    renderView(pos, vector) {\n        // console.log(\"rendering step \", this.journeyscene.stepid);\n        // const vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n        // console.log(\"checking step view in dir \", vector, \"from\", this.journeyscene.getCurrentCoordinates().getCoords());\n        const FOV = 90;\n        let rect = this.renderview.nativeElement.getBoundingClientRect();\n        console.log(\"RECT:\", rect);\n        const VPW = this.renderview.nativeElement.clientWidth;\n        const VPH = this.renderview.nativeElement.clientHeight;\n        const PANWIDTH = VPW / (FOV / 360);\n        console.log(\"using fov\", FOV, \"on \" + VPW + \"*\" + VPH + \": pan to \" + PANWIDTH + \"px\");\n        const MAXDIST = 9;\n        let rendergrid = this.getRenderGrid(pos, vector, MAXDIST);\n        let stage = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Stage({\n            container: this.renderview.nativeElement.id,\n            width: VPW,\n            height: VPH,\n        });\n        // console.log(rendergrid);\n        // NOTE: following works ONLY with 90 FOV\n        // also we are actually half step inside each tile but since dist and angle stay the same we ignore\n        const HCENTER = VPW * 0.5;\n        const VCENTER = VPH * 0.4;\n        const PHEIGHT = VPH - VCENTER;\n        let tilelayer = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Layer({});\n        stage.add(tilelayer);\n        // BGR + CUT\n        let bgrimg = this.extraimages.get(\"skybgr\");\n        // let filename = terraintiles.get(terrain);\n        let bgr = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Image({\n            image: bgrimg,\n            x: 0,\n            y: 0,\n            width: VPW,\n            height: VPH * 0.8\n        });\n        tilelayer.add(bgr);\n        let bgrcut = VCENTER + PHEIGHT / MAXDIST;\n        let rect1 = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Rect({\n            x: 0,\n            y: bgrcut,\n            width: VPW,\n            height: VPH - (bgrcut),\n            fill: 'white',\n        });\n        // add the shape to the layer\n        tilelayer.add(rect1);\n        for (let gp of rendergrid) {\n            // field size at dist:\n            // 1: 1, 2: 3, 3: 5, 4: 7\n            // y = x + (x-1)\n            let fsize = gp.dist + (gp.dist - 1);\n            let gsize = VPH / fsize;\n            gsize = VPW / fsize;\n            // let relpos = gp.angrel - 0.5;\n            // let hpixpos = HCENTER + ();\n            let hpixpos = gp.angrel * VPW - (gsize * 0.5);\n            hpixpos = VPW - hpixpos - gsize; // fix mirroring\n            let vpixpos = (VCENTER + PHEIGHT / gp.dist) - gsize;\n            let terrain = this.worldmap.getTerrainAt(gp.coords[0], gp.coords[1]);\n            let loc = this.worldmap.getLocationAt(gp.coords);\n            if (terrain == null && loc == null) {\n                continue;\n            }\n            let tileimg;\n            if (terrain != null) {\n                tileimg = this.tileimages.get(terrain);\n                // let filename = terraintiles.get(terrain);\n                let tile = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Image({\n                    image: tileimg,\n                    x: hpixpos,\n                    y: vpixpos,\n                    width: gsize,\n                    height: gsize\n                });\n                tilelayer.add(tile);\n            }\n            if (loc != null) {\n                tileimg = this.markerimages.get(loc.loctype);\n                // let filename = terraintiles.get(terrain);\n                let tile = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Image({\n                    image: tileimg,\n                    x: hpixpos,\n                    y: vpixpos,\n                    width: gsize,\n                    height: gsize\n                });\n                tilelayer.add(tile);\n            }\n        }\n        tilelayer.batchDraw();\n        function parchifyWhite(imageData) {\n            // let ctx = canvas.getContext('2d');\n            // let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n            let nPixels = imageData.data.length;\n            for (let i = 0; i < nPixels; i += 4) {\n                let r = imageData.data[i];\n                let g = imageData.data[i + 1];\n                let b = imageData.data[i + 2];\n                let a = imageData.data[i + 3];\n                if (a > 200) {\n                    // using brightness (0.21  R) + (0.72  G) + (0.07  B)\n                    // instead of average ((r + g + b) / 3)\n                    imageData.data[i + 3] = 255 - ((0.21 * r) + (0.72 * g) + (0.07 * b));\n                }\n            }\n            //\n            // for (let i = 3; i < nPixels; i += 4) {\n            // \tif (imageData.data[i] > 0) {\n            // \t\timageData.data[i] = 255;\n            // \t}\n            // }\n            // ctx.clearRect(0, 0, canvas.width, canvas.height);\n            // ctx.putImageData(imageData, 0, 0);\n            // return canvas;\n        }\n        tilelayer.cache();\n        tilelayer.filters([parchifyWhite]);\n        // tilelayer.filters([Konva.Filters.Brighten]);\n        // tilelayer.brightness(0.8);\n        tilelayer.batchDraw();\n    }\n    getRenderGrid(pov, vector, maxdist) {\n        // const pov = this.journeyscene.getCurrentCoordinates();\n        const povX = pov.x;\n        const povY = pov.y;\n        // const vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n        const angle = WalkRenderer.calcAngleDegreesEast(vector[0], vector[1]);\n        // base angle is EAST\n        const FOV = 90;\n        let angmin = ((angle - FOV / 2) + 360) % 360;\n        let angmax = ((angle + FOV / 2) + 360) % 360;\n        let angflip = angmin > angmax;\n        if (angflip) {\n            angmax += 360;\n        }\n        let angv = (angle + 360) % 360;\n        let angdiff = angmax - angmin;\n        console.log(\"dir angle is \", angv, \"checking between \", angmin, angmax);\n        let totvis = 0;\n        let tfrom = new Date().getTime();\n        let rendergrid = [];\n        for (let x = povX - maxdist; x <= povX + maxdist; x++) {\n            for (let y = povY - maxdist; y <= povY + maxdist; y++) {\n                if (x === povX && y === povY) {\n                    continue;\n                }\n                let deltaX = x - povX;\n                let deltaY = y - povY;\n                let angr = WalkRenderer.calcAngleDegreesEast(deltaX, deltaY);\n                angr = (angr + 360) % 360;\n                if (angflip && angr <= 45) {\n                    angr += 360;\n                }\n                if (angmin <= angr && angr <= angmax) {\n                    totvis++;\n                    let angrel = (angmax - angr) / FOV;\n                    let dist = Math.sqrt((Math.pow(deltaX, 2)) + (Math.pow(deltaY, 2)));\n                    if (dist <= maxdist) {\n                        // we are using a SQUARE box to get the points\n                        // console.log(x, y, angr);\n                        rendergrid.push({ coords: [x, y], angrel: angrel, dist: dist });\n                    }\n                }\n            }\n        }\n        let tto = new Date().getTime();\n        console.log(\"tot vis tiles\", totvis, tto - tfrom);\n        // sorting far to close THEN left to right, second sort is not strictily necessary\n        rendergrid.sort(function (a, b) {\n            // if (a.dist !== b.dist)\n            // {\n            // \treturn b.dist - a.dist;\n            // }\n            // else {\n            // \treturn a.angrel - b.angrel;\n            // }\n            return b.dist - a.dist;\n        });\n        return rendergrid;\n    }\n    static calcAngleDegreesEast(x, y) {\n        return Math.atan2(y, x) * 180 / Math.PI;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/narration-pages/narration-pages.component.scss\":\n/*!***********************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/narration-pages/narration-pages.component.scss ***!\n  \\***********************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#narration_render {\\n  position: fixed;\\n  left: 16px;\\n  top: 24px;\\n  right: 24px;\\n  height: 42vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n#narration_info {\\n  text-align: center;\\n  position: fixed;\\n  bottom: 16px;\\n  left: 16px;\\n  right: 16px;\\n}\\n\\nbutton.pageturn {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n  background-color: transparent;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9uYXJyYXRpb24tcGFnZXMvbmFycmF0aW9uLXBhZ2VzLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvbmFycmF0aW9uLXBhZ2VzL25hcnJhdGlvbi1wYWdlcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUdDLGVBQUE7RUFDQSxVQUFBO0VBQ0EsU0FBQTtFQUNBLFdBQUE7RUFFQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDSEQ7O0FET0E7RUFFQyxrQkFBQTtFQUVBLGVBQUE7RUFDQSxZQUFBO0VBQ0EsVUFBQTtFQUNBLFdBQUE7QUNORDs7QURTQTtFQUtDLHVCQUFBO0VBQ0EsZ0JBQUE7RUFFQSxjQUFBO0VBRUEsNkJBQUE7QUNaRCIsImZpbGUiOiJzcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9uYXJyYXRpb24tcGFnZXMvbmFycmF0aW9uLXBhZ2VzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI25hcnJhdGlvbl9yZW5kZXJcbntcblxuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MTZweDtcblx0dG9wOlx0XHRcdDI0cHg7XG5cdHJpZ2h0Olx0XHRcdDI0cHg7XG5cblx0aGVpZ2h0Olx0XHRcdDQydmg7XG5cdGZvbnQtc2l6ZTpcdFx0OHZoO1xuXG5cdHRleHQtYWxpZ246XHRcdGNlbnRlcjtcbn1cblxuXG4jbmFycmF0aW9uX2luZm9cbntcblx0dGV4dC1hbGlnbjogY2VudGVyO1xuXG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0Ym90dG9tOlx0XHRcdDE2cHg7XG5cdGxlZnQ6XHRcdFx0MTZweDtcblx0cmlnaHQ6XHRcdFx0MTZweDtcbn1cblxuYnV0dG9uLnBhZ2V0dXJuXG57XG5cblxuXG5cdGJvcmRlcjpcdFx0XHQxcHggc29saWQgYmxhY2s7XG5cdHBhZGRpbmc6XHRcdDJwdCA4cHQ7XG5cblx0Zm9udC1zaXplOlx0XHQ0dmg7XG5cblx0YmFja2dyb3VuZC1jb2xvcjpcdHRyYW5zcGFyZW50O1xufVxuIiwiI25hcnJhdGlvbl9yZW5kZXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGxlZnQ6IDE2cHg7XG4gIHRvcDogMjRweDtcbiAgcmlnaHQ6IDI0cHg7XG4gIGhlaWdodDogNDJ2aDtcbiAgZm9udC1zaXplOiA4dmg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuI25hcnJhdGlvbl9pbmZvIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGJvdHRvbTogMTZweDtcbiAgbGVmdDogMTZweDtcbiAgcmlnaHQ6IDE2cHg7XG59XG5cbmJ1dHRvbi5wYWdldHVybiB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBwYWRkaW5nOiAycHQgOHB0O1xuICBmb250LXNpemU6IDR2aDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59Il19 */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/narration-pages/narration-pages.component.ts\":\n/*!*********************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/narration-pages/narration-pages.component.ts ***!\n  \\*********************************************************************************/\n/*! exports provided: NarrationPagesComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NarrationPagesComponent\", function() { return NarrationPagesComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n\n\n\n\nlet NarrationPagesComponent = class NarrationPagesComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_3__[\"SceneRenderer\"] {\n    constructor(sceneref) {\n        super(sceneref);\n        this.sceneref = sceneref;\n        this.tale = this.sceneref.scene;\n        console.log(\"tale info\", this.tale);\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n    }\n    readForward() {\n        this.tale.advanceNarration();\n        this.lastpage = this.tale.sceneFinished();\n    }\n    readBackwards() {\n        this.tale.backtrackNarration();\n    }\n    readOut() {\n        if (this.tale.sceneFinished()) {\n            this.sceneref.triggerSceneCheck();\n        }\n    }\n};\nNarrationPagesComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__[\"SceneRef\"] }\n];\nNarrationPagesComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-narration-pages',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./narration-pages.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/narration-pages/narration-pages.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./narration-pages.component.scss */ \"./src/app/storyteller/scenes/narration-pages/narration-pages.component.scss\")).default]\n    })\n], NarrationPagesComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/passage-through/passage-through.component.scss\":\n/*!***********************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/passage-through/passage-through.component.scss ***!\n  \\***********************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".trailview {\\n  position: fixed;\\n  left: 1vw;\\n  right: 1vw;\\n  top: 1vw;\\n  height: 48vh;\\n  border: 2px dashed black;\\n}\\n\\n.trailcontext {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 48vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n.trailcontrols {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9wYXNzYWdlLXRocm91Z2gvcGFzc2FnZS10aHJvdWdoLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvcGFzc2FnZS10aHJvdWdoL3Bhc3NhZ2UtdGhyb3VnaC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxTQUFBO0VBQ0EsVUFBQTtFQUNBLFFBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7QUNBRDs7QURHQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDRkQ7O0FETUE7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ0xEIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3Bhc3NhZ2UtdGhyb3VnaC9wYXNzYWdlLXRocm91Z2guY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudHJhaWx2aWV3XG57XG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0bGVmdDpcdFx0XHQxdnc7XG5cdHJpZ2h0Olx0XHRcdDF2dztcblx0dG9wOlx0XHRcdDF2dztcblx0aGVpZ2h0Olx0XHRcdDQ4dmg7XG5cdGJvcmRlcjpcdFx0XHQycHggZGFzaGVkIGJsYWNrO1xufVxuXG4udHJhaWxjb250ZXh0XG57XG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0bGVmdDpcdFx0XHQwO1xuXHRyaWdodDpcdFx0XHQwO1xuXHRib3R0b206XHRcdFx0MDtcblx0aGVpZ2h0Olx0XHRcdDQ4dmg7XG5cdGZvbnQtc2l6ZTpcdFx0OHZoO1xuXG5cdHRleHQtYWxpZ246XHRcdGNlbnRlcjtcbn1cblxuXG4udHJhaWxjb250cm9sc1xue1xuXHRib3JkZXI6XHRcdFx0MXB4IHNvbGlkIGJsYWNrO1xuXHRwYWRkaW5nOlx0XHQycHQgOHB0O1xuXG5cdGZvbnQtc2l6ZTpcdFx0NHZoO1xufVxuIiwiLnRyYWlsdmlldyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMXZ3O1xuICByaWdodDogMXZ3O1xuICB0b3A6IDF2dztcbiAgaGVpZ2h0OiA0OHZoO1xuICBib3JkZXI6IDJweCBkYXNoZWQgYmxhY2s7XG59XG5cbi50cmFpbGNvbnRleHQge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG4gIGhlaWdodDogNDh2aDtcbiAgZm9udC1zaXplOiA4dmg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnRyYWlsY29udHJvbHMge1xuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgcGFkZGluZzogMnB0IDhwdDtcbiAgZm9udC1zaXplOiA0dmg7XG59Il19 */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/passage-through/passage-through.component.ts\":\n/*!*********************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/passage-through/passage-through.component.ts ***!\n  \\*********************************************************************************/\n/*! exports provided: PassageThroughComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PassageThroughComponent\", function() { return PassageThroughComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n\n\n\n\nlet PassageThroughComponent = class PassageThroughComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_2__[\"SceneRenderer\"] {\n    constructor(sceneref) {\n        super(sceneref);\n        this.sceneref = sceneref;\n        this.trail = this.sceneref.scene;\n    }\n    isTrailing() {\n        return this.trail.progress > -1 && this.trail.progress < this.trail.passage.length();\n    }\n    journeyOnwards() {\n        this.trail.step();\n    }\n    leaveTrail() {\n        this.trail.leaving = true;\n        this.sceneref.triggerSceneCheck();\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n    }\n};\nPassageThroughComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__[\"SceneRef\"] }\n];\nPassageThroughComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-passage-through',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./passage-through.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/passage-through/passage-through.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./passage-through.component.scss */ \"./src/app/storyteller/scenes/passage-through/passage-through.component.scss\")).default]\n    })\n], PassageThroughComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/roaming-step/roaming-step.component.scss\":\n/*!*****************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/roaming-step/roaming-step.component.scss ***!\n  \\*****************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#journeyrender {\\n  position: fixed;\\n  top: 8px;\\n  left: 8px;\\n  right: 8px;\\n  bottom: 30vh;\\n  border: 1px dashed black;\\n  overflow: auto;\\n}\\n\\n#viewrender {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n#journeyinfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 28vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\nbutton.journeychoice {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9yb2FtaW5nLXN0ZXAvcm9hbWluZy1zdGVwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvcm9hbWluZy1zdGVwL3JvYW1pbmctc3RlcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLFVBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7RUFDQSxjQUFBO0FDQUQ7O0FER0E7RUFFQyxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7QUNERDs7QURJQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDSEQ7O0FET0E7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ05EIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3JvYW1pbmctc3RlcC9yb2FtaW5nLXN0ZXAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjam91cm5leXJlbmRlclxue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHQ4cHg7XG5cdGxlZnQ6XHRcdFx0OHB4O1xuXHRyaWdodDpcdFx0XHQ4cHg7XG5cdGJvdHRvbTpcdFx0XHQzMHZoO1xuXHRib3JkZXI6XHRcdFx0MXB4IGRhc2hlZCBibGFjaztcblx0b3ZlcmZsb3c6XHRcdGF1dG87XG59XG5cbiN2aWV3cmVuZGVyXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblx0dG9wOlx0XHRcdDA7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG59XG5cbiNqb3VybmV5aW5mb1xue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdGhlaWdodDpcdFx0XHQyOHZoO1xuXHRmb250LXNpemU6XHRcdDh2aDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG59XG5cblxuYnV0dG9uLmpvdXJuZXljaG9pY2Vcbntcblx0Ym9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0cGFkZGluZzpcdFx0MnB0IDhwdDtcblxuXHRmb250LXNpemU6XHRcdDR2aDtcbn1cbiIsIiNqb3VybmV5cmVuZGVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDhweDtcbiAgbGVmdDogOHB4O1xuICByaWdodDogOHB4O1xuICBib3R0b206IDMwdmg7XG4gIGJvcmRlcjogMXB4IGRhc2hlZCBibGFjaztcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG5cbiN2aWV3cmVuZGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbiNqb3VybmV5aW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiAyOHZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5idXR0b24uam91cm5leWNob2ljZSB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBwYWRkaW5nOiAycHQgOHB0O1xuICBmb250LXNpemU6IDR2aDtcbn0iXX0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/roaming-step/roaming-step.component.ts\":\n/*!***************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/roaming-step/roaming-step.component.ts ***!\n  \\***************************************************************************/\n/*! exports provided: RoamingStepComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RoamingStepComponent\", function() { return RoamingStepComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _lib_walk_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/walk-renderer */ \"./src/app/storyteller/scenes/lib/walk-renderer.ts\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n\n\n\n\n\nlet RoamingStepComponent = class RoamingStepComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_4__[\"SceneRenderer\"] {\n    constructor(sceneref) {\n        super(sceneref);\n        this.sceneref = sceneref;\n        this.roamingscene = this.sceneref.scene;\n        console.log(\"roaming scene: \", this.roamingscene);\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n        this.viewrenderer = new _lib_walk_renderer__WEBPACK_IMPORTED_MODULE_2__[\"WalkRenderer\"](this.roamingscene.game.worldmap, this.renderview);\n        let ui = this;\n        this.viewrenderer.loadAssets(function () {\n            ui.renderStep();\n        });\n    }\n    renderStep() {\n        const vector = this.roamingscene.direction;\n        this.viewrenderer.renderView(this.roamingscene.current, vector);\n    }\n    getDirectionDescription() {\n        let vector = this.roamingscene.direction;\n        let dirstring = \"\";\n        if (vector[1] > 0) {\n            dirstring += \"South\";\n        }\n        else if (vector[1] < 0) {\n            dirstring += \"North\";\n        }\n        if (vector[0] > 0) {\n            dirstring += \"East\";\n        }\n        else if (vector[0] < 0) {\n            dirstring += \"West\";\n        }\n        return dirstring;\n    }\n    getDayOfTravel() {\n        return this.roamingscene.steps + 1;\n    }\n    moveTurnLeft() {\n        this.roamingscene.changeDirection(-1);\n        this.renderStep();\n    }\n    moveTurnRight() {\n        this.roamingscene.changeDirection(1);\n        this.renderStep();\n    }\n    moveForward() {\n        this.roamingscene.stepForward();\n        this.roamingscene.game.hero.setCoordinates(this.roamingscene.current);\n        if (!this.roamingscene.sceneFinished()) {\n            this.renderStep();\n        }\n        else {\n            this.sceneref.triggerSceneCheck();\n        }\n    }\n    actionSetCamp() {\n    }\n    showMap() {\n        // tba\n    }\n};\nRoamingStepComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__[\"SceneRef\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"renderholder\", { static: false })\n], RoamingStepComponent.prototype, \"renderholder\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"renderview\", { static: false })\n], RoamingStepComponent.prototype, \"renderview\", void 0);\nRoamingStepComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-roaming-step',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./roaming-step.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/roaming-step/roaming-step.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./roaming-step.component.scss */ \"./src/app/storyteller/scenes/roaming-step/roaming-step.component.scss\")).default]\n    })\n], RoamingStepComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/scene-renderer-loader.ts\":\n/*!*************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/scene-renderer-loader.ts ***!\n  \\*************************************************************/\n/*! exports provided: SceneRendererLoader */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneRendererLoader\", function() { return SceneRendererLoader; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _rpg_engine_scenes_journey_departure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../rpg-engine/scenes/journey-departure */ \"./src/app/rpg-engine/scenes/journey-departure.ts\");\n/* harmony import */ var _world_map_view_world_map_view_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./world-map-view/world-map-view.component */ \"./src/app/storyteller/scenes/world-map-view/world-map-view.component.ts\");\n/* harmony import */ var _rpg_engine_scenes_journey__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../rpg-engine/scenes/journey */ \"./src/app/rpg-engine/scenes/journey.ts\");\n/* harmony import */ var _journey_step_journey_step_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./journey-step/journey-step.component */ \"./src/app/storyteller/scenes/journey-step/journey-step.component.ts\");\n/* harmony import */ var _rpg_engine_scenes_town_nav__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../rpg-engine/scenes/town-nav */ \"./src/app/rpg-engine/scenes/town-nav.ts\");\n/* harmony import */ var _town_ui_town_ui_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./town-ui/town-ui.component */ \"./src/app/storyteller/scenes/town-ui/town-ui.component.ts\");\n/* harmony import */ var _rpg_engine_scenes_roaming__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../rpg-engine/scenes/roaming */ \"./src/app/rpg-engine/scenes/roaming.ts\");\n/* harmony import */ var _roaming_step_roaming_step_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./roaming-step/roaming-step.component */ \"./src/app/storyteller/scenes/roaming-step/roaming-step.component.ts\");\n/* harmony import */ var _rpg_engine_scenes_passage_trail__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../rpg-engine/scenes/passage-trail */ \"./src/app/rpg-engine/scenes/passage-trail.ts\");\n/* harmony import */ var _passage_through_passage_through_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./passage-through/passage-through.component */ \"./src/app/storyteller/scenes/passage-through/passage-through.component.ts\");\n/* harmony import */ var _rpg_engine_scenes_narration__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../rpg-engine/scenes/narration */ \"./src/app/rpg-engine/scenes/narration.ts\");\n/* harmony import */ var _narration_pages_narration_pages_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./narration-pages/narration-pages.component */ \"./src/app/storyteller/scenes/narration-pages/narration-pages.component.ts\");\n/* harmony import */ var _rpg_engine_scenes_story_branch__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../rpg-engine/scenes/story-branch */ \"./src/app/rpg-engine/scenes/story-branch.ts\");\n/* harmony import */ var _story_choice_story_choice_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./story-choice/story-choice.component */ \"./src/app/storyteller/scenes/story-choice/story-choice.component.ts\");\n/* harmony import */ var _skill_action_skill_action_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./skill-action/skill-action.component */ \"./src/app/storyteller/scenes/skill-action/skill-action.component.ts\");\n/* harmony import */ var _rpg_engine_scenes_skill_test__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../rpg-engine/scenes/skill-test */ \"./src/app/rpg-engine/scenes/skill-test.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass SceneRendererLoader {\n    static getSceneRendererClass(scene) {\n        let renderer;\n        if (scene instanceof _rpg_engine_scenes_journey_departure__WEBPACK_IMPORTED_MODULE_1__[\"JourneyDeparture\"]) {\n            renderer = _world_map_view_world_map_view_component__WEBPACK_IMPORTED_MODULE_2__[\"WorldMapViewComponent\"];\n        }\n        else if (scene instanceof _rpg_engine_scenes_journey__WEBPACK_IMPORTED_MODULE_3__[\"Journey\"]) {\n            renderer = _journey_step_journey_step_component__WEBPACK_IMPORTED_MODULE_4__[\"JourneyStepComponent\"];\n        }\n        else if (scene instanceof _rpg_engine_scenes_town_nav__WEBPACK_IMPORTED_MODULE_5__[\"TownNav\"]) {\n            renderer = _town_ui_town_ui_component__WEBPACK_IMPORTED_MODULE_6__[\"TownUIComponent\"];\n        }\n        else if (scene instanceof _rpg_engine_scenes_roaming__WEBPACK_IMPORTED_MODULE_7__[\"Roaming\"]) {\n            renderer = _roaming_step_roaming_step_component__WEBPACK_IMPORTED_MODULE_8__[\"RoamingStepComponent\"];\n        }\n        else if (scene instanceof _rpg_engine_scenes_passage_trail__WEBPACK_IMPORTED_MODULE_9__[\"PassageTrail\"]) {\n            renderer = _passage_through_passage_through_component__WEBPACK_IMPORTED_MODULE_10__[\"PassageThroughComponent\"];\n        }\n        else if (scene instanceof _rpg_engine_scenes_narration__WEBPACK_IMPORTED_MODULE_11__[\"Narration\"]) {\n            renderer = _narration_pages_narration_pages_component__WEBPACK_IMPORTED_MODULE_12__[\"NarrationPagesComponent\"];\n        }\n        else if (scene instanceof _rpg_engine_scenes_story_branch__WEBPACK_IMPORTED_MODULE_13__[\"StoryBranch\"]) {\n            renderer = _story_choice_story_choice_component__WEBPACK_IMPORTED_MODULE_14__[\"StoryChoiceComponent\"];\n        }\n        else if (scene instanceof _rpg_engine_scenes_skill_test__WEBPACK_IMPORTED_MODULE_16__[\"SkillTest\"]) {\n            renderer = _skill_action_skill_action_component__WEBPACK_IMPORTED_MODULE_15__[\"SkillActionComponent\"];\n        }\n        return renderer;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/scene-renderer.ts\":\n/*!******************************************************!*\\\n  !*** ./src/app/storyteller/scenes/scene-renderer.ts ***!\n  \\******************************************************/\n/*! exports provided: SceneRenderer */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneRenderer\", function() { return SceneRenderer; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass SceneRenderer {\n    constructor(sceneref, storytellerinterface = null) {\n        this.sceneref = sceneref;\n        this.stint = storytellerinterface;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/skill-action/skill-action.component.scss\":\n/*!*****************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/skill-action/skill-action.component.scss ***!\n  \\*****************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#choiceinfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 42vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n#choicescenery {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  height: 54vh;\\n  overflow: hidden;\\n}\\n\\n/*\\n\\n.locimageholder\\n{\\n\\tposition:\\t\\tabsolute;\\n\\n\\tleft:\\t\\t\\t16px;\\n\\tright:\\t\\t\\t16px;\\n\\tbottom:\\t\\t\\t8px;\\n\\ttop:\\t\\t\\t8px;\\n\\n\\ttext-align:\\t\\tcenter;\\n\\t//border:\\t\\t\\t1px solid red;\\n}\\n\\n.locimage\\n{\\n\\tmax-width:\\t\\t\\t100%;\\n\\tmax-height:\\t\\t\\t100%;\\n\\tobject-fit: \\t\\tcover;\\n\\n}\\n*/\\n\\n.choicecontrols {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n\\n#sceneryview {\\n  position: absolute;\\n  left: 16px;\\n  right: 16px;\\n  bottom: 8px;\\n  top: 8px;\\n}\\n\\nul.choices-prompt * {\\n  cursor: pointer;\\n}\\n\\nbutton.skillchoice {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9za2lsbC1hY3Rpb24vc2tpbGwtYWN0aW9uLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvc2tpbGwtYWN0aW9uL3NraWxsLWFjdGlvbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDREQ7O0FES0E7RUFFQyxlQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxNQUFBO0VBRUEsWUFBQTtFQUdBLGdCQUFBO0FDTkQ7O0FEU0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FBQTs7QUF3QkE7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ1REOztBRFlBO0VBRUMsa0JBQUE7RUFFQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxRQUFBO0FDWEQ7O0FEY0E7RUFFQyxlQUFBO0FDWkQ7O0FEZUE7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ2REIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3NraWxsLWFjdGlvbi9za2lsbC1hY3Rpb24uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjY2hvaWNlaW5mb1xue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdGhlaWdodDpcdFx0XHQ0MnZoO1xuXHRmb250LXNpemU6XHRcdDh2aDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG59XG5cblxuI2Nob2ljZXNjZW5lcnlcbntcblx0cG9zaXRpb246XHRcdGZpeGVkO1xuXHRsZWZ0Olx0XHRcdDA7XG5cdHJpZ2h0Olx0XHRcdDA7XG5cdHRvcDpcdFx0XHQwO1xuXG5cdGhlaWdodDpcdFx0XHQ1NHZoO1xuXG5cdC8vYm9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0b3ZlcmZsb3c6IGhpZGRlbjtcblxufVxuLypcblxuLmxvY2ltYWdlaG9sZGVyXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblxuXHRsZWZ0Olx0XHRcdDE2cHg7XG5cdHJpZ2h0Olx0XHRcdDE2cHg7XG5cdGJvdHRvbTpcdFx0XHQ4cHg7XG5cdHRvcDpcdFx0XHQ4cHg7XG5cblx0dGV4dC1hbGlnbjpcdFx0Y2VudGVyO1xuXHQvL2JvcmRlcjpcdFx0XHQxcHggc29saWQgcmVkO1xufVxuXG4ubG9jaW1hZ2Vcbntcblx0bWF4LXdpZHRoOlx0XHRcdDEwMCU7XG5cdG1heC1oZWlnaHQ6XHRcdFx0MTAwJTtcblx0b2JqZWN0LWZpdDogXHRcdGNvdmVyO1xuXG59XG4qL1xuXG4uY2hvaWNlY29udHJvbHNcbntcblx0Ym9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0cGFkZGluZzpcdFx0MnB0IDhwdDtcblxuXHRmb250LXNpemU6XHRcdDR2aDtcbn1cblxuI3NjZW5lcnl2aWV3XG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblxuXHRsZWZ0Olx0XHRcdDE2cHg7XG5cdHJpZ2h0Olx0XHRcdDE2cHg7XG5cdGJvdHRvbTpcdFx0XHQ4cHg7XG5cdHRvcDpcdFx0XHQ4cHg7XG59XG5cbnVsLmNob2ljZXMtcHJvbXB0ICpcbntcblx0Y3Vyc29yOlx0cG9pbnRlcjtcbn1cblxuYnV0dG9uLnNraWxsY2hvaWNlXG57XG5cdGJvcmRlcjpcdFx0XHQxcHggc29saWQgYmxhY2s7XG5cdHBhZGRpbmc6XHRcdDJwdCA4cHQ7XG5cblx0Zm9udC1zaXplOlx0XHQ0dmg7XG59XG4iLCIjY2hvaWNlaW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiA0MnZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4jY2hvaWNlc2NlbmVyeSB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogMDtcbiAgaGVpZ2h0OiA1NHZoO1xuICBvdmVyZmxvdzogaGlkZGVuO1xufVxuXG4vKlxuXG4ubG9jaW1hZ2Vob2xkZXJcbntcblx0cG9zaXRpb246XHRcdGFic29sdXRlO1xuXG5cdGxlZnQ6XHRcdFx0MTZweDtcblx0cmlnaHQ6XHRcdFx0MTZweDtcblx0Ym90dG9tOlx0XHRcdDhweDtcblx0dG9wOlx0XHRcdDhweDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG5cdC8vYm9yZGVyOlx0XHRcdDFweCBzb2xpZCByZWQ7XG59XG5cbi5sb2NpbWFnZVxue1xuXHRtYXgtd2lkdGg6XHRcdFx0MTAwJTtcblx0bWF4LWhlaWdodDpcdFx0XHQxMDAlO1xuXHRvYmplY3QtZml0OiBcdFx0Y292ZXI7XG5cbn1cbiovXG4uY2hvaWNlY29udHJvbHMge1xuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgcGFkZGluZzogMnB0IDhwdDtcbiAgZm9udC1zaXplOiA0dmg7XG59XG5cbiNzY2VuZXJ5dmlldyB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMTZweDtcbiAgcmlnaHQ6IDE2cHg7XG4gIGJvdHRvbTogOHB4O1xuICB0b3A6IDhweDtcbn1cblxudWwuY2hvaWNlcy1wcm9tcHQgKiB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuYnV0dG9uLnNraWxsY2hvaWNlIHtcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gIHBhZGRpbmc6IDJwdCA4cHQ7XG4gIGZvbnQtc2l6ZTogNHZoO1xufSJdfQ== */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/skill-action/skill-action.component.ts\":\n/*!***************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/skill-action/skill-action.component.ts ***!\n  \\***************************************************************************/\n/*! exports provided: SkillActionComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SkillActionComponent\", function() { return SkillActionComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _storyteller_interface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../storyteller-interface */ \"./src/app/storyteller/storyteller-interface.ts\");\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n\n\n\n\n\nlet SkillActionComponent = class SkillActionComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_4__[\"SceneRenderer\"] {\n    constructor(sceneref, storytellerinterface = null) {\n        super(sceneref, storytellerinterface);\n        this.sceneref = sceneref;\n        console.log(\"StoryChoice injected w stinterface: \", storytellerinterface);\n        this.skilltest = this.sceneref.scene;\n        console.log(\"current choice set is \", this.skilltest);\n        this.narr_fail = null;\n        this.narr_done = null;\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n    }\n    tryOption(option, succeed) {\n        console.log(\"picked option \", option, \" for trying\");\n        let success = this.skilltest.playActionDebug(option, succeed);\n        if (success) {\n            this.narr_fail = null;\n            this.narr_done = option.story_success;\n        }\n        else {\n            this.narr_fail = option.story_failure;\n        }\n    }\n    leaveScene() {\n        this.sceneref.triggerSceneCheck();\n    }\n};\nSkillActionComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__[\"SceneRef\"] },\n    { type: _storyteller_interface__WEBPACK_IMPORTED_MODULE_3__[\"StorytellerInterface\"] }\n];\nSkillActionComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-skill-action',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./skill-action.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/skill-action/skill-action.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./skill-action.component.scss */ \"./src/app/storyteller/scenes/skill-action/skill-action.component.scss\")).default]\n    })\n], SkillActionComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/story-choice/story-choice.component.scss\":\n/*!*****************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/story-choice/story-choice.component.scss ***!\n  \\*****************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#choiceinfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 42vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n#choicescenery {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  height: 54vh;\\n  overflow: hidden;\\n}\\n\\n/*\\n\\n.locimageholder\\n{\\n\\tposition:\\t\\tabsolute;\\n\\n\\tleft:\\t\\t\\t16px;\\n\\tright:\\t\\t\\t16px;\\n\\tbottom:\\t\\t\\t8px;\\n\\ttop:\\t\\t\\t8px;\\n\\n\\ttext-align:\\t\\tcenter;\\n\\t//border:\\t\\t\\t1px solid red;\\n}\\n\\n.locimage\\n{\\n\\tmax-width:\\t\\t\\t100%;\\n\\tmax-height:\\t\\t\\t100%;\\n\\tobject-fit: \\t\\tcover;\\n\\n}\\n*/\\n\\n.choicecontrols {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n\\n#sceneryview {\\n  position: absolute;\\n  left: 16px;\\n  right: 16px;\\n  bottom: 8px;\\n  top: 8px;\\n}\\n\\nul.choices-prompt * {\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9zdG9yeS1jaG9pY2Uvc3RvcnktY2hvaWNlLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvc3RvcnktY2hvaWNlL3N0b3J5LWNob2ljZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDREQ7O0FES0E7RUFFQyxlQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxNQUFBO0VBRUEsWUFBQTtFQUdBLGdCQUFBO0FDTkQ7O0FEU0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FBQTs7QUF3QkE7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ1REOztBRFlBO0VBRUMsa0JBQUE7RUFFQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxRQUFBO0FDWEQ7O0FEY0E7RUFFQyxlQUFBO0FDWkQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvc3RvcnktY2hvaWNlL3N0b3J5LWNob2ljZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNjaG9pY2VpbmZvXG57XG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0bGVmdDpcdFx0XHQwO1xuXHRyaWdodDpcdFx0XHQwO1xuXHRib3R0b206XHRcdFx0MDtcblx0aGVpZ2h0Olx0XHRcdDQydmg7XG5cdGZvbnQtc2l6ZTpcdFx0OHZoO1xuXG5cdHRleHQtYWxpZ246XHRcdGNlbnRlcjtcbn1cblxuXG4jY2hvaWNlc2NlbmVyeVxue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0dG9wOlx0XHRcdDA7XG5cblx0aGVpZ2h0Olx0XHRcdDU0dmg7XG5cblx0Ly9ib3JkZXI6XHRcdFx0MXB4IHNvbGlkIGJsYWNrO1xuXHRvdmVyZmxvdzogaGlkZGVuO1xuXG59XG4vKlxuXG4ubG9jaW1hZ2Vob2xkZXJcbntcblx0cG9zaXRpb246XHRcdGFic29sdXRlO1xuXG5cdGxlZnQ6XHRcdFx0MTZweDtcblx0cmlnaHQ6XHRcdFx0MTZweDtcblx0Ym90dG9tOlx0XHRcdDhweDtcblx0dG9wOlx0XHRcdDhweDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG5cdC8vYm9yZGVyOlx0XHRcdDFweCBzb2xpZCByZWQ7XG59XG5cbi5sb2NpbWFnZVxue1xuXHRtYXgtd2lkdGg6XHRcdFx0MTAwJTtcblx0bWF4LWhlaWdodDpcdFx0XHQxMDAlO1xuXHRvYmplY3QtZml0OiBcdFx0Y292ZXI7XG5cbn1cbiovXG5cbi5jaG9pY2Vjb250cm9sc1xue1xuXHRib3JkZXI6XHRcdFx0MXB4IHNvbGlkIGJsYWNrO1xuXHRwYWRkaW5nOlx0XHQycHQgOHB0O1xuXG5cdGZvbnQtc2l6ZTpcdFx0NHZoO1xufVxuXG4jc2NlbmVyeXZpZXdcbntcblx0cG9zaXRpb246XHRcdGFic29sdXRlO1xuXG5cdGxlZnQ6XHRcdFx0MTZweDtcblx0cmlnaHQ6XHRcdFx0MTZweDtcblx0Ym90dG9tOlx0XHRcdDhweDtcblx0dG9wOlx0XHRcdDhweDtcbn1cblxudWwuY2hvaWNlcy1wcm9tcHQgKlxue1xuXHRjdXJzb3I6XHRwb2ludGVyO1xufVxuIiwiI2Nob2ljZWluZm8ge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG4gIGhlaWdodDogNDJ2aDtcbiAgZm9udC1zaXplOiA4dmg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuI2Nob2ljZXNjZW5lcnkge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICB0b3A6IDA7XG4gIGhlaWdodDogNTR2aDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLypcblxuLmxvY2ltYWdlaG9sZGVyXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblxuXHRsZWZ0Olx0XHRcdDE2cHg7XG5cdHJpZ2h0Olx0XHRcdDE2cHg7XG5cdGJvdHRvbTpcdFx0XHQ4cHg7XG5cdHRvcDpcdFx0XHQ4cHg7XG5cblx0dGV4dC1hbGlnbjpcdFx0Y2VudGVyO1xuXHQvL2JvcmRlcjpcdFx0XHQxcHggc29saWQgcmVkO1xufVxuXG4ubG9jaW1hZ2Vcbntcblx0bWF4LXdpZHRoOlx0XHRcdDEwMCU7XG5cdG1heC1oZWlnaHQ6XHRcdFx0MTAwJTtcblx0b2JqZWN0LWZpdDogXHRcdGNvdmVyO1xuXG59XG4qL1xuLmNob2ljZWNvbnRyb2xzIHtcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gIHBhZGRpbmc6IDJwdCA4cHQ7XG4gIGZvbnQtc2l6ZTogNHZoO1xufVxuXG4jc2NlbmVyeXZpZXcge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDE2cHg7XG4gIHJpZ2h0OiAxNnB4O1xuICBib3R0b206IDhweDtcbiAgdG9wOiA4cHg7XG59XG5cbnVsLmNob2ljZXMtcHJvbXB0ICoge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59Il19 */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/story-choice/story-choice.component.ts\":\n/*!***************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/story-choice/story-choice.component.ts ***!\n  \\***************************************************************************/\n/*! exports provided: StoryChoiceComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StoryChoiceComponent\", function() { return StoryChoiceComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _storyteller_interface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../storyteller-interface */ \"./src/app/storyteller/storyteller-interface.ts\");\n\n\n\n\n\nlet StoryChoiceComponent = class StoryChoiceComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_2__[\"SceneRenderer\"] {\n    constructor(sceneref, storytellerinterface = null) {\n        super(sceneref, storytellerinterface);\n        this.sceneref = sceneref;\n        console.log(\"StoryChoice injected w stinterface: \", storytellerinterface);\n        this.choice = this.sceneref.scene;\n        console.log(\"current choice set is \", this.choice);\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n    }\n    selectOption(opt) {\n        this.choice.setSelected(opt);\n        this.sceneref.triggerSceneCheck();\n    }\n};\nStoryChoiceComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__[\"SceneRef\"] },\n    { type: _storyteller_interface__WEBPACK_IMPORTED_MODULE_4__[\"StorytellerInterface\"] }\n];\nStoryChoiceComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-story-choice',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./story-choice.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/story-choice/story-choice.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./story-choice.component.scss */ \"./src/app/storyteller/scenes/story-choice/story-choice.component.scss\")).default]\n    })\n], StoryChoiceComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/town-ui/town-ui.component.scss\":\n/*!*******************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/town-ui/town-ui.component.scss ***!\n  \\*******************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#towninfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 42vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n#townscene {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  height: 54vh;\\n  overflow: hidden;\\n}\\n\\n.locimageholder {\\n  position: absolute;\\n  left: 16px;\\n  right: 16px;\\n  bottom: 8px;\\n  top: 8px;\\n  text-align: center;\\n}\\n\\n.locimage {\\n  max-width: 100%;\\n  max-height: 100%;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n}\\n\\n.movecontrols {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n\\n#locrender {\\n  position: absolute;\\n  left: 16px;\\n  right: 16px;\\n  bottom: 8px;\\n  top: 8px;\\n}\\n\\nul.townnav-prompt * {\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy90b3duLXVpL3Rvd24tdWkuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy90b3duLXVpL3Rvd24tdWkuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFQyxlQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7RUFFQSxrQkFBQTtBQ0REOztBREtBO0VBRUMsZUFBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsTUFBQTtFQUVBLFlBQUE7RUFHQSxnQkFBQTtBQ05EOztBRFVBO0VBRUMsa0JBQUE7RUFFQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxRQUFBO0VBRUEsa0JBQUE7QUNWRDs7QURjQTtFQUVDLGVBQUE7RUFDQSxnQkFBQTtFQUNBLG9CQUFBO0tBQUEsaUJBQUE7QUNaRDs7QURnQkE7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ2ZEOztBRGtCQTtFQUVDLGtCQUFBO0VBRUEsVUFBQTtFQUNBLFdBQUE7RUFDQSxXQUFBO0VBQ0EsUUFBQTtBQ2pCRDs7QURvQkE7RUFFQyxlQUFBO0FDbEJEIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3Rvd24tdWkvdG93bi11aS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiN0b3duaW5mb1xue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdGhlaWdodDpcdFx0XHQ0MnZoO1xuXHRmb250LXNpemU6XHRcdDh2aDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG59XG5cblxuI3Rvd25zY2VuZVxue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0dG9wOlx0XHRcdDA7XG5cblx0aGVpZ2h0Olx0XHRcdDU0dmg7XG5cblx0Ly9ib3JkZXI6XHRcdFx0MXB4IHNvbGlkIGJsYWNrO1xuXHRvdmVyZmxvdzogaGlkZGVuO1xuXG59XG5cbi5sb2NpbWFnZWhvbGRlclxue1xuXHRwb3NpdGlvbjpcdFx0YWJzb2x1dGU7XG5cblx0bGVmdDpcdFx0XHQxNnB4O1xuXHRyaWdodDpcdFx0XHQxNnB4O1xuXHRib3R0b206XHRcdFx0OHB4O1xuXHR0b3A6XHRcdFx0OHB4O1xuXG5cdHRleHQtYWxpZ246XHRcdGNlbnRlcjtcblx0Ly9ib3JkZXI6XHRcdFx0MXB4IHNvbGlkIHJlZDtcbn1cblxuLmxvY2ltYWdlXG57XG5cdG1heC13aWR0aDpcdFx0XHQxMDAlO1xuXHRtYXgtaGVpZ2h0Olx0XHRcdDEwMCU7XG5cdG9iamVjdC1maXQ6IFx0XHRjb3ZlcjtcblxufVxuXG4ubW92ZWNvbnRyb2xzXG57XG5cdGJvcmRlcjpcdFx0XHQxcHggc29saWQgYmxhY2s7XG5cdHBhZGRpbmc6XHRcdDJwdCA4cHQ7XG5cblx0Zm9udC1zaXplOlx0XHQ0dmg7XG59XG5cbiNsb2NyZW5kZXJcbntcblx0cG9zaXRpb246XHRcdGFic29sdXRlO1xuXG5cdGxlZnQ6XHRcdFx0MTZweDtcblx0cmlnaHQ6XHRcdFx0MTZweDtcblx0Ym90dG9tOlx0XHRcdDhweDtcblx0dG9wOlx0XHRcdDhweDtcbn1cblxudWwudG93bm5hdi1wcm9tcHQgKlxue1xuXHRjdXJzb3I6XHRwb2ludGVyO1xufSIsIiN0b3duaW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiA0MnZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4jdG93bnNjZW5lIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiAwO1xuICBoZWlnaHQ6IDU0dmg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbi5sb2NpbWFnZWhvbGRlciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMTZweDtcbiAgcmlnaHQ6IDE2cHg7XG4gIGJvdHRvbTogOHB4O1xuICB0b3A6IDhweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4ubG9jaW1hZ2Uge1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIG1heC1oZWlnaHQ6IDEwMCU7XG4gIG9iamVjdC1maXQ6IGNvdmVyO1xufVxuXG4ubW92ZWNvbnRyb2xzIHtcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gIHBhZGRpbmc6IDJwdCA4cHQ7XG4gIGZvbnQtc2l6ZTogNHZoO1xufVxuXG4jbG9jcmVuZGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAxNnB4O1xuICByaWdodDogMTZweDtcbiAgYm90dG9tOiA4cHg7XG4gIHRvcDogOHB4O1xufVxuXG51bC50b3dubmF2LXByb21wdCAqIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xufSJdfQ== */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/town-ui/town-ui.component.ts\":\n/*!*****************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/town-ui/town-ui.component.ts ***!\n  \\*****************************************************************/\n/*! exports provided: TownUIComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TownUIComponent\", function() { return TownUIComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n/* harmony import */ var _lib_art_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/art-renderer */ \"./src/app/storyteller/scenes/lib/art-renderer.ts\");\n/* harmony import */ var _storyteller_interface__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../storyteller-interface */ \"./src/app/storyteller/storyteller-interface.ts\");\n\n\n\n\n\n\nlet TownUIComponent = class TownUIComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_3__[\"SceneRenderer\"] {\n    constructor(sceneref, storytellerinterface = null) {\n        super(sceneref, storytellerinterface);\n        this.sceneref = sceneref;\n        console.log(\"TownNav injected w stinterface: \", storytellerinterface);\n        this.townscene = this.sceneref.scene;\n        console.log(\"town info: \", JSON.stringify(this.townscene.town));\n        this.taskprompts = [];\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n        this.viewrenderer = new _lib_art_renderer__WEBPACK_IMPORTED_MODULE_4__[\"ArtRenderer\"](this.locrender);\n        this.moveToLoc(this.townscene.locpoint);\n    }\n    moveToLoc(target) {\n        this.townscene.moveToLoc(target);\n        this.sceneref.triggerSceneCheck();\n        this.renderView();\n        this.updateTaskPrompts();\n    }\n    updateTaskPrompts() {\n        let quests = this.sceneref.game.quests.values();\n        let qtrefs = [];\n        for (let quest of quests) {\n            // console.log(\"checking quest\", quest);\n            let available = quest.getAvailableTasks(this.sceneref.game);\n            // console.log(\"found available tasks\", available);\n            let qtasks = [];\n            for (let taskid of available) {\n                // console.log(\"TASK AVAILABLE: \", taskid, \"for quest\", quest, \"w state\", quest.states.get(taskid));\n                // this.st\n                // prompts.push(quest.loadTask(taskid));\n                qtrefs.push({\n                    quest: quest,\n                    taskid: taskid\n                });\n            }\n        }\n        this.taskprompts = [];\n        let ui = this;\n        this.stint.loadQuestTasks(qtrefs, function (tasks) {\n            let prompts = [];\n            for (let qtask of tasks) {\n                prompts.push(qtask);\n            }\n            // console.log(\"TownUI reaction to qtasks load\", tasks,\" to prompts \", prompts);\n            ui.taskprompts = prompts;\n        });\n    }\n    renderView() {\n        let urlpath = this.townscene.currentloc.image;\n        if (urlpath) {\n            let fullpath = \"./assets/graph/sceneviews/\" + urlpath;\n            this.viewrenderer.loadRenderImage(fullpath);\n        }\n    }\n    localizeTextAsset(text) {\n        while (text.includes(\"$TOWN$\")) {\n            text = text.replace(\"$TOWN$\", this.townscene.town.name);\n        }\n        return text;\n    }\n    activatePrompt(task) {\n        console.log(\"prompt activation for task\", task, \"in\", task.caller);\n        task.scene.driver = task;\n        // narrative should be set by StoryTeller\n        this.sceneref.triggerSubScene(task.scene);\n    }\n};\nTownUIComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__[\"SceneRef\"] },\n    { type: _storyteller_interface__WEBPACK_IMPORTED_MODULE_5__[\"StorytellerInterface\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"locrender\", { static: false })\n], TownUIComponent.prototype, \"locrender\", void 0);\nTownUIComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-town-ui',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./town-ui.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/town-ui/town-ui.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./town-ui.component.scss */ \"./src/app/storyteller/scenes/town-ui/town-ui.component.scss\")).default]\n    })\n], TownUIComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/world-map-view/world-map-view.component.scss\":\n/*!*********************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/world-map-view/world-map-view.component.scss ***!\n  \\*********************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#mapholder {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy93b3JsZC1tYXAtdmlldy93b3JsZC1tYXAtdmlldy5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3dvcmxkLW1hcC12aWV3L3dvcmxkLW1hcC12aWV3LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUMsa0JBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0FDQUQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvd29ybGQtbWFwLXZpZXcvd29ybGQtbWFwLXZpZXcuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjbWFwaG9sZGVyXG57XG5cdHBvc2l0aW9uOlx0YWJzb2x1dGU7XG5cdHRvcDpcdFx0MDtcblx0bGVmdDpcdFx0MDtcblx0cmlnaHQ6XHRcdDA7XG5cdGJvdHRvbTpcdFx0MDtcbn1cblxuIiwiI21hcGhvbGRlciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xufSJdfQ== */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/world-map-view/world-map-view.component.ts\":\n/*!*******************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/world-map-view/world-map-view.component.ts ***!\n  \\*******************************************************************************/\n/*! exports provided: WorldMapViewComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WorldMapViewComponent\", function() { return WorldMapViewComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! konva */ \"./node_modules/konva/lib/index.js\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(konva__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n\n\n\n\n\nlet WorldMapViewComponent = class WorldMapViewComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_4__[\"SceneRenderer\"] {\n    constructor(sceneref) {\n        super(sceneref);\n        this.sceneref = sceneref;\n        this.scenecheck = new _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"EventEmitter\"]();\n        this.TILESIZE = 48;\n        this.TILESBYTERRRAIN = {\n            \"M\": \"worldmaptile_mountains_trans.png\",\n            \"H\": \"worldmaptile_hills_trans.png\",\n            \"F\": \"worldmaptile_woods_trans.png\",\n            \"P\": \"worldmaptile_empty.png\",\n        };\n        this.PATH_TILES = \"assets/graph/maptiles/\";\n        this.MARKERSBYID = {\n            \"towns\": \"worldmapmarker_castle_trans.png\",\n            \"passes\": \"worldmapmarker_mountainpass_trans.png\",\n            \"hero\": \"worldmapmarker_hero_trans.png\",\n        };\n        this.PATH_MARKERS = \"assets/graph/mapmarkers/\";\n        console.log(\"constructor w sref game \", this.sceneref.game);\n        this.mapscene = this.sceneref.scene;\n        this.prepareAssetsHolders();\n    }\n    prepareAssetsHolders() {\n        this.terraintiles = new Map();\n        this.tileimages = new Map();\n        this.markerfiles = new Map();\n        this.markerimages = new Map();\n        for (let key in this.TILESBYTERRRAIN) {\n            this.terraintiles.set(key, this.PATH_TILES + this.TILESBYTERRRAIN[key]);\n        }\n        this.tileimages = new Map();\n        for (let terrain of this.terraintiles.keys()) {\n            this.tileimages.set(terrain, null);\n        }\n        for (let key in this.MARKERSBYID) {\n            this.markerfiles.set(key, this.PATH_MARKERS + this.MARKERSBYID[key]);\n        }\n        this.markerimages = new Map();\n        for (let markerid of this.markerfiles.keys()) {\n            this.markerimages.set(markerid, null);\n        }\n    }\n    ngOnInit() {\n        console.log(\"starting worldmap w sref game \", this.sceneref);\n        this.worldmap = this.sceneref.game.worldmap;\n        this.loadAssets();\n    }\n    ngAfterViewInit() {\n        // this.loadAssets();\n    }\n    loadAssets() {\n        let ui = this;\n        for (let terrain of this.terraintiles.keys()) {\n            let imageObj = new Image();\n            imageObj.onload = function () {\n                ui.tileimages.set(terrain, imageObj);\n                ui.checkReadyRender();\n            };\n            imageObj.src = this.terraintiles.get(terrain);\n        }\n        for (let markerid of this.markerfiles.keys()) {\n            let imageObj = new Image();\n            imageObj.onload = function () {\n                ui.markerimages.set(markerid, imageObj);\n                ui.checkReadyRender();\n            };\n            imageObj.src = this.markerfiles.get(markerid);\n        }\n    }\n    checkReadyRender() {\n        for (let terrain of this.tileimages.keys()) {\n            if (this.tileimages.get(terrain) == null) {\n                // console.log(\"missing maptile\", terrain, \"wait\");\n                return;\n            }\n        }\n        for (let markerid of this.markerimages.keys()) {\n            if (this.markerimages.get(markerid) == null) {\n                // console.log(\"missing mapmarker\", markerid, \"wait\");\n                return;\n            }\n        }\n        // console.log(\"ready on all terrains\");\n        this.initRender();\n    }\n    initRender() {\n        const vpw = this.container.nativeElement.offsetWidth;\n        const vph = this.container.nativeElement.offsetHeight;\n        this.TILESIZE = Math.min(vpw, vph) / 18;\n        let tilesX = this.worldmap.sizeX;\n        let tilesY = this.worldmap.sizeY;\n        let mapWidth = tilesX * this.TILESIZE;\n        let mapHeight = tilesY * this.TILESIZE;\n        // console.log(this.TILESIZE, tilesX, tilesY, mapWidth, mapHeight);\n        let stage = new konva__WEBPACK_IMPORTED_MODULE_3___default.a.Stage({\n            container: \"mapholder\",\n            width: mapWidth,\n            height: mapHeight,\n        });\n        let container = this.container.nativeElement;\n        let contwidth = container.offsetWidth;\n        let contheight = container.offsetHeight;\n        // console.log(\"stage \", contwidth, contheight);\n        let bound_sx = -(mapWidth - contwidth);\n        let bound_dx = 0;\n        let bound_top = -(mapHeight - contheight);\n        let bound_bottom = 0;\n        // console.log(\"bounds\", bound_sx, bound_top, bound_dx, bound_bottom);\n        let tilelayer = new konva__WEBPACK_IMPORTED_MODULE_3___default.a.Layer({\n            draggable: true,\n            dragBoundFunc: function (pos) {\n                // console.log(\"tilelayer at\", tilelayer.x(), tilelayer.y());\n                // console.log(\"mouse at\", pos.x, pos.y);\n                let x = Math.min(Math.max(bound_sx, pos.x), bound_dx);\n                let y = Math.min(Math.max(bound_top, pos.y), bound_bottom);\n                return ({\n                    x: x,\n                    y: y\n                });\n            }\n        });\n        stage.add(tilelayer);\n        // let ts_a = new Date();\n        for (let x = 0; x < tilesX; x++) {\n            for (let y = 0; y < tilesY; y++) {\n                let terrain = this.worldmap.getTerrainAt(x, y);\n                // console.log(x, y, terrain);\n                if (terrain != null) {\n                    // let imageObj = new Image();\n                    // imageObj.src = terraintiles.get(terrain);\n                    // let filename = terraintiles.get(terrain);\n                    let tile = new konva__WEBPACK_IMPORTED_MODULE_3___default.a.Image({\n                        image: this.tileimages.get(terrain),\n                        x: x * this.TILESIZE,\n                        y: y * this.TILESIZE,\n                        width: this.TILESIZE,\n                        height: this.TILESIZE,\n                    });\n                    tilelayer.add(tile);\n                    // console.log(\"added \", tile, x * this.TILESIZE, y * this.TILESIZE);\n                }\n            }\n        }\n        // create location markers\n        let widget = this;\n        let locs = this.worldmap.getAllLocations();\n        for (let loc of locs) {\n            // console.log(\"adding location to map: \", loc, \"w coords\", loc[\"coords\"]);\n            // let coords = loc[\"coords\"];\n            // let loctype = loc[\"loctype\"];\n            let marker = new konva__WEBPACK_IMPORTED_MODULE_3___default.a.Image({\n                image: this.markerimages.get(loc.loctype),\n                x: loc.pos.x * this.TILESIZE,\n                y: loc.pos.y * this.TILESIZE,\n                width: this.TILESIZE,\n                height: this.TILESIZE,\n            });\n            // console.log(\"creating marker at\", loc.pos.x, loc.pos.y)\n            tilelayer.add(marker);\n            marker.on(\"click\", function (ev) {\n                console.log(\"marker click \", ev, \"on\", this, \"for loc\", loc);\n                widget.chooseDestination(loc);\n                ev.cancelBubble = true;\n            });\n        }\n        // create hero marker\n        let game = this.sceneref.game;\n        let playerpos = game.hero.pos.getCoords();\n        let imageref = this.markerimages.get(\"hero\");\n        // let imagepath = this.markerfiles.get(\"hero\");\n        let marker = new konva__WEBPACK_IMPORTED_MODULE_3___default.a.Image({\n            image: imageref,\n            x: playerpos[0] * this.TILESIZE,\n            y: playerpos[1] * this.TILESIZE,\n            width: this.TILESIZE,\n            height: this.TILESIZE,\n        });\n        marker.on(\"click\", function (ev) {\n            // console.log(\"marker click \", ev, \"on\", this, \"for loc\", loc);\n            let loc = game.worldmap.getLocationAt(playerpos);\n            if (!!loc) {\n                widget.chooseDestination(loc);\n                ev.cancelBubble = true;\n            }\n        });\n        tilelayer.add(marker);\n        tilelayer.batchDraw();\n        // loclayer.batchDraw();\n        // console.log(\"redraw\");\n        // console.log(\"mapdom size\", this.mapdom.nativeElement.offsetHeight, this.mapdom.nativeElement.offsetWidth);\n        // console.log(\"container size\", this.container.nativeElement.offsetHeight, this.container.nativeElement.offsetWidth);\n        let shiftX = playerpos[0] * this.TILESIZE - this.container.nativeElement.offsetWidth / 2;\n        let shiftY = playerpos[1] * this.TILESIZE - this.container.nativeElement.offsetHeight / 2;\n        tilelayer.setAbsolutePosition({ x: -shiftX, y: -shiftY });\n        // console.log(\"map ready\");\n    }\n    onClose() {\n        this.sceneref.close('BYE WORLD MAP');\n    }\n    chooseDestination(destination) {\n        console.log(\"chose destination \", destination, this.sceneref.scene);\n        /*\n        Place location =  caller.game.map.getPlace(vtag);\n        Position locpos = location.getCoords();\n\n        if ((locpos.x != heropos.x) || (locpos.y != heropos.y))\n        {\n            caller.startScene(new Journey(caller.game, caller.game.map.getPlace((String)view.getTag())));\n        }\n        else\n        {\n            // back to town gate screen, same as back\n            caller.startScene(new TownNav(caller.game));\n        }\n        */\n        // TODO: handle back to current\n        this.mapscene.setDestination(destination);\n        this.sceneref.triggerSceneCheck();\n    }\n};\nWorldMapViewComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__[\"SceneRef\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"mapview\", { static: false })\n], WorldMapViewComponent.prototype, \"mapdom\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"mapholder\", { static: false })\n], WorldMapViewComponent.prototype, \"container\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Output\"])()\n], WorldMapViewComponent.prototype, \"scenecheck\", void 0);\nWorldMapViewComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-world-map-view',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./world-map-view.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/world-map-view/world-map-view.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./world-map-view.component.scss */ \"./src/app/storyteller/scenes/world-map-view/world-map-view.component.scss\")).default]\n    })\n], WorldMapViewComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/storyteller-interface.ts\":\n/*!******************************************************!*\\\n  !*** ./src/app/storyteller/storyteller-interface.ts ***!\n  \\******************************************************/\n/*! exports provided: StorytellerInterface */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StorytellerInterface\", function() { return StorytellerInterface; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _rpg_engine_quests_quest_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../rpg-engine/quests/quest-task */ \"./src/app/rpg-engine/quests/quest-task.ts\");\n\n\n/**\n * StorytellerInterface gives access to the {@link StorytellerComponent} functionalities without creating circular imports (similar to {@link SceneRendererLoader}).\n * Its main use case is loading data during play, to avoid front-loading the whole world and quests.\n * The idea is to add only one object for the {@link SceneUIComponent} objects to use to interact with and keep initialization through {@link SceneUIService} as simple as possible.\n */\nclass StorytellerInterface {\n    constructor(stref) {\n        this.stref = stref;\n    }\n    checkUpdateSceneRender() {\n        this.stref.checkUpdateSceneRender();\n    }\n    getStoryteller() {\n        return this.stref;\n    }\n    loadQuestTasks(refs, callback) {\n        let filerefs = [];\n        let byQuest = new Map();\n        for (let ref of refs) {\n            let inQuest = byQuest.has(ref.quest) ? byQuest.get(ref.quest) : [];\n            inQuest.push(ref.taskid);\n            byQuest.set(ref.quest, inQuest);\n            filerefs.push(ref.quest.fileref);\n        }\n        this.stref.loader.loadDataFiles(filerefs, function (data) {\n            let tasks = [];\n            for (let ref of refs) {\n                let rawtask = data[ref.quest.fileref][\"tasks\"][ref.taskid];\n                let qtask = _rpg_engine_quests_quest_task__WEBPACK_IMPORTED_MODULE_1__[\"QuestTask\"].fromJSON(rawtask);\n                qtask.setCaller(ref.quest);\n                tasks.push(qtask);\n            }\n            callback(tasks);\n        });\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/storyteller.component.scss\":\n/*!********************************************************!*\\\n  !*** ./src/app/storyteller/storyteller.component.scss ***!\n  \\********************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#st-page {\\n  background-image: url(\\\"/assets/ui/temporaryparchment.jpg\\\");\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3N0b3J5dGVsbGVyLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zdG9yeXRlbGxlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLDBEQUFBO0FDQUQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeXRlbGxlci9zdG9yeXRlbGxlci5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNzdC1wYWdlXG57XG5cdGJhY2tncm91bmQtaW1hZ2U6IHVybChcIi9hc3NldHMvdWkvdGVtcG9yYXJ5cGFyY2htZW50LmpwZ1wiKTtcbn1cbiIsIiNzdC1wYWdlIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy91aS90ZW1wb3JhcnlwYXJjaG1lbnQuanBnXCIpO1xufSJdfQ== */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/storyteller.component.ts\":\n/*!******************************************************!*\\\n  !*** ./src/app/storyteller/storyteller.component.ts ***!\n  \\******************************************************/\n/*! exports provided: StorytellerComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StorytellerComponent\", function() { return StorytellerComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ui_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scene-ui/scene-ui.service */ \"./src/app/scene-ui/scene-ui.service.ts\");\n/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common/http */ \"./node_modules/@angular/common/fesm2015/http.js\");\n/* harmony import */ var _rpg_engine_wander_game__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../rpg-engine/wander-game */ \"./src/app/rpg-engine/wander-game.ts\");\n/* harmony import */ var _rpg_engine_scenes_journey_departure__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../rpg-engine/scenes/journey-departure */ \"./src/app/rpg-engine/scenes/journey-departure.ts\");\n/* harmony import */ var _rpg_engine_world_locs_Town__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../rpg-engine/world/locs/Town */ \"./src/app/rpg-engine/world/locs/Town.ts\");\n/* harmony import */ var _rpg_engine_scenes_town_nav__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../rpg-engine/scenes/town-nav */ \"./src/app/rpg-engine/scenes/town-nav.ts\");\n/* harmony import */ var _rpg_engine_scenes_passage_trail__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../rpg-engine/scenes/passage-trail */ \"./src/app/rpg-engine/scenes/passage-trail.ts\");\n/* harmony import */ var _rpg_engine_world_locs_TerrainPass__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../rpg-engine/world/locs/TerrainPass */ \"./src/app/rpg-engine/world/locs/TerrainPass.ts\");\n/* harmony import */ var _rpg_engine_wander_game_state__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../rpg-engine/wander-game-state */ \"./src/app/rpg-engine/wander-game-state.ts\");\n/* harmony import */ var _rpg_engine_world_world_position__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../rpg-engine/world/world-position */ \"./src/app/rpg-engine/world/world-position.ts\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! util */ \"./node_modules/util/util.js\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _storyteller_interface__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./storyteller-interface */ \"./src/app/storyteller/storyteller-interface.ts\");\n/* harmony import */ var _scenes_scene_renderer_loader__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./scenes/scene-renderer-loader */ \"./src/app/storyteller/scenes/scene-renderer-loader.ts\");\n/* harmony import */ var _support_res_loader__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../support/res-loader */ \"./src/app/support/res-loader.ts\");\n/* harmony import */ var _rpg_engine_scenes_meta_scene__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../rpg-engine/scenes/meta-scene */ \"./src/app/rpg-engine/scenes/meta-scene.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nlet StorytellerComponent = class StorytellerComponent {\n    constructor(sceneui, http) {\n        this.sceneui = sceneui;\n        this.http = http;\n        this.loader = new _support_res_loader__WEBPACK_IMPORTED_MODULE_15__[\"ResLoader\"](http);\n        this.usingCharSheet = false;\n    }\n    ngOnInit() {\n        this.sceneui.bindStoryTellerUI(this.getInterface());\n        this.loadGameData();\n    }\n    loadGameData() {\n        let stui = this;\n        _rpg_engine_wander_game__WEBPACK_IMPORTED_MODULE_4__[\"WanderGame\"].loadGame(this.http, function (game) {\n            stui.game = game;\n            stui.checkReadyGame();\n        });\n    }\n    checkReadyGame() {\n        console.log(\"running Wander Game \", this.game);\n        this.checkUpdateSceneRender();\n    }\n    getLocationSensitiveScene() {\n        let ppos = this.game.hero.pos;\n        let place = this.game.worldmap.getLocationAt(ppos.getCoords());\n        console.log(\"place is town? \", place instanceof _rpg_engine_world_locs_Town__WEBPACK_IMPORTED_MODULE_6__[\"Town\"]);\n        let scene = null;\n        if (place instanceof _rpg_engine_world_locs_Town__WEBPACK_IMPORTED_MODULE_6__[\"Town\"]) {\n            scene = new _rpg_engine_scenes_town_nav__WEBPACK_IMPORTED_MODULE_7__[\"TownNav\"](this.game, place);\n        }\n        else if (place instanceof _rpg_engine_world_locs_TerrainPass__WEBPACK_IMPORTED_MODULE_9__[\"TerrainPass\"]) {\n            scene = new _rpg_engine_scenes_passage_trail__WEBPACK_IMPORTED_MODULE_8__[\"PassageTrail\"](this.game, place);\n        }\n        else {\n            // if all fails, go to map\n            scene = new _rpg_engine_scenes_journey_departure__WEBPACK_IMPORTED_MODULE_5__[\"JourneyDeparture\"](this.game);\n        }\n        return scene;\n    }\n    checkUpdateSceneRender() {\n        console.log(\"checkUpdateSceneRender\");\n        let scene = this.game.getActiveScene();\n        console.log(\"checking update on scene \", scene);\n        if (!!scene && scene.sceneFinished()) {\n            // note : this was done INSIDE scene in Java/Android, but we want to be able to affect external quest references and use \"pure\" references instead of whole quest objects\n            if (!!scene.driver) {\n                scene.driver.setCompleted();\n            }\n            if (!!scene.narrative && scene.narrative instanceof _rpg_engine_scenes_meta_scene__WEBPACK_IMPORTED_MODULE_16__[\"MetaScene\"]) {\n                // console.log(\"FINISHING SUB SCENE, UPDATE STATES in UBER SCENE!!!!!\");\n                scene.narrative.moveOn();\n                // console.log(\"updated narrative for sub scene\", scene.narrative.returnStates());\n            }\n            // console.log(\"SCENE TYPECHECK: typeof scene\", scene.constructor.name);\n            // console.log(\"having scene finisher\");\n            scene = scene.getFollowingScene();\n            // console.log(\"following scene is \", scene);\n            // console.log(\"IS FOLLOWING SCENE A METASCENE?\", scene instanceof MetaScene);\n            // console.log(\"SCENE TYPECHECK: typeof following\", scene.constructor.name);\n        }\n        if (scene instanceof _rpg_engine_scenes_meta_scene__WEBPACK_IMPORTED_MODULE_16__[\"MetaScene\"]) {\n            let ms = scene;\n            if (ms.getCurrent() == null) {\n                // console.log(\"SET METASCENE AS FINISHED!\");\n                if (!!ms.driver) {\n                    // console.log(\"SET METASCENE DRIVER AS COMPLETE!\");\n                    ms.driver.setCompleted();\n                }\n                scene = null;\n            }\n        }\n        if (!scene) {\n            scene = this.getLocationSensitiveScene();\n        }\n        // console.log(\"SCENE TYPECHECK: typeof switchto\", scene.constructor.name);\n        this.switchSceneUI(scene);\n    }\n    enterSubScene(scene) {\n        // NOTE: subscenes ALWAYS come from MetaScenes\n        // TODO: Refactor to enforce MetaScene type checking\n        console.log(\"entering sub scene \", scene, \"from narrative\", this.game.activescene);\n        scene.setNarrative(this.game.activescene);\n        this.game.setActiveScene(scene);\n        this.switchSceneUI(scene);\n    }\n    switchSceneUI(scene) {\n        try {\n            // console.log(\"removing previous sceneUI for switch to \", scene);\n            this.sceneui.removeSceneUI();\n        }\n        catch (err) {\n            // console.warn(\"no scene to remove\");\n        }\n        if (scene instanceof _rpg_engine_scenes_meta_scene__WEBPACK_IMPORTED_MODULE_16__[\"MetaScene\"]) {\n            // console.log(\"should switch to internal scene for metascene\");\n            let sub = scene.getCurrent();\n            if (sub != null) {\n                // switch to sub ONLY if there is still another scene\n                scene = sub;\n            }\n        }\n        this.game.setActiveScene(scene);\n        console.log(\"using scene \", scene);\n        let renderer = this.getSceneRenderer(scene);\n        // console.log(\"opening renderer \", renderer, \"for scene\", scene);\n        let ref = this.sceneui.open(renderer, scene);\n        // console.log(\"opened as sceneref\", ref);\n        ref.afterClosed.subscribe(result => {\n            // console.log('Closed scene', scene, renderer, \"w result\", result);\n        });\n        let st = this;\n        ref.subSwitch.subscribe(subscene => {\n            // console.log(\"received switch to sub scene \", subscene, \"from current\", this.game.activescene, \"by\", ref);\n            st.enterSubScene(subscene);\n        });\n    }\n    getSceneRenderer(scene) {\n        return _scenes_scene_renderer_loader__WEBPACK_IMPORTED_MODULE_14__[\"SceneRendererLoader\"].getSceneRendererClass(scene);\n    }\n    doSaveGame() {\n        console.log(\"Saving game state...\");\n        _rpg_engine_wander_game_state__WEBPACK_IMPORTED_MODULE_10__[\"WanderGameState\"].saveToBrowser(this.game);\n    }\n    doLoadGame() {\n        // console.log(\"Loading game state...\");\n        let loaded = _rpg_engine_wander_game_state__WEBPACK_IMPORTED_MODULE_10__[\"WanderGameState\"].loadFromBrowser();\n        // console.log(\"loaded game state \", loaded);\n        if (!Object(util__WEBPACK_IMPORTED_MODULE_12__[\"isUndefined\"])(loaded) && loaded !== null) {\n            let pos = loaded[\"hero\"][\"position\"];\n            this.game.hero.setCoordinates(new _rpg_engine_world_world_position__WEBPACK_IMPORTED_MODULE_11__[\"WorldPosition\"](pos[0], pos[1]));\n            this.game.setActiveScene(null);\n            let qstates = loaded[\"quests\"];\n            for (let questid in qstates) {\n                let quest = this.game.quests.get(questid);\n                for (let taskid in qstates[questid][\"tasks\"]) {\n                    let tstate = qstates[questid][\"tasks\"][taskid];\n                    // console.log(\"setting \", taskid, \"to state\", tstate, \"in\", quest.states);\n                    quest.states.set(taskid, tstate);\n                }\n                quest.completed = qstates[questid][\"completed\"];\n            }\n            this.checkUpdateSceneRender();\n        }\n    }\n    getInterface() {\n        return new _storyteller_interface__WEBPACK_IMPORTED_MODULE_13__[\"StorytellerInterface\"](this);\n    }\n    openCharSheet() {\n        this.usingCharSheet = true;\n    }\n    closeCharSheet() {\n        this.usingCharSheet = false;\n    }\n};\nStorytellerComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ui_service__WEBPACK_IMPORTED_MODULE_2__[\"SceneUIService\"] },\n    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_3__[\"HttpClient\"] }\n];\nStorytellerComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-storyteller',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./storyteller.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/storyteller.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./storyteller.component.scss */ \"./src/app/storyteller/storyteller.component.scss\")).default]\n    })\n], StorytellerComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/support/res-loader.ts\":\n/*!***************************************!*\\\n  !*** ./src/app/support/res-loader.ts ***!\n  \\***************************************/\n/*! exports provided: ResLoader */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ResLoader\", function() { return ResLoader; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass ResLoader {\n    constructor(http) {\n        this.http = http;\n    }\n    loadDataFile(filepath, callback) {\n        const locdata = this.http.get(filepath);\n        locdata.subscribe(function (response) {\n            console.log(\"LOAD RESULT\", response);\n            callback(response);\n        });\n    }\n    loadDataFiles(filepaths, multicallback) {\n        let loaded = {};\n        function getCheckerFunction(key) {\n            return function (data) {\n                loaded[key] = data;\n                if (Object.keys(loaded).length === filepaths.length) {\n                    multicallback(loaded);\n                }\n            };\n        }\n        // ADD ERROR HANDLING\n        for (let filepath of filepaths) {\n            let checker = getCheckerFunction(filepath);\n            this.loadDataFile(filepath, checker);\n            this.http.get(filepath).subscribe(function (response) {\n                loaded[filepath] = response;\n            });\n        }\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/environments/environment.ts\":\n/*!*****************************************!*\\\n  !*** ./src/environments/environment.ts ***!\n  \\*****************************************/\n/*! exports provided: environment */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"environment\", function() { return environment; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nconst environment = {\n    production: false\n};\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n\n\n/***/ }),\n\n/***/ \"./src/main.ts\":\n/*!*********************!*\\\n  !*** ./src/main.ts ***!\n  \\*********************/\n/*! no exports provided */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ \"./node_modules/@angular/platform-browser-dynamic/fesm2015/platform-browser-dynamic.js\");\n/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/app.module */ \"./src/app/app.module.ts\");\n/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./environments/environment */ \"./src/environments/environment.ts\");\n\n\n\n\n\nif (_environments_environment__WEBPACK_IMPORTED_MODULE_4__[\"environment\"].production) {\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"enableProdMode\"])();\n}\nObject(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__[\"platformBrowserDynamic\"])().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_3__[\"AppModule\"])\n    .catch(err => console.error(err));\n\n\n/***/ }),\n\n/***/ 0:\n/*!***************************!*\\\n  !*** multi ./src/main.ts ***!\n  \\***************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! /home/drake/Code/Wander/WanderANG/src/main.ts */\"./src/main.ts\");\n\n\n/***/ })\n\n},[[0,\"runtime\",\"vendor\"]]]);\n//# sourceMappingURL=main-es2015.js.map","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","export default \"\\n\\n\\t<router-outlet></router-outlet>\\n\"","export default \"<div class=\\\"uiwrapper\\\" (click)=\\\"onOverlayClicked($event)\\\">\\n\\t<ng-template appInsertion> </ng-template>\\n</div>\\n\\n<div id=gamecontrols>\\n\\n\\t<a (click)=\\\"openCharSheet()\\\">CHAR</a>\\n\\t&nbsp;&nbsp;\\n\\n    <a (click)=\\\"doLoadGame()\\\" >LOAD</a>\\n        &nbsp;\\n\\t<a (click)=\\\"doSaveGame()\\\" >SAVE</a>\\n\\n</div>\\n\\n<div id=\\\"charsheetmodal\\\" [class.visible]=\\\"this.showCharSheet\\\">\\n\\n\\n\\t<div id=\\\"charsheet\\\">\\n\\t\\t<div id=\\\"charsheetcontrols\\\">\\n\\t\\t\\t<a (click)=\\\"closeCharSheet()\\\">CLOSE</a>\\n\\t\\t</div>\\n\\n\\t\\t<div id=\\\"charsheetpage\\\">\\n\\t\\t\\t<ng-template charsheetInsertion></ng-template>\\n\\t\\t</div>\\n\\n\\t</div>\\n</div>\\n\"","export default \"<div class=\\\"overlay\\\">\\n\\t<div class=\\\"dialog\\\">\\n\\t\\t<div class=\\\"scenescreen\\\">test-blue-screen works!</div>\\n\\t\\t<button (click)=\\\"onClose()\\\">BYE!</button>\\n\\t</div>\\n</div>\\n\"","export default \"<div class=\\\"overlay\\\">\\n\\t<div class=\\\"dialog\\\">\\n\\t\\t<div class=\\\"scenescreen\\\">test-green-screen works!</div>\\n\\t\\t<button (click)=\\\"onClose()\\\">BYE!</button>\\n\\t</div>\\n</div>\\n\"","export default \"<div id=\\\"storyteller-outside\\\">\\n\\n\\t<div id=\\\"storyteller-tester\\\">\\n\\t\\t<p>story-tester works!</p>\\n\\n\\n\\t\\t<div id=\\\"scenerender-test\\\"></div>\\n\\n\\n\\t\\t<button (click)=\\\"loadGreenScreen()\\\">GREEN</button>\\n\\t\\t<button (click)=\\\"loadBlueScreen()\\\">BLUE</button>\\n\\t</div>\\n\\n</div>\\n\"","export default \"<div id=\\\"questlist\\\" >\\n\\n\\t<ul>\\n\\t\\t<li *ngFor=\\\"let entry of this.game.quests | keyvalue\\\">\\n\\t\\t\\t{{entry.value.journal_title}} ({{entry.value.completed}}):\\n\\t\\t\\t<span *ngIf=\\\"!entry.value.completed\\\">{{entry.value.journal_entry}}</span>\\n\\t\\t\\t<span *ngIf=\\\"entry.value.completed\\\">COMPLETED</span>\\n\\t\\t</li>\\n\\t</ul>\\n\\n</div>\\n\"","export default \"<div id=\\\"journeyrender\\\" #renderholder>\\n\\t<div id=\\\"viewrender\\\" #renderview></div>\\n</div>\\n\\n<div id=\\\"journeyinfo\\\" #sceneinfo>\\n\\tTravelling {{getDirectionDescription()}} to {{journeyscene.dest.name}}, day {{journeyscene.stepid}}/{{journeyscene.course.length}};\\n\\n\\t\\t<br>\\n\\n\\t<div class=\\\"journeycontrols\\\">\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"setCamp()\\\">SET CAMP</button> <button class=\\\"journeychoice\\\" (click)=\\\"continueJourney()\\\">JOURNEY ONWARDS</button> <button class=\\\"journeychoice\\\" (click)=\\\"showMap()\\\">SHOW MAP</button>\\n\\n\\t</div>\\n\\n\\n</div>\\n\"","export default \"<div id=\\\"narration_scene\\\" >\\n\\t<div id=\\\"narration_render\\\">\\n\\t\\t    {{tale.paragraphs[tale.progress]}}\\n\\t</div>\\n</div>\\n\\n\\n\\n<div id=\\\"narration_info\\\" #sceneinfo>\\n\\n\\n\\t<div class=\\\"narration_controls\\\">\\n\\n\\t\\t<button class=\\\"pageturn\\\" *ngIf=\\\"tale.progress > 0 || !tale.allowReadBack\\\" (click)=\\\"readBackwards()\\\">BACK</button>\\n\\t\\t<button class=\\\"pageturn\\\" *ngIf=\\\"tale.progress < tale.paragraphs.length - 1\\\" (click)=\\\"readForward()\\\">FORWARD</button>\\n\\t\\t<button class=\\\"pageturn\\\" *ngIf=\\\"tale.progress === tale.paragraphs.length - 1\\\" (click)=\\\"readOut()\\\">END</button>\\n\\t</div>\\n\\n\\n</div>\\n\\n\"","export default \"<ng-template *ngIf=\\\"isTrailing(); then TrailingScene; else AccessScene\\\">\\n\\n</ng-template>\\n\\n<ng-template #AccessScene>\\n\\n\\t<div class=\\\"trailview\\\"></div>\\n\\t<div class=\\\"trailcontext\\\">\\n\\n\\t\\t<div class=\\\"traildescdebug\\\">\\n\\t\\t\\tAt the start of {{ trail.passage.name }}, {{trail.passage.length()}} days journey.\\n\\t\\t</div>\\n\\n\\t\\t\\t<button class=\\\"trailcontrols\\\"  (click)=\\\"journeyOnwards()\\\">ENTER</button>\\n\\t\\t\\t<button class=\\\"trailcontrols\\\" (click)=\\\"leaveTrail()\\\">LEAVE</button>\\n\\t</div>\\n\\n</ng-template>\\n\\n<ng-template #TrailingScene>\\n\\n\\t<div class=\\\"trailview\\\"></div>\\n\\t<div class=\\\"trailcontext\\\">\\n\\n\\t\\t<div class=\\\"traildescdebug\\\">\\n\\t\\t\\tDay {{trail.progress + 1}} of {{trail.passage.length()}} through the {{ trail.passage.name }}.\\n\\t\\t</div>\\n\\n\\t\\t<button class=\\\"trailcontrols\\\" (click)=\\\"journeyOnwards()\\\">FORWARD</button>\\n\\n\\t</div>\\n\\n\\n</ng-template>\\n\"","export default \"<div id=\\\"journeyrender\\\" #renderholder>\\n\\t<div id=\\\"viewrender\\\" #renderview></div>\\n</div>\\n\\n<div id=\\\"journeyinfo\\\" #sceneinfo>\\n\\tTravelling {{getDirectionDescription()}}, day {{getDayOfTravel()}}<span *ngIf=\\\"roamingscene.startloc !== null\\\"> from {{roamingscene.startloc.name}}</span>.\\n\\n\\t\\t<br>\\n\\n\\t<div class=\\\"journeycontrols\\\">\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"moveTurnLeft()\\\">TURN LEFT</button>\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"moveForward()\\\">JOURNEY ONWARDS</button>\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"moveTurnRight()\\\">TURN RIGHT</button>\\n\\t\\t<br>\\n\\n\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"actionSetCamp()\\\">SET CAMP</button>  <button class=\\\"journeychoice\\\" (click)=\\\"showMap()\\\">SHOW MAP</button>\\n\\n\\t</div>\\n\\n\\n</div>\\n\"","export default \"<div id=\\\"choicescenery\\\" >\\n\\t<div id=\\\"sceneryview\\\" #scenerender></div>\\n</div>\\n\\n\\n\\n<div id=\\\"choiceinfo\\\" #sceneinfo>\\n\\n\\n\\t<div class=\\\"choicecontrols\\\" *ngIf=\\\"narr_done == null\\\">\\n\\n\\t\\t<span>{{this.skilltest.situation}}</span>\\n\\t\\t<br>\\n\\t\\t<span *ngIf=\\\"narr_fail != null\\\">\\n\\t\\t\\t{{narr_fail}}\\n\\t\\t</span>\\n\\n\\t\\t<table>\\n\\t\\t\\t<tr *ngFor=\\\"let option of this.skilltest.options\\\">\\n\\t\\t\\t\\t<td style=\\\"text-align: left\\\">{{option.description}}</td>\\n\\t\\t\\t\\t<td>({{option.tried}}/{{option.max_tries}}></td>\\n\\t\\t\\t\\t<td>\\n\\t\\t\\t\\t\\t<button class=\\\"skillchoice\\\" (click)=\\\"this.tryOption(option, true)\\\">DO</button>\\n\\t\\t\\t\\t\\t<button class=\\\"skillchoice\\\"(click)=\\\"this.tryOption(option, false)\\\">FAIL</button>\\n<!--\\t\\t\\t\\t\\t<span (click)=\\\"this.tryOption(option, true)\\\">[DO]</span>-->\\n<!--\\t\\t\\t\\t\\t<span (click)=\\\"this.tryOption(option, false)\\\">[FAIL]</span>-->\\n\\t\\t\\t\\t</td>\\n\\n\\t\\t\\t</tr>\\n\\t\\t</table>\\n\\n\\t\\t<!--\\n\\t\\t<ul class=\\\"choices-prompt\\\">\\n\\n\\t\\t\\t<li *ngFor=\\\"let option of this.skilltest.options\\\">{{option.description}} ({{option.tried}}/{{option.max_tries}})\\n\\t\\t\\t\\t<span (click)=\\\"this.tryOption(option, true)\\\">[DO]</span>\\n\\t\\t\\t\\t<span (click)=\\\"this.tryOption(option, false)\\\">[FAIL]</span>\\n\\t\\t\\t</li>\\n\\t\\t</ul>\\n\\t\\t-->\\n\\n\\t</div>\\n\\n\\t<div class=\\\"choicecontrols\\\" *ngIf=\\\"narr_done != null\\\">\\n\\t\\t<span>{{this.narr_done}}</span>\\n\\t\\t<ul class=\\\"choices-prompt\\\">\\n\\t\\t\\t<li><span (click)=\\\"this.leaveScene()\\\">[OK]</span></li>\\n\\t\\t</ul>\\n\\n\\t</div>\\n\\n\\n</div>\\n\"","export default \"<div id=\\\"choicescenery\\\" >\\n\\t<div id=\\\"sceneryview\\\" #scenerender></div>\\n</div>\\n\\n\\n\\n<div id=\\\"choiceinfo\\\" #sceneinfo>\\n\\n\\n\\t<div class=\\\"choicecontrols\\\">\\n\\n\\t\\t<span>{{this.choice.prompt}}</span>\\n\\n\\t\\t<ul class=\\\"choices-prompt\\\">\\n\\n\\t\\t\\t<li *ngFor=\\\"let option of this.choice.options\\\" (click)=\\\"selectOption(option)\\\">{{option.description}}</li>\\n\\t\\t</ul>\\n\\n\\n\\t</div>\\n\\n\\n</div>\\n\"","export default \"<div id=\\\"townscene\\\" >\\n\\t<div id=\\\"locrender\\\" #locrender></div>\\n</div>\\n\\n\\n\\n<div id=\\\"towninfo\\\" #sceneinfo>\\n\\n\\n\\t<div class=\\\"movecontrols\\\">\\n\\n\\t\\t<span>{{this.localizeTextAsset(this.townscene.currentloc.description)}}</span>\\n\\n\\t\\t<ul class=\\\"townnav-prompt\\\">\\n\\t\\t\\t<li (click)=\\\"moveToLoc(direction.target)\\\" *ngFor=\\\"let direction of this.townscene.currentloc.moves\\\">{{this.localizeTextAsset(direction.prompt)}}</li>\\n\\t\\t\\t<li (click)=\\\"activatePrompt(task)\\\" *ngFor=\\\"let task of this.taskprompts\\\">{{task.prompt}}</li>\\n\\t\\t</ul>\\n\\n\\n\\t</div>\\n\\n\\n</div>\\n\"","export default \"<div id=\\\"mapholder\\\" #mapholder>\\n\\t<div id=\\\"maprender\\\" #mapview></div>\\n</div>\\n\"","export default \"<div id=\\\"st-page\\\">\\n\\n\\n</div>\\n\\n\\n\"","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {NgModule} from '@angular/core';\nimport {Routes, RouterModule} from '@angular/router';\nimport {StoryTesterComponent} from \"./story-tester/story-tester.component\";\nimport {StorytellerComponent} from \"./storyteller/storyteller.component\";\n\n\nconst routes: Routes = [\n\t{path: '', redirectTo: '/game', pathMatch: 'full'},\n\t{path: 'tester', component: StoryTesterComponent},\n\t{path: 'game', component: StorytellerComponent},\n\t\n];\n\n@NgModule({\n\timports: [RouterModule.forRoot(routes)],\n\texports: [RouterModule]\n})\nexport class AppRoutingModule {\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJ9 */\"","import {Component} from '@angular/core';\n\n@Component({\n\tselector: 'app-root',\n\ttemplateUrl: './app.component.html',\n\tstyleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n\ttitle = 'WanderANG';\n}\n","import {BrowserModule} from '@angular/platform-browser';\nimport {NgModule} from '@angular/core';\n\nimport {AppRoutingModule} from './app-routing.module';\nimport {AppComponent} from './app.component';\nimport {StorytellerComponent} from './storyteller/storyteller.component';\nimport {SceneUIComponent} from \"./scene-ui/scene-ui.component\";\nimport {TestGreenScreenComponent} from \"./story-tester/scenes/test-green-screen/test-green-screen.component\";\nimport {TestBlueScreenComponent} from \"./story-tester/scenes/test-blue-screen/test-blue-screen.component\";\nimport { StoryTesterComponent } from './story-tester/story-tester.component';\nimport {HttpClientModule} from \"@angular/common/http\";\nimport { WorldMapViewComponent } from './storyteller/scenes/world-map-view/world-map-view.component';\nimport { JourneyStepComponent } from './storyteller/scenes/journey-step/journey-step.component';\nimport { TownUIComponent } from './storyteller/scenes/town-ui/town-ui.component';\nimport { RoamingStepComponent } from './storyteller/scenes/roaming-step/roaming-step.component';\nimport { PassageThroughComponent } from './storyteller/scenes/passage-through/passage-through.component';\nimport { NarrationPagesComponent } from './storyteller/scenes/narration-pages/narration-pages.component';\nimport { StoryChoiceComponent } from './storyteller/scenes/story-choice/story-choice.component';\nimport { SkillActionComponent } from './storyteller/scenes/skill-action/skill-action.component';\nimport { QuestJournalComponent } from './storyteller/charsheet/quest-journal/quest-journal.component';\nimport {SceneUIModule} from \"./scene-ui/scene-ui.module\";\n\n@NgModule({\n\tdeclarations: [\n\t\tAppComponent,\n\t\tStorytellerComponent,\n\t\tTestGreenScreenComponent,\n\t\tTestBlueScreenComponent,\n\t\tStoryTesterComponent,\n\t\tWorldMapViewComponent,\n\t\tJourneyStepComponent,\n\t\tTownUIComponent,\n\t\tRoamingStepComponent,\n\t\tPassageThroughComponent,\n\t\tNarrationPagesComponent,\n\t\tStoryChoiceComponent,\n\t\tSkillActionComponent,\n\t\tQuestJournalComponent,\n\t],\n\timports: [\n\t\tHttpClientModule,\n\t\tBrowserModule,\n\t\tAppRoutingModule,\n\t\tSceneUIModule\n\t],\n\tproviders: [],\n\tbootstrap: [AppComponent],\n\texports: [\n\t\tQuestJournalComponent\n\t],\n\tentryComponents: [\n\t\tSceneUIComponent,\n\t\tTestGreenScreenComponent,\n\t\tTestBlueScreenComponent,\n\t\tWorldMapViewComponent,\n\t\tJourneyStepComponent,\n\t\tRoamingStepComponent,\n\t\tTownUIComponent,\n\t\tPassageThroughComponent,\n\t\tNarrationPagesComponent,\n\t\tStoryChoiceComponent,\n\t\tSkillActionComponent,\n\t\tQuestJournalComponent\n\t]\n})\nexport class AppModule {\n}\n","import {QuestTaskCondition} from \"./quest-task-condition\";\nimport {QuestTask} from \"./quest-task\";\nimport {WanderGame} from \"../wander-game\";\nimport {WanderScene} from \"../wander-scene\";\n\n/**\n * QuestRef representes a pointer to all quest resources with a specific ID.\n * It contains a number of QuestTaskState object describing the internal \"live\" state of the quest and can be used by QuestLoader to know which data must be loaded to provide a certain Scene inside it\n */\n\nexport class QuestRef {\n\n\t// for now we load the quest ENTIRELY from a SINGLE SPECIFIC file\n\tfileref: string;\n\tquestid: string;\n\n\tconditions: Map<string, QuestTaskCondition[]>;\n\tstates: Map<string, number>;\n\n\t// have AT LEAST one completer completed makes the quest complete\n\tcompleters: string[];\n\tcompleted: boolean;\n\n\tjournal_entry: string;\n\tjournal_title: string;\n\n\tconstructor (questid: string, fileref: string)\n\t{\n\t\tthis.questid = questid;\n\t\tthis.fileref = fileref;\n\n\n\t\tthis.conditions = new Map<string, QuestTaskCondition[]>();\n\t\tthis.completers = [];\n\t\tthis.completed = false;\n\t\tthis.states = new Map<string, number>();\n\n\t\tthis.journal_entry = null;\n\t\tthis.journal_title = questid;\n\t}\n\n\n\tstatic fromJSON (src: object, fileref: string): QuestRef\n\t{\n\t\tlet generated = new QuestRef (src[\"questid\"], fileref);\n\n\t\tfor (let taskid in src[\"tasks\"])\n\t\t{\n\t\t\tlet taskraw = src[\"tasks\"][taskid];\n\t\t\tlet taskconditions = [];\n\t\t\tif (!!taskraw[\"conditions\"]) {\n\t\t\t\tfor (let conditionraw of taskraw[\"conditions\"]) {\n\t\t\t\t\ttaskconditions.push(QuestTaskCondition.fromJSON(conditionraw));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgenerated.journal_title = src[\"title\"];\n\t\t\tgenerated.journal_entry = src[\"journal\"];\n\n\t\t\t// an unconditional task would appear ALWAYS\n\t\t\tif (taskconditions.length > 0)\n\t\t\t{\n\t\t\t\tgenerated.conditions.set(taskid, taskconditions);\n\t\t\t\tgenerated.states.set(taskid, -1);\n\t\t\t}\n\t\t}\n\n\t\treturn generated;\n\t}\n\n\tisTaskCompleted (taskid: string)\n\t{\n\t\treturn this.states.get(taskid) !== WanderScene.LEAVESTATE_UNFINISHED;\n\t}\n\n\tsetCompletedTask (task: QuestTask)\n\t{\n\t\tlet taskid = task.taskid;\n\t\t// let ctask = this.loadTask(taskid);\n\t\t// TODO: re-add journal entry\n\t\t// this.journal_entry = task.journal_after;\n\t\tthis.journal_entry = task.journal_after;\n\t\tconsole.log(\"updating quest journal from task\", task, task.journal_after);\n\t\tlet returnstates = task.getReturnStates();\n\t\t// Map<String, Integer> returnstates = ctask.getReturnStates();\n\t\tfor (let tasksceneid of returnstates.keys())\n\t\t{\n\t\t\tthis.states.set(tasksceneid, returnstates.get(tasksceneid));\n\t\t}\n\n\t\tif (this.completers.indexOf(taskid) !== -1)\n\t\t{\n\t\t\tthis.completed = true;\n\t\t}\n\t}\n\n\tgetAvailableTasks (game: WanderGame): string[]\n\t{\n\t\tlet available = [];\n\t\tfor (let taskid of this.conditions.keys())\n\t\t{\n\t\t\t// let task = this.tasks.get(taskid);\n\t\t\t// console.log(\"checking quest task \", taskid, \" w conditions\", this.conditions, \"for \", this.conditions);\n\n\t\t\tif ((!this.isTaskCompleted(taskid)) && this.conditions.has(taskid))\n\t\t\t{\n\t\t\t\tlet satisfied = true;\n\t\t\t\tfor (let current of this.conditions.get(taskid))\n\t\t\t\t{\n\t\t\t\t\tif (!current.verifyCondition(game, this))\n\t\t\t\t\t{\n\t\t\t\t\t\tsatisfied = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (satisfied)\n\t\t\t\t{\n\t\t\t\t\tavailable.push(taskid);\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\treturn available;\n\t}\n\n\n\n\n}\n","/**\n *\n */\nimport {WanderGame} from \"../wander-game\";\nimport {Quest} from \"./quest\";\nimport {QuestRef} from \"./quest-ref\";\n\nexport class QuestTaskCondition\n{\n\n\n\n\t// comment from ANDROID source\n\t// will be subclassed and possibly changed to Interface + Factory for the future so we can run complex checks around the game context\n\n\tprivate type: QuestTaskConditionType;\n\tprivate target: string;\n\n\tconstructor (type: QuestTaskConditionType, target_value: string)\n\t{\n\t\tthis.type = type;\n\t\tthis.target = target_value;\n\t}\n\n\tverifyCondition (game: WanderGame, quest: QuestRef): boolean\n\t{\n\t\t// console.log(\"checking condition \", this, \" type \", this.type, \" target \", this.target);\n\t\tif (this.type === QuestTaskConditionType.LOCATION)\n\t\t{\n\t\t\treturn this.verifyConditionLocation(game, quest);\n\n\t\t}\n\t\telse if (this.type === QuestTaskConditionType.COMPLETION)\n\t\t{\n\t\t\treturn this.verifyConditionCompletion(game, quest);\n\t\t}\n\t\telse if (this.type === QuestTaskConditionType.TRIGGER)\n\t\t{\n\t\t\treturn this.verifyConditionTrigger(game, quest);\n\t\t}\n\n\t\t// no extra case since the enum cannot run over?\n\t}\n\n\tstatic fromJSON (src: object): QuestTaskCondition\n\t{\n\t\treturn new QuestTaskCondition(src[\"test\"], src[\"target\"]);\n\t}\n\n\t// NOTE: we might want to subclass conditions if the handling becomes more complex\n\n\tverifyConditionLocation (game: WanderGame, quest: QuestRef): boolean\n\t{\n\t\ttry\n\t\t{\n\t\t\t// console.log(\"matching pos \", game.hero.pos, game.hero.locpos, \"w\", this.target);\n\t\t\tlet loc = game.worldmap.getLocationById(this.target[\"locid\"]);\n\t\t\tlet hasloc = game.hero.pos != null && game.hero.pos.matches(loc.pos);\n\t\t\tif (hasloc && this.target[\"roomid\"])\n\t\t\t{\n\t\t\t\thasloc = game.hero.locpos[\"roomid\"] === this.target[\"roomid\"];\n\t\t\t}\n\n\t\t\treturn hasloc;\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\tconsole.warn(\"illegal loc target for location condition: \", this.target);\n\t\t\treturn false;\n\t\t}\n\n\n\t}\n\n\tverifyConditionCompletion (game: WanderGame, quest: QuestRef): boolean\n\t{\n\t\treturn quest.isTaskCompleted(this.target);\n\t}\n\n\tverifyConditionTrigger (game: WanderGame, quest: QuestRef): boolean\n\t{\n\t\t// technically the TRIGGER condition is implicit so this should not be needed but we keep it just in case\n\t\treturn quest.isTaskCompleted(this.target);\n\t}\n\n}\n\nexport enum QuestTaskConditionType {\n\tLOCATION = \"location\",\n\tTRIGGER = \"trigger\",\n\tCOMPLETION = \"completed\"\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {Quest} from \"./quest\";\nimport { SceneFactory } from '../scene-factory';\nimport {QuestRef} from \"./quest-ref\";\n\nexport class QuestTask\n{\n\n\t// a quest task is a container for a scene object that also includes a condition and a number of other items (TBD) such as journal updates etc.\n\n\ttaskid: string;\n\tscene: WanderScene;\n\tjournal_after: string;\n\tprompt: string;\n\n\t// we use this to make the conditions check quicker, a completed  task\n\t// TODO: consider removing the task from the quest altogether after completion\n\t// but for now we'll keep a flag on it\n\tcompleted: boolean;\n\n\t// by default a questtask never triggers anything\n\tcaller: QuestRef;\n\n\t// by default a questtask never triggers anything\n\ttriggered: string;\n\n\tconstructor (taskid: string, scene: WanderScene, prompt: string, journal_after: string)\n\t{\n\t\tthis.taskid = taskid;\n\t\tthis.scene = scene;\n\t\tthis.journal_after = journal_after;\n\t\tthis.prompt = prompt;\n\t\tthis.completed = false;\n\t\tthis.caller = null;\n\t\tthis.triggered = null;\n\t}\n\n\tgetReturnStates (): Map<string, number>\n\t{\n\t\tlet states = new Map<string, number>();\n\n\t\t// TODO: handle multiscene per Java example\n\t\t/*\n\t\tif (this.scene instanceof MultiScene)\n\t\t{\n\t\t\t// this should flatten the hierarchy under it\n\t\t\tMap<String, Integer> scenestates = ((MultiScene)this.scene).returnStates();\n\t\t\tfor (String sceneid: scenestates.keySet())\n\t\t\t{\n\t\t\t\tString sceneidcombo = this.taskid+\".\"+sceneid;\n\t\t\t\tstates.put(sceneidcombo, scenestates.get(sceneid));\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstates.put(this.taskid, this.scene.returnState());\n\t\t}\n\t\t*/\n\n\t\tstates.set(this.taskid, this.scene.returnState());\n\t\treturn states;\n\t}\n\n\tsetCaller (questref: QuestRef)\n\t{\n\t\tthis.caller = questref;\n\t}\n\n\tisCompleted (): boolean\n\t{\n\t\treturn this.completed;\n\t}\n\n\tsetCompleted ()\n\t{\n\t\tthis.completed = true;\n\t\tif (this.caller != null)\n\t\t{\n\t\t\tthis.caller.setCompletedTask(this);\n\t\t}\n\t}\n\n\tsetTriggered (taskid: string)\n\t{\n\t\tthis.triggered = taskid;\n\t}\n\n\tstatic fromJSON (src: object): QuestTask\n\t{\n\n\t\t// NOTE: we may want to generate the scene ON THE FLY later\n\n\t\tlet taskid = src[\"taskid\"];\n\t\tlet scene = SceneFactory.fromJSON(src[\"scene\"]);\n\n\t\tlet prompt = src[\"prompt\"];\n\t\tlet journal_after = !!src[\"journal_after\"] ? src[\"journal_after\"] : null;\n\n\t\tlet task = new QuestTask (taskid, scene, prompt, journal_after);\n\t\treturn task;\n\t}\n\n}\n","import { WanderScene } from './wander-scene';\nimport { Narration } from './scenes/narration';\nimport {BranchingMetaScene} from \"./scenes/branching-meta-scene\";\nimport {StoryBranch} from \"./scenes/story-branch\";\nimport {SkillTest, SkillTestOption} from \"./scenes/skill-test\";\nimport {WanderSceneTrigger} from \"./scenes/struct/wander-scene-trigger\";\nimport {MultiScene} from \"./scenes/struct/multi-scene\";\nimport {MetaScene} from \"./scenes/meta-scene\";\nexport class SceneFactory {\n\n    public static fromJSON (src: object): WanderScene\n    {\n\n        const GENERATORS_BYTYPE = {\n            \"narrative\": SceneFactory.createSceneNarration,\n\t\t\t\"branching\": SceneFactory.createSceneBranchingMeta,\n\t\t\t\"choice\": SceneFactory.createSceneStoryBranch,\n\t\t\t\"skill\": SceneFactory.createSceneSkillTest\n        };\n\n        // console.log(\"generating scen from json: \", src[\"type\"], src[\"data\"]);\n\n        try {\n            return GENERATORS_BYTYPE[src[\"type\"]](src[\"data\"]);\n        }\n        catch (err)\n        {\n        \tconsole.error(err);\n            console.warn(\"cannot yet create scene of type \", src[\"type\"]);\n            return null;\n        }\n\n    }\n\n    // NOTE: we CANNOT put the individual factory methods in the respective classes\n    // because some of them will need to use others (e.g. metascenes) and create a circular import\n\n    static createSceneNarration (src: object): Narration\n    {\n        const paragraphs = src[\"text\"];\n        if (!paragraphs)\n        {\n            throw \"Narrative type scene needs at least one text paragraph\";\n        }\n\n\n        // TODO: TBA\n        let title = null;\n        let images = null;\n\n        return new Narration (null, null, paragraphs, images);\n    }\n\n    static createSceneStoryBranch (src: object): WanderScene\n    {\n\t\t// console.warn (\"generating STORYBRANCH scene from \", src);\n\n\t\tconst generated = new StoryBranch(null);\n\n\t\tgenerated.prompt = src[\"prompt\"];\n\t\tfor (let optdesc of src[\"options\"])\n\t\t{\n\t\t\tlet endstate = optdesc.hasOwnProperty(\"value\") ? optdesc[\"value\"] : 0;\n\t\t\tlet note = optdesc.hasOwnProperty(\"note\") ? optdesc[\"note\"] : null;\n\t\t\tgenerated.addOption(optdesc[\"description\"], endstate, note);\n\t\t}\n\n\t\tgenerated.setImage(src[\"image\"]);\n\n\n\t\treturn generated;\n    }\n\n\tstatic createSceneSkillTest (src: object): SkillTest {\n\n    \tconst scene = new SkillTest(null);\n\n\t\tif (!!src[\"description\"]) {\n\t\t\tscene.setDesc(src[\"description\"]);\n\t\t}\n\n\t\tfor (let optdesc of src[\"options\"])\n\t\t{\n\t\t\tscene.addAction(SkillTestOption.fromJSON(optdesc));\n\t\t}\n\n\t\tif (!!src[\"image\"])\n\t\t{\n\t\t\tscene.setImage(src[\"image\"]);\n\t\t}\n\n\t\treturn scene;\n\t}\n\n\tstatic createSceneMeta (src: object): MultiScene\n\t{\n\t\tlet generated = new MetaScene (null);\n\t\tfor (let json_scene of src[\"scenes\"])\n\t\t{\n\t\t\tlet sceneid = json_scene[\"id\"];\n\t\t\tlet scene = SceneFactory.fromJSON(json_scene);\n\t\t\t// console.log(\"Generated sceneobject \", scene, \" w id \" + sceneid);\n\t\t\tscene.setNarrative(generated);\n\t\t\tif (scene != null)\n\t\t\t{\n\t\t\t\tgenerated.addScene(scene, sceneid);\n\t\t\t}\n\t\t}\n\n\t\tfor (let key in src[\"triggers\"])\n\t\t{\n\t\t\tgenerated.setTrigger(key, src[\"triggers\"][key]);\n\t\t}\n\n\n\t\tgenerated.setStarter(src[\"starter\"]);\n\n\n\t\treturn generated;\n\t}\n\n\n\tstatic createSceneBranchingMeta (src: object): WanderScene\n\t{\n\t\tlet generated = new BranchingMetaScene(null);\n\t\t// console.log(\"Creating BMS from \", src);\n\t\tfor (let json_scene of src[\"scenes\"])\n\t\t{\n\t\t\tlet sceneid = json_scene[\"id\"];\n\t\t\tlet scene = SceneFactory.fromJSON(json_scene);\n\n\t\t\t// console.log(\"QUEST\", \"Generated sceneobject \", scene, \" w id \" + sceneid);\n\t\t\tif (scene != null) {\n\t\t\t\tscene.setNarrative(generated);\n\t\t\t\tgenerated.addScene(scene, sceneid);\n\t\t\t}\n\t\t}\n\n\t\tfor (let sceneid in src[\"triggers\"]) {\n\t\t\tlet trigger = WanderSceneTrigger.fromJSON(src[\"triggers\"][sceneid]);\n\t\t\tgenerated.setTriggered(sceneid, trigger);\n\t\t}\n\n\t\tgenerated.setStarter(src[\"starter\"]);\n\n\n\t\treturn generated;\n\t}\n\n\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {MetaScene} from \"./meta-scene\";\nimport {WanderSceneTrigger} from \"./struct/wander-scene-trigger\";\nimport {WanderGame} from \"../wander-game\";\n\nexport class BranchingMetaScene extends MetaScene\n{\n\t// scene triggers are more complex than in MetaScene; as such the key represents the TRIGGERED scene, not the triggerer\n\t// also, there can be only ONE trigger per scene, though it's free in terms of complexity as long as  it's derived from SceneTrigger\n\ttriggers_byscene: Map<string, WanderSceneTrigger>;\n\n\n\tconstructor (game: WanderGame)\n\t{\n\t\tsuper(game);\n\t\tthis.initStructure();\n\t}\n\n\tinitStructure ()\n\t{\n\t\tthis.subs = new Map<string, WanderScene>();\n\t\tthis.triggers_byscene = new Map<string, WanderSceneTrigger>();\n\t\tthis.returncodes = new Map<string, number>();\n\t\tthis.starter = null;\n\t\tthis.activesub = null;\n\t}\n\n\n\tsetTriggered (sceneid: string, trigger: WanderSceneTrigger)\n\t{\n\t\tthis.triggers_byscene.set(sceneid, trigger);\n\t}\n\n\tmoveOn ()\n\t{\n\t\t// NOTE: this method ASSUMES we have a sceneFinished call returning true right before\n\n\t\tconsole.log(\"Quest/BranchingScene: MetaScene \" + this + \" MoveOn from \" + this.activesub);\n\n\t\tthis.returncodes.set(this.activesub, this.getCurrent().returnState());\n\n\t\t// switches to the next scene in the flow\n\t\t// NOTE: it takes the FIRST active trigger, conflicts are not handled\n\t\tthis.activesub = null;\n\t\tfor (let candidate of this.triggers_byscene.keys())\n\t\t{\n\t\t\tlet trigger = this.triggers_byscene.get(candidate);\n\t\t\tlet candidatestate = this.returncodes.get(candidate);\n\t\t\tif (trigger.isActive(this.returncodes) && candidatestate === WanderScene.LEAVESTATE_UNFINISHED)\n\t\t\t{\n\t\t\t\t// we have triggered a new scene\n\t\t\t\tthis.activesub = candidate;\n\t\t\t}\n\t\t}\n\n\t\tconsole.log(\"Quest/MetaScene\", \"MetaScene \" + this + \" MoveOn to \" + this.activesub);\n\t}\n\n\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {WanderGame} from \"../wander-game\";\nimport {WorldMap} from \"../world/world-map\";\nimport {Place} from \"../world/locs/Place\";\nimport {Roaming} from \"./roaming\";\nimport {WorldPosition} from \"../world/world-position\";\n\nexport class JourneyDeparture  extends  WanderScene {\n\n\tworldmap: WorldMap;\n\n\tdestination: Place;\n\n\tconstructor (game: WanderGame)\n\t{\n\t\tsuper(game);\n\t\tthis.worldmap = game.worldmap;\n\t}\n\n\tsceneFinished(): boolean {\n\t\treturn !!this.destination;\n\t}\n\n\tsetDestination (dest: Place)\n\t{\n\t\t// let startingpos = this.game.hero.coordinates;\n\t\t// let destcoords = dest[\"coords\"];\n\t\tthis.destination = dest;\n\t}\n\n\tgetFollowingScene(): WanderScene\n\t{\n\t\tlet next = null;\n\t\tif (!this.destination.matchesPosition(this.game.hero.pos))\n\t\t{\n\t\t\tlet direction = WorldPosition.getRelativeGeneralDirection(this.game.hero.pos, this.destination.pos);\n\t\t\tnext = new Roaming(this.game, this.game.hero.pos, direction);\n\t\t\t// next.setStops(this.game.hero.coordinates, this.destination[\"coords\"]);\n\t\t}\n\t\treturn next;\n\t}\n\n\n\n}\n","import {WanderGame} from \"../wander-game\";\nimport {WanderScene} from \"../wander-scene\";\nimport {WorldPosition} from \"../world/world-position\";\nimport {Place} from \"../world/locs/Place\";\n\nexport class Journey extends WanderScene {\n\n\tstart: WorldPosition;\n\tdest: Place;\n\n\tcourse: WorldPosition[];\n\tstepid: number;\n\n\t// NOTE that start is optional and will default to player's position\n\tconstructor (game: WanderGame, dest: Place, start?: WorldPosition)\n\t{\n\t\tsuper(game);\n\n\t\tthis.start = !start ? game.hero.pos : start;\n\t\tthis.dest = dest;\n\t\tthis.course = game.worldmap.getCourse(this.start, this.dest.pos);\n\t\tthis.stepid = 0;\n\t}\n\n\t// TODO: add support for custom stops in case the player can  (interpolating)\n\n\tstep ()\n\t{\n\t\tthis.stepid++;\n\t}\n\n\tgetCurrentCoordinates (): WorldPosition\n\t{\n\t\tif (this.stepid < this.course.length)\n\t\t{\n\t\t\treturn this.course[this.stepid];\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.dest.pos;\n\t\t}\n\n\t}\n\n\tsceneFinished(): boolean {\n\t\treturn this.stepid >= this.course.length;\n\t}\n\n\tgetStepDirection (stepid: number): number[]\n\t{\n\t\tlet cpos = this.course[stepid];\n\t\tlet nextpos = stepid + 1 < this.course.length ? this.course[stepid + 1] : this.dest.pos;\n\t\treturn [nextpos.x - cpos.x, nextpos.y - cpos.y];\n\t}\n\n\n}\n","import {MultiScene} from \"./struct/multi-scene\";\nimport {WanderScene} from \"../wander-scene\";\nimport {WanderGame} from \"../wander-game\";\n\n/**\n *  MetaScene is a Scene that contains several different scenes and has a logic to connect them all\n *  as such it seems to transparently work like a normal scene, but its getFollowing checks on the internal scene graph before giving back the narrative.\n *  Technically each sub-scene is the current active scene except all calls are mediated by the MetaScene above them\n *  NOTE: due to how this works the MetaScene cannot be leaved, the same as with a normal scene.\n *  While it incorporates several scenes, for the purpose of the game all of these act as a single multi-interface scene\n */\nexport class MetaScene extends MultiScene\n{\n\n\tsubs: Map<string, WanderScene>;\n\n\t// using this to bubble up complex combos of return codes automatically (the scene could be destroyed before the info is retrieved)\n\treturncodes: Map<string, number>;\n\n\t// note: for now the implementation is simple: ENDING one scene passes to the next according to this map\n\t// in the future there may be a more comples trigger system that includes conditions of some kind\n\t// so we can handle different outcomes (though usually this should fall on the quest entity)\n\t// the KEY is the scene that must end to make the triggered one start\n\ttriggers: Map<string, string>;\n\t// trigger sequences are checked from starter on\n\tstarter: string;\n\tactivesub: string;\n\n\t// NOTE: the following may not be needed for now since we check getFollowing\n\t// only after checking that the current scene is finished. Keep in mind this can be easily\n\t// broken if the storyteller flow gets messed up. WATCH THIS FOR DEBUG then\n\n\t// completion status IF COMPLETED ONLY is set in this map for quicker checking\n\t// when the trigger sequence is rechecked so we can quickly see if the whole chain is complete\n\t// NOTE: we use a map because in the future conditions may be more complex and we may have\n\t// chains completed without all possible scenes completed\n\t// (or we could template the thing so we create a complex set of scene but only enable\n\t// chaining on a subset of them)\n\t// private Map<String, Boolean> completion;\n\n\tconstructor (game: WanderGame)\n\t{\n\t\tsuper(game);\n\t\tthis.initStructure();\n\t}\n\n\tinitStructure ()\n\t{\n\t\tthis.subs = new Map<string, WanderScene>();\n\t\tthis.triggers = new Map<string, string>();\n\t\tthis.returncodes = new Map<string, number>();\n\t\tthis.starter = null;\n\t\tthis.activesub = null;\n\t}\n\n\tpublic getFollowing (): WanderScene\n\t{\n\t\tthis.moveOn();\n\t\tif (this.subs.has(this.activesub))\n\t\t{\n\t\t\treturn this;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.getNarrative();\n\t\t}\n\t}\n\n\tgetCurrent (): WanderScene\n\t{\n\t\tlet current = this.getSceneById(this.activesub);\n\t\tif (current instanceof MultiScene)\n\t\t{\n\t\t\tlet ms = current as MultiScene;\n\t\t\treturn ms.getCurrent();\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn current;\n\t\t}\n\t}\n\n\n\treturnStates(): Map<string, number> {\n\t\treturn this.returncodes;\n\t}\n\n\tsceneFinished(): boolean {\n\t\treturn this.activesub == null || this.getSceneById(this.activesub).sceneFinished();\n\t}\n\n\t// addScene, setTrigger, setStarter are separated\n\t// so it's easier to use factory methods or static fromjson creators\n\n\taddScene(candidate: WanderScene, sceneid: string)\n\t{\n\t\tthis.subs.set(sceneid, candidate);\n\t\tthis.returncodes.set(sceneid, WanderScene.LEAVESTATE_UNFINISHED);\n\t}\n\n\tsetTrigger (triggerer: string, triggered: string)\n\t{\n\t\tthis.triggers.set(triggerer, triggered);\n\t}\n\n\tsetStarter (sceneid: string)\n\t{\n\t\tconsole.log(\"Quest/MetaScene\", \"Setting starter for metascene to \" + sceneid);\n\t\tthis.starter = sceneid;\n\t\tif (this.activesub == null)\n\t\t{\n\t\t\tthis.activesub = this.starter;\n\t\t}\n\t}\n\n\n\n\tgetSceneById (sceneid: string): WanderScene\n\t{\n\t\tconsole.log (\"Loading META SUB scene \" + sceneid + \" from \", this.subs);\n\t\ttry\n\t\t{\n\t\t\treturn this.subs.get(sceneid);\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\tconsole.warn(\"error retrieving sub \" + sceneid + \": \", err);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\n\tmoveOn ()\n\t{\n\t\t// NOTE: this method ASSUMES we have a sceneFinished call returning true right before\n\t\tconsole.warn(\"Quest/MetaScene\", \"MetaScene \" + this + \" MoveOn from \" + this.activesub);\n\n\t\t// retrieving and adding return codes for subscenes if current active is a MultiScene\n\t\tlet active: WanderScene = this.subs.get(this.activesub);\n\t\tif (active instanceof MultiScene)\n\t\t{\n\t\t\tlet ms = active as MultiScene;\n\t\t\tlet states = ms.returnStates();\n\t\t\tfor (let sceneid of states.keys())\n\t\t\t{\n\t\t\t\tlet sceneidcombo = this.activesub + \".\" + sceneid;\n\t\t\t\tthis.returncodes.set(sceneidcombo, states.get(sceneid));\n\t\t\t}\n\t\t}\n\t\tthis.returncodes.set(this.activesub, active.returnState());\n\n\t\t// switches to the next scene in the flow\n\t\t// so we can remove flow control from getFollowing\n\t\tif (this.triggers.has(this.activesub))\n\t\t{\n\t\t\t// we have triggered a new scene\n\t\t\tthis.activesub = this.triggers.get(this.activesub);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// there was already no active subscene OR we are at the end of our trigger chain\n\t\t\tthis.activesub = null;\n\n\t\t}\n\t\tconsole.log(\"Quest/MetaScene\", \"MetaScene \" + this + \" MoveOn to \" + this.activesub);\n\n\t}\n\n\n\n\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {WanderGame} from \"../wander-game\";\n\nexport class Narration extends WanderScene\n{\n\n\timages: string[];\n\tparagraphs: string[];\n\ttitle: string;\n\n\tprogress: number;\n\n\t// keep back button visible so the user can re-read stuff\n\tallowReadBack: boolean;\n\t// keep the title visible on all sub-pages rather than on the first only\n\tkeepTitleOn: boolean;\n\n\tconstructor (game: WanderGame, title: string, paragraphs: string[], images: string[] = [])\n\t{\n\t\tsuper(game);\n\n\t\tthis.progress = 0;\n\t\tthis.allowReadBack = true;\n\t\tthis.keepTitleOn = true;\n\n\t\tthis.paragraphs = paragraphs;\n\t\tthis.images = images;\n\t\tthis.title = title;\n\t}\n\n\tsceneFinished(): boolean {\n\t\treturn this.progress >= this.paragraphs.length - 1;\n\t}\n\n\tadvanceNarration ()\n\t{\n\t\tthis.progress =  Math.min(this.progress + 1, this.paragraphs.length - 1);\n\t}\n\n\tbacktrackNarration ()\n\t{\n\t\tthis.progress = Math.max(this.progress - 1, 0);\n\t}\n\n\tgetCurrent (): string\n\t{\n\t\treturn this.paragraphs[this.progress];\n\t}\n\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {WanderGame} from \"../wander-game\";\nimport {TerrainPass} from \"../world/locs/TerrainPass\";\nimport {JourneyDeparture} from \"./journey-departure\";\nimport {WorldPosition} from \"../world/world-position\";\n\nexport class PassageTrail extends WanderScene\n{\n\n\t/**\n\t * The TerrainPass location being traversed.\n\t * Since passes can generate TWO trails, back and forth, we extract the significant elemnents in the trail_* values with resetTrail() according to the current position of the player.\n\t * Since we are outside the normal map fl,ow, the position of the player is updated only at the end of the current trail.\n\t */\n\tpassage: TerrainPass;\n\n\t// trail_* are the values generated from passage with direction applied\n\ttrail_start: WorldPosition;\n\ttrail_end: WorldPosition;\n\ttrail_length: number;\n\n\t/**\n\t * where the player is on the current trail\n\t */\n\tprogress: number;\n\t/**\n\t * whether the player chose to leave AFTER reaching an end (for scenecheck)\n\t */\n\tleaving: boolean;\n\n\t// tracker for total number of days spent in the passage?\n\tdays: number;\n\n\tconstructor (game: WanderGame, passage: TerrainPass, started: boolean = false)\n\t{\n\t\tsuper(game);\n\t\tthis.passage = passage;\n\t\t// progress is the speed, negative allows to go back and reverse\n\t\tthis.resetTrail(started);\n\t\tthis.days = 0;\n\t\tthis.leaving = false;\n\t}\n\n\tresetTrail (started: boolean = false)\n\t{\n\t\tconst reversed = this.passage.exitpoint.matches(this.game.hero.pos);\n\t\tthis.trail_start = reversed ? this.passage.exitpoint : this.passage.pos;\n\t\tthis.trail_end = reversed ? this.passage.pos : this.passage.exitpoint;\n\t\tthis.trail_length = this.passage.length();\n\t\tthis.progress = started ? 0 : -1;\n\t}\n\n\tsceneFinished(): boolean\n\t{\n\t\t// boolean set by UI\n\t\tconsole.log(\"is at exit? \" + this.isAtExitPoint() + \"is leaving? \" + this.leaving);\n\t\treturn this.isAtExitPoint() && this.leaving;\n\t}\n\n\tgetFollowingScene(): WanderScene {\n\t\treturn new JourneyDeparture(this.game);\n\t}\n\n\tisAtExitPoint ()\n\t{\n\t\treturn this.progress === -1 || this.progress === this.passage.length();\n\t}\n\n\tstep ()\n\t{\n\t\tthis.progress += 1;\n\t\t// this.progress += direction;\n\t\tthis.progress = Math.min(Math.max(this.progress, -1), this.passage.length());\n\t\tif (this.progress === this.passage.length())\n\t\t{\n\t\t\tthis.game.hero.setCoordinates(this.trail_end);\n\t\t\tthis.resetTrail();\n\t\t}\n\t}\n\n\n\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {WorldPosition} from \"../world/world-position\";\nimport {WanderGame} from \"../wander-game\";\nimport {Place} from \"../world/locs/Place\";\n\nexport class Roaming extends WanderScene {\n\n\tstatic DIRECTIONS = [\n\t\t[0, -1], // NORTH\n\t\t[1, -1],\n\t\t[1, 0], // EAST\n\t\t[1, 1],\n\t\t[0, 1], // SOUTH\n\t\t[-1, 1],\n\t\t[-1, 0], // WEST\n\t\t[-1, -1]\n\t];\n\n\tcurrent: WorldPosition;\n\tdirection: number[];\n\n\t// starting point, just for narration (duplicated to first current)\n\tstart: WorldPosition;\n\tstartloc: Place;\n\n\t// steps so far, just for narration\n\tsteps: number;\n\n\t// NOTE that start is optional and will default to player's position, direction to N?\n\tconstructor (game: WanderGame, start?: WorldPosition, direction?: number[]) {\n\t\tsuper(game);\n\n\t\tthis.direction = !direction ? [0, -1] : direction;\n\t\tthis.start = !start ? this.game.hero.pos : start;\n\t\tthis.current = this.start;\n\t\tthis.steps = 0;\n\n\t\tthis.startloc = this.game.worldmap.getLocationAt(this.start.getCoords());\n\t}\n\n\tsceneFinished(): boolean {\n\t\t// scene ends when you reach a Place\n\t\treturn this.game.worldmap.getLocationAt(this.current.getCoords()) != null;\n\t}\n\n\tstepInto (pos: WorldPosition)\n\t{\n\t\tthis.direction = [pos.x - this.current.x, pos.y - this.current.y];\n\t\tthis.current = pos;\n\t}\n\n\tstepForward ()\n\t{\n\t\tthis.steps++;\n\t\tthis.stepInto(this.current.getShifted(this.direction[0], this.direction[1]));\n\t}\n\n\tprivate getCurrentDirectionIndex ()\n\t{\n\t\tfor (let i = 0; i < Roaming.DIRECTIONS.length; i++)\n\t\t{\n\t\t\tif (Roaming.DIRECTIONS[i][0] === this.direction[0] && Roaming.DIRECTIONS[i][1] === this.direction[1])\n\t\t\t{\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t// steps are in CLOCKWISE order\n\tchangeDirection (steps: number)\n\t{\n\t\tlet cidx = this.getCurrentDirectionIndex();\n\t\tlet nidx = (cidx + Roaming.DIRECTIONS.length + steps) % Roaming.DIRECTIONS.length;\n\t\tthis.direction = Roaming.DIRECTIONS[nidx];\n\t}\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {WanderGame} from \"../wander-game\";\nimport {SkillSystem} from \"../skill-system/skill-system\";\nimport {AgentEntity} from \"../skill-system/agent-entity\";\n\nexport class SkillTest extends WanderScene\n{\n\t// keeping this as maps in case we need a more complex handling in the future, though basically it's an arraylist\n\toptions: SkillTestOption[];\n\n\t// whether the player can leave the scene\n\tcanleave: boolean;\n\tsituation: string;\n\tsuccess: number;\n\n\t// played is different from success != 0 ince we have the condition to leave\n\tplayed: boolean;\n\n\timage: string;\n\n\n\tconstructor (game: WanderGame)\n\t{\n\t\tsuper(game);\n\t\t// a skill test is a scene in which the player is given a set of possible skill throws, each with its own return code\n\n\t\tthis.options = [];\n\t\tthis.canleave = true;\n\t\tthis.success = 0;\n\t\tthis.played = false;\n\t\tthis.image = null;\n\t}\n\n\tsceneFinished(): boolean\n\t{\n\t\tconsole.log(\"checking scene finished for SkillTest\", this.played);\n\t\treturn this.played;\n\t}\n\n\tsetImage (filename: string)\n\t{\n\t\tthis.image = filename;\n\t}\n\n\treturnState (): number\n\t{\n\t\t// 0 is not finished/played yet\n\t\t// all alternatives are X for success, -X for failure\n\t\t// TODO: add other standard return codes (plus handling for custom results)\n\t\t// also see the addAction todo note\n\n\t\t// NOTE: Leaving the skilltest without trying (when allowed by the scene design)\n\t\t// implies getting a status of 0 and a sceneFinished = True\n\t\t// TODO: find a way to set this\n\t\treturn this.success;\n\t}\n\n\n\tsetDesc (situation: string)\n\t{\n\t\tthis.situation = situation;\n\t}\n\n\tsetCanLeave (allow: boolean)\n\t{\n\t\tthis.canleave = allow;\n\t}\n\n\taddAction (option: SkillTestOption)\n\t{\n\t\tthis.options.push(option);\n\t}\n\n\n\tplayActionDebug (option: SkillTestOption, succeed: boolean): boolean\n\t{\n\t\t// ONLY for debug, dev can force success or fail while we develop and balance the skill system\n\n\t\tif (succeed)\n\t\t{\n\t\t\tthis.success = option.returncode;\n\t\t\tthis.played = true;\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// 0 is infinitely repeatable\n\t\t\tif (!option.isInfinitelyRepeatable())\n\t\t\t{\n\t\t\t\toption.addTry();\n\t\t\t\tif (!option.isStillRepeatable())\n\t\t\t\t{\n\t\t\t\t\tthis.success = -option.returncode;\n\t\t\t\t\tthis.played = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\tplayAction (option: SkillTestOption, rules: SkillSystem, user: AgentEntity): boolean\n\t{\n\n\t\t// TODO: get SkillSystem and AgentEntity from game\n\n\t\tconst actionid = option.skillactionid;\n\t\tconst target = option.target;\n\n\t\tconst performance = rules.applySkill(actionid, user);\n\t\tif (performance >= target)\n\t\t{\n\t\t\tthis.success = option.returncode;\n\t\t\tthis.played = true;\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// 0 is infinitely repeatable\n\t\t\tif (!option.isInfinitelyRepeatable())\n\t\t\t{\n\t\t\t\toption.addTry();\n\t\t\t\tif (!option.isStillRepeatable())\n\t\t\t\t{\n\t\t\t\t\tthis.success = -option.returncode;\n\t\t\t\t\tthis.played = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\tleaveAction ()\n\t{\n\t\tthis.played = true;\n\t\t// redundant, for clarity\n\t\tthis.success = 0;\n\t}\n\n\n\n\n}\n\nexport class SkillTestOption\n{\n\tskillactionid: string;\n\tdescription: string;\n\tstory_failure: string;\n\tstory_success: string;\n\n\tmax_tries: number;\n\ttarget: number;\n\treturncode: number;\n\ttried: number;\n\n\tconstructor (skillactionid: string, target: number)\n\t{\n\t\tthis.skillactionid = skillactionid;\n\t\tthis.target = target;\n\t\t// default is infinite retries\n\t\tthis.max_tries = 0;\n\t\tthis.tried = 0;\n\t}\n\n\n\taddTry ()\n\t{\n\t\tthis.tried++;\n\t}\n\n\tisStillRepeatable(): boolean\n\t{\n\t\treturn this.max_tries != 0 || this.tried < this.max_tries;\n\t}\n\n\tisRepeatable(): boolean\n\t{\n\t\treturn this.max_tries != 1;\n\t}\n\n\tisInfinitelyRepeatable(): boolean\n\t{\n\t\treturn this.max_tries == 0;\n\t}\n\n\tsetRepeatable (max_tries: number)\n\t{\n\t\tthis.max_tries = max_tries;\n\t}\n\n\tsetText (description: string, success: string, failure: string)\n\t{\n\t\tthis.description = description;\n\t\tthis.story_success = success;\n\t\tthis.story_failure = failure;\n\t}\n\n\tgetFeedbackSuccess (): string\n\t{\n\t\tif (this.story_success != null)\n\t\t{\n\t\t\treturn this.story_success;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn \"You succeed\";\n\t\t}\n\t}\n\n\tgetFeedbackFailure (): string\n\t{\n\t\tif (this.story_failure != null)\n\t\t{\n\t\t\treturn this.story_failure;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn \"You failed\";\n\t\t}\n\t}\n\n\tgetDescription (): string\n\t{\n\t\tif (this.description != null)\n\t\t{\n\t\t\treturn this.description;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn \"Try your \"+this.skillactionid+\" ability\";\n\t\t}\n\t}\n\n\tstatic fromJSON (src: object):  SkillTestOption\n\t{\n\t\tconst actionid = src[\"action\"];\n\t\tconst target = src[\"target\"];\n\t\tlet created = new SkillTestOption(actionid, target);\n\t\tif (src.hasOwnProperty(\"repeatable\"))\n\t\t{\n\t\t\tcreated.setRepeatable(src[\"repeat\"]);\n\t\t}\n\n\t\tlet description = !!src[\"prompt\"] ? src[\"prompt\"] : \"Use your ability at \"+actionid;\n\t\tlet success = !!src[\"success\"] ? src[\"successs\"] : \"Succeded in \"+actionid;\n\t\tlet failure = !!src[\"failure\"] ? src[\"failure\"] : \"Failed at \"+actionid;\n\n\t\tcreated.setText(description, success, failure);\n\n\t\t// note that the match does not get LEAVESTATE_FINISHED as a value, but falls back to it anyway\n\t\tcreated.returncode = !!src[\"returncode\"] ? src[\"returncode\"] : WanderScene.LEAVESTATE_FINISHED;\n\n\t\treturn created;\n\n\t}\n\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {WanderGame} from \"../wander-game\";\n\nexport class StoryBranch extends WanderScene\n{\n\t/**\n\t * Option selection without specific conditions, returns the chosen option\n\t */\n\n\t// simple selection of options without specific conditions, returns the choice\n\t// TODO: add subclass with conditions connected to the display of each choice\n\n\t// maps an optionid to the leave state of the scene\n\t// (it is technically possible to have the same leave state for several options,\n\t// plus 0 cannot be used since it's generic scene finished value so a straight association would not work)\n\n\toptions: ChoiceOption[];\n\n\t// options: Map<number, number>;\n\t// descriptions: Map<number, string>;\n\t// notes: Map<number, string>;\n\n\tprivate selected: ChoiceOption;\n\n\timage: string;\n\tprompt: string;\n\n\n\n\tconstructor (game: WanderGame)\n\t{\n\t\t// a skill test is a scene in which the player is given a set of possible skill throws, each with its own return code\n\t\tsuper(game);\n\t\tthis.prompt = null;\n\t\tthis.options = [];\n\t\t// this.options = new Map<number, number>();\n\t\t// this.descriptions = new Map<number, string>();\n\t\t// this.notes = new Map<number, string>();\n\t\tthis.selected = null;\n\t\tthis.image = null;\n\t}\n\n\tsceneFinished(): boolean {\n\t\treturn this.returnState() !== WanderScene.LEAVESTATE_UNFINISHED;\n\t}\n\n\tsetImage (filename: string)\n\t{\n\t\tthis.image = filename;\n\t}\n\n\taddOption (desc: string, endstate: number = 0, note: string = null)\n\t{\n\t\tlet nextcode = this.options.length + 1;\n\t\tthis.options.push({\n\t\t\toptionid: nextcode,\n\t\t\tleavestate: endstate,\n\t\t\tdescription: desc,\n\t\t\tnotes: note\n\t\t});\n\n\t}\n\n\tsetSelected (opt: ChoiceOption)\n\t{\n\t\tthis.selected = opt;\n\t}\n\n\treturnState (): number\n\t{\n\t\treturn !!this.selected ? this.selected.leavestate : -1;\n\t}\n\n\n}\n\n\n\nexport interface ChoiceOption {\n\n\toptionid: number;\n\tleavestate: number;\n\tdescription: string;\n\tnotes: string;\n\n}\n","import {WanderScene} from \"../../wander-scene\";\n\nexport abstract class MultiScene extends WanderScene\n{\n\tabstract getCurrent (): WanderScene;\n\n\tabstract returnStates (): Map<string, number>;\n}\n","import {LeaveStatesMap, WanderScene} from \"../../wander-scene\";\n\nexport class WanderSceneTriggerCondition {\n\n\tsceneid: string;\n\tstatevalue: number;\n\tmustmeet: boolean;\n\n\n\tconstructor(sceneid: string, valuestate: number, mustmeet: boolean)\n\t{\n\t\tthis.sceneid = sceneid;\n\t\tthis.statevalue = valuestate;\n\t\tthis.mustmeet = mustmeet;\n\t}\n\n\tcheckCondition (leavestates: LeaveStatesMap): boolean\n\t{\n\t\tlet leavestate = leavestates.has(this.sceneid) ? leavestates.get(this.sceneid) : WanderScene.LEAVESTATE_UNFINISHED;\n\t\treturn this.mustmeet ? leavestate === this.statevalue : leavestate !== this.statevalue;\n\t}\n\n\tstatic fromJSON (src: object): WanderSceneTriggerCondition\n\t{\n\t\tconst sceneid = src[\"sceneid\"];\n\t\tconst statevalue = src[\"endstate\"];\n\t\tlet mustmeet = true;\n\t\tif (src.hasOwnProperty(\"mustnot\")) {\n\t\t\tmustmeet = !src[\"mustnot\"];\n\t\t}\n\t\treturn new WanderSceneTriggerCondition(sceneid, statevalue, mustmeet);\n\t}\n\n}\n","import {WanderSceneTriggerCondition} from \"./wander-scene-trigger-condition\";\nimport {LeaveStatesMap} from \"../../wander-scene\";\n\nexport class WanderSceneTrigger {\n\n\t/*\n\t\t// if all conditions in this list are met, the trigger is triggered\n\t\tprivate ArrayList<SceneTriggerCondition> needed;\n\t\t// if any condition in this list is met, the trigger is not triggered\n\t\tprivate ArrayList<SceneTriggerCondition> blockers;\n\t*/\n\n\tneeded: WanderSceneTriggerCondition[];\n\tblockers: WanderSceneTriggerCondition[];\n\n\tconstructor ()\n\t{\n\t\tthis.needed = [];\n\t\tthis.blockers = [];\n\t}\n\n\t/**\n\t * Adds a condition, by default as needed unless specified as blocker\n\t * @param condition trigger condition for this scene\n\t * @param asblocker whether the condition is a blocker, defaults to needed\n\t */\n\taddCondition (condition: WanderSceneTriggerCondition, asblocker: boolean = false)\n\t{\n\t\t(asblocker ? this.blockers : this.needed).push(condition);\n\t}\n\n\tisActive (leavestates: LeaveStatesMap): boolean\n\t{\n\t\tfor (let triggercondition of this.blockers)\n\t\t{\n\t\t\tif (triggercondition.checkCondition(leavestates))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let triggercondition of this.needed)\n\t\t{\n\t\t\tif (!triggercondition.checkCondition(leavestates))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tstatic fromJSON (src: object): WanderSceneTrigger\n\t{\n\t\tconst trigger = new WanderSceneTrigger();\n\t\tif (src.hasOwnProperty(\"c_for\"))\n\t\t{\n\t\t\tfor (let conditiondef of src[\"c_for\"])\n\t\t\t{\n\t\t\t\ttrigger.addCondition(WanderSceneTriggerCondition.fromJSON(conditiondef), false);\n\t\t\t}\n\t\t}\n\t\tif (src.hasOwnProperty(\"c_against\"))\n\t\t{\n\t\t\tfor (let conditiondef of src[\"c_against\"])\n\t\t\t{\n\t\t\t\ttrigger.addCondition(WanderSceneTriggerCondition.fromJSON(conditiondef), true);\n\t\t\t}\n\t\t}\n\t\treturn trigger;\n\t}\n\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {WanderGame} from \"../wander-game\";\nimport {Town} from \"../world/locs/Town\";\nimport {Place} from \"../world/locs/Place\";\nimport {JourneyDeparture} from \"./journey-departure\";\nimport { QuestTask } from '../quests/quest-task';\n\nexport class TownNav extends WanderScene  {\n\n\ttown: Town;\n\tlocpoint: string;\n\ttownstruct: object;\n\n\tstatic LOC_LEAVE = \"OUT\";\n\tstatic LOC_OUTSKIRTS = \"LEAVE\";\n\n\tcurrentloc: TownLocStructure;\n\n\tconstructor (game: WanderGame, place?: Place)\n\t{\n\t\tsuper(game);\n\t\tthis.town = place as Town;\n\n\t\tconsole.log(game.worldmeta);\n\t\tthis.townstruct = game.worldmeta[\"townstructure\"][\"major\"];\n\t\tthis.locpoint = TownNav.LOC_OUTSKIRTS;\n\t\tthis.updateLocation();\n\t}\n\n\tupdateLocation ()\n\t{\n\t\tthis.currentloc = this.getLocStructure();\n\t\tif (this.locpoint !== TownNav.LOC_LEAVE)\n\t\t{\n\t\t\tthis.game.hero.locpos = {\n\t\t\t\t\"locid\": this.town.locid,\n\t\t\t\t\"roomid\": this.locpoint\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.game.hero.locpos = null;\n\t\t}\n\t}\n\n\tgetFollowingScene(): WanderScene {\n\t\treturn new JourneyDeparture(this.game);\n\t}\n\n\tsceneFinished(): boolean {\n\t\treturn this.locpoint === TownNav.LOC_LEAVE;\n\t}\n\n\tgetLocStructure (): TownLocStructure\n\t{\n\t\treturn this.townstruct[\"locs\"][this.locpoint];\n\t}\n\n\tmoveToLoc (locid: string)\n\t{\n\t\tthis.locpoint = locid;\n\t\tthis.updateLocation();\n\t}\n\n\n\n}\n\nexport interface TownLocStructure\n{\n\tlocid: string;\n\tdescription: string;\n\tmoves: {\n\t\t\"target\": string,\n\t\t\"prompt\": string\n\t}[];\n\timage: string;\n}\n","export class SimpleSkillSet\n{\n\n\tpotentials: Map<string, number>;\n\tdevelopments: Map<string, number>;\n\n\tconstructor ()\n\t{\n\t\tthis.potentials = new Map<string, number>();\n\t\tthis.developments = new Map<string, number>();\n\t}\n\n\n\tregisterPotential (id: string, basevalue: number)\n\t{\n\t\tthis.potentials.set(id, basevalue);\n\t}\n\n\tregisterDevelopment (id: string, basevalue: number)\n\t{\n\t\tthis.developments.set(id, basevalue);\n\t}\n\n\tpublic getPotential (id: string)\n\t{\n\t\treturn this.potentials.has(id) ? this.potentials.get(id) : 0;\n\t}\n\n\tpublic getDevelopment (id: string)\n\t{\n\t\treturn this.developments.has(id) ? this.developments.get(id) : 0;\n\t}\n\n\n\n}\n\n","import {SimpleSkillThrow} from \"./simple-skill-throw\";\nimport {AgentEntity} from \"./agent-entity\";\nimport {SimpleSkillSet} from \"./simple-skill-set\";\n\nexport class SimpleSkillSystem\n{\n\n\t// basic skill system just for testing purposes\n\tpotentials: string[];\n\tactions: Map<string, SimpleSkillThrow>;\n\n\tconstructor ()\n\t{\n\t\tthis.potentials = [];\n\t\tthis.actions = new Map<string, SimpleSkillThrow>();\n\t}\n\n\tstatic fromJSON (src: object): SimpleSkillSystem\n\t{\n\t\tlet created = new SimpleSkillSystem();\n\t\tcreated.potentials = src[\"potentials\"];\n\t\tfor (let actionid in src[\"actions\"])\n\t\t{\n\t\t\tcreated.actions.set(actionid, SimpleSkillThrow.fromJson(src[\"actions\"][actionid]));\n\t\t}\n\t\treturn created;\n\t}\n\n\tstatic getLowestBalanced (series: number[]): number\n\t{\n\t\tlet lowest = series[0];\n\t\tfor (let current of series)\n\t\t{\n\t\t\tlowest = Math.min(lowest, current);\n\t\t}\n\n\t\tlet numlowest = 0;\n\t\tfor (let current of series)\n\t\t{\n\t\t\tif (current === lowest)\n\t\t\t{\n\t\t\t\tnumlowest++;\n\t\t\t}\n\t\t}\n\n\t\tif (numlowest<2)\n\t\t{\n\t\t\treturn numlowest+1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn numlowest;\n\t\t}\n\t}\n\n\tstatic getHighest (series: number[]): number\n\t{\n\t\tlet highest = series[0];\n\t\tfor (let current of series)\n\t\t{\n\t\t\thighest = Math.max(highest, current);\n\t\t}\n\t\treturn highest;\n\t}\n\n\tapplySkill (actionid: string, agent: AgentEntity)\n\t{\n\t\tconst agentskills = agent.getSkills();\n\t\tconst action = this.actions.get(actionid);\n\t\tlet pot_vals = [];\n\t\tfor (let potential of action.potentials)\n\t\t{\n\t\t\tpot_vals.push(agentskills.getPotential(potential));\n\t\t}\n\n\t\tlet dev_vals = [];\n\t\tfor (let development of action.developments)\n\t\t{\n\t\t\tdev_vals.push(agentskills.getDevelopment(development));\n\t\t}\n\n\t\tlet potval = pot_vals.length > 1 ? SimpleSkillSystem.getLowestBalanced(pot_vals) : pot_vals[0];\n\t\tlet devval = dev_vals.length > 1 ? SimpleSkillSystem.getHighest(dev_vals) : dev_vals[0];\n\n\t\tlet dicethrow = 0;\n\t\tfor (let i = 0; i < devval; i++)\n\t\t{\n\t\t\tdicethrow += Math.floor(Math.random()*potval)+1;\n\t\t}\n\n\t\treturn dicethrow;\n\t}\n\n\n\n}\n","export class SimpleSkillThrow\n{\n\n\tpotentials: string[];\n\tdevelopments: string[];\n\n\n\tconstructor (req_pots: string[], req_devs: string[])\n\t{\n\t\tthis.potentials = req_pots;\n\t\tthis.developments = req_devs;\n\t}\n\n\tstatic fromJson(src: object): SimpleSkillThrow\n\t{\n\t\treturn new SimpleSkillThrow(src[\"pot\"], src[\"dev\"]);\n\t}\n\n}\n","import { WanderGame } from './wander-game';\n\n/**\n * Saves game state to a SINGLE save space\n */\nexport class WanderGameState {\n\n\n    static KEY_SAVESTATE_DATA = \"WanderSaveGame\";\n\n\tstatic loadFromBrowser ()\n\t{\n        console.log(\"loading game state from browser WebStorage\");\n        let loaded = localStorage.getItem(WanderGameState.KEY_SAVESTATE_DATA);\n        console.log (\"loaded\", loaded);\n        if (loaded !== null)\n        {\n            loaded = JSON.parse(loaded);\n            if (!loaded[\"qstates\"])\n\t\t\t{\n\t\t\t\tloaded[\"qstates\"] = {};\n\t\t\t}\n        }\n\n\n\n        return loaded;\n\t}\n\n\tstatic saveToBrowser (game: WanderGame)\n\t{\n\t\tconsole.log(\"saving game state to browser for Game\");\n\t\tconsole.log(\"saving hero state, position\", game.hero.pos);\n\n\t\tlet qstates = {}\n\t\tfor (let quest of game.quests.values())\n\t\t{\n\t\t\tlet tasks = {};\n\t\t\t// console.log(\"saving state for quest \", quest.questid, quest);\n\t\t\t// console.log(quest.states.keys());\n\t\t\tfor (let taskid of quest.states.keys())\n\t\t\t{\n\t\t\t\t// console.log(\"checking quest \",quest.questid,\"task\", taskid);\n\t\t\t\ttasks[taskid] = quest.states.get(taskid);\n\t\t\t}\n\t\t\tqstates[quest.questid] = {\n\t\t\t\t\"tasks\": tasks,\n\t\t\t\t\"completed\": quest.completed\n\t\t\t}\n\t\t}\n\n        let savegame = {\n            hero: {\n                position: [game.hero.pos.x, game.hero.pos.y]\n            },\n\t\t\tquests: qstates\n        }\n\n\t\tconsole.log(\"saving game as \", savegame);\n        localStorage.setItem(WanderGameState.KEY_SAVESTATE_DATA, JSON.stringify(savegame));\n\n\t}\n}\n","import {HttpClient} from \"@angular/common/http\";\nimport {WorldMap} from \"./world/world-map\";\nimport {WanderHero} from \"./wander-hero\";\nimport {WanderScene} from \"./wander-scene\";\nimport {QuestRef} from \"./quests/quest-ref\";\nimport {ResLoader} from \"../support/res-loader\";\nimport {SkillSystem} from \"./skill-system/skill-system\";\nimport {SimpleSkillSystem} from \"./skill-system/simple-skill-system\";\nimport {MetaScene} from \"./scenes/meta-scene\";\n\nexport class WanderGame {\n\n\tactivescene: WanderScene;\n\thero: WanderHero;\n\tworldmap: WorldMap;\n\tworldmeta: object;\n\t// TODO: load quest data on demand and just use triggers\n\tquests: Map<string, QuestRef>;\n\n\tskillsystem: SkillSystem;\n\n\tconstructor(private loader: ResLoader)\n\t{\n\t\tthis.quests = new Map<string, QuestRef>();\n\t}\n\n\tstatic loadGame (http: HttpClient, callback: (game: WanderGame) => void): void\n\t{\n\t\tconst loader = new GameFactory(http);\n\t\tloader.loadDemoGame(function (game: WanderGame, factory: GameFactory)\n\t\t{\n\t\t\tconsole.log(\"loaded game \", game);\n\t\t\tconsole.log(\"built from factory \", factory);\n\t\t\tcallback(game);\n\t\t});\n\n\t}\n\n\t// DEBUG FUNCTIONS FOR QUICK TESTING\n\n\tsetHero (hero: WanderHero)\n\t{\n\t\tthis.hero = hero;\n\t}\n\n\tsetWorldMap (worldmap: WorldMap)\n\t{\n\t\tthis.worldmap = worldmap;\n\t}\n\n\tsetWorldMeta (src: object)\n\t{\n\t\t// TODO: placeholder\n\t\tthis.worldmeta = src;\n\t}\n\n\tsetSkillSystem (skillsys: SkillSystem)\n\t{\n\t\tthis.skillsystem = skillsys;\n\t}\n\n\tsetActiveScene (scene: WanderScene)\n\t{\n\t\tconsole.log(\"setting activescene to \", scene);\n\n\t\tif (scene instanceof MetaScene)\n\t\t{\n\t\t\tconsole.log(\"should switch to internal scene for metascene\");\n\t\t\tthis.activescene = scene.getCurrent();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.activescene = scene;\n\t\t}\n\n\t\tconsole.log(\"ACTIVESCENE:\", this.activescene);\n\t}\n\n\tgetActiveScene (): WanderScene\n\t{\n\t\treturn this.activescene;\n\t}\n\n\taddQuest (qref: QuestRef)\n\t{\n\t\tthis.quests.set(qref.questid, qref);\n\t}\n\n\n}\n\nclass GameFactory {\n\n\tdataset: object;\n\tloader: ResLoader;\n\n\tconstructor(protected http: HttpClient) {\n\t\tthis.dataset = {\n\t\t\t\"locs\": null,\n\t\t\t\"terrain\": null,\n\t\t\t\"player\": null,\n\t\t\t\"quests\": null,\n\t\t\t\"worldmeta\": null,\n\t\t\t\"skillsys\": null\n\t\t};\n\n\t\tthis.loader = new ResLoader(this.http);\n\t}\n\n\n\n\n\n\tloadDemoGame (callback: Function) {\n\n\t\tconst sources = {\n\t\t\t\"locs\": \"./assets/gamedata/testlocations.json\",\n\t\t\t\"terrain\": \"./assets/gamedata/testmapgame.json\",\n\t\t\t\"player\": \"./assets/gamedata/playerdata.json\",\n\t\t\t\"worldmeta\": \"./assets/gamedata/worlddesign.json\",\n\t\t\t\"skillsys\": \"./assets/gamedata/simpleskillactions.json\"\n\t\t};\n\n\t\tlet loader: GameFactory = this;\n\n\t\tfunction getCheckerFunction(key: string): Function {\n\t\t\treturn function (data: any) {\n\t\t\t\tloader.setData(key, data, callback);\n\t\t\t};\n\t\t}\n\n\t\tfor (let key of Object.keys(sources)) {\n\t\t\tlet path = sources[key];\n\t\t\tlet checker = getCheckerFunction(key);\n\t\t\tthis.loader.loadDataFile(path, checker);\n\t\t}\n\n\t\tlet QPATH = \"./assets/gamedata/quests/\";\n\t\tlet QUESTS = [\n\t\t\tQPATH + \"drunkquest.json\",\n\t\t\tQPATH + \"sidestreetquest.json\",\n\t\t\t// QPATH + \"simpleskillactions.json\",\n\t\t\tQPATH + \"testquest.json\",\n\t\t\tQPATH + \"triggerquest.json\"\n\t\t];\n\n\t\tthis.loader.loadDataFiles(QUESTS, function (quests: object) {\n\t\t\tloader.setData(\"quests\", quests, callback);\n\t\t});\n\n\t}\n\n\tsetData(key: string, data: any, completer: Function): void {\n\t\tthis.dataset[key] = data;\n\n\t\tlet has_all = true;\n\t\tfor (let datakey of Object.keys(this.dataset)) {\n\t\t\tif (this.dataset[datakey] == null) {\n\t\t\t\thas_all = false;\n\t\t\t}\n\t\t}\n\n\t\tif (has_all) {\n\t\t\t// completer(this);\n\t\t\tthis.createGameInstance(completer);\n\t\t}\n\t}\n\n\tcreateGameInstance(completer: Function): void {\n\t\tlet game = new WanderGame(new ResLoader(this.http));\n\n\t\tconsole.log(\"loaded terrain\", this.dataset[\"terrain\"]);\n\t\tconsole.log(\"loaded locs\", this.dataset[\"locs\"]);\n\t\tconsole.log(\"loaded player\", this.dataset[\"player\"]);\n\t\tconsole.log(\"loaded quests: \", this.dataset[\"quests\"]);\n\n\n\t\tlet worldmap = WorldMap.fromJSON(this.dataset[\"terrain\"], this.dataset[\"locs\"]);\n\t\tlet hero = WanderHero.fromJSON(this.dataset[\"player\"]);\n\t\tlet skillsys = SimpleSkillSystem.fromJSON(this.dataset[\"skillsys\"]);\n\t\tgame.setWorldMap(worldmap);\n\t\tgame.setHero(hero);\n\t\tgame.setWorldMeta(this.dataset[\"worldmeta\"]);\n\t\tgame.setSkillSystem(skillsys);\n\n\t\tfor (let questfile in this.dataset[\"quests\"])\n\t\t{\n\t\t\tlet qref = QuestRef.fromJSON(this.dataset[\"quests\"][questfile], questfile);\n\t\t\tconsole.log(\"created from \", questfile, \"questref \", qref);\n\t\t\t// let quest = Quest.fromJSON(this.dataset[\"quests\"][questfile]);\n\t\t\t// console.log(\"created from \", questfile, \" quest object \", quest);\n\t\t\tgame.addQuest(qref);\n\t\t}\n\n\n\t\tcompleter(game, this);\n\n\t}\n\n\n\n}\n","import {WorldPosition} from \"./world/world-position\";\nimport {AgentEntity} from \"./skill-system/agent-entity\";\nimport {SimpleSkillSet} from \"./skill-system/simple-skill-set\";\n\nexport class WanderHero implements AgentEntity\n{\n\n\tpos: WorldPosition;\n\tlocpos: object;\n\tskills: SimpleSkillSet;\n\n\tmaxhealth: number;\n\thealth: number;\n\n\tconstructor ()\n\t{\n\t\tthis.pos = null;\n\t\tthis.locpos = null;\n\t\tthis.skills = new SimpleSkillSet();\n\t}\n\n\tstatic fromJSON (src: object): WanderHero\n\t{\n\t\tlet hero = new WanderHero();\n\n\t\thero.setCoordinates(WorldPosition.fromCoordsArray(src[\"position\"][\"coords\"]));\n\n\t\tfor (let potential in src[\"record\"][\"potentials\"])\n\t\t{\n\t\t\tlet range = src[\"record\"][\"potentials\"][potential];\n\t\t\tlet value = Math.round(Math.random()*range[1]-range[0])+(range[1]-range[0]);\n\t\t\thero.skills.registerPotential(potential, value);\n\t\t}\n\n\t\tfor (let development in src[\"record\"][\"developments\"])\n\t\t{\n\t\t\tlet range = src[\"record\"][\"developments\"][development];\n\t\t\tlet value = Math.round(Math.random()*range[1]-range[0])+(range[1]-range[0]);\n\t\t\thero.skills.registerDevelopment(development, value);\n\t\t}\n\n\t\tlet range = src[\"record\"][\"health\"];\n\t\thero.maxhealth = Math.round(Math.random()*range[1]-range[0])+(range[1]-range[0]);\n\t\thero.health = hero.maxhealth;\n\n\t\treturn hero;\n\n\t}\n\n\tsetCoordinates (pos: WorldPosition)\n\t{\n\t\t// console.log(\"replacing coords\", this.pos, \"w pos \", pos);\n\t\tthis.pos = pos;\n\t}\n\n\n\tgetSkills(): SimpleSkillSet {\n\t\treturn this.skills;\n\t}\n\n}\n","import {WanderGame} from \"./wander-game\";\nimport {QuestTask} from \"./quests/quest-task\";\nimport {MetaScene} from \"./scenes/meta-scene\";\n\nexport abstract class WanderScene\n{\n\n\tstatic LEAVESTATE_UNFINISHED = -1;\n\tstatic LEAVESTATE_FINISHED = 0;\n\n\tgame: WanderGame;\n\t// a scene that CONTAINS the current scene, if applicable, so the Storyteller will know what scene to pass to when this ends.\n\tnarrative: MetaScene;\n\n\t// TODO: add interface for specific scene UI (not the SceneUI master wrapper) so the Scene can interact with its own display\n\tleaf: any;\n\n\t// TODO: add QuestTask class as driver for the scene\n\tdriver: QuestTask;\n\n\tscenePosition: object;\n\n\tprotected constructor (game: WanderGame)\n\t{\n\t\tthis.game = game;\n\n\t\t// narrative should be set outside the constructor\n\t\tthis.narrative = null;\n\n\t\t// TODO: TBA (note: should get value AFTER constructor anyway?)\n\t\tthis.leaf = null;\n\t\tthis.driver = null;\n\n\t}\n\n\tsetNarrative (narrative: MetaScene)\n\t{\n\t\tthis.narrative = narrative;\n\t}\n\n\tgetNarrative (): WanderScene\n\t{\n\t\treturn this.narrative;\n\t}\n\n\tabstract sceneFinished(): boolean;\n\n\t/**\n\t * Acts as default, subclasses can override if they have specific return codes > 0 (for success and < -1 for failure?)\n\t * If the scene is unfinished, subclasses should still respect the UNFINISHED constant\n\t */\n\treturnState(): number\n\t{\n\t\t// Scenes that do not have a set of return values always return 0 on end OR -1 if not finished\n\t\treturn this.sceneFinished() ? WanderScene.LEAVESTATE_FINISHED : WanderScene.LEAVESTATE_UNFINISHED;\n\t}\n\n\t/**\n\t * Acts as default, subclasses can override if they chain to a scene they create\n\t */\n\tgetFollowingScene (): WanderScene\n\t{\n\t\treturn this.narrative;\n\t}\n\n\tstatic fromJSON (src: object): WanderScene\n\t{\n\t\t// TODO: placeholder, implement for all the scenes that can be JSON-generated\n\n\t\treturn null;\n\t}\n}\n\n/**\n * Wrapper for Map type for syntactical cleanup\n */\nexport class LeaveStatesMap extends Map<string, number> {}\n","import {WorldPosition} from \"../world-position\";\n\nexport class Place\n{\n\n\tpos: WorldPosition;\n\n\tlocid: string;\n\tloctype: string;\n\tname: string;\n\n\tconstructor (pos: WorldPosition)\n\t{\n\t\tthis.pos = pos;\n\t}\n\n\t// public abstract getName (): string;\n\n\tpublic getCoords (): number[]\n\t{\n\t\treturn this.pos.getCoords();\n\t}\n\n\tpublic matchesPosition (pos: WorldPosition): boolean\n\t{\n\t\treturn this.pos.matches(pos);\n\t}\n\n\n}\n\n","import {Town} from \"./Town\";\nimport {TerrainPass} from \"./TerrainPass\";\nimport {Place} from \"./Place\";\n\nexport class PlaceFactory\n{\n\tstatic CLASSES = {\n\t\t\"towns\": Town,\n\t\t\"passes\": TerrainPass\n\t};\n\n\tstatic fromJSON (placetype: string, placeid: string, src: object): Place\n\t{\n\t\tlet builderclass = PlaceFactory.CLASSES[placetype];\n\t\treturn builderclass.fromJSON(placeid, src);\n\t}\n}\n","import {Place} from \"./Place\";\nimport {WorldPosition} from \"../world-position\";\n\nexport class TerrainPass extends Place\n{\n\texitpoint: WorldPosition;\n\tcourse: string[];\n\n\tconstructor(locid: string, entrypos: WorldPosition, exitpos: WorldPosition, course: string[]) {\n\t\tsuper(entrypos);\n\t\tthis.loctype = \"passes\";\n\t\tthis.locid = locid;\n\t\tthis.exitpoint = exitpos;\n\t\tthis.course = course;\n\t}\n\n\tlength (): number\n\t{\n\t\treturn this.course.length;\n\t}\n\n\tstatic fromJSON (placeid: string, desc: object): TerrainPass\n\t{\n\t\tlet entrypoint = desc[\"entry\"];\n\t\tlet exitpoint = desc[\"exit\"];\n\t\tlet course = desc[\"sequence\"];\n\n\t\tlet loaded = new TerrainPass (placeid, new WorldPosition(entrypoint[0], entrypoint[1]), new WorldPosition(exitpoint[0], exitpoint[1]), course);\n\t\tloaded.name = desc[\"name\"];\n\n\t\treturn loaded;\n\t}\n\n\tmatchesPosition(pos: WorldPosition): boolean {\n\t\treturn this.pos.matches(pos) || this.exitpoint.matches(pos);\n\t}\n\n}\n","import {Place} from \"./Place\";\nimport {WorldPosition} from \"../world-position\";\n\nexport class Town extends Place\n{\n\n\tconstructor (locid: string, coords: WorldPosition)\n\t{\n\t\tsuper(coords);\n\t\tthis.loctype = \"towns\";\n\t\tthis.locid = locid;\n\t}\n\n\n\tstatic fromJSON (placeid: string, desc: object): Town\n\t{\n\t\tlet coords = desc[\"coords\"];\n\t\tlet loaded = new Town (placeid, new WorldPosition(coords[0], coords[1]));\n\t\tloaded.name = desc[\"name\"];\n\n\t\treturn loaded;\n\t}\n}\n","import {Place} from \"./locs/Place\";\nimport {TerrainPass} from \"./locs/TerrainPass\";\nimport {PlaceFactory} from \"./locs/PlaceFactory\";\nimport {WorldPosition} from \"./world-position\";\n\nexport class WorldMap {\n\n\tsizeX: number;\n\tsizeY: number;\n\n\tlocs: Place[][];\n\tterrain: string[][];\n\t// places_bycoords: any;\n\tplaces_bytypebyid: Map<string, Map<string, Place>>;\n\n\n\tconstructor(sizeX, sizeY) {\n\t\tthis.sizeX = sizeX;\n\t\tthis.sizeY = sizeY;\n\n\t\tthis.locs = [];\n\t\tthis.terrain = [];\n\t\tfor (let x = 0; x < sizeX; x++) {\n\t\t\tlet tercol = [];\n\t\t\tlet loccol = [];\n\t\t\tfor (let y = 0; y < sizeY; y++) {\n\t\t\t\ttercol.push(null);\n\t\t\t\tloccol.push(null);\n\t\t\t}\n\t\t\tthis.terrain.push(tercol);\n\t\t\tthis.locs.push(loccol);\n\t\t}\n\n\t\tthis.places_bytypebyid = new Map<string, Map<string, Place>>();\n\n\t}\n\n\n\tstatic getCoordsHash(coordX, coordY): String {\n\t\treturn coordX + \":\" + coordY;\n\t}\n\n\n\tstatic fromJSON(griddata, locationdata): WorldMap {\n\t\t// console.log(griddata);\n\t\tlet gridsizeX = griddata[\"mapgrid\"].length;\n\t\tlet gridsizeY = griddata[\"mapgrid\"][0].length;\n\t\tlet worldmap = new WorldMap(gridsizeX, gridsizeY);\n\t\t// console.log(worldmap.terrain);\n\t\tfor (let x = 0; x < gridsizeX; x++) {\n\t\t\tfor (let y = 0; y < gridsizeY; y++) {\n\t\t\t\tworldmap.terrain[x][y] = griddata[\"mapgrid\"][x][y];\n\t\t\t}\n\t\t}\n\n\n\t\t// loop not technically needed but we might want to run generations etc on data in the future\n\t\t// TODO : replace\n\t\tfor (let placetype of Object.keys(locationdata)) {\n\t\t\tlet places = locationdata[placetype];\n\t\t\tlet listed = new Map<string, Place>();\n\t\t\tfor (let placeid of Object.keys(places)) {\n\n\t\t\t\tlet placedesc = places[placeid];\n\t\t\t\tlet place = PlaceFactory.fromJSON(placetype, placeid, placedesc);\n\t\t\t\t// let place = new Place(Position.fromCoords(placedesc[\"coords\"]));\n\t\t\t\t// place.loctype = placetype;\n\t\t\t\t// place.locid = placeid;\n\t\t\t\tlisted.set(placeid, place);\n\t\t\t\t// console.log(\"adding place\", placetype, placedesc);\n\t\t\t\tlet coords;\n\t\t\t\tworldmap.locs[place.pos.x][place.pos.y] = place;\n\t\t\t\tif (place instanceof TerrainPass)\n\t\t\t\t{\n\t\t\t\t\tlet exitpos = (place as TerrainPass).exitpoint;\n\t\t\t\t\tworldmap.locs[exitpos.x][exitpos.y] = place;\n\t\t\t\t}\n\t\t\t}\n\t\t\tworldmap.places_bytypebyid.set(placetype, listed);\n\n\t\t}\n\n\t\treturn worldmap;\n\t}\n\n\tgetLocationById (locid: string): Place\n\t{\n\t\tfor (let places_byid of this.places_bytypebyid.values())\n\t\t{\n\t\t\tif (places_byid.has(locid))\n\t\t\t{\n\t\t\t\treturn places_byid.get(locid);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetAllLocations(): Place[]\n\t{\n\t\tlet listing = [];\n\t\tfor (let placetype of this.places_bytypebyid.keys())\n\t\t{\n\t\t\t// console.log(\"getting loctype \", loctype, this.places[loctype]);\n\t\t\tfor (let loc of this.places_bytypebyid.get(placetype).values())\n\t\t\t{\n\t\t\t\tlisting.push(loc);\n\t\t\t}\n\t\t}\n\t\t// console.log(\"all locations: \", listing);\n\t\treturn listing;\n\t}\n\n\n\tgetLocationAt (coords: number[]): Place\n\t{\n\t\tlet loc = null;\n\t\ttry\n\t\t{\n\t\t\tloc = this.locs[coords[0]][coords[1]];\n\t\t} catch (err) {\n\t\t\t// return null;\n\t\t}\n\n\t\t// console.log(\"found loc \", loc);\n\t\t// TODO: DEBUG ONLY!\n\t\t// loc = null;\n\t\treturn loc;\n\n\n\t\t/*\n\t\tvar coordhash = WorldMap.getCoordsHash(coordX, coordY);\n\t\t// TODO: optimize so we don't go through the whole places data\n\t\tfor (var placetype in this.places)\n\t\t{\n\t\t\tfor (var placeid in this.places[placetype])\n\t\t\t{\n\t\t\t\tvar placecoords = this.places[placetype][placeid][\"coords\"];\n\t\t\t\tif (WorldMap.getCoordsHash(placecoords[0], placecoords[1])==coordhash)\n\t\t\t\t{\n\t\t\t\t\treturn this.places[placetype][placeid];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t\t*/\n\n\t}\n\n\tgetCourse (cfrom: WorldPosition, cto: WorldPosition): WorldPosition[]\n\t{\n\t\t// TODO: straight course for now\n\n\t\tlet distX = cto.x - cfrom.x;\n\t\tlet distY = cto.y - cfrom.y;\n\t\tlet maxdist = Math.max(Math.abs(distX), Math.abs(distY));\n\n\t\tlet course = [];\n\t\tfor (let i = 0; i < maxdist; i++)\n\t\t{\n\t\t\tlet section = i / maxdist;\n\t\t\tlet sectionX = Math.round(distX * section);\n\t\t\tlet sectionY = Math.round(distY * section);\n\t\t\tcourse.push(new WorldPosition(cfrom.x + sectionX, cfrom.y + sectionY));\n\t\t}\n\n\t\tconsole.log(\"course from \", cfrom, \" to \", cto, \": \" + course.length + \" steps (\", course, \")\");\n\n\t\treturn course;\n\t}\n\n\tgetTerrainAt (x, y)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this.terrain[x][y];\n\t\t} catch (err)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t}\n\n}\n\n","export class WorldPosition\n{\n\n\treadonly x: number;\n\treadonly y: number;\n\n\tconstructor (x: number, y: number)\n\t{\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tstatic fromCoordsArray (coords: number[]): WorldPosition\n\t{\n\t\treturn new WorldPosition(coords[0], coords[1]);\n\t}\n\n\tpublic getCoords (): number[]\n\t{\n\t\treturn [this.x, this.y];\n\t}\n\n\tpublic getShifted (x: number, y: number)\n\t{\n\t\treturn new WorldPosition(this.x + x, this.y + y);\n\t}\n\n\tpublic matches (other: WorldPosition)\n\t{\n\t\t// console.log(\"checking if we have a match between \", this, \"and\", other);\n\t\treturn this.x === other.x && this.y === other.y;\n\t}\n\n\tstatic getRelativeGeneralDirection (pfrom: WorldPosition, pto: WorldPosition): number[]\n\t{\n\t\tconst distX = pto.x - pfrom.x;\n\t\tconst distY = pto.y - pfrom.y;\n\n\t\tlet dirX = 0;\n\t\tlet dirY = 0;\n\t\tif (distX === 0)\n\t\t{\n\t\t\tdirX = 0;\n\t\t\tdirY = distY > 0 ? 1 : -1;\n\t\t}\n\t\telse if (distY === 0)\n\t\t{\n\t\t\tdirY = 0;\n\t\t\tdirX = distX > 0 ? 1 : -1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet absX = Math.abs(distX);\n\t\t\tlet absY = Math.abs(distY);\n\t\t\tif (absY > 3 * absY)\n\t\t\t{\n\t\t\t\tdirX = 0;\n\t\t\t\tdirY = distY > 0 ? 1 : -1;\n\t\t\t}\n\t\t\telse if (absY * 3 < absX) {\n\t\t\t\tdirX = distX > 0 ? 1 : -1;\n\t\t\t\tdirY = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdirX = distX > 0 ? 1 : -1;\n\t\t\t\tdirY = distY > 0 ? 1 : -1;\n\t\t\t}\n\t\t}\n\n\t\treturn [dirX, dirY];\n\t}\n}\n","import {Directive, ViewContainerRef} from '@angular/core';\n\n@Directive({\n\tselector: '[charsheetInsertion]',\n})\nexport class CharSheetDirective {\n\tconstructor(public viewContainerRef: ViewContainerRef) {\n\t}\n}\n","import {Directive, ViewContainerRef} from '@angular/core';\n\n@Directive({\n\tselector: '[appInsertion]',\n})\nexport class InsertionDirective {\n\tconstructor(public viewContainerRef: ViewContainerRef) {\n\t}\n}\n","import { Injector, Type, InjectionToken, InjectFlags } from '@angular/core';\n\nexport class SceneInjector implements Injector {\n\tconstructor(\n\t\tprivate _parentInjector: Injector,\n\t\tprivate _additionalTokens: WeakMap<any, any>)\n\t{\n\t}\n\n\tget<T>(\n\t\ttoken: Type<T> | InjectionToken<T>,\n\t\tnotFoundValue?: T,\n\t\tflags?: InjectFlags\n\t): T;\n\n\tget(token: any, notFoundValue?: any);\n\tget(token: any, notFoundValue?: any, flags?: any) {\n\n\t\tconst value = this._additionalTokens.get(token);\n\t\tif (value)\n\t\t{\n\t\t\treturn value;\n\t\t}\n\t\treturn this._parentInjector.get<any>(token, notFoundValue);\n\t}\n}\n","import {Observable, Subject} from \"rxjs\";\nimport {WanderGame} from \"../rpg-engine/wander-game\";\nimport {WanderScene} from \"../rpg-engine/wander-scene\";\n\nexport class SceneRef {\n\n\tprivate readonly _afterClosed = new Subject<any>();\n\tafterClosed: Observable<any> = this._afterClosed.asObservable();\n\n\tprivate readonly _sceneCheck = new Subject<any>();\n\tsceneCheck: Observable<any> = this._sceneCheck.asObservable();\n\n\tprivate readonly _subSwitch = new Subject<WanderScene>();\n\tsubSwitch: Observable<any> = this._subSwitch.asObservable();\n\t\n\tscene: WanderScene;\n\tgame: WanderGame;\n\n\tconstructor() {\n\t}\n\n\tsetContext (scene: WanderScene)\n\t{\n\t\tthis.scene = scene;\n\t\tthis.game = scene.game;\n\t}\n\n\tclose(result?: any) {\n\t\tthis._afterClosed.next(result);\n\t}\n\n\ttriggerSceneCheck ()\n\t{\n\t\tconsole.log(\"sending check event for scene \", this.scene, this.scene.sceneFinished());\n\t\tthis._sceneCheck.next();\n\t}\n\n\ttriggerSubScene (scene: WanderScene)\n\t{\n\t\tthis._subSwitch.next(scene);\n\t}\n\n\n}\n","export default \".uiwrapper {\\n  display: flex;\\n  flex-direction: column;\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background: transparent;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n#gamecontrols {\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  text-align: right;\\n  border-bottom: 1px solid black;\\n  border-left: 1px solid black;\\n  border-bottom-left-radius: 8px;\\n  padding: 4px 8px 4px 16px;\\n}\\n\\n#charsheetmodal {\\n  position: fixed;\\n  bottom: 0;\\n  top: 0;\\n  right: 0;\\n  left: 0;\\n  background-color: rgba(0, 0, 0, 0.56);\\n  display: none;\\n}\\n\\n#charsheetmodal.visible {\\n  display: block;\\n  bottom: 0;\\n  top: 0;\\n  right: 0;\\n  left: 0;\\n  background-color: rgba(0, 0, 0, 0.56);\\n}\\n\\n#charsheetcontrols {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  padding: 4px 8px;\\n  border-left: 1px solid black;\\n  border-bottom: 1px solid black;\\n  border-bottom-left-radius: 4px;\\n}\\n\\n#charsheet {\\n  position: fixed;\\n  bottom: 0;\\n  left: 10vw;\\n  right: 10vw;\\n  height: 60vh;\\n  background-image: url(\\\"/assets/ui/temporaryparchment.jpg\\\");\\n  background-color: #eae1c6;\\n  border: 1px solid #803b0c;\\n  border-top-left-radius: 8px;\\n  border-top-right-radius: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3NjZW5lLXVpL3NjZW5lLXVpLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zY2VuZS11aS9zY2VuZS11aS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLGVBQUE7RUFDQSxNQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FDQ0Y7O0FER0E7RUFFRSxlQUFBO0VBQ0EsTUFBQTtFQUNBLFFBQUE7RUFDQSxpQkFBQTtFQUNBLDhCQUFBO0VBQ0EsNEJBQUE7RUFDQSw4QkFBQTtFQUNBLHlCQUFBO0FDREY7O0FEVUE7RUFFQyxlQUFBO0VBQ0EsU0FBQTtFQUNBLE1BQUE7RUFDQSxRQUFBO0VBQ0EsT0FBQTtFQUNBLHFDQUFBO0VBQ0EsYUFBQTtBQ1JEOztBRFdBO0VBRUMsY0FBQTtFQUNBLFNBQUE7RUFDQSxNQUFBO0VBQ0EsUUFBQTtFQUNBLE9BQUE7RUFDQSxxQ0FBQTtBQ1REOztBRFlBO0VBRUMsa0JBQUE7RUFDQSxNQUFBO0VBQ0EsUUFBQTtFQUNBLGdCQUFBO0VBQ0EsNEJBQUE7RUFDQSw4QkFBQTtFQUNBLDhCQUFBO0FDVkQ7O0FEYUE7RUFFQyxlQUFBO0VBQ0EsU0FBQTtFQUNBLFVBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLDBEQUFBO0VBQ0EseUJBQUE7RUFDQSx5QkFBQTtFQUNBLDJCQUFBO0VBQ0EsNEJBQUE7QUNYRCIsImZpbGUiOiJzcmMvYXBwL3NjZW5lLXVpL3NjZW5lLXVpLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnVpd3JhcHBlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAwO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cblxuI2dhbWVjb250cm9sc1xue1xuICBwb3NpdGlvbjogICBmaXhlZDtcbiAgdG9wOiAgICAgICAgMDtcbiAgcmlnaHQ6ICAgICAgMDtcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gIGJvcmRlci1ib3R0b206ICAgICAxcHggc29saWQgYmxhY2s7XG4gIGJvcmRlci1sZWZ0OiAgICAgMXB4IHNvbGlkIGJsYWNrO1xuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA4cHg7XG4gIHBhZGRpbmc6ICAgICAgNHB4IDhweCA0cHggMTZweDtcblx0Ly9iYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIvYXNzZXRzL3VpL3RlbXBvcmFyeXBhcmNobWVudC5qcGdcIik7XG5cbiAgLy8gei1pbmRleDpcdFx0OTk5OTk5OTtcbn1cblxuXG5cblxuI2NoYXJzaGVldG1vZGFsXG57XG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdHRvcDpcdFx0XHQwO1xuXHRyaWdodDpcdFx0XHQwO1xuXHRsZWZ0Olx0XHRcdDA7XG5cdGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41Nik7XG5cdGRpc3BsYXk6IG5vbmU7XG59XG5cbiNjaGFyc2hlZXRtb2RhbC52aXNpYmxlXG57XG5cdGRpc3BsYXk6XHRcdGJsb2NrO1xuXHRib3R0b206XHRcdFx0MDtcblx0dG9wOlx0XHRcdDA7XG5cdHJpZ2h0Olx0XHRcdDA7XG5cdGxlZnQ6XHRcdFx0MDtcblx0YmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjU2KTtcbn1cblxuI2NoYXJzaGVldGNvbnRyb2xzXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblx0dG9wOlx0XHRcdDA7XG5cdHJpZ2h0Olx0XHRcdDA7XG5cdHBhZGRpbmc6XHRcdDRweCA4cHg7XG5cdGJvcmRlci1sZWZ0Olx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0Ym9yZGVyLWJvdHRvbTpcdFx0XHQxcHggc29saWQgYmxhY2s7XG5cdGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDtcbn1cblxuI2NoYXJzaGVldFxue1xuXHRwb3NpdGlvbjpcdGZpeGVkO1xuXHRib3R0b206XHRcdDA7XG5cdGxlZnQ6XHRcdDEwdnc7XG5cdHJpZ2h0Olx0XHQxMHZ3O1xuXHRoZWlnaHQ6XHRcdDYwdmg7XG5cdGJhY2tncm91bmQtaW1hZ2U6IHVybChcIi9hc3NldHMvdWkvdGVtcG9yYXJ5cGFyY2htZW50LmpwZ1wiKTtcblx0YmFja2dyb3VuZC1jb2xvcjogI2VhZTFjNjtcblx0Ym9yZGVyOlx0XHQxcHggc29saWQgIzgwM2IwYztcblx0Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czogOHB4O1xuXHRib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogOHB4O1xufVxuIiwiLnVpd3JhcHBlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAwO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbiNnYW1lY29udHJvbHMge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgYmxhY2s7XG4gIGJvcmRlci1sZWZ0OiAxcHggc29saWQgYmxhY2s7XG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDhweDtcbiAgcGFkZGluZzogNHB4IDhweCA0cHggMTZweDtcbn1cblxuI2NoYXJzaGVldG1vZGFsIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBib3R0b206IDA7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIGxlZnQ6IDA7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41Nik7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbiNjaGFyc2hlZXRtb2RhbC52aXNpYmxlIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGJvdHRvbTogMDtcbiAgdG9wOiAwO1xuICByaWdodDogMDtcbiAgbGVmdDogMDtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjU2KTtcbn1cblxuI2NoYXJzaGVldGNvbnRyb2xzIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAwO1xuICBwYWRkaW5nOiA0cHggOHB4O1xuICBib3JkZXItbGVmdDogMXB4IHNvbGlkIGJsYWNrO1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgYmxhY2s7XG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDtcbn1cblxuI2NoYXJzaGVldCB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAxMHZ3O1xuICByaWdodDogMTB2dztcbiAgaGVpZ2h0OiA2MHZoO1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIvYXNzZXRzL3VpL3RlbXBvcmFyeXBhcmNobWVudC5qcGdcIik7XG4gIGJhY2tncm91bmQtY29sb3I6ICNlYWUxYzY7XG4gIGJvcmRlcjogMXB4IHNvbGlkICM4MDNiMGM7XG4gIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDhweDtcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDhweDtcbn0iXX0= */\"","import {\n\tAfterViewInit, ChangeDetectorRef,\n\tComponent,\n\tComponentFactoryResolver,\n\tComponentRef, EventEmitter,\n\tOnDestroy, Output,\n\tType,\n\tViewChild\n} from '@angular/core';\nimport {Subject} from \"rxjs\";\nimport {InsertionDirective} from \"./insertion.directive\";\nimport { StorytellerComponent } from '../storyteller/storyteller.component';\nimport {CharSheetDirective} from \"./char-sheet.directive\";\nimport {QuestJournalComponent} from \"../storyteller/charsheet/quest-journal/quest-journal.component\";\n\n/**\n * Holder component for {@link SceneRenderer} objects.\n * Is instantiated by {@link SceneUIService} for {@link StorytellerComponent} and injected with the chosen renderer.\n */\n@Component({\n\tselector: 'app-scene-ui',\n\ttemplateUrl: './scene-ui.component.html',\n\tstyleUrls: ['./scene-ui.component.scss']\n})\nexport class SceneUIComponent implements AfterViewInit, OnDestroy {\n\n\tprivate readonly _onClose = new Subject<any>();\n\n\tpublic componentRef: ComponentRef<any>;\n\tpublic childComponentType: Type<any>;\n\tpublic onClose = this._onClose.asObservable();\n\n\tpublic controller: StorytellerComponent;\n\n\tshowCharSheet: boolean;\n\n\t@ViewChild(InsertionDirective, {static: false}) insertionPoint: InsertionDirective;\n\t@ViewChild(CharSheetDirective, {static: false}) charsheetPoint: CharSheetDirective;\n\n\tconstructor(private componentFactoryResolver: ComponentFactoryResolver, private cd: ChangeDetectorRef)\n\t{\n\n\t\tthis.showCharSheet = false;\n\t}\n\n\t// LIFECYCLE\n\n\t// note: ngOnInit not strictly necessary for this use\n\t// ngOnInit() {\n\t// }\n\n\tngAfterViewInit(): void {\n\t\tthis.loadChildComponent(this.childComponentType);\n\t\tthis.cd.detectChanges();\n\t}\n\n\tngOnDestroy(): void {\n\t\tif (this.componentRef) {\n\t\t\tthis.componentRef.destroy();\n\t\t}\n\t}\n\n\t// child loading\n\n\tloadChildComponent(componentType: Type<any>) {\n\t\tlet componentFactory = this.componentFactoryResolver.resolveComponentFactory(componentType);\n\n\t\tlet viewContainerRef = this.insertionPoint.viewContainerRef;\n\t\tviewContainerRef.clear();\n\n\t\tthis.componentRef = viewContainerRef.createComponent(componentFactory);\n\t}\n\n\t// charsheet loading, could probably be merged with loadChildComponent\n\tloadCharSheetComponent (componentType: Type<any>) {\n\t\tlet componentFactory = this.componentFactoryResolver.resolveComponentFactory(componentType);\n\n\t\tlet viewContainerRef = this.charsheetPoint.viewContainerRef;\n\t\tviewContainerRef.clear();\n\n\t\tthis.componentRef = viewContainerRef.createComponent(componentFactory);\n\t}\n\n\t// for dialog-like behaviour, revise\n\n\tonOverlayClicked(evt: MouseEvent) {\n\t\tconsole.warn(\"on overlay click\");\n\n\t}\n\n\tonDialogClicked(evt: MouseEvent) {\n\t\tevt.stopPropagation();\n\t}\n\n\n\tdoSaveGame ()\n\t{\n\t\tconsole.log(\"Saving game state... to outer Storyteller\", this.controller);\n\t\t// WanderGameState.saveToBrowser(this.game);\n\t\tthis.controller.doSaveGame();\n\t}\n\n\tdoLoadGame ()\n\t{\n\t\tconsole.log(\"Loading game state... to outer Storyteller\", this.controller);\n\t\tthis.controller.doLoadGame();\n\t}\n\n\topenCharSheet ()\n\t{\n\t\tthis.loadCharSheetComponent(QuestJournalComponent);\n\t\tthis.controller.openCharSheet();\n\t\tconsole.log(\"opening char sheet\");\n\t\tthis.showCharSheet = true;\n\n\t}\n\n\tcloseCharSheet ()\n\t{\n\t\tconsole.log(\"closing char sheet\");\n\t\tthis.controller.closeCharSheet();\n\t\tthis.showCharSheet = false;\n\t}\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { InsertionDirective } from './insertion.directive';\nimport {SceneUIComponent} from \"./scene-ui.component\";\nimport {CharSheetDirective} from \"./char-sheet.directive\";\n\n\n\n@NgModule({\n\timports: [CommonModule],\n\tdeclarations: [SceneUIComponent, InsertionDirective, CharSheetDirective],\n\tentryComponents: [SceneUIComponent],\n})\nexport class SceneUIModule { }\n","import {\n\tApplicationRef,\n\tComponentFactoryResolver,\n\tComponentRef,\n\tEmbeddedViewRef,\n\tInjectable,\n\tInjector, Type\n} from '@angular/core';\nimport {SceneUIComponent} from \"./scene-ui.component\";\nimport {SceneRef} from \"./scene-ref\";\nimport {SceneInjector} from \"./scene-injector\";\nimport {WanderScene} from \"../rpg-engine/wander-scene\";\nimport {SceneRenderer} from \"../storyteller/scenes/scene-renderer\";\nimport {StorytellerInterface} from \"../storyteller/storyteller-interface\";\nimport {QuestJournalComponent} from \"../storyteller/charsheet/quest-journal/quest-journal.component\";\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SceneUIService {\n\n\tsceneRef: ComponentRef<SceneUIComponent>;\n\tprivate stref: StorytellerInterface;\n\n\tconstructor(\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\n\t\tprivate appRef: ApplicationRef,\n\t\tprivate injector: Injector) {\n\t}\n\n\tpublic bindStoryTellerUI (stref: StorytellerInterface)\n\t{\n\t\tthis.stref = stref;\n\t}\n\n\tpublic open(componentType: Type<SceneRenderer>, scene: WanderScene): SceneRef\n\t{\n\t\tlet sceneref = this.appendSceneUI(scene);\n\t\tthis.sceneRef.instance.childComponentType = componentType;\n\t\treturn sceneref;\n\t}\n\n\tprivate appendSceneUI (scene: WanderScene): SceneRef\n\t{\n\n\t\tconst map = new WeakMap();\n\t\t// map.set(DialogConfig, config);\n\n\t\t// add the DialogRef to dependency injection\n\t\tconst sceneRef = new SceneRef();\n\t\tsceneRef.setContext(scene);\n\t\tmap.set(SceneRef, sceneRef);\n\t\tmap.set(StorytellerInterface, this.stref);\n\n\t\t// we want to know when somebody called the close mehtod\n\t\tconst sub = sceneRef.afterClosed.subscribe(() => {\n\t\t\t// close the dialog\n\t\t\tconsole.log(\"running AFTERCLOSE\");\n\t\t\tthis.removeSceneUI();\n\t\t\tsub.unsubscribe();\n\n\t\t\tconsole.log(\"getting follower scene \", scene.getFollowingScene());\n\t\t\tthis.stref.checkUpdateSceneRender();\n\t\t});\n\n\t\tconst checksub = sceneRef.sceneCheck.subscribe(() => {\n\t\t\tconsole.log(\"running SCENECHECK on scene \", scene);\n\t\t\tif (scene.sceneFinished())\n\t\t\t{\n\t\t\t\tconsole.log(\"scene IS finished!\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconsole.log(\"scene NOT finished\");\n\t\t\t}\n\t\t\tif (scene.sceneFinished())\n\t\t\t{\n\t\t\t\tsceneRef.close();\n\t\t\t}\n\t\t});\n\n\t\tconst componentFactory = this.componentFactoryResolver.resolveComponentFactory(SceneUIComponent);\n\t\tconsole.warn(\"istancing sceneUI: component factory\", componentFactory, \"params map\", map);\n\t\tconst sceneInject = new SceneInjector(this.injector, map);\n\t\tconst componentRef = componentFactory.create(sceneInject);\n\t\tconsole.warn(\"used injector \", sceneInject, \" to add component\", componentRef, \"w hostview\", componentRef.hostView);\n\n\t\tthis.appRef.attachView(componentRef.hostView);\n\n\t\tconst domElem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n\t\tdocument.body.appendChild(domElem);\n\n\t\tthis.sceneRef = componentRef;\n\t\t// console.log(\"SceneUI.sceneRef: \", this.sceneRef);\n\t\t// console.log(\"SceneUI.sceneRef.instance: \", this.sceneRef.instance);\n\n\t\t(this.sceneRef.instance as SceneUIComponent).controller = this.stref.getStoryteller();\n\n\t\t// console.log(\"SceneUI.sceneRef.childCompo: \", this.sceneRef.instance.componentRef);\n\t\tthis.sceneRef.instance.onClose.subscribe(() => {\n\t\t\tconsole.log(\"running ONCLOSE\");\n\t\t\tthis.removeSceneUI();\n\t\t\t// console.log(\"getting follower scene \", scene.getFollowingScene());\n\t\t\t// this.storyteller.checkUpdateSceneRender();\n\t\t});\n\n\t\t// return the dialogRef\n\t\treturn sceneRef;\n\n\t}\n\n\tpublic removeSceneUI () {\n\t\tconsole.log(\"removing scene ref \", this.sceneRef);\n\t\tthis.appRef.detachView(this.sceneRef.hostView);\n\t\tthis.sceneRef.destroy();\n\t}\n\n\tpublic openCharSheet ()\n\t{\n\t\tconst map = new WeakMap();\n\t\t// map.set(DialogConfig, config);\n\n\t\t// add the DialogRef to dependency injection\n\t\tmap.set(StorytellerInterface, this.stref);\n\n\t\tconst componentFactory = this.componentFactoryResolver.resolveComponentFactory(QuestJournalComponent);\n\t\tconst injector = new SceneInjector(this.injector, map);\n\t\tconst componentRef = componentFactory.create(injector);\n\t\tconsole.warn(\"used injector \", injector, \" to add component\", componentRef, \"w hostview\", componentRef.hostView);\n\t\tthis.appRef.attachView(componentRef.hostView);\n\n\t\tconst domElem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n\t\tdocument.body.appendChild(domElem);\n\n\t\t(componentRef.instance as QuestJournalComponent).controller = this.stref.getStoryteller();\n\t}\n}\n","export default \".scenescreen {\\n  background-color: darkseagreen;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1ibHVlLXNjcmVlbi90ZXN0LWJsdWUtc2NyZWVuLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3QtYmx1ZS1zY3JlZW4vdGVzdC1ibHVlLXNjcmVlbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLDhCQUFBO0FDQUQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3QtYmx1ZS1zY3JlZW4vdGVzdC1ibHVlLXNjcmVlbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zY2VuZXNjcmVlblxue1xuXHRiYWNrZ3JvdW5kLWNvbG9yOlx0XHRcdGRhcmtzZWFncmVlbjtcbn1cbiIsIi5zY2VuZXNjcmVlbiB7XG4gIGJhY2tncm91bmQtY29sb3I6IGRhcmtzZWFncmVlbjtcbn0iXX0= */\"","import {Component, OnInit} from '@angular/core';\nimport {SceneUIComponent} from \"../../../scene-ui/scene-ui.component\";\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {TestScreenGenericComponent} from \"../test-screen-generic/test-screen-generic.component\";\nimport {StorytellerInterface} from \"../../../storyteller/storyteller-interface\";\n\n@Component({\n\tselector: 'app-test-blue-screen',\n\ttemplateUrl: './test-blue-screen.component.html',\n\tstyleUrls: ['../test-screen-generic/test-screen-generic.component.scss', './test-blue-screen.component.scss']\n})\nexport class TestBlueScreenComponent extends TestScreenGenericComponent implements OnInit {\n\n\tconstructor(public sceneref: SceneRef, sti: StorytellerInterface = null) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t}\n\n\tonClose() {\n\t\tthis.sceneref.close('BYE BLUE');\n\t}\n\n}\n","export default \".scenescreen {\\n  background-color: lightsteelblue;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1ncmVlbi1zY3JlZW4vdGVzdC1ncmVlbi1zY3JlZW4uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1ncmVlbi1zY3JlZW4vdGVzdC1ncmVlbi1zY3JlZW4uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFQyxnQ0FBQTtBQ0FEIiwiZmlsZSI6InNyYy9hcHAvc3RvcnktdGVzdGVyL3NjZW5lcy90ZXN0LWdyZWVuLXNjcmVlbi90ZXN0LWdyZWVuLXNjcmVlbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zY2VuZXNjcmVlblxue1xuXHRiYWNrZ3JvdW5kLWNvbG9yOlx0XHRcdGxpZ2h0c3RlZWxibHVlO1xufVxuIiwiLnNjZW5lc2NyZWVuIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRzdGVlbGJsdWU7XG59Il19 */\"","import {Component, OnInit} from '@angular/core';\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {TestScreenGenericComponent} from \"../test-screen-generic/test-screen-generic.component\";\nimport {StorytellerInterface} from \"../../../storyteller/storyteller-interface\";\n\n@Component({\n\tselector: 'app-test-green-screen',\n\ttemplateUrl: './test-green-screen.component.html',\n\tstyleUrls: ['../test-screen-generic/test-screen-generic.component.scss', './test-green-screen.component.scss']\n})\nexport class TestGreenScreenComponent extends TestScreenGenericComponent implements OnInit {\n\n\tconstructor(public sceneref: SceneRef, sti: StorytellerInterface = null)\n\t{\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t}\n\n\tonClose() {\n\t\tthis.sceneref.close('BYE GREEN');\n\t}\n\n\n}\n","export default \".overlay {\\n  display: flex;\\n  flex-direction: column;\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background: rgba(0, 0, 0, 0.7);\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.dialog {\\n  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\\n  background-color: white;\\n  width: 50%;\\n  height: 50%;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1zY3JlZW4tZ2VuZXJpYy90ZXN0LXNjcmVlbi1nZW5lcmljLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3Qtc2NyZWVuLWdlbmVyaWMvdGVzdC1zY3JlZW4tZ2VuZXJpYy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLGVBQUE7RUFDQSxNQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsOEJBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FDQ0Y7O0FERUE7RUFDRSw0RUFBQTtFQUNBLHVCQUFBO0VBQ0EsVUFBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxZQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3Qtc2NyZWVuLWdlbmVyaWMvdGVzdC1zY3JlZW4tZ2VuZXJpYy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5vdmVybGF5IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5kaWFsb2cge1xuICBib3gtc2hhZG93OiAwIDE0cHggMjhweCByZ2JhKDAsIDAsIDAsIDAuMjUpLCAwIDEwcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMjIpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgd2lkdGg6IDUwJTtcbiAgaGVpZ2h0OiA1MCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDhweDtcbn1cbiIsIi5vdmVybGF5IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5kaWFsb2cge1xuICBib3gtc2hhZG93OiAwIDE0cHggMjhweCByZ2JhKDAsIDAsIDAsIDAuMjUpLCAwIDEwcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMjIpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgd2lkdGg6IDUwJTtcbiAgaGVpZ2h0OiA1MCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDhweDtcbn0iXX0= */\"","import {Component, OnInit} from '@angular/core';\nimport {StorytellerInterface} from \"../../../storyteller/storyteller-interface\";\n\n// @Component({\n// \tselector: 'app-test-screen-generic',\n// \ttemplateUrl: './test-screen-generic.component.html',\n// \tstyleUrls: ['./test-screen-generic.component.scss']\n// })\nexport abstract class TestScreenGenericComponent implements OnInit {\n\n\tstint: StorytellerInterface = null;\n\n\tconstructor() {\n\t}\n\n\tngOnInit() {\n\t}\n\n}\n","export default \"#storyteller-outside {\\n  background-color: #9a93ff;\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n#storyteller-tester {\\n  position: fixed;\\n  top: 8px;\\n  left: 8px;\\n  right: 8px;\\n  bottom: 8px;\\n  /*background-color:\\t\\tlightgreen;*/\\n  background-image: url(\\\"/assets/ui/temporaryparchment.jpg\\\");\\n}\\n\\n#scenerender-test {\\n  background-color: grey;\\n  width: 200px;\\n  height: 300px;\\n  border: 2px solid white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zdG9yeS10ZXN0ZXIuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N0b3J5LXRlc3Rlci9zdG9yeS10ZXN0ZXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFQyx5QkFBQTtFQUNBLGVBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0FDQUQ7O0FESUE7RUFFQyxlQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLGlDQUFBO0VBQ0EsMERBQUE7QUNGRDs7QURPQTtFQUdDLHNCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtBQ05EIiwiZmlsZSI6InNyYy9hcHAvc3RvcnktdGVzdGVyL3N0b3J5LXRlc3Rlci5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNzdG9yeXRlbGxlci1vdXRzaWRlXG57XG5cdGJhY2tncm91bmQtY29sb3I6ICM5YTkzZmY7XG5cdHBvc2l0aW9uOlx0XHRcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHRcdFx0MDtcblx0bGVmdDpcdFx0XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0XHRcdDA7XG5cdGJvdHRvbTpcdFx0XHRcdFx0MDtcbn1cblxuXG4jc3Rvcnl0ZWxsZXItdGVzdGVyXG57XG5cdHBvc2l0aW9uOlx0XHRcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHRcdFx0OHB4O1xuXHRsZWZ0Olx0XHRcdFx0XHQ4cHg7XG5cdHJpZ2h0Olx0XHRcdFx0XHQ4cHg7XG5cdGJvdHRvbTpcdFx0XHRcdFx0OHB4O1xuXHQvKmJhY2tncm91bmQtY29sb3I6XHRcdGxpZ2h0Z3JlZW47Ki9cblx0YmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy91aS90ZW1wb3JhcnlwYXJjaG1lbnQuanBnXCIpO1xuXG59XG5cblxuI3NjZW5lcmVuZGVyLXRlc3RcbntcblxuXHRiYWNrZ3JvdW5kLWNvbG9yOlx0XHRncmV5O1xuXHR3aWR0aDpcdFx0XHRcdFx0MjAwcHg7XG5cdGhlaWdodDpcdFx0XHRcdFx0MzAwcHg7XG5cdGJvcmRlcjpcdFx0XHRcdFx0MnB4IHNvbGlkIHdoaXRlO1xufVxuXG5cbiIsIiNzdG9yeXRlbGxlci1vdXRzaWRlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzlhOTNmZjtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbiNzdG9yeXRlbGxlci10ZXN0ZXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogOHB4O1xuICBsZWZ0OiA4cHg7XG4gIHJpZ2h0OiA4cHg7XG4gIGJvdHRvbTogOHB4O1xuICAvKmJhY2tncm91bmQtY29sb3I6XHRcdGxpZ2h0Z3JlZW47Ki9cbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy91aS90ZW1wb3JhcnlwYXJjaG1lbnQuanBnXCIpO1xufVxuXG4jc2NlbmVyZW5kZXItdGVzdCB7XG4gIGJhY2tncm91bmQtY29sb3I6IGdyZXk7XG4gIHdpZHRoOiAyMDBweDtcbiAgaGVpZ2h0OiAzMDBweDtcbiAgYm9yZGVyOiAycHggc29saWQgd2hpdGU7XG59Il19 */\"","import {Component, OnInit} from '@angular/core';\nimport {SceneUIService} from \"../scene-ui/scene-ui.service\";\nimport {TestBlueScreenComponent} from \"./scenes/test-blue-screen/test-blue-screen.component\";\nimport {TestGreenScreenComponent} from \"./scenes/test-green-screen/test-green-screen.component\";\nimport {TesterScene} from \"./tester-scene\";\nimport {StorytellerInterface} from \"../storyteller/storyteller-interface\";\n\n@Component({\n\tselector: 'app-story-tester',\n\ttemplateUrl: './story-tester.component.html',\n\tstyleUrls: ['./story-tester.component.scss']\n})\nexport class StoryTesterComponent implements OnInit {\n\n\n\tconstructor(private sceneui: SceneUIService, sti: StorytellerInterface = null) {\n\t}\n\n\tngOnInit() {\n\t}\n\n\tloadBlueScreen() {\n\t\tlet scene = new TesterScene();\n\t\tlet ref = this.sceneui.open(TestBlueScreenComponent, scene);\n\t\tref.afterClosed.subscribe(result => {\n\t\t\tconsole.log('Scene (BLUE) closed', result);\n\t\t});\n\t}\n\n\tloadGreenScreen() {\n\t\tlet scene = new TesterScene();\n\t\tlet ref = this.sceneui.open(TestGreenScreenComponent, scene);\n\t\tref.afterClosed.subscribe(result => {\n\t\t\tconsole.log('Scene (GREEN) closed', result);\n\t\t});\n\t}\n}\n","import {WanderScene} from \"../rpg-engine/wander-scene\";\n\n/**\n * Empty scene object so test layouts can work without loading an actual game\n */\nexport class TesterScene extends WanderScene {\n\n\tconstructor ()\n\t{\n\t\tsuper(null);\n\t}\n\n\tsceneFinished(): boolean {\n\t\treturn false;\n\t}\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3N0b3J5dGVsbGVyL2NoYXJzaGVldC9xdWVzdC1qb3VybmFsL3F1ZXN0LWpvdXJuYWwuY29tcG9uZW50LnNjc3MifQ== */\"","import {Component, OnInit} from '@angular/core';\nimport {StorytellerComponent} from \"../../storyteller.component\";\nimport {StorytellerInterface} from \"../../storyteller-interface\";\nimport {WanderGame} from \"../../../rpg-engine/wander-game\";\n\n@Component({\n\tselector: 'app-quest-journal',\n\ttemplateUrl: './quest-journal.component.html',\n\tstyleUrls: ['./quest-journal.component.scss']\n})\nexport class QuestJournalComponent implements OnInit {\n\n\tcontroller: StorytellerComponent;\n\tgame: WanderGame;\n\n\tconstructor(storytellerinterface: StorytellerInterface = null) {\n\t\tconsole.warn(\"creating charsheet w controller interface\", storytellerinterface);\n\t\tthis.controller = storytellerinterface.getStoryteller();\n\t\tthis.game = this.controller.game;\n\t}\n\n\tngOnInit() {\n\t\tconsole.warn(\"showing charsheet w controller\", this.controller);\n\t}\n\n}\n","export default \"#journeyrender {\\n  position: fixed;\\n  top: 8px;\\n  left: 8px;\\n  right: 8px;\\n  bottom: 30vh;\\n  border: 1px dashed black;\\n  overflow: auto;\\n}\\n\\n#viewrender {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n#journeyinfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 28vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\nbutton.journeychoice {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9qb3VybmV5LXN0ZXAvam91cm5leS1zdGVwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvam91cm5leS1zdGVwL2pvdXJuZXktc3RlcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLFVBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7RUFDQSxjQUFBO0FDQUQ7O0FER0E7RUFFQyxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7QUNERDs7QURJQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDSEQ7O0FET0E7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ05EIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL2pvdXJuZXktc3RlcC9qb3VybmV5LXN0ZXAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjam91cm5leXJlbmRlclxue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHQ4cHg7XG5cdGxlZnQ6XHRcdFx0OHB4O1xuXHRyaWdodDpcdFx0XHQ4cHg7XG5cdGJvdHRvbTpcdFx0XHQzMHZoO1xuXHRib3JkZXI6XHRcdFx0MXB4IGRhc2hlZCBibGFjaztcblx0b3ZlcmZsb3c6XHRcdGF1dG87XG59XG5cbiN2aWV3cmVuZGVyXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblx0dG9wOlx0XHRcdDA7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG59XG5cbiNqb3VybmV5aW5mb1xue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdGhlaWdodDpcdFx0XHQyOHZoO1xuXHRmb250LXNpemU6XHRcdDh2aDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG59XG5cblxuYnV0dG9uLmpvdXJuZXljaG9pY2Vcbntcblx0Ym9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0cGFkZGluZzpcdFx0MnB0IDhwdDtcblxuXHRmb250LXNpemU6XHRcdDR2aDtcbn1cbiIsIiNqb3VybmV5cmVuZGVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDhweDtcbiAgbGVmdDogOHB4O1xuICByaWdodDogOHB4O1xuICBib3R0b206IDMwdmg7XG4gIGJvcmRlcjogMXB4IGRhc2hlZCBibGFjaztcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG5cbiN2aWV3cmVuZGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbiNqb3VybmV5aW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiAyOHZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5idXR0b24uam91cm5leWNob2ljZSB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBwYWRkaW5nOiAycHQgOHB0O1xuICBmb250LXNpemU6IDR2aDtcbn0iXX0= */\"","import {AfterViewInit, Component, ElementRef, OnInit, ViewChild} from '@angular/core';\nimport {SceneRenderer} from \"../scene-renderer\";\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {Journey} from \"../../../rpg-engine/scenes/journey\";\nimport {WalkRenderer} from \"../lib/walk-renderer\";\n\n@Component({\n\tselector: 'app-journey-step',\n\ttemplateUrl: './journey-step.component.html',\n\tstyleUrls: ['./journey-step.component.scss']\n})\nexport class JourneyStepComponent extends SceneRenderer implements OnInit, AfterViewInit {\n\n\t@ViewChild(\"renderholder\", {static: false}) renderholder: ElementRef;\n\t@ViewChild(\"renderview\", {static: false}) renderview: ElementRef;\n\n\tjourneyscene: Journey;\n\tviewrenderer: WalkRenderer;\n\n\n\tconstructor(public sceneref: SceneRef) {\n\t\tsuper(sceneref);\n\t\tthis.journeyscene = this.sceneref.scene as Journey;\n\t\tconsole.log(\"journey path: \", JSON.stringify(this.journeyscene.course));\n\t}\n\n\tngOnInit() {\n\n\t}\n\n\tngAfterViewInit(): void {\n\t\tthis.viewrenderer = new WalkRenderer(this.journeyscene.game.worldmap, this.renderview);\n\t\tlet ui = this;\n\t\tthis.viewrenderer.loadAssets(function ()\n\t\t{\n\t\t\tui.renderStep();\n\t\t});\n\t}\n\n\n\tsetCamp()\n\t{\n\t\tconsole.log(\"clicked SET CAMP\");\n\t}\n\n\tcontinueJourney()\n\t{\n\t\tconsole.log(\"clicked JOURNEY ONWARDs\");\n\n\t\tthis.journeyscene.step();\n\t\tthis.journeyscene.game.hero.setCoordinates(this.journeyscene.getCurrentCoordinates());\n\t\tif (!this.journeyscene.sceneFinished())\n\t\t{\n\t\t\tthis.renderStep();\n\t\t}\n\t\telse {\n\t\t\tthis.sceneref.triggerSceneCheck();\n\t\t}\n\n\n\t}\n\n\trenderStep ()\n\t{\n\t\tconst vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n\t\tthis.viewrenderer.renderView(this.journeyscene.getCurrentCoordinates(), vector);\n\t}\n\n\tshowMap()\n\t{\n\t\tconsole.log(\"clicked SHOW MAP\");\n\t}\n\n\tgetDirectionDescription (): string {\n\t\tlet vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n\t\tlet dirstring = \"\";\n\n\t\tif (vector[1] > 0) {\n\t\t\tdirstring += \"South\";\n\t\t} else if (vector[1] < 0) {\n\t\t\tdirstring += \"North\";\n\t\t}\n\t\tif (vector[0] > 0) {\n\t\t\tdirstring += \"East\";\n\t\t} else if (vector[0] < 0) {\n\t\t\tdirstring += \"West\";\n\t\t}\n\n\t\treturn dirstring;\n\t}\n\n\n\n\n\n\n\n\n}\n","import {ElementRef} from \"@angular/core\";\nimport Konva from \"konva\";\n\nexport class ArtRenderer {\n\n\trenderview: ElementRef;\n\n\n\tconstructor (target: ElementRef)\n\t{\n\t\tconsole.log(\"creating art renderer on element \", target);\n\t\tthis.renderview = target;\n\t}\n\n\tloadRenderImage (urlpath: string)\n\t{\n\t\tconsole.log(\"trying render on \", this.renderview, \"for\", urlpath);\n\t\tlet ui = this;\n\t\tlet imageObj = new Image();\n\t\timageObj.onload = function () {\n\t\t\t\tui.renderLoadedImage(imageObj);\n\t\t\t};\n\t\timageObj.src = urlpath;\n\t}\n\n\trenderLoadedImage (image: HTMLImageElement)\n\t{\n\t\tconst VPW = this.renderview.nativeElement.clientWidth;\n\t\tconst VPH = this.renderview.nativeElement.clientHeight;\n\n\t\tlet stage = new Konva.Stage({\n\t\t\tcontainer: this.renderview.nativeElement.id,\n\t\t\twidth: VPW,\n\t\t\theight: VPH,\n\t\t});\n\n\t\tlet composer = new Konva.Layer ({});\n\t\tstage.add(composer);\n\n\t\tlet widthratio = image.width / VPW;\n\t\tlet heightratio = image.height / VPH;\n\t\tlet ratio = Math.max(widthratio, heightratio);\n\n\t\tlet renderwidth = image.width / ratio;\n\t\tlet renderheight = image.height / ratio;\n\n\t\tlet msg = `rendering ${image.width}*${image.height} backdrop on ${VPW}*${VPH} stage as ${renderwidth}*${renderheight} px`;\n\n\t\tconsole.log(msg);\n\n\n\t\tlet backdrop = new Konva.Image({\n\t\t\timage: image,\n\t\t\tx: (VPW - renderwidth) / 2,\n\t\t\ty: (VPH - renderheight) / 2,\n\t\t\twidth: renderwidth,\n\t\t\theight: renderheight\n\t\t});\n\t\tconsole.log(\"adding\", backdrop, \"to\", composer);\n\t\tcomposer.add(backdrop);\n\n\t\tcomposer.batchDraw();\n\n\t\tfunction parchifyWhite (imageData) {\n\t\t\t// let ctx = canvas.getContext('2d');\n\t\t\t// let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\t\t\tlet nPixels = imageData.data.length;\n\t\t\tfor (let i = 0; i < nPixels; i += 4)\n\t\t\t{\n\t\t\t\tlet r = imageData.data[i];\n\t\t\t\tlet g = imageData.data[i + 1];\n\t\t\t\tlet b = imageData.data[i + 2];\n\t\t\t\tlet a = imageData.data[i + 3];\n\t\t\t\tif (a > 200)\n\t\t\t\t{\n\t\t\t\t\t// using brightness (0.21  R) + (0.72  G) + (0.07  B)\n\t\t\t\t\tlet brightness = (0.21 * r) + (0.72 * g) + (0.07 * b);\n\t\t\t\t\tlet greyavrg = brightness / 3;\n\t\t\t\t\tgreyavrg = Math.round(greyavrg / 32) * 32;\n\t\t\t\t\timageData.data[i] = greyavrg;\n\t\t\t\t\timageData.data[i + 1] = greyavrg;\n\t\t\t\t\timageData.data[i + 2] = greyavrg;\n\n\t\t\t\t\timageData.data[i + 3] = 255 - brightness;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t}\n\n\t\tcomposer.cache();\n\n\t\tcomposer.filters([Konva.Filters.Brighten]);\n\t\tcomposer.brightness(0.8);\n\t\tcomposer.filters([parchifyWhite]);\n\t\tcomposer.batchDraw();\n\n\t}\n\n\n}\n","import {WorldMap} from \"../../../rpg-engine/world/world-map\";\nimport Konva from \"konva\";\nimport {WorldPosition} from \"../../../rpg-engine/world/world-position\";\nimport {ElementRef} from \"@angular/core\";\n\nexport class WalkRenderer\n{\n\tworldmap: WorldMap;\n\n\t// NOTE: these could be configured via a tileset theme\n\n\t// TILESBYTERRRAIN = {\n\t// \t\"M\": \"basetilemountain400.png\",\n\t// \t\"H\": \"basetilehills400.png\",\n\t// \t\"F\": \"basetileforest400.png\",\n\t// \t\"P\": \"basetileplains400.png\",\n\t// };\n\n\tTILESBYTERRRAIN = {\n\t\t\"M\": \"basetilemountain.png\",\n\t\t\"H\": \"basetilehills.png\",\n\t\t\"F\": \"basetileforest.png\",\n\t\t\"P\": \"basetileplains.png\",\n\t};\n\tPATH_TILES = \"assets/graph/fptiles/\";\n\tterraintiles: Map<string, string>;\n\ttileimages: Map<string, HTMLImageElement>;\n\n\tMARKERSBYID = {\n\t\t\"towns\": \"basetilecitadel.png\",\n\t};\n\tPATH_MARKERS = \"assets/graph/fptiles/\";\n\tmarkerfiles: Map<string, string>;\n\tmarkerimages: Map<string, HTMLImageElement>;\n\n\n\tEXTRAIMGS = {\n\t\t// \"skybgr\": \"/assets/graph/bgr/sunspearsky.jpg\",\n\t\t\"skybgr\": \"assets/graph/bgr/sunspearsky_gscale.png\"\n\t};\n\n\textrafiles: Map<string, string>;\n\textraimages: Map<string, HTMLImageElement>;\n\n\trenderview: ElementRef;\n\n\tconstructor (worldmap: WorldMap, target: ElementRef)\n\t{\n\t\tthis.worldmap = worldmap;\n\t\tthis.renderview = target;\n\t\tconsole.log(this.renderview);\n\t\tconsole.log(\"render view id\", this.renderview.nativeElement.id);\n\t}\n\n\tloadAssets (callback: Function)\n\t{\n\t\tthis.terraintiles = new Map<string, string>();\n\t\tthis.tileimages = new Map<string, HTMLImageElement>();\n\t\tthis.markerfiles = new Map<string, string>();\n\t\tthis.markerimages = new Map<string, HTMLImageElement>();\n\t\tthis.extrafiles = new Map<string, string>();\n\t\tthis.extraimages = new Map<string, HTMLImageElement>();\n\n\t\tfor (let key in this.TILESBYTERRRAIN) {\n\t\t\tthis.terraintiles.set(key, this.PATH_TILES + this.TILESBYTERRRAIN[key]);\n\t\t}\n\t\tthis.tileimages = new Map<string, HTMLImageElement>();\n\t\tfor (let terrain of this.terraintiles.keys()) {\n\t\t\tthis.tileimages.set(terrain, null);\n\t\t}\n\n\t\tfor (let key in this.MARKERSBYID) {\n\t\t\tthis.markerfiles.set(key, this.PATH_MARKERS + this.MARKERSBYID[key]);\n\t\t}\n\t\tthis.markerimages = new Map<string, HTMLImageElement>();\n\t\tfor (let markerid of this.markerfiles.keys()) {\n\t\t\tthis.markerimages.set(markerid, null);\n\t\t}\n\n\t\tfor (let key in this.EXTRAIMGS) {\n\t\t\tthis.extrafiles.set(key, this.EXTRAIMGS[key]);\n\t\t}\n\t\tthis.extraimages = new Map<string, HTMLImageElement>();\n\t\tfor (let fileid of this.extrafiles.keys()) {\n\t\t\tthis.extraimages.set(fileid, null);\n\t\t}\n\n\t\t// LOADING ASSETS\n\t\tlet ui = this;\n\t\tfor (let terrain of this.terraintiles.keys()) {\n\t\t\tlet imageObj = new Image();\n\t\t\timageObj.onload = function () {\n\t\t\t\tui.tileimages.set(terrain, imageObj);\n\t\t\t\tui.checkReadyRender(callback);\n\t\t\t};\n\t\t\timageObj.src = this.terraintiles.get(terrain);\n\t\t}\n\n\t\tfor (let markerid of this.markerfiles.keys()) {\n\t\t\tlet imageObj = new Image();\n\t\t\timageObj.onload = function () {\n\t\t\t\tui.markerimages.set(markerid, imageObj);\n\t\t\t\tui.checkReadyRender(callback);\n\t\t\t};\n\t\t\timageObj.src = this.markerfiles.get(markerid);\n\t\t}\n\n\t\tfor (let fileid of this.extrafiles.keys()) {\n\t\t\tlet imageObj = new Image();\n\t\t\timageObj.onload = function () {\n\t\t\t\tui.extraimages.set(fileid, imageObj);\n\t\t\t\tui.checkReadyRender(callback);\n\t\t\t};\n\t\t\timageObj.src = this.extrafiles.get(fileid);\n\t\t}\n\n\n\t}\n\n\tcheckReadyRender (callback: Function)\n\t{\n\t\tfor (let terrain of this.tileimages.keys()) {\n\t\t\tif (this.tileimages.get(terrain) == null) {\n\t\t\t\t// console.log(\"missing maptile\", terrain, \"wait\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor (let markerid of this.markerimages.keys()) {\n\t\t\tif (this.markerimages.get(markerid) == null) {\n\t\t\t\t// console.log(\"missing mapmarker\", markerid, \"wait\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor (let fileid of this.extraimages.keys()) {\n\t\t\tif (this.extraimages.get(fileid) == null) {\n\t\t\t\t// console.log(\"missing mapmarker\", markerid, \"wait\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\n\t\tcallback();\n\t}\n\n\n\trenderView (pos: WorldPosition, vector: number[])\n\t{\n\t\t// console.log(\"rendering step \", this.journeyscene.stepid);\n\t\t// const vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n\n\t\t// console.log(\"checking step view in dir \", vector, \"from\", this.journeyscene.getCurrentCoordinates().getCoords());\n\t\tconst FOV = 90;\n\t\tlet rect = this.renderview.nativeElement.getBoundingClientRect();\n\t\tconsole.log(\"RECT:\", rect);\n\t\tconst VPW = this.renderview.nativeElement.clientWidth;\n\t\tconst VPH = this.renderview.nativeElement.clientHeight;\n\n\t\tconst PANWIDTH = VPW / (FOV / 360);\n\n\t\tconsole.log(\"using fov\", FOV, \"on \" + VPW + \"*\" + VPH + \": pan to \" + PANWIDTH + \"px\");\n\n\t\tconst MAXDIST = 9;\n\n\t\tlet rendergrid = this.getRenderGrid(pos, vector, MAXDIST);\n\n\n\t\tlet stage = new Konva.Stage({\n\t\t\tcontainer: this.renderview.nativeElement.id,\n\t\t\twidth: VPW,\n\t\t\theight: VPH,\n\n\t\t});\n\n\t\t// console.log(rendergrid);\n\t\t// NOTE: following works ONLY with 90 FOV\n\t\t// also we are actually half step inside each tile but since dist and angle stay the same we ignore\n\n\t\tconst HCENTER = VPW * 0.5;\n\t\tconst VCENTER = VPH * 0.4;\n\t\tconst PHEIGHT = VPH - VCENTER;\n\n\n\t\tlet tilelayer = new Konva.Layer({\n\t\t});\n\t\tstage.add(tilelayer);\n\n\t\t// BGR + CUT\n\n\t\tlet bgrimg = this.extraimages.get(\"skybgr\");\n\t\t// let filename = terraintiles.get(terrain);\n\t\tlet bgr = new Konva.Image({\n\t\t\timage: bgrimg,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\twidth: VPW,\n\t\t\theight: VPH * 0.8\n\t\t});\n\t\ttilelayer.add(bgr);\n\n\t\tlet bgrcut = VCENTER + PHEIGHT / MAXDIST;\n\t\tlet rect1 = new Konva.Rect({\n\t\t\tx: 0,\n\t\t\ty:  bgrcut,\n\t\t\twidth: VPW,\n\t\t\theight: VPH - (bgrcut),\n\t\t\tfill: 'white',\n\t\t\t// stroke: 'black',\n\t\t\t// strokeWidth: 4\n\t\t});\n\t\t// add the shape to the layer\n\t\ttilelayer.add(rect1);\n\n\n\n\t\tfor (let gp of rendergrid)\n\t\t{\n\t\t\t// field size at dist:\n\t\t\t// 1: 1, 2: 3, 3: 5, 4: 7\n\t\t\t// y = x + (x-1)\n\t\t\tlet fsize = gp.dist + (gp.dist - 1);\n\t\t\tlet gsize = VPH / fsize;\n\t\t\tgsize = VPW / fsize;\n\n\t\t\t// let relpos = gp.angrel - 0.5;\n\t\t\t// let hpixpos = HCENTER + ();\n\n\t\t\tlet hpixpos = gp.angrel * VPW - (gsize * 0.5);\n\t\t\thpixpos = VPW - hpixpos - gsize; // fix mirroring\n\t\t\tlet vpixpos = (VCENTER + PHEIGHT / gp.dist) - gsize;\n\n\t\t\tlet terrain = this.worldmap.getTerrainAt(gp.coords[0], gp.coords[1]);\n\t\t\tlet loc = this.worldmap.getLocationAt(gp.coords);\n\n\t\t\tif (terrain == null && loc == null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet tileimg;\n\t\t\tif (terrain != null) {\n\t\t\t\ttileimg = this.tileimages.get(terrain);\n\t\t\t\t// let filename = terraintiles.get(terrain);\n\t\t\t\tlet tile = new Konva.Image({\n\t\t\t\t\timage: tileimg,\n\t\t\t\t\tx: hpixpos,\n\t\t\t\t\ty: vpixpos,\n\t\t\t\t\twidth: gsize,\n\t\t\t\t\theight: gsize\n\t\t\t\t});\n\t\t\t\ttilelayer.add(tile);\n\t\t\t}\n\n\t\t\tif (loc != null)\n\t\t\t{\n\t\t\t\ttileimg = this.markerimages.get(loc.loctype);\n\t\t\t\t// let filename = terraintiles.get(terrain);\n\t\t\t\tlet tile = new Konva.Image({\n\t\t\t\t\timage: tileimg,\n\t\t\t\t\tx: hpixpos,\n\t\t\t\t\ty: vpixpos,\n\t\t\t\t\twidth: gsize,\n\t\t\t\t\theight: gsize\n\t\t\t\t});\n\t\t\t\ttilelayer.add(tile);\n\t\t\t}\n\n\t\t}\n\t\ttilelayer.batchDraw();\n\n\n\t\tfunction parchifyWhite (imageData) {\n\t\t\t// let ctx = canvas.getContext('2d');\n\t\t\t// let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\t\t\tlet nPixels = imageData.data.length;\n\t\t\tfor (let i = 0; i < nPixels; i += 4)\n\t\t\t{\n\t\t\t\tlet r = imageData.data[i];\n\t\t\t\tlet g = imageData.data[i + 1];\n\t\t\t\tlet b = imageData.data[i + 2];\n\t\t\t\tlet a = imageData.data[i + 3];\n\t\t\t\tif (a > 200)\n\t\t\t\t{\n\t\t\t\t\t// using brightness (0.21  R) + (0.72  G) + (0.07  B)\n\t\t\t\t\t// instead of average ((r + g + b) / 3)\n\t\t\t\t\timageData.data[i + 3] = 255 - ((0.21 * r) + (0.72 * g) + (0.07 * b));\n\t\t\t\t}\n\t\t\t}\n\t\t\t//\n\t\t\t// for (let i = 3; i < nPixels; i += 4) {\n\t\t\t// \tif (imageData.data[i] > 0) {\n\t\t\t// \t\timageData.data[i] = 255;\n\t\t\t// \t}\n\t\t\t// }\n\t\t\t// ctx.clearRect(0, 0, canvas.width, canvas.height);\n\t\t\t// ctx.putImageData(imageData, 0, 0);\n\t\t\t// return canvas;\n\t\t}\n\n\t\ttilelayer.cache();\n\t\ttilelayer.filters([parchifyWhite]);\n\t\t// tilelayer.filters([Konva.Filters.Brighten]);\n\t\t// tilelayer.brightness(0.8);\n\t\ttilelayer.batchDraw();\n\n\n\t}\n\n\n\n\tgetRenderGrid (pov: WorldPosition, vector: number[], maxdist: number)\n\t{\n\t\t// const pov = this.journeyscene.getCurrentCoordinates();\n\t\tconst povX = pov.x;\n\t\tconst povY = pov.y;\n\t\t// const vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n\t\tconst angle = WalkRenderer.calcAngleDegreesEast(vector[0], vector[1]);\n\n\n\n\t\t// base angle is EAST\n\n\t\tconst FOV = 90;\n\n\t\tlet angmin = ((angle - FOV / 2) + 360) % 360;\n\t\tlet angmax = ((angle + FOV / 2) + 360) % 360;\n\t\tlet angflip = angmin > angmax;\n\t\tif (angflip)\n\t\t{\n\t\t\tangmax += 360;\n\t\t}\n\t\tlet angv = (angle + 360) % 360;\n\t\tlet angdiff = angmax - angmin;\n\n\t\tconsole.log(\"dir angle is \", angv, \"checking between \", angmin, angmax);\n\n\t\tlet totvis = 0;\n\t\tlet tfrom = new Date().getTime();\n\t\tlet rendergrid: GridPoint[] = [];\n\t\tfor (let x = povX - maxdist; x <= povX + maxdist; x++)\n\t\t{\n\t\t\tfor (let y = povY - maxdist; y <= povY + maxdist; y++)\n\t\t\t{\n\t\t\t\tif (x === povX && y === povY)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet deltaX = x - povX;\n\t\t\t\tlet deltaY = y - povY;\n\t\t\t\tlet angr = WalkRenderer.calcAngleDegreesEast(deltaX, deltaY);\n\t\t\t\tangr = (angr + 360) % 360;\n\t\t\t\tif (angflip && angr <= 45)\n\t\t\t\t{\n\t\t\t\t\tangr += 360;\n\t\t\t\t}\n\n\t\t\t\tif (angmin <= angr && angr <= angmax)\n\t\t\t\t{\n\t\t\t\t\ttotvis++;\n\t\t\t\t\tlet angrel = (angmax - angr) / FOV;\n\t\t\t\t\tlet dist = Math.sqrt((deltaX ** 2) + (deltaY ** 2));\n\t\t\t\t\tif (dist <= maxdist)\n\t\t\t\t\t{\n\t\t\t\t\t\t// we are using a SQUARE box to get the points\n\t\t\t\t\t\t// console.log(x, y, angr);\n\t\t\t\t\t\trendergrid.push({coords: [x, y], angrel: angrel, dist: dist});\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t}\n\t\tlet tto = new Date().getTime();\n\t\tconsole.log(\"tot vis tiles\", totvis,  tto - tfrom);\n\n\t\t// sorting far to close THEN left to right, second sort is not strictily necessary\n\t\trendergrid.sort(function (a: GridPoint, b: GridPoint) {\n\t\t\t// if (a.dist !== b.dist)\n\t\t\t// {\n\t\t\t// \treturn b.dist - a.dist;\n\t\t\t// }\n\t\t\t// else {\n\t\t\t// \treturn a.angrel - b.angrel;\n\t\t\t// }\n\t\t\treturn b.dist - a.dist;\n\t\t});\n\n\t\treturn rendergrid;\n\t}\n\n\n\tstatic calcAngleDegreesEast (x, y) {\n\t\treturn Math.atan2(y, x) * 180 / Math.PI;\n\t}\n\n}\n\n\ninterface GridPoint {\n\n\tcoords: number[];\n\tangrel: number;\n\tdist:\tnumber;\n\n}\n","export default \"#narration_render {\\n  position: fixed;\\n  left: 16px;\\n  top: 24px;\\n  right: 24px;\\n  height: 42vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n#narration_info {\\n  text-align: center;\\n  position: fixed;\\n  bottom: 16px;\\n  left: 16px;\\n  right: 16px;\\n}\\n\\nbutton.pageturn {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n  background-color: transparent;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9uYXJyYXRpb24tcGFnZXMvbmFycmF0aW9uLXBhZ2VzLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvbmFycmF0aW9uLXBhZ2VzL25hcnJhdGlvbi1wYWdlcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUdDLGVBQUE7RUFDQSxVQUFBO0VBQ0EsU0FBQTtFQUNBLFdBQUE7RUFFQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDSEQ7O0FET0E7RUFFQyxrQkFBQTtFQUVBLGVBQUE7RUFDQSxZQUFBO0VBQ0EsVUFBQTtFQUNBLFdBQUE7QUNORDs7QURTQTtFQUtDLHVCQUFBO0VBQ0EsZ0JBQUE7RUFFQSxjQUFBO0VBRUEsNkJBQUE7QUNaRCIsImZpbGUiOiJzcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9uYXJyYXRpb24tcGFnZXMvbmFycmF0aW9uLXBhZ2VzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI25hcnJhdGlvbl9yZW5kZXJcbntcblxuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MTZweDtcblx0dG9wOlx0XHRcdDI0cHg7XG5cdHJpZ2h0Olx0XHRcdDI0cHg7XG5cblx0aGVpZ2h0Olx0XHRcdDQydmg7XG5cdGZvbnQtc2l6ZTpcdFx0OHZoO1xuXG5cdHRleHQtYWxpZ246XHRcdGNlbnRlcjtcbn1cblxuXG4jbmFycmF0aW9uX2luZm9cbntcblx0dGV4dC1hbGlnbjogY2VudGVyO1xuXG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0Ym90dG9tOlx0XHRcdDE2cHg7XG5cdGxlZnQ6XHRcdFx0MTZweDtcblx0cmlnaHQ6XHRcdFx0MTZweDtcbn1cblxuYnV0dG9uLnBhZ2V0dXJuXG57XG5cblxuXG5cdGJvcmRlcjpcdFx0XHQxcHggc29saWQgYmxhY2s7XG5cdHBhZGRpbmc6XHRcdDJwdCA4cHQ7XG5cblx0Zm9udC1zaXplOlx0XHQ0dmg7XG5cblx0YmFja2dyb3VuZC1jb2xvcjpcdHRyYW5zcGFyZW50O1xufVxuIiwiI25hcnJhdGlvbl9yZW5kZXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGxlZnQ6IDE2cHg7XG4gIHRvcDogMjRweDtcbiAgcmlnaHQ6IDI0cHg7XG4gIGhlaWdodDogNDJ2aDtcbiAgZm9udC1zaXplOiA4dmg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuI25hcnJhdGlvbl9pbmZvIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGJvdHRvbTogMTZweDtcbiAgbGVmdDogMTZweDtcbiAgcmlnaHQ6IDE2cHg7XG59XG5cbmJ1dHRvbi5wYWdldHVybiB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBwYWRkaW5nOiAycHQgOHB0O1xuICBmb250LXNpemU6IDR2aDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59Il19 */\"","import {Component, OnInit, AfterViewInit} from '@angular/core';\nimport {Narration} from '../../../rpg-engine/scenes/narration';\nimport {SceneRef} from '../../../scene-ui/scene-ref';\nimport {SceneRenderer} from '../scene-renderer';\n\n@Component({\n\tselector: 'app-narration-pages',\n\ttemplateUrl: './narration-pages.component.html',\n\tstyleUrls: ['./narration-pages.component.scss']\n})\nexport class NarrationPagesComponent extends SceneRenderer implements OnInit, AfterViewInit {\n\n\ttale: Narration;\n\tlastpage: boolean;\n\n\tconstructor(public sceneref: SceneRef) {\n\t\tsuper(sceneref);\n\t\tthis.tale = this.sceneref.scene as Narration;\n\t\tconsole.log(\"tale info\", this.tale);\n\t}\n\n\tngOnInit() {\n\t}\n\n\tngAfterViewInit() {\n\n\t}\n\n\treadForward ()\n\t{\n\t\tthis.tale.advanceNarration();\n\t\tthis.lastpage = this.tale.sceneFinished();\n\n\t}\n\n\treadBackwards ()\n\t{\n\t\tthis.tale.backtrackNarration();\n\t}\n\n\treadOut ()\n\t{\n\t\tif (this.tale.sceneFinished())\n\t\t{\n\t\t\tthis.sceneref.triggerSceneCheck();\n\t\t}\n\t}\n}\n","export default \".trailview {\\n  position: fixed;\\n  left: 1vw;\\n  right: 1vw;\\n  top: 1vw;\\n  height: 48vh;\\n  border: 2px dashed black;\\n}\\n\\n.trailcontext {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 48vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n.trailcontrols {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9wYXNzYWdlLXRocm91Z2gvcGFzc2FnZS10aHJvdWdoLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvcGFzc2FnZS10aHJvdWdoL3Bhc3NhZ2UtdGhyb3VnaC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxTQUFBO0VBQ0EsVUFBQTtFQUNBLFFBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7QUNBRDs7QURHQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDRkQ7O0FETUE7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ0xEIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3Bhc3NhZ2UtdGhyb3VnaC9wYXNzYWdlLXRocm91Z2guY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudHJhaWx2aWV3XG57XG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0bGVmdDpcdFx0XHQxdnc7XG5cdHJpZ2h0Olx0XHRcdDF2dztcblx0dG9wOlx0XHRcdDF2dztcblx0aGVpZ2h0Olx0XHRcdDQ4dmg7XG5cdGJvcmRlcjpcdFx0XHQycHggZGFzaGVkIGJsYWNrO1xufVxuXG4udHJhaWxjb250ZXh0XG57XG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0bGVmdDpcdFx0XHQwO1xuXHRyaWdodDpcdFx0XHQwO1xuXHRib3R0b206XHRcdFx0MDtcblx0aGVpZ2h0Olx0XHRcdDQ4dmg7XG5cdGZvbnQtc2l6ZTpcdFx0OHZoO1xuXG5cdHRleHQtYWxpZ246XHRcdGNlbnRlcjtcbn1cblxuXG4udHJhaWxjb250cm9sc1xue1xuXHRib3JkZXI6XHRcdFx0MXB4IHNvbGlkIGJsYWNrO1xuXHRwYWRkaW5nOlx0XHQycHQgOHB0O1xuXG5cdGZvbnQtc2l6ZTpcdFx0NHZoO1xufVxuIiwiLnRyYWlsdmlldyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMXZ3O1xuICByaWdodDogMXZ3O1xuICB0b3A6IDF2dztcbiAgaGVpZ2h0OiA0OHZoO1xuICBib3JkZXI6IDJweCBkYXNoZWQgYmxhY2s7XG59XG5cbi50cmFpbGNvbnRleHQge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG4gIGhlaWdodDogNDh2aDtcbiAgZm9udC1zaXplOiA4dmg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnRyYWlsY29udHJvbHMge1xuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgcGFkZGluZzogMnB0IDhwdDtcbiAgZm9udC1zaXplOiA0dmg7XG59Il19 */\"","import {AfterViewInit, Component, OnInit} from '@angular/core';\nimport {SceneRenderer} from \"../scene-renderer\";\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {PassageTrail} from \"../../../rpg-engine/scenes/passage-trail\";\n\n@Component({\n\tselector: 'app-passage-through',\n\ttemplateUrl: './passage-through.component.html',\n\tstyleUrls: ['./passage-through.component.scss']\n})\nexport class PassageThroughComponent  extends SceneRenderer implements OnInit, AfterViewInit {\n\n\ttrail: PassageTrail;\n\tdirection: number;\n\n\tconstructor(public sceneref: SceneRef) {\n\t\tsuper(sceneref);\n\t\tthis.trail = this.sceneref.scene as PassageTrail;\n\t}\n\n\tisTrailing ()\n\t{\n\t\treturn this.trail.progress > -1 && this.trail.progress < this.trail.passage.length();\n\t}\n\n\tjourneyOnwards ()\n\t{\n\t\tthis.trail.step();\n\t}\n\n\tleaveTrail ()\n\t{\n\t\tthis.trail.leaving = true;\n\t\tthis.sceneref.triggerSceneCheck();\n\t}\n\n\tngOnInit() {\n\t}\n\n\tngAfterViewInit(): void {\n\t}\n\n}\n","export default \"#journeyrender {\\n  position: fixed;\\n  top: 8px;\\n  left: 8px;\\n  right: 8px;\\n  bottom: 30vh;\\n  border: 1px dashed black;\\n  overflow: auto;\\n}\\n\\n#viewrender {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n#journeyinfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 28vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\nbutton.journeychoice {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9yb2FtaW5nLXN0ZXAvcm9hbWluZy1zdGVwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvcm9hbWluZy1zdGVwL3JvYW1pbmctc3RlcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLFVBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7RUFDQSxjQUFBO0FDQUQ7O0FER0E7RUFFQyxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7QUNERDs7QURJQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDSEQ7O0FET0E7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ05EIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3JvYW1pbmctc3RlcC9yb2FtaW5nLXN0ZXAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjam91cm5leXJlbmRlclxue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHQ4cHg7XG5cdGxlZnQ6XHRcdFx0OHB4O1xuXHRyaWdodDpcdFx0XHQ4cHg7XG5cdGJvdHRvbTpcdFx0XHQzMHZoO1xuXHRib3JkZXI6XHRcdFx0MXB4IGRhc2hlZCBibGFjaztcblx0b3ZlcmZsb3c6XHRcdGF1dG87XG59XG5cbiN2aWV3cmVuZGVyXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblx0dG9wOlx0XHRcdDA7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG59XG5cbiNqb3VybmV5aW5mb1xue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdGhlaWdodDpcdFx0XHQyOHZoO1xuXHRmb250LXNpemU6XHRcdDh2aDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG59XG5cblxuYnV0dG9uLmpvdXJuZXljaG9pY2Vcbntcblx0Ym9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0cGFkZGluZzpcdFx0MnB0IDhwdDtcblxuXHRmb250LXNpemU6XHRcdDR2aDtcbn1cbiIsIiNqb3VybmV5cmVuZGVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDhweDtcbiAgbGVmdDogOHB4O1xuICByaWdodDogOHB4O1xuICBib3R0b206IDMwdmg7XG4gIGJvcmRlcjogMXB4IGRhc2hlZCBibGFjaztcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG5cbiN2aWV3cmVuZGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbiNqb3VybmV5aW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiAyOHZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5idXR0b24uam91cm5leWNob2ljZSB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBwYWRkaW5nOiAycHQgOHB0O1xuICBmb250LXNpemU6IDR2aDtcbn0iXX0= */\"","import {AfterViewInit, Component, ElementRef, OnInit, ViewChild} from '@angular/core';\nimport {WalkRenderer} from \"../lib/walk-renderer\";\nimport {Roaming} from \"../../../rpg-engine/scenes/roaming\";\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {SceneRenderer} from \"../scene-renderer\";\n\n@Component({\n\tselector: 'app-roaming-step',\n\ttemplateUrl: './roaming-step.component.html',\n\tstyleUrls: ['./roaming-step.component.scss']\n})\nexport class RoamingStepComponent extends SceneRenderer implements OnInit, AfterViewInit {\n\n\t@ViewChild(\"renderholder\", {static: false}) renderholder: ElementRef;\n\t@ViewChild(\"renderview\", {static: false}) renderview: ElementRef;\n\n\troamingscene: Roaming;\n\tviewrenderer: WalkRenderer;\n\n\n\n\tconstructor(public sceneref: SceneRef) {\n\t\tsuper(sceneref);\n\t\tthis.roamingscene = this.sceneref.scene as Roaming;\n\t\tconsole.log(\"roaming scene: \", this.roamingscene);\n\n\t}\n\n\n\tngOnInit() {\n\t}\n\n\n\tngAfterViewInit(): void {\n\t\tthis.viewrenderer = new WalkRenderer(this.roamingscene.game.worldmap, this.renderview);\n\t\tlet ui = this;\n\t\tthis.viewrenderer.loadAssets(function ()\n\t\t{\n\t\t\tui.renderStep();\n\t\t});\n\t}\n\n\trenderStep ()\n\t{\n\t\tconst vector = this.roamingscene.direction;\n\t\tthis.viewrenderer.renderView(this.roamingscene.current, vector);\n\t}\n\n\n\tgetDirectionDescription (): string {\n\t\tlet vector = this.roamingscene.direction;\n\t\tlet dirstring = \"\";\n\n\t\tif (vector[1] > 0) {\n\t\t\tdirstring += \"South\";\n\t\t} else if (vector[1] < 0) {\n\t\t\tdirstring += \"North\";\n\t\t}\n\t\tif (vector[0] > 0) {\n\t\t\tdirstring += \"East\";\n\t\t} else if (vector[0] < 0) {\n\t\t\tdirstring += \"West\";\n\t\t}\n\n\t\treturn dirstring;\n\t}\n\tgetDayOfTravel ()\n\t{\n\t\treturn this.roamingscene.steps + 1;\n\t}\n\n\tmoveTurnLeft ()\n\t{\n\t\tthis.roamingscene.changeDirection(-1);\n\t\tthis.renderStep();\n\t}\n\n\tmoveTurnRight ()\n\t{\n\t\tthis.roamingscene.changeDirection(1);\n\t\tthis.renderStep();\n\t}\n\n\tmoveForward ()\n\t{\n\t\tthis.roamingscene.stepForward();\n\t\tthis.roamingscene.game.hero.setCoordinates(this.roamingscene.current);\n\t\tif (!this.roamingscene.sceneFinished())\n\t\t{\n\t\t\tthis.renderStep();\n\t\t}\n\t\telse {\n\t\t\tthis.sceneref.triggerSceneCheck();\n\t\t}\n\t}\n\n\tactionSetCamp ()\n\t{\n\n\t}\n\n\n\tshowMap ()\n\t{\n\t\t// tba\n\t}\n\n\n}\n","import {WanderScene} from \"../../rpg-engine/wander-scene\";\nimport {Type} from \"@angular/core\";\nimport {JourneyDeparture} from \"../../rpg-engine/scenes/journey-departure\";\nimport {WorldMapViewComponent} from \"./world-map-view/world-map-view.component\";\nimport {Journey} from \"../../rpg-engine/scenes/journey\";\nimport {JourneyStepComponent} from \"./journey-step/journey-step.component\";\nimport {TownNav} from \"../../rpg-engine/scenes/town-nav\";\nimport {TownUIComponent} from \"./town-ui/town-ui.component\";\nimport {Roaming} from \"../../rpg-engine/scenes/roaming\";\nimport {RoamingStepComponent} from \"./roaming-step/roaming-step.component\";\nimport {PassageTrail} from \"../../rpg-engine/scenes/passage-trail\";\nimport {PassageThroughComponent} from \"./passage-through/passage-through.component\";\nimport {Narration} from \"../../rpg-engine/scenes/narration\";\nimport {NarrationPagesComponent} from \"./narration-pages/narration-pages.component\";\nimport {SceneRenderer} from \"./scene-renderer\";\nimport {StoryBranch} from \"../../rpg-engine/scenes/story-branch\";\nimport {StoryChoiceComponent} from \"./story-choice/story-choice.component\";\nimport {SkillActionComponent} from \"./skill-action/skill-action.component\";\nimport {SkillTest} from \"../../rpg-engine/scenes/skill-test\";\n\nexport class SceneRendererLoader\n{\n\t\tstatic getSceneRendererClass (scene: WanderScene): Type<SceneRenderer>\n\t{\n\t\tlet renderer;\n\t\tif (scene instanceof JourneyDeparture)\n\t\t{\n\t\t\trenderer = WorldMapViewComponent;\n\t\t}\n\t\telse if (scene instanceof Journey)\n\t\t{\n\t\t\trenderer = JourneyStepComponent;\n\t\t}\n\t\telse if (scene instanceof TownNav)\n\t\t{\n\t\t\trenderer = TownUIComponent;\n\t\t}\n\t\telse if (scene instanceof Roaming)\n\t\t{\n\t\t\trenderer = RoamingStepComponent;\n\t\t}\n\t\telse if (scene instanceof PassageTrail)\n\t\t{\n\t\t\trenderer = PassageThroughComponent;\n\t\t}\n\t\telse if (scene instanceof Narration)\n\t\t{\n\t\t\trenderer = NarrationPagesComponent;\n\t\t}\n\t\telse if (scene instanceof StoryBranch)\n\t\t{\n\t\t\trenderer = StoryChoiceComponent;\n\t\t}\n\t\telse if (scene instanceof SkillTest)\n\t\t{\n\t\t\trenderer = SkillActionComponent;\n\t\t}\n\n\t\treturn renderer;\n\t}\n}\n","import {SceneRef} from \"../../scene-ui/scene-ref\";\nimport {StorytellerInterface} from \"../storyteller-interface\";\n\n\nexport abstract class SceneRenderer {\n\n\tstint: StorytellerInterface;\n\n\tprotected constructor(public sceneref: SceneRef, storytellerinterface: StorytellerInterface = null)\n\t{\n\t\tthis.stint = storytellerinterface;\n\t}\n\n\n\n}\n","export default \"#choiceinfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 42vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n#choicescenery {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  height: 54vh;\\n  overflow: hidden;\\n}\\n\\n/*\\n\\n.locimageholder\\n{\\n\\tposition:\\t\\tabsolute;\\n\\n\\tleft:\\t\\t\\t16px;\\n\\tright:\\t\\t\\t16px;\\n\\tbottom:\\t\\t\\t8px;\\n\\ttop:\\t\\t\\t8px;\\n\\n\\ttext-align:\\t\\tcenter;\\n\\t//border:\\t\\t\\t1px solid red;\\n}\\n\\n.locimage\\n{\\n\\tmax-width:\\t\\t\\t100%;\\n\\tmax-height:\\t\\t\\t100%;\\n\\tobject-fit: \\t\\tcover;\\n\\n}\\n*/\\n\\n.choicecontrols {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n\\n#sceneryview {\\n  position: absolute;\\n  left: 16px;\\n  right: 16px;\\n  bottom: 8px;\\n  top: 8px;\\n}\\n\\nul.choices-prompt * {\\n  cursor: pointer;\\n}\\n\\nbutton.skillchoice {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9za2lsbC1hY3Rpb24vc2tpbGwtYWN0aW9uLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvc2tpbGwtYWN0aW9uL3NraWxsLWFjdGlvbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDREQ7O0FES0E7RUFFQyxlQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxNQUFBO0VBRUEsWUFBQTtFQUdBLGdCQUFBO0FDTkQ7O0FEU0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FBQTs7QUF3QkE7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ1REOztBRFlBO0VBRUMsa0JBQUE7RUFFQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxRQUFBO0FDWEQ7O0FEY0E7RUFFQyxlQUFBO0FDWkQ7O0FEZUE7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ2REIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3NraWxsLWFjdGlvbi9za2lsbC1hY3Rpb24uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjY2hvaWNlaW5mb1xue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdGhlaWdodDpcdFx0XHQ0MnZoO1xuXHRmb250LXNpemU6XHRcdDh2aDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG59XG5cblxuI2Nob2ljZXNjZW5lcnlcbntcblx0cG9zaXRpb246XHRcdGZpeGVkO1xuXHRsZWZ0Olx0XHRcdDA7XG5cdHJpZ2h0Olx0XHRcdDA7XG5cdHRvcDpcdFx0XHQwO1xuXG5cdGhlaWdodDpcdFx0XHQ1NHZoO1xuXG5cdC8vYm9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0b3ZlcmZsb3c6IGhpZGRlbjtcblxufVxuLypcblxuLmxvY2ltYWdlaG9sZGVyXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblxuXHRsZWZ0Olx0XHRcdDE2cHg7XG5cdHJpZ2h0Olx0XHRcdDE2cHg7XG5cdGJvdHRvbTpcdFx0XHQ4cHg7XG5cdHRvcDpcdFx0XHQ4cHg7XG5cblx0dGV4dC1hbGlnbjpcdFx0Y2VudGVyO1xuXHQvL2JvcmRlcjpcdFx0XHQxcHggc29saWQgcmVkO1xufVxuXG4ubG9jaW1hZ2Vcbntcblx0bWF4LXdpZHRoOlx0XHRcdDEwMCU7XG5cdG1heC1oZWlnaHQ6XHRcdFx0MTAwJTtcblx0b2JqZWN0LWZpdDogXHRcdGNvdmVyO1xuXG59XG4qL1xuXG4uY2hvaWNlY29udHJvbHNcbntcblx0Ym9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0cGFkZGluZzpcdFx0MnB0IDhwdDtcblxuXHRmb250LXNpemU6XHRcdDR2aDtcbn1cblxuI3NjZW5lcnl2aWV3XG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblxuXHRsZWZ0Olx0XHRcdDE2cHg7XG5cdHJpZ2h0Olx0XHRcdDE2cHg7XG5cdGJvdHRvbTpcdFx0XHQ4cHg7XG5cdHRvcDpcdFx0XHQ4cHg7XG59XG5cbnVsLmNob2ljZXMtcHJvbXB0ICpcbntcblx0Y3Vyc29yOlx0cG9pbnRlcjtcbn1cblxuYnV0dG9uLnNraWxsY2hvaWNlXG57XG5cdGJvcmRlcjpcdFx0XHQxcHggc29saWQgYmxhY2s7XG5cdHBhZGRpbmc6XHRcdDJwdCA4cHQ7XG5cblx0Zm9udC1zaXplOlx0XHQ0dmg7XG59XG4iLCIjY2hvaWNlaW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiA0MnZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4jY2hvaWNlc2NlbmVyeSB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogMDtcbiAgaGVpZ2h0OiA1NHZoO1xuICBvdmVyZmxvdzogaGlkZGVuO1xufVxuXG4vKlxuXG4ubG9jaW1hZ2Vob2xkZXJcbntcblx0cG9zaXRpb246XHRcdGFic29sdXRlO1xuXG5cdGxlZnQ6XHRcdFx0MTZweDtcblx0cmlnaHQ6XHRcdFx0MTZweDtcblx0Ym90dG9tOlx0XHRcdDhweDtcblx0dG9wOlx0XHRcdDhweDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG5cdC8vYm9yZGVyOlx0XHRcdDFweCBzb2xpZCByZWQ7XG59XG5cbi5sb2NpbWFnZVxue1xuXHRtYXgtd2lkdGg6XHRcdFx0MTAwJTtcblx0bWF4LWhlaWdodDpcdFx0XHQxMDAlO1xuXHRvYmplY3QtZml0OiBcdFx0Y292ZXI7XG5cbn1cbiovXG4uY2hvaWNlY29udHJvbHMge1xuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgcGFkZGluZzogMnB0IDhwdDtcbiAgZm9udC1zaXplOiA0dmg7XG59XG5cbiNzY2VuZXJ5dmlldyB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMTZweDtcbiAgcmlnaHQ6IDE2cHg7XG4gIGJvdHRvbTogOHB4O1xuICB0b3A6IDhweDtcbn1cblxudWwuY2hvaWNlcy1wcm9tcHQgKiB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuYnV0dG9uLnNraWxsY2hvaWNlIHtcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gIHBhZGRpbmc6IDJwdCA4cHQ7XG4gIGZvbnQtc2l6ZTogNHZoO1xufSJdfQ== */\"","import {AfterViewInit, Component, OnInit} from '@angular/core';\nimport {StoryBranch} from \"../../../rpg-engine/scenes/story-branch\";\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {StorytellerInterface} from \"../../storyteller-interface\";\nimport {SceneRenderer} from \"../scene-renderer\";\nimport {SkillTest, SkillTestOption} from \"../../../rpg-engine/scenes/skill-test\";\n\n@Component({\n  selector: 'app-skill-action',\n  templateUrl: './skill-action.component.html',\n  styleUrls: ['./skill-action.component.scss']\n})\nexport class SkillActionComponent extends SceneRenderer implements OnInit, AfterViewInit {\n\n\tskilltest: SkillTest;\n\n\tnarr_fail: string;\n\tnarr_done: string;\n\n\tconstructor(public sceneref: SceneRef, storytellerinterface: StorytellerInterface = null) {\n\n\t\tsuper(sceneref, storytellerinterface);\n\t\tconsole.log(\"StoryChoice injected w stinterface: \", storytellerinterface);\n\t\tthis.skilltest = this.sceneref.scene as SkillTest;\n\t\tconsole.log(\"current choice set is \", this.skilltest);\n\t\tthis.narr_fail = null;\n\t\tthis.narr_done = null;\n\t}\n\n  ngOnInit() {\n  }\n\n\tngAfterViewInit(): void {\n\t}\n\n\ttryOption (option: SkillTestOption, succeed: boolean)\n\t{\n\t\tconsole.log(\"picked option \", option,\" for trying\");\n\t\tlet success = this.skilltest.playActionDebug(option, succeed);\n\t\tif (success)\n\t\t{\n\t\t\tthis.narr_fail = null;\n\t\t\tthis.narr_done = option.story_success;\n\t\t}\n\t\telse {\n\t\t\tthis.narr_fail = option.story_failure;\n\t\t}\n\n\n\t}\n\n\tleaveScene ()\n\t{\n\t\tthis.sceneref.triggerSceneCheck();\n\t}\n\n}\n","export default \"#choiceinfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 42vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n#choicescenery {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  height: 54vh;\\n  overflow: hidden;\\n}\\n\\n/*\\n\\n.locimageholder\\n{\\n\\tposition:\\t\\tabsolute;\\n\\n\\tleft:\\t\\t\\t16px;\\n\\tright:\\t\\t\\t16px;\\n\\tbottom:\\t\\t\\t8px;\\n\\ttop:\\t\\t\\t8px;\\n\\n\\ttext-align:\\t\\tcenter;\\n\\t//border:\\t\\t\\t1px solid red;\\n}\\n\\n.locimage\\n{\\n\\tmax-width:\\t\\t\\t100%;\\n\\tmax-height:\\t\\t\\t100%;\\n\\tobject-fit: \\t\\tcover;\\n\\n}\\n*/\\n\\n.choicecontrols {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n\\n#sceneryview {\\n  position: absolute;\\n  left: 16px;\\n  right: 16px;\\n  bottom: 8px;\\n  top: 8px;\\n}\\n\\nul.choices-prompt * {\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9zdG9yeS1jaG9pY2Uvc3RvcnktY2hvaWNlLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvc3RvcnktY2hvaWNlL3N0b3J5LWNob2ljZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDREQ7O0FES0E7RUFFQyxlQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxNQUFBO0VBRUEsWUFBQTtFQUdBLGdCQUFBO0FDTkQ7O0FEU0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FBQTs7QUF3QkE7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ1REOztBRFlBO0VBRUMsa0JBQUE7RUFFQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxRQUFBO0FDWEQ7O0FEY0E7RUFFQyxlQUFBO0FDWkQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvc3RvcnktY2hvaWNlL3N0b3J5LWNob2ljZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNjaG9pY2VpbmZvXG57XG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0bGVmdDpcdFx0XHQwO1xuXHRyaWdodDpcdFx0XHQwO1xuXHRib3R0b206XHRcdFx0MDtcblx0aGVpZ2h0Olx0XHRcdDQydmg7XG5cdGZvbnQtc2l6ZTpcdFx0OHZoO1xuXG5cdHRleHQtYWxpZ246XHRcdGNlbnRlcjtcbn1cblxuXG4jY2hvaWNlc2NlbmVyeVxue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0dG9wOlx0XHRcdDA7XG5cblx0aGVpZ2h0Olx0XHRcdDU0dmg7XG5cblx0Ly9ib3JkZXI6XHRcdFx0MXB4IHNvbGlkIGJsYWNrO1xuXHRvdmVyZmxvdzogaGlkZGVuO1xuXG59XG4vKlxuXG4ubG9jaW1hZ2Vob2xkZXJcbntcblx0cG9zaXRpb246XHRcdGFic29sdXRlO1xuXG5cdGxlZnQ6XHRcdFx0MTZweDtcblx0cmlnaHQ6XHRcdFx0MTZweDtcblx0Ym90dG9tOlx0XHRcdDhweDtcblx0dG9wOlx0XHRcdDhweDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG5cdC8vYm9yZGVyOlx0XHRcdDFweCBzb2xpZCByZWQ7XG59XG5cbi5sb2NpbWFnZVxue1xuXHRtYXgtd2lkdGg6XHRcdFx0MTAwJTtcblx0bWF4LWhlaWdodDpcdFx0XHQxMDAlO1xuXHRvYmplY3QtZml0OiBcdFx0Y292ZXI7XG5cbn1cbiovXG5cbi5jaG9pY2Vjb250cm9sc1xue1xuXHRib3JkZXI6XHRcdFx0MXB4IHNvbGlkIGJsYWNrO1xuXHRwYWRkaW5nOlx0XHQycHQgOHB0O1xuXG5cdGZvbnQtc2l6ZTpcdFx0NHZoO1xufVxuXG4jc2NlbmVyeXZpZXdcbntcblx0cG9zaXRpb246XHRcdGFic29sdXRlO1xuXG5cdGxlZnQ6XHRcdFx0MTZweDtcblx0cmlnaHQ6XHRcdFx0MTZweDtcblx0Ym90dG9tOlx0XHRcdDhweDtcblx0dG9wOlx0XHRcdDhweDtcbn1cblxudWwuY2hvaWNlcy1wcm9tcHQgKlxue1xuXHRjdXJzb3I6XHRwb2ludGVyO1xufVxuIiwiI2Nob2ljZWluZm8ge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG4gIGhlaWdodDogNDJ2aDtcbiAgZm9udC1zaXplOiA4dmg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuI2Nob2ljZXNjZW5lcnkge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICB0b3A6IDA7XG4gIGhlaWdodDogNTR2aDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLypcblxuLmxvY2ltYWdlaG9sZGVyXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblxuXHRsZWZ0Olx0XHRcdDE2cHg7XG5cdHJpZ2h0Olx0XHRcdDE2cHg7XG5cdGJvdHRvbTpcdFx0XHQ4cHg7XG5cdHRvcDpcdFx0XHQ4cHg7XG5cblx0dGV4dC1hbGlnbjpcdFx0Y2VudGVyO1xuXHQvL2JvcmRlcjpcdFx0XHQxcHggc29saWQgcmVkO1xufVxuXG4ubG9jaW1hZ2Vcbntcblx0bWF4LXdpZHRoOlx0XHRcdDEwMCU7XG5cdG1heC1oZWlnaHQ6XHRcdFx0MTAwJTtcblx0b2JqZWN0LWZpdDogXHRcdGNvdmVyO1xuXG59XG4qL1xuLmNob2ljZWNvbnRyb2xzIHtcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gIHBhZGRpbmc6IDJwdCA4cHQ7XG4gIGZvbnQtc2l6ZTogNHZoO1xufVxuXG4jc2NlbmVyeXZpZXcge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDE2cHg7XG4gIHJpZ2h0OiAxNnB4O1xuICBib3R0b206IDhweDtcbiAgdG9wOiA4cHg7XG59XG5cbnVsLmNob2ljZXMtcHJvbXB0ICoge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59Il19 */\"","import {AfterViewInit, Component, OnInit} from '@angular/core';\nimport {SceneRenderer} from \"../scene-renderer\";\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {StorytellerInterface} from \"../../storyteller-interface\";\nimport {ChoiceOption, StoryBranch} from \"../../../rpg-engine/scenes/story-branch\";\n\n@Component({\n  selector: 'app-story-choice',\n  templateUrl: './story-choice.component.html',\n  styleUrls: ['./story-choice.component.scss']\n})\nexport class StoryChoiceComponent extends SceneRenderer implements OnInit, AfterViewInit  {\n\n\tchoice: StoryBranch;\n\n\tconstructor(public sceneref: SceneRef, storytellerinterface: StorytellerInterface = null) {\n\n\t\tsuper(sceneref, storytellerinterface);\n\t\tconsole.log(\"StoryChoice injected w stinterface: \", storytellerinterface);\n\t\tthis.choice = this.sceneref.scene as StoryBranch;\n\t\tconsole.log(\"current choice set is \", this.choice);\n\t}\n\n\tngOnInit() {\n\t}\n\n\tngAfterViewInit(): void {\n\t}\n\n\tselectOption (opt: ChoiceOption)\n\t{\n\t\tthis.choice.setSelected(opt);\n\t\tthis.sceneref.triggerSceneCheck();\n\t}\n\n}\n","export default \"#towninfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 42vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n#townscene {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  height: 54vh;\\n  overflow: hidden;\\n}\\n\\n.locimageholder {\\n  position: absolute;\\n  left: 16px;\\n  right: 16px;\\n  bottom: 8px;\\n  top: 8px;\\n  text-align: center;\\n}\\n\\n.locimage {\\n  max-width: 100%;\\n  max-height: 100%;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n}\\n\\n.movecontrols {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n\\n#locrender {\\n  position: absolute;\\n  left: 16px;\\n  right: 16px;\\n  bottom: 8px;\\n  top: 8px;\\n}\\n\\nul.townnav-prompt * {\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy90b3duLXVpL3Rvd24tdWkuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy90b3duLXVpL3Rvd24tdWkuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFQyxlQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7RUFFQSxrQkFBQTtBQ0REOztBREtBO0VBRUMsZUFBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsTUFBQTtFQUVBLFlBQUE7RUFHQSxnQkFBQTtBQ05EOztBRFVBO0VBRUMsa0JBQUE7RUFFQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxRQUFBO0VBRUEsa0JBQUE7QUNWRDs7QURjQTtFQUVDLGVBQUE7RUFDQSxnQkFBQTtFQUNBLG9CQUFBO0tBQUEsaUJBQUE7QUNaRDs7QURnQkE7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ2ZEOztBRGtCQTtFQUVDLGtCQUFBO0VBRUEsVUFBQTtFQUNBLFdBQUE7RUFDQSxXQUFBO0VBQ0EsUUFBQTtBQ2pCRDs7QURvQkE7RUFFQyxlQUFBO0FDbEJEIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3Rvd24tdWkvdG93bi11aS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiN0b3duaW5mb1xue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdGhlaWdodDpcdFx0XHQ0MnZoO1xuXHRmb250LXNpemU6XHRcdDh2aDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG59XG5cblxuI3Rvd25zY2VuZVxue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0dG9wOlx0XHRcdDA7XG5cblx0aGVpZ2h0Olx0XHRcdDU0dmg7XG5cblx0Ly9ib3JkZXI6XHRcdFx0MXB4IHNvbGlkIGJsYWNrO1xuXHRvdmVyZmxvdzogaGlkZGVuO1xuXG59XG5cbi5sb2NpbWFnZWhvbGRlclxue1xuXHRwb3NpdGlvbjpcdFx0YWJzb2x1dGU7XG5cblx0bGVmdDpcdFx0XHQxNnB4O1xuXHRyaWdodDpcdFx0XHQxNnB4O1xuXHRib3R0b206XHRcdFx0OHB4O1xuXHR0b3A6XHRcdFx0OHB4O1xuXG5cdHRleHQtYWxpZ246XHRcdGNlbnRlcjtcblx0Ly9ib3JkZXI6XHRcdFx0MXB4IHNvbGlkIHJlZDtcbn1cblxuLmxvY2ltYWdlXG57XG5cdG1heC13aWR0aDpcdFx0XHQxMDAlO1xuXHRtYXgtaGVpZ2h0Olx0XHRcdDEwMCU7XG5cdG9iamVjdC1maXQ6IFx0XHRjb3ZlcjtcblxufVxuXG4ubW92ZWNvbnRyb2xzXG57XG5cdGJvcmRlcjpcdFx0XHQxcHggc29saWQgYmxhY2s7XG5cdHBhZGRpbmc6XHRcdDJwdCA4cHQ7XG5cblx0Zm9udC1zaXplOlx0XHQ0dmg7XG59XG5cbiNsb2NyZW5kZXJcbntcblx0cG9zaXRpb246XHRcdGFic29sdXRlO1xuXG5cdGxlZnQ6XHRcdFx0MTZweDtcblx0cmlnaHQ6XHRcdFx0MTZweDtcblx0Ym90dG9tOlx0XHRcdDhweDtcblx0dG9wOlx0XHRcdDhweDtcbn1cblxudWwudG93bm5hdi1wcm9tcHQgKlxue1xuXHRjdXJzb3I6XHRwb2ludGVyO1xufSIsIiN0b3duaW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiA0MnZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4jdG93bnNjZW5lIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiAwO1xuICBoZWlnaHQ6IDU0dmg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbi5sb2NpbWFnZWhvbGRlciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMTZweDtcbiAgcmlnaHQ6IDE2cHg7XG4gIGJvdHRvbTogOHB4O1xuICB0b3A6IDhweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4ubG9jaW1hZ2Uge1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIG1heC1oZWlnaHQ6IDEwMCU7XG4gIG9iamVjdC1maXQ6IGNvdmVyO1xufVxuXG4ubW92ZWNvbnRyb2xzIHtcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gIHBhZGRpbmc6IDJwdCA4cHQ7XG4gIGZvbnQtc2l6ZTogNHZoO1xufVxuXG4jbG9jcmVuZGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAxNnB4O1xuICByaWdodDogMTZweDtcbiAgYm90dG9tOiA4cHg7XG4gIHRvcDogOHB4O1xufVxuXG51bC50b3dubmF2LXByb21wdCAqIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xufSJdfQ== */\"","import {AfterViewInit, Component, ElementRef, OnInit, ViewChild} from '@angular/core';\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {SceneRenderer} from \"../scene-renderer\";\nimport {TownNav} from \"../../../rpg-engine/scenes/town-nav\";\nimport {WalkRenderer} from \"../lib/walk-renderer\";\nimport {ArtRenderer} from \"../lib/art-renderer\";\nimport { QuestTask } from '../../../rpg-engine/quests/quest-task';\nimport {StorytellerComponent} from \"../../storyteller.component\";\nimport {StorytellerInterface} from \"../../storyteller-interface\";\n\n@Component({\n\tselector: 'app-town-ui',\n\ttemplateUrl: './town-ui.component.html',\n\tstyleUrls: ['./town-ui.component.scss']\n})\nexport class TownUIComponent extends SceneRenderer implements OnInit, AfterViewInit {\n\n\t@ViewChild(\"locrender\", {static: false}) locrender: ElementRef;\n\n\tviewrenderer: ArtRenderer;\n\ttownscene: TownNav;\n\n\ttaskprompts: QuestTask[];\n\n\n\tconstructor(public sceneref: SceneRef, storytellerinterface: StorytellerInterface = null) {\n\n\t\tsuper(sceneref, storytellerinterface);\n\t\tconsole.log(\"TownNav injected w stinterface: \", storytellerinterface);\n\t\tthis.townscene = this.sceneref.scene as TownNav;\n\t\tconsole.log(\"town info: \", JSON.stringify(this.townscene.town));\n\t\tthis.taskprompts = [];\n\t}\n\n\tngOnInit() {\n\t}\n\n\tngAfterViewInit(): void {\n\t\tthis.viewrenderer = new ArtRenderer(this.locrender);\n\t\tthis.moveToLoc(this.townscene.locpoint);\n\t}\n\n\tmoveToLoc (target: string)\n\t{\n\t\tthis.townscene.moveToLoc(target);\n\t\tthis.sceneref.triggerSceneCheck();\n\t\tthis.renderView();\n\t\tthis.updateTaskPrompts();\n\t}\n\n\n\tupdateTaskPrompts ()\n\t{\n\n\t\tlet quests = this.sceneref.game.quests.values();\n\t\tlet qtrefs = [];\n\t\tfor (let quest of quests)\n\t\t{\n\t\t\t// console.log(\"checking quest\", quest);\n\t\t\tlet available = quest.getAvailableTasks(this.sceneref.game);\n\t\t\t// console.log(\"found available tasks\", available);\n\t\t\tlet qtasks = [];\n\t\t\tfor (let taskid of available)\n\t\t\t{\n\t\t\t\t// console.log(\"TASK AVAILABLE: \", taskid, \"for quest\", quest, \"w state\", quest.states.get(taskid));\n\t\t\t\t// this.st\n\t\t\t\t// prompts.push(quest.loadTask(taskid));\n\t\t\t\tqtrefs.push({\n\t\t\t\t\tquest: quest,\n\t\t\t\t\ttaskid: taskid\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.taskprompts = [];\n\t\tlet ui = this;\n\t\tthis.stint.loadQuestTasks(qtrefs, function (tasks: QuestTask[])\n\t\t{\n\t\t\tlet prompts = [];\n\t\t\tfor (let qtask of tasks)\n\t\t\t{\n\t\t\t\tprompts.push(qtask);\n\t\t\t}\n\n\t\t\t// console.log(\"TownUI reaction to qtasks load\", tasks,\" to prompts \", prompts);\n\t\t\tui.taskprompts = prompts;\n\n\t\t});\n\n\t}\n\n\n\trenderView ()\n\t{\n\t\tlet urlpath = this.townscene.currentloc.image;\n\t\tif (urlpath) {\n\t\t\tlet fullpath = \"./assets/graph/sceneviews/\" + urlpath;\n\t\t\tthis.viewrenderer.loadRenderImage(fullpath);\n\t\t}\n\t}\n\n\tlocalizeTextAsset (text: string): string\n\t{\n\t\twhile (text.includes(\"$TOWN$\"))\n\t\t{\n\t\t\ttext = text.replace(\"$TOWN$\", this.townscene.town.name);\n\t\t}\n\t\treturn text;\n\t}\n\n\n\n\tactivatePrompt (task: QuestTask)\n\t{\n\t\tconsole.log(\"prompt activation for task\", task, \"in\", task.caller);\n\n\t\ttask.scene.driver = task;\n\t\t// narrative should be set by StoryTeller\n\t\tthis.sceneref.triggerSubScene(task.scene);\n\n\n\t}\n\n}\n","export default \"#mapholder {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy93b3JsZC1tYXAtdmlldy93b3JsZC1tYXAtdmlldy5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3dvcmxkLW1hcC12aWV3L3dvcmxkLW1hcC12aWV3LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUMsa0JBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0FDQUQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvd29ybGQtbWFwLXZpZXcvd29ybGQtbWFwLXZpZXcuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjbWFwaG9sZGVyXG57XG5cdHBvc2l0aW9uOlx0YWJzb2x1dGU7XG5cdHRvcDpcdFx0MDtcblx0bGVmdDpcdFx0MDtcblx0cmlnaHQ6XHRcdDA7XG5cdGJvdHRvbTpcdFx0MDtcbn1cblxuIiwiI21hcGhvbGRlciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xufSJdfQ== */\"","import {AfterViewInit, Component, ElementRef, EventEmitter, OnInit, Output, ViewChild} from '@angular/core';\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {WorldMap} from \"../../../rpg-engine/world/world-map\";\nimport Konva from 'konva';\nimport {SceneRenderer} from \"../scene-renderer\";\nimport {JourneyDeparture} from \"../../../rpg-engine/scenes/journey-departure\";\nimport {Place} from \"../../../rpg-engine/world/locs/Place\";\n\n@Component({\n\tselector: 'app-world-map-view',\n\ttemplateUrl: './world-map-view.component.html',\n\tstyleUrls: ['./world-map-view.component.scss']\n})\nexport class WorldMapViewComponent extends SceneRenderer implements OnInit, AfterViewInit {\n\n\t@ViewChild(\"mapview\", {static: false}) mapdom: ElementRef;\n\t@ViewChild(\"mapholder\", {static: false}) container: ElementRef;\n\t@Output() scenecheck = new EventEmitter<object>();\n\n\n\tTILESIZE = 48;\n\n\n\tTILESBYTERRRAIN = {\n\t\t\"M\": \"worldmaptile_mountains_trans.png\",\n\t\t\"H\": \"worldmaptile_hills_trans.png\",\n\t\t\"F\": \"worldmaptile_woods_trans.png\",\n\t\t\"P\": \"worldmaptile_empty.png\",\n\t};\n\tPATH_TILES = \"assets/graph/maptiles/\";\n\tterraintiles: Map<string, string>;\n\ttileimages: Map<string, HTMLImageElement>;\n\n\tMARKERSBYID = {\n\t\t\"towns\": \"worldmapmarker_castle_trans.png\",\n\t\t\"passes\": \"worldmapmarker_mountainpass_trans.png\",\n\t\t\"hero\": \"worldmapmarker_hero_trans.png\",\n\t};\n\tPATH_MARKERS = \"assets/graph/mapmarkers/\";\n\tmarkerfiles: Map<string, string>;\n\tmarkerimages: Map<string, HTMLImageElement>;\n\n\tworldmap: WorldMap;\n\n\tmapscene: JourneyDeparture;\n\n\tconstructor(public sceneref: SceneRef) {\n\t\tsuper(sceneref);\n\n\t\tconsole.log(\"constructor w sref game \", this.sceneref.game);\n\n\t\tthis.mapscene = this.sceneref.scene as JourneyDeparture;\n\t\tthis.prepareAssetsHolders();\n\t}\n\n\tprepareAssetsHolders ()\n\t{\n\t\tthis.terraintiles = new Map<string, string>();\n\t\tthis.tileimages = new Map<string, HTMLImageElement>();\n\t\tthis.markerfiles = new Map<string, string>();\n\t\tthis.markerimages = new Map<string, HTMLImageElement>();\n\t\tfor (let key in this.TILESBYTERRRAIN) {\n\t\t\tthis.terraintiles.set(key, this.PATH_TILES + this.TILESBYTERRRAIN[key]);\n\t\t}\n\t\tthis.tileimages = new Map<string, HTMLImageElement>();\n\t\tfor (let terrain of this.terraintiles.keys()) {\n\t\t\tthis.tileimages.set(terrain, null);\n\t\t}\n\n\t\tfor (let key in this.MARKERSBYID) {\n\t\t\tthis.markerfiles.set(key, this.PATH_MARKERS + this.MARKERSBYID[key]);\n\t\t}\n\t\tthis.markerimages = new Map<string, HTMLImageElement>();\n\t\tfor (let markerid of this.markerfiles.keys()) {\n\t\t\tthis.markerimages.set(markerid, null);\n\t\t}\n\n\t}\n\n\tngOnInit() {\n\n\t\tconsole.log(\"starting worldmap w sref game \", this.sceneref);\n\t\tthis.worldmap = this.sceneref.game.worldmap;\n\n\t\tthis.loadAssets();\n\n\t}\n\n\n\tngAfterViewInit() {\n\t\t// this.loadAssets();\n\n\n\t}\n\n\tloadAssets() {\n\t\tlet ui = this;\n\t\tfor (let terrain of this.terraintiles.keys()) {\n\t\t\tlet imageObj = new Image();\n\t\t\timageObj.onload = function () {\n\t\t\t\tui.tileimages.set(terrain, imageObj);\n\t\t\t\tui.checkReadyRender();\n\t\t\t};\n\t\t\timageObj.src = this.terraintiles.get(terrain);\n\t\t}\n\n\t\tfor (let markerid of this.markerfiles.keys()) {\n\t\t\tlet imageObj = new Image();\n\t\t\timageObj.onload = function () {\n\t\t\t\tui.markerimages.set(markerid, imageObj);\n\t\t\t\tui.checkReadyRender();\n\t\t\t};\n\t\t\timageObj.src = this.markerfiles.get(markerid);\n\t\t}\n\n\t}\n\n\tcheckReadyRender() {\n\n\t\tfor (let terrain of this.tileimages.keys()) {\n\t\t\tif (this.tileimages.get(terrain) == null) {\n\t\t\t\t// console.log(\"missing maptile\", terrain, \"wait\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor (let markerid of this.markerimages.keys()) {\n\t\t\tif (this.markerimages.get(markerid) == null) {\n\t\t\t\t// console.log(\"missing mapmarker\", markerid, \"wait\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// console.log(\"ready on all terrains\");\n\t\tthis.initRender();\n\t}\n\n\tinitRender() {\n\n\n\t\tconst vpw = this.container.nativeElement.offsetWidth;\n\t\tconst vph = this.container.nativeElement.offsetHeight;\n\n\t\tthis.TILESIZE = Math.min(vpw, vph) / 18;\n\n\t\tlet tilesX = this.worldmap.sizeX;\n\t\tlet tilesY = this.worldmap.sizeY;\n\n\n\t\tlet mapWidth = tilesX * this.TILESIZE;\n\t\tlet mapHeight = tilesY * this.TILESIZE;\n\n\n\t\t// console.log(this.TILESIZE, tilesX, tilesY, mapWidth, mapHeight);\n\n\t\tlet stage = new Konva.Stage({\n\t\t\tcontainer: \"mapholder\",\n\t\t\twidth: mapWidth,\n\t\t\theight: mapHeight,\n\n\t\t});\n\n\t\tlet container = (this.container.nativeElement as HTMLElement);\n\t\tlet contwidth = container.offsetWidth;\n\t\tlet contheight = container.offsetHeight;\n\n\t\t// console.log(\"stage \", contwidth, contheight);\n\n\t\tlet bound_sx = -(mapWidth - contwidth);\n\t\tlet bound_dx = 0;\n\n\n\n\t\tlet bound_top = -(mapHeight - contheight);\n\t\tlet bound_bottom = 0;\n\n\t\t// console.log(\"bounds\", bound_sx, bound_top, bound_dx, bound_bottom);\n\n\t\tlet tilelayer = new Konva.Layer({\n\t\t\tdraggable: true,\n\t\t\tdragBoundFunc: function (pos: Konva.Vector2d): Konva.Vector2d {\n\t\t\t\t// console.log(\"tilelayer at\", tilelayer.x(), tilelayer.y());\n\t\t\t\t// console.log(\"mouse at\", pos.x, pos.y);\n\t\t\t\tlet x = Math.min(Math.max(bound_sx, pos.x), bound_dx);\n\t\t\t\tlet y = Math.min(Math.max(bound_top, pos.y), bound_bottom);\n\n\t\t\t\treturn ({\n\t\t\t\t\tx: x,\n\t\t\t\t\ty: y\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tstage.add(tilelayer);\n\n\t\t// let ts_a = new Date();\n\t\tfor (let x = 0; x < tilesX; x++) {\n\t\t\tfor (let y = 0; y < tilesY; y++) {\n\t\t\t\tlet terrain = this.worldmap.getTerrainAt(x, y);\n\t\t\t\t// console.log(x, y, terrain);\n\t\t\t\tif (terrain != null) {\n\t\t\t\t\t// let imageObj = new Image();\n\t\t\t\t\t// imageObj.src = terraintiles.get(terrain);\n\n\t\t\t\t\t// let filename = terraintiles.get(terrain);\n\t\t\t\t\tlet tile = new Konva.Image({\n\t\t\t\t\t\timage: this.tileimages.get(terrain),\n\t\t\t\t\t\tx: x * this.TILESIZE,\n\t\t\t\t\t\ty: y * this.TILESIZE,\n\t\t\t\t\t\twidth: this.TILESIZE,\n\t\t\t\t\t\theight: this.TILESIZE,\n\t\t\t\t\t});\n\t\t\t\t\ttilelayer.add(tile);\n\t\t\t\t\t// console.log(\"added \", tile, x * this.TILESIZE, y * this.TILESIZE);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// create location markers\n\n\t\tlet widget = this;\n\n\t\tlet locs = this.worldmap.getAllLocations();\n\t\tfor (let loc of locs) {\n\t\t\t// console.log(\"adding location to map: \", loc, \"w coords\", loc[\"coords\"]);\n\t\t\t// let coords = loc[\"coords\"];\n\t\t\t// let loctype = loc[\"loctype\"];\n\n\t\t\tlet marker = new Konva.Image({\n\t\t\t\timage: this.markerimages.get(loc.loctype),\n\t\t\t\tx: loc.pos.x * this.TILESIZE,\n\t\t\t\ty: loc.pos.y * this.TILESIZE,\n\t\t\t\twidth: this.TILESIZE,\n\t\t\t\theight: this.TILESIZE,\n\t\t\t});\n\t\t\t// console.log(\"creating marker at\", loc.pos.x, loc.pos.y)\n\t\t\ttilelayer.add(marker);\n\n\t\t\tmarker.on(\"click\", function (ev) {\n\t\t\t\tconsole.log(\"marker click \", ev, \"on\", this, \"for loc\", loc);\n\t\t\t\twidget.chooseDestination(loc);\n\t\t\t\tev.cancelBubble = true;\n\t\t\t});\n\t\t}\n\n\t\t// create hero marker\n\t\tlet game = this.sceneref.game;\n\t\tlet playerpos = game.hero.pos.getCoords();\n\n\t\tlet imageref = this.markerimages.get(\"hero\");\n\t\t// let imagepath = this.markerfiles.get(\"hero\");\n\t\tlet marker = new Konva.Image({\n\t\t\timage: imageref,\n\t\t\tx: playerpos[0] * this.TILESIZE,\n\t\t\ty: playerpos[1] * this.TILESIZE,\n\t\t\twidth: this.TILESIZE,\n\t\t\theight: this.TILESIZE,\n\t\t});\n\n\t\tmarker.on(\"click\", function (ev) {\n\t\t\t// console.log(\"marker click \", ev, \"on\", this, \"for loc\", loc);\n\t\t\tlet loc = game.worldmap.getLocationAt(playerpos);\n\t\t\tif (!!loc)\n\t\t\t{\n\t\t\t\twidget.chooseDestination(loc);\n\t\t\t\tev.cancelBubble = true;\n\t\t\t}\n\t\t});\n\n\t\ttilelayer.add(marker);\n\n\n\t\ttilelayer.batchDraw();\n\t\t// loclayer.batchDraw();\n\t\t// console.log(\"redraw\");\n\n\t\t// console.log(\"mapdom size\", this.mapdom.nativeElement.offsetHeight, this.mapdom.nativeElement.offsetWidth);\n\t\t// console.log(\"container size\", this.container.nativeElement.offsetHeight, this.container.nativeElement.offsetWidth);\n\n\t\tlet shiftX = playerpos[0] * this.TILESIZE - this.container.nativeElement.offsetWidth / 2;\n\t\tlet shiftY = playerpos[1] * this.TILESIZE - this.container.nativeElement.offsetHeight / 2;\n\n\n\t\ttilelayer.setAbsolutePosition({x: -shiftX, y: -shiftY});\n\n\t\t// console.log(\"map ready\");\n\t}\n\n\tonClose() {\n\t\tthis.sceneref.close('BYE WORLD MAP');\n\t}\n\n\tchooseDestination(destination: Place)\n\t{\n\t\tconsole.log(\"chose destination \", destination, this.sceneref.scene);\n\n\n\t\t/*\n\t\tPlace location =  caller.game.map.getPlace(vtag);\n\t\tPosition locpos = location.getCoords();\n\n\t\tif ((locpos.x != heropos.x) || (locpos.y != heropos.y))\n\t\t{\n\t\t\tcaller.startScene(new Journey(caller.game, caller.game.map.getPlace((String)view.getTag())));\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// back to town gate screen, same as back\n\t\t\tcaller.startScene(new TownNav(caller.game));\n\t\t}\n\t\t*/\n\n\t\t// TODO: handle back to current\n\t\tthis.mapscene.setDestination(destination);\n\t\tthis.sceneref.triggerSceneCheck();\n\t}\n}\n\n","import {StorytellerComponent} from \"./storyteller.component\";\nimport {QuestRef} from \"../rpg-engine/quests/quest-ref\";\nimport {QuestTask} from \"../rpg-engine/quests/quest-task\";\n\n\n/**\n * StorytellerInterface gives access to the {@link StorytellerComponent} functionalities without creating circular imports (similar to {@link SceneRendererLoader}).\n * Its main use case is loading data during play, to avoid front-loading the whole world and quests.\n * The idea is to add only one object for the {@link SceneUIComponent} objects to use to interact with and keep initialization through {@link SceneUIService} as simple as possible.\n */\nexport class StorytellerInterface\n{\n\n\tconstructor (private stref: StorytellerComponent)\n\t{\n\t}\n\n\tcheckUpdateSceneRender ()\n\t{\n\t\tthis.stref.checkUpdateSceneRender();\n\t}\n\n\tgetStoryteller (): StorytellerComponent\n\t{\n\t\treturn this.stref;\n\t}\n\n\tloadQuestTasks (refs: QuestTaskReference[], callback: Function)\n\t{\n\n\t\tlet filerefs = [];\n\t\tlet byQuest = new Map<QuestRef, string[]>();\n\t\tfor (let ref of refs)\n\t\t{\n\t\t\tlet inQuest = byQuest.has(ref.quest) ? byQuest.get(ref.quest) : [];\n\t\t\tinQuest.push(ref.taskid);\n\t\t\tbyQuest.set(ref.quest, inQuest);\n\t\t\tfilerefs.push(ref.quest.fileref);\n\t\t}\n\n\t\tthis.stref.loader.loadDataFiles(filerefs, function (data)\n\t\t{\n\t\t\tlet tasks = [];\n\t\t\tfor (let ref of refs)\n\t\t\t{\n\t\t\t\tlet rawtask = data[ref.quest.fileref][\"tasks\"][ref.taskid];\n\t\t\t\tlet qtask = QuestTask.fromJSON(rawtask);\n\t\t\t\tqtask.setCaller(ref.quest);\n\t\t\t\ttasks.push(qtask);\n\t\t\t}\n\t\t\tcallback(tasks);\n\t\t});\n\n\t}\n}\n\nexport interface QuestTaskReference {\n\tquest: QuestRef;\n\ttaskid: string;\n}\n","export default \"#st-page {\\n  background-image: url(\\\"/assets/ui/temporaryparchment.jpg\\\");\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3N0b3J5dGVsbGVyLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zdG9yeXRlbGxlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLDBEQUFBO0FDQUQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeXRlbGxlci9zdG9yeXRlbGxlci5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNzdC1wYWdlXG57XG5cdGJhY2tncm91bmQtaW1hZ2U6IHVybChcIi9hc3NldHMvdWkvdGVtcG9yYXJ5cGFyY2htZW50LmpwZ1wiKTtcbn1cbiIsIiNzdC1wYWdlIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy91aS90ZW1wb3JhcnlwYXJjaG1lbnQuanBnXCIpO1xufSJdfQ== */\"","import {Component, OnInit, Type} from '@angular/core';\nimport {SceneUIService} from \"../scene-ui/scene-ui.service\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {WanderGame} from \"../rpg-engine/wander-game\";\nimport {SceneRenderer} from \"./scenes/scene-renderer\";\nimport {WanderScene} from \"../rpg-engine/wander-scene\";\nimport {JourneyDeparture} from \"../rpg-engine/scenes/journey-departure\";\nimport {Town} from \"../rpg-engine/world/locs/Town\";\nimport {TownNav} from \"../rpg-engine/scenes/town-nav\";\nimport {PassageTrail} from \"../rpg-engine/scenes/passage-trail\";\nimport {TerrainPass} from \"../rpg-engine/world/locs/TerrainPass\";\nimport { WanderGameState } from '../rpg-engine/wander-game-state';\nimport { WorldPosition } from '../rpg-engine/world/world-position';\nimport { isUndefined } from 'util';\nimport {StorytellerInterface} from \"./storyteller-interface\";\nimport {SceneRendererLoader} from \"./scenes/scene-renderer-loader\";\nimport {ResLoader} from \"../support/res-loader\";\nimport {MetaScene} from \"../rpg-engine/scenes/meta-scene\";\n\n@Component({\n\tselector: 'app-storyteller',\n\ttemplateUrl: './storyteller.component.html',\n\tstyleUrls: ['./storyteller.component.scss']\n})\nexport class StorytellerComponent implements OnInit {\n\n\tgame: WanderGame;\n\treadonly loader: ResLoader;\n\n\t// whether the player is checking ANY character page\n\tusingCharSheet: boolean;\n\n\tconstructor(private sceneui: SceneUIService, private http: HttpClient) {\n\t\tthis.loader = new ResLoader(http);\n\t\tthis.usingCharSheet = false;\n\t}\n\n\tngOnInit() {\n\t\tthis.sceneui.bindStoryTellerUI(this.getInterface());\n\t\tthis.loadGameData();\n\n\t}\n\n\tloadGameData() {\n\t\tlet stui = this;\n\t\tWanderGame.loadGame(this.http, function (game: WanderGame) {\n\t\t\tstui.game = game;\n\t\t\tstui.checkReadyGame();\n\t\t});\n\t}\n\n\tcheckReadyGame() {\n\t\tconsole.log(\"running Wander Game \", this.game);\n\n\t\tthis.checkUpdateSceneRender();\n\n\n\t}\n\n\tgetLocationSensitiveScene (): WanderScene\n\t{\n\t\tlet ppos = this.game.hero.pos;\n\t\tlet place = this.game.worldmap.getLocationAt(ppos.getCoords());\n\t\tconsole.log(\"place is town? \", place instanceof Town);\n\t\tlet scene = null;\n\t\tif (place instanceof Town)\n\t\t{\n\t\t\tscene = new TownNav (this.game, place);\n\t\t}\n\t\telse if (place instanceof TerrainPass)\n\t\t{\n\t\t\tscene = new PassageTrail(this.game, place);\n\t\t}\n\t\telse {\n\t\t\t// if all fails, go to map\n\t\t\tscene = new JourneyDeparture(this.game);\n\t\t}\n\t\treturn scene;\n\t}\n\n\tcheckUpdateSceneRender()\n\t{\n\t\tconsole.log(\"checkUpdateSceneRender\");\n\t\tlet scene = this.game.getActiveScene();\n\t\tconsole.log(\"checking update on scene \", scene);\n\t\tif (!!scene && scene.sceneFinished())\n\t\t{\n\n\t\t\t// note : this was done INSIDE scene in Java/Android, but we want to be able to affect external quest references and use \"pure\" references instead of whole quest objects\n\t\t\tif (!!scene.driver)\n\t\t\t{\n\t\t\t\tscene.driver.setCompleted();\n\t\t\t}\n\n\t\t\tif (!!scene.narrative && scene.narrative instanceof MetaScene)\n\t\t\t{\n\t\t\t\t// console.log(\"FINISHING SUB SCENE, UPDATE STATES in UBER SCENE!!!!!\");\n\t\t\t\tscene.narrative.moveOn();\n\t\t\t\t// console.log(\"updated narrative for sub scene\", scene.narrative.returnStates());\n\t\t\t}\n\n\n\t\t\t// console.log(\"SCENE TYPECHECK: typeof scene\", scene.constructor.name);\n\n\t\t\t// console.log(\"having scene finisher\");\n\t\t\tscene = scene.getFollowingScene();\n\t\t\t// console.log(\"following scene is \", scene);\n\t\t\t// console.log(\"IS FOLLOWING SCENE A METASCENE?\", scene instanceof MetaScene);\n\t\t\t// console.log(\"SCENE TYPECHECK: typeof following\", scene.constructor.name);\n\t\t}\n\n\n\t\tif (scene instanceof MetaScene)\n\t\t{\n\t\t\tlet ms = scene as MetaScene;\n\t\t\tif (ms.getCurrent() == null)\n\t\t\t{\n\t\t\t\t// console.log(\"SET METASCENE AS FINISHED!\");\n\t\t\t\tif (!!ms.driver)\n\t\t\t\t{\n\t\t\t\t\t// console.log(\"SET METASCENE DRIVER AS COMPLETE!\");\n\t\t\t\t\tms.driver.setCompleted();\n\t\t\t\t}\n\t\t\t\tscene = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!scene)\n\t\t{\n\t\t\tscene = this.getLocationSensitiveScene();\n\t\t}\n\n\t\t// console.log(\"SCENE TYPECHECK: typeof switchto\", scene.constructor.name);\n\t\tthis.switchSceneUI (scene);\n\n\n\t}\n\n\tenterSubScene (scene: WanderScene)\n\t{\n\t\t// NOTE: subscenes ALWAYS come from MetaScenes\n\t\t// TODO: Refactor to enforce MetaScene type checking\n\t\tconsole.log(\"entering sub scene \", scene, \"from narrative\", this.game.activescene);\n\t\tscene.setNarrative(this.game.activescene as MetaScene);\n\t\tthis.game.setActiveScene(scene);\n\t\tthis.switchSceneUI(scene);\n\n\n\t}\n\n\tswitchSceneUI (scene: WanderScene)\n\t{\n\t\ttry\n\t\t{\n\t\t\t// console.log(\"removing previous sceneUI for switch to \", scene);\n\t\t\tthis.sceneui.removeSceneUI();\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\t// console.warn(\"no scene to remove\");\n\t\t}\n\n\n\t\tif (scene instanceof MetaScene)\n\t\t{\n\t\t\t// console.log(\"should switch to internal scene for metascene\");\n\t\t\tlet sub = scene.getCurrent();\n\t\t\tif (sub != null)\n\t\t\t{\n\t\t\t\t// switch to sub ONLY if there is still another scene\n\t\t\t\tscene = sub;\n\t\t\t}\n\t\t}\n\n\t\tthis.game.setActiveScene(scene);\n\t\tconsole.log(\"using scene \", scene);\n\n\t\tlet renderer = this.getSceneRenderer(scene);\n\t\t// console.log(\"opening renderer \", renderer, \"for scene\", scene);\n\t\tlet ref = this.sceneui.open(renderer, scene);\n\t\t// console.log(\"opened as sceneref\", ref);\n\t\tref.afterClosed.subscribe(result => {\n\t\t\t// console.log('Closed scene', scene, renderer, \"w result\", result);\n\t\t});\n\n\t\tlet st = this;\n\t\tref.subSwitch.subscribe(subscene  => {\n\t\t\t// console.log(\"received switch to sub scene \", subscene, \"from current\", this.game.activescene, \"by\", ref);\n\t\t\tst.enterSubScene(subscene);\n\t\t});\n\t}\n\n\tgetSceneRenderer (scene: WanderScene): Type<SceneRenderer>\n\t{\n\t\treturn SceneRendererLoader.getSceneRendererClass(scene);\n\t}\n\n\n\tdoSaveGame ()\n\t{\n\t\tconsole.log(\"Saving game state...\");\n\t\tWanderGameState.saveToBrowser(this.game);\n\t}\n\n\tdoLoadGame ()\n\t{\n\t\t// console.log(\"Loading game state...\");\n\t\tlet loaded = WanderGameState.loadFromBrowser();\n\t\t// console.log(\"loaded game state \", loaded);\n\t\tif (!isUndefined(loaded) && loaded !== null)\n\t\t{\n\t\t\tlet pos = loaded[\"hero\"][\"position\"];\n\t\t\tthis.game.hero.setCoordinates(new WorldPosition(pos[0], pos[1]));\n\t\t\tthis.game.setActiveScene(null);\n\t\t\tlet qstates = loaded[\"quests\"];\n\t\t\tfor (let questid in qstates)\n\t\t\t{\n\t\t\t\tlet quest = this.game.quests.get(questid);\n\t\t\t\tfor (let taskid in qstates[questid][\"tasks\"])\n\t\t\t\t{\n\t\t\t\t\tlet tstate = qstates[questid][\"tasks\"][taskid];\n\t\t\t\t\t// console.log(\"setting \", taskid, \"to state\", tstate, \"in\", quest.states);\n\t\t\t\t\tquest.states.set(taskid, tstate);\n\t\t\t\t}\n\t\t\t\tquest.completed = qstates[questid][\"completed\"];\n\t\t\t}\n\t\t\tthis.checkUpdateSceneRender();\n\n\t\t}\n\t}\n\n\tgetInterface (): StorytellerInterface\n\t{\n\t\treturn new StorytellerInterface(this);\n\t}\n\n\topenCharSheet () {\n\t\tthis.usingCharSheet = true;\n\t}\n\n\tcloseCharSheet ()\n\t{\n\t\tthis.usingCharSheet = false;\n\t}\n\n}\n","import {HttpClient} from \"@angular/common/http\";\n\nexport class ResLoader\n{\n\tconstructor(protected http: HttpClient) {\n\t}\n\n\tloadDataFile (filepath: string, callback: Function)\n\t{\n\t\tconst locdata = this.http.get(filepath);\n\t\tlocdata.subscribe(function (response) {\n\t\t\tconsole.log(\"LOAD RESULT\", response);\n\t\t\tcallback(response);\n\t\t});\n\t}\n\n\tloadDataFiles (filepaths: string[], multicallback: Function)\n\t{\n\t\tlet loaded = {\n\n\t\t};\n\n\t\tfunction getCheckerFunction (key: string): Function\n\t\t{\n\t\t\treturn function (data: any) {\n\t\t\t\tloaded[key] = data;\n\t\t\t\tif (Object.keys(loaded).length === filepaths.length)\n\t\t\t\t{\n\t\t\t\t\tmulticallback(loaded);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// ADD ERROR HANDLING\n\n\t\tfor (let filepath of filepaths)\n\t\t{\n\t\t\tlet checker = getCheckerFunction(filepath);\n\t\t\tthis.loadDataFile(filepath, checker);\n\t\t\tthis.http.get(filepath).subscribe(function (response) {\n\t\t\t\tloaded[filepath] = response;\n\t\t\t});\n\t\t}\n\t}\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n\tproduction: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}