{"version":3,"sources":["main-es5.js","webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.html","webpack:///src/app/scene-ui/scene-ui.component.html","webpack:///src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.html","webpack:///src/app/story-tester/scenes/test-green-screen/test-green-screen.component.html","webpack:///src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.html","webpack:///src/app/story-tester/story-tester.component.html","webpack:///src/app/storyteller/scenes/journey-step/journey-step.component.html","webpack:///src/app/storyteller/scenes/passage-through/passage-through.component.html","webpack:///src/app/storyteller/scenes/roaming-step/roaming-step.component.html","webpack:///src/app/storyteller/scenes/town-ui/town-ui.component.html","webpack:///src/app/storyteller/scenes/world-map-view/world-map-view.component.html","webpack:///src/app/storyteller/storyteller.component.html","webpack:///node_modules/tslib/tslib.es6.js","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.scss","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/rpg-engine/scenes/journey-departure.ts","webpack:///src/app/rpg-engine/scenes/journey.ts","webpack:///src/app/rpg-engine/scenes/passage-trail.ts","webpack:///src/app/rpg-engine/scenes/roaming.ts","webpack:///src/app/rpg-engine/scenes/town-nav.ts","webpack:///src/app/rpg-engine/wander-game.ts","webpack:///src/app/rpg-engine/wander-hero.ts","webpack:///src/app/rpg-engine/wander-scene.ts","webpack:///src/app/rpg-engine/world/locs/Place.ts","webpack:///src/app/rpg-engine/world/locs/PlaceFactory.ts","webpack:///src/app/rpg-engine/world/locs/TerrainPass.ts","webpack:///src/app/rpg-engine/world/locs/Town.ts","webpack:///src/app/rpg-engine/world/world-map.ts","webpack:///src/app/rpg-engine/world/world-position.ts","webpack:///src/app/scene-ui/insertion.directive.ts","webpack:///src/app/scene-ui/scene-injector.ts","webpack:///src/app/scene-ui/scene-ref.ts","webpack:///src/app/scene-ui/scene-ui.component.scss","webpack:///src/app/scene-ui/scene-ui.component.ts","webpack:///src/app/scene-ui/scene-ui.module.ts","webpack:///src/app/scene-ui/scene-ui.service.ts","webpack:///src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.scss","webpack:///src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.ts","webpack:///src/app/story-tester/scenes/test-green-screen/test-green-screen.component.scss","webpack:///src/app/story-tester/scenes/test-green-screen/test-green-screen.component.ts","webpack:///src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.scss","webpack:///src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.ts","webpack:///src/app/story-tester/story-tester.component.scss","webpack:///src/app/story-tester/story-tester.component.ts","webpack:///src/app/story-tester/tester-scene.ts","webpack:///src/app/storyteller/scenes/journey-step/journey-step.component.scss","webpack:///src/app/storyteller/scenes/journey-step/journey-step.component.ts","webpack:///src/app/storyteller/scenes/lib/walk-renderer.ts","webpack:///src/app/storyteller/scenes/passage-through/passage-through.component.scss","webpack:///src/app/storyteller/scenes/passage-through/passage-through.component.ts","webpack:///src/app/storyteller/scenes/roaming-step/roaming-step.component.scss","webpack:///src/app/storyteller/scenes/roaming-step/roaming-step.component.ts","webpack:///src/app/storyteller/scenes/scene-renderer.ts","webpack:///src/app/storyteller/scenes/town-ui/town-ui.component.scss","webpack:///src/app/storyteller/scenes/town-ui/town-ui.component.ts","webpack:///src/app/storyteller/scenes/world-map-view/world-map-view.component.scss","webpack:///src/app/storyteller/scenes/world-map-view/world-map-view.component.ts","webpack:///src/app/storyteller/storyteller.component.scss","webpack:///src/app/storyteller/storyteller.component.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":[],"mappings":"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","file":"x","sourcesContent":["(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[\"main\"],{\n\n/***/ \"./$$_lazy_route_resource lazy recursive\":\n/*!******************************************************!*\\\n  !*** ./$$_lazy_route_resource lazy namespace object ***!\n  \\******************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html\":\n/*!**************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html ***!\n  \\**************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"\\n\\n\\t<router-outlet></router-outlet>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/scene-ui/scene-ui.component.html\":\n/*!****************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/scene-ui/scene-ui.component.html ***!\n  \\****************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"uiwrapper\\\" (click)=\\\"onOverlayClicked($event)\\\">\\n\\t<ng-template appInsertion> </ng-template>\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.html\":\n/*!****************************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.html ***!\n  \\****************************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"overlay\\\">\\n\\t<div class=\\\"dialog\\\">\\n\\t\\t<div class=\\\"scenescreen\\\">test-blue-screen works!</div>\\n\\t\\t<button (click)=\\\"onClose()\\\">BYE!</button>\\n\\t</div>\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.html\":\n/*!******************************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.html ***!\n  \\******************************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"overlay\\\">\\n\\t<div class=\\\"dialog\\\">\\n\\t\\t<div class=\\\"scenescreen\\\">test-green-screen works!</div>\\n\\t\\t<button (click)=\\\"onClose()\\\">BYE!</button>\\n\\t</div>\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.html\":\n/*!**********************************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.html ***!\n  \\**********************************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<p>test-screen-generic works!</p>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/story-tester.component.html\":\n/*!************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/story-tester.component.html ***!\n  \\************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"storyteller-outside\\\">\\n\\n\\t<div id=\\\"storyteller-tester\\\">\\n\\t\\t<p>story-tester works!</p>\\n\\n\\n\\t\\t<div id=\\\"scenerender-test\\\"></div>\\n\\n\\n\\t\\t<button (click)=\\\"loadGreenScreen()\\\">GREEN</button>\\n\\t\\t<button (click)=\\\"loadBlueScreen()\\\">BLUE</button>\\n\\t</div>\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/journey-step/journey-step.component.html\":\n/*!*******************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/journey-step/journey-step.component.html ***!\n  \\*******************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"journeyrender\\\" #renderholder>\\n\\t<div id=\\\"viewrender\\\" #renderview></div>\\n</div>\\n\\n<div id=\\\"journeyinfo\\\" #sceneinfo>\\n\\tTravelling {{getDirectionDescription()}} to {{journeyscene.dest.name}}, day {{journeyscene.stepid}}/{{journeyscene.course.length}};\\n\\n\\t\\t<br>\\n\\n\\t<div class=\\\"journeycontrols\\\">\\n\\t<button class=\\\"journeychoice\\\" (click)=\\\"setCamp()\\\">SET CAMP</button> <button class=\\\"journeychoice\\\" (click)=\\\"continueJourney()\\\">JOURNEY ONWARDS</button> <button class=\\\"journeychoice\\\" (click)=\\\"showMap()\\\">SHOW MAP</button>\\n\\n\\t</div>\\n\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/passage-through/passage-through.component.html\":\n/*!*************************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/passage-through/passage-through.component.html ***!\n  \\*************************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<ng-template *ngIf=\\\"isTrailing(); then TrailingScene; else AccessScene\\\">\\n\\n</ng-template>\\n\\n<ng-template #AccessScene>\\n\\n\\t<div class=\\\"trailview\\\"></div>\\n\\t<div class=\\\"trailcontext\\\">\\n\\n\\t\\t<div class=\\\"traildescdebug\\\">\\n\\t\\t\\tAt the start of {{ trail.passage.name }}, {{trail.passage.length()}} days journey.\\n\\t\\t</div>\\n\\n\\t\\t\\t<button class=\\\"trailcontrols\\\"  (click)=\\\"journeyOnwards()\\\">ENTER</button>\\n\\t\\t\\t<button class=\\\"trailcontrols\\\" (click)=\\\"leaveTrail()\\\">LEAVE</button>\\n\\t</div>\\n\\n</ng-template>\\n\\n<ng-template #TrailingScene>\\n\\n\\t<div class=\\\"trailview\\\"></div>\\n\\t<div class=\\\"trailcontext\\\">\\n\\n\\t\\t<div class=\\\"traildescdebug\\\">\\n\\t\\t\\tDay {{trail.progress + 1}} of {{trail.passage.length()}} through the {{ trail.passage.name }}.\\n\\t\\t</div>\\n\\n\\t\\t<button class=\\\"trailcontrols\\\" (click)=\\\"journeyOnwards()\\\">FORWARD</button>\\n\\n\\t</div>\\n\\n\\n</ng-template>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/roaming-step/roaming-step.component.html\":\n/*!*******************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/roaming-step/roaming-step.component.html ***!\n  \\*******************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"journeyrender\\\" #renderholder>\\n\\t<div id=\\\"viewrender\\\" #renderview></div>\\n</div>\\n\\n<div id=\\\"journeyinfo\\\" #sceneinfo>\\n\\tTravelling {{getDirectionDescription()}}, day {{getDayOfTravel()}}<span *ngIf=\\\"roamingscene.startloc !== null\\\"> from {{roamingscene.startloc.name}}</span>.\\n\\n\\t\\t<br>\\n\\n\\t<div class=\\\"journeycontrols\\\">\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"moveTurnLeft()\\\">LEFT 45</button>\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"moveForward()\\\">JOURNEY ONWARDS</button>\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"moveTurnRight()\\\">RIGHT 45</button>\\n\\t\\t<br>\\n\\n\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"actionSetCamp()\\\">SET CAMP</button>  <button class=\\\"journeychoice\\\" (click)=\\\"showMap()\\\">SHOW MAP</button>\\n\\n\\t</div>\\n\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/town-ui/town-ui.component.html\":\n/*!*********************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/town-ui/town-ui.component.html ***!\n  \\*********************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"towninfo\\\" #sceneinfo>\\nStanding before {{townscene.town.name}}.\\n\\n\\t\\t<br>\\n\\n\\t<div class=\\\"movecontrols\\\">\\n\\t\\t<button class=\\\"movecontrols\\\" (click)=\\\"leaveTown()\\\">LEAVE</button>\\n\\n\\t</div>\\n\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/world-map-view/world-map-view.component.html\":\n/*!***********************************************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/world-map-view/world-map-view.component.html ***!\n  \\***********************************************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"mapholder\\\" #mapholder>\\n\\t<div id=\\\"maprender\\\" #mapview></div>\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/storyteller.component.html\":\n/*!**********************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/storyteller.component.html ***!\n  \\**********************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div id=\\\"st-page\\\">\\n\\n\\n</div>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/tslib/tslib.es6.js\":\n/*!*****************************************!*\\\n  !*** ./node_modules/tslib/tslib.es6.js ***!\n  \\*****************************************/\n/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __exportStar, __values, __read, __spread, __spreadArrays, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__extends\", function() { return __extends; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__assign\", function() { return __assign; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__rest\", function() { return __rest; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__decorate\", function() { return __decorate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__param\", function() { return __param; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__metadata\", function() { return __metadata; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__awaiter\", function() { return __awaiter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__generator\", function() { return __generator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__exportStar\", function() { return __exportStar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__values\", function() { return __values; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__read\", function() { return __read; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spread\", function() { return __spread; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spreadArrays\", function() { return __spreadArrays; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__await\", function() { return __await; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncGenerator\", function() { return __asyncGenerator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncDelegator\", function() { return __asyncDelegator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncValues\", function() { return __asyncValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__makeTemplateObject\", function() { return __makeTemplateObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__importStar\", function() { return __importStar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__importDefault\", function() { return __importDefault; });\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nfunction __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nfunction __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nfunction __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nfunction __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./src/app/app-routing.module.ts\":\n/*!***************************************!*\\\n  !*** ./src/app/app-routing.module.ts ***!\n  \\***************************************/\n/*! exports provided: AppRoutingModule */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppRoutingModule\", function() { return AppRoutingModule; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ \"./node_modules/@angular/router/fesm2015/router.js\");\n/* harmony import */ var _story_tester_story_tester_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./story-tester/story-tester.component */ \"./src/app/story-tester/story-tester.component.ts\");\n/* harmony import */ var _storyteller_storyteller_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./storyteller/storyteller.component */ \"./src/app/storyteller/storyteller.component.ts\");\n\n\n\n\n\nconst routes = [\n    { path: '', redirectTo: '/game', pathMatch: 'full' },\n    { path: 'tester', component: _story_tester_story_tester_component__WEBPACK_IMPORTED_MODULE_3__[\"StoryTesterComponent\"] },\n    { path: 'game', component: _storyteller_storyteller_component__WEBPACK_IMPORTED_MODULE_4__[\"StorytellerComponent\"] },\n];\nlet AppRoutingModule = class AppRoutingModule {\n};\nAppRoutingModule = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"NgModule\"])({\n        imports: [_angular_router__WEBPACK_IMPORTED_MODULE_2__[\"RouterModule\"].forRoot(routes)],\n        exports: [_angular_router__WEBPACK_IMPORTED_MODULE_2__[\"RouterModule\"]]\n    })\n], AppRoutingModule);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/app.component.scss\":\n/*!************************************!*\\\n  !*** ./src/app/app.component.scss ***!\n  \\************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJ9 */\");\n\n/***/ }),\n\n/***/ \"./src/app/app.component.ts\":\n/*!**********************************!*\\\n  !*** ./src/app/app.component.ts ***!\n  \\**********************************/\n/*! exports provided: AppComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppComponent\", function() { return AppComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n\n\nlet AppComponent = class AppComponent {\n    constructor() {\n        this.title = 'WanderANG';\n    }\n};\nAppComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-root',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./app.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./app.component.scss */ \"./src/app/app.component.scss\")).default]\n    })\n], AppComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/app.module.ts\":\n/*!*******************************!*\\\n  !*** ./src/app/app.module.ts ***!\n  \\*******************************/\n/*! exports provided: AppModule */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppModule\", function() { return AppModule; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ \"./node_modules/@angular/platform-browser/fesm2015/platform-browser.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _app_routing_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app-routing.module */ \"./src/app/app-routing.module.ts\");\n/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./app.component */ \"./src/app/app.component.ts\");\n/* harmony import */ var _storyteller_storyteller_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./storyteller/storyteller.component */ \"./src/app/storyteller/storyteller.component.ts\");\n/* harmony import */ var _scene_ui_scene_ui_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./scene-ui/scene-ui.component */ \"./src/app/scene-ui/scene-ui.component.ts\");\n/* harmony import */ var _story_tester_scenes_test_green_screen_test_green_screen_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./story-tester/scenes/test-green-screen/test-green-screen.component */ \"./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.ts\");\n/* harmony import */ var _story_tester_scenes_test_blue_screen_test_blue_screen_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./story-tester/scenes/test-blue-screen/test-blue-screen.component */ \"./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.ts\");\n/* harmony import */ var _scene_ui_scene_ui_module__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./scene-ui/scene-ui.module */ \"./src/app/scene-ui/scene-ui.module.ts\");\n/* harmony import */ var _story_tester_story_tester_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./story-tester/story-tester.component */ \"./src/app/story-tester/story-tester.component.ts\");\n/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common/http */ \"./node_modules/@angular/common/fesm2015/http.js\");\n/* harmony import */ var _storyteller_scenes_world_map_view_world_map_view_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./storyteller/scenes/world-map-view/world-map-view.component */ \"./src/app/storyteller/scenes/world-map-view/world-map-view.component.ts\");\n/* harmony import */ var _storyteller_scenes_journey_step_journey_step_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./storyteller/scenes/journey-step/journey-step.component */ \"./src/app/storyteller/scenes/journey-step/journey-step.component.ts\");\n/* harmony import */ var _storyteller_scenes_town_ui_town_ui_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./storyteller/scenes/town-ui/town-ui.component */ \"./src/app/storyteller/scenes/town-ui/town-ui.component.ts\");\n/* harmony import */ var _storyteller_scenes_roaming_step_roaming_step_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./storyteller/scenes/roaming-step/roaming-step.component */ \"./src/app/storyteller/scenes/roaming-step/roaming-step.component.ts\");\n/* harmony import */ var _storyteller_scenes_passage_through_passage_through_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./storyteller/scenes/passage-through/passage-through.component */ \"./src/app/storyteller/scenes/passage-through/passage-through.component.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nlet AppModule = class AppModule {\n};\nAppModule = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__[\"NgModule\"])({\n        declarations: [\n            _app_component__WEBPACK_IMPORTED_MODULE_4__[\"AppComponent\"],\n            _storyteller_storyteller_component__WEBPACK_IMPORTED_MODULE_5__[\"StorytellerComponent\"],\n            _story_tester_scenes_test_green_screen_test_green_screen_component__WEBPACK_IMPORTED_MODULE_7__[\"TestGreenScreenComponent\"],\n            _story_tester_scenes_test_blue_screen_test_blue_screen_component__WEBPACK_IMPORTED_MODULE_8__[\"TestBlueScreenComponent\"],\n            _story_tester_story_tester_component__WEBPACK_IMPORTED_MODULE_10__[\"StoryTesterComponent\"],\n            _storyteller_scenes_world_map_view_world_map_view_component__WEBPACK_IMPORTED_MODULE_12__[\"WorldMapViewComponent\"],\n            _storyteller_scenes_journey_step_journey_step_component__WEBPACK_IMPORTED_MODULE_13__[\"JourneyStepComponent\"],\n            _storyteller_scenes_town_ui_town_ui_component__WEBPACK_IMPORTED_MODULE_14__[\"TownUIComponent\"],\n            _storyteller_scenes_roaming_step_roaming_step_component__WEBPACK_IMPORTED_MODULE_15__[\"RoamingStepComponent\"],\n            _storyteller_scenes_passage_through_passage_through_component__WEBPACK_IMPORTED_MODULE_16__[\"PassageThroughComponent\"],\n        ],\n        imports: [\n            _angular_common_http__WEBPACK_IMPORTED_MODULE_11__[\"HttpClientModule\"],\n            _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__[\"BrowserModule\"],\n            _app_routing_module__WEBPACK_IMPORTED_MODULE_3__[\"AppRoutingModule\"],\n            _scene_ui_scene_ui_module__WEBPACK_IMPORTED_MODULE_9__[\"SceneUIModule\"]\n        ],\n        providers: [],\n        bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_4__[\"AppComponent\"]],\n        entryComponents: [\n            _scene_ui_scene_ui_component__WEBPACK_IMPORTED_MODULE_6__[\"SceneUIComponent\"],\n            _story_tester_scenes_test_green_screen_test_green_screen_component__WEBPACK_IMPORTED_MODULE_7__[\"TestGreenScreenComponent\"],\n            _story_tester_scenes_test_blue_screen_test_blue_screen_component__WEBPACK_IMPORTED_MODULE_8__[\"TestBlueScreenComponent\"],\n            _storyteller_scenes_world_map_view_world_map_view_component__WEBPACK_IMPORTED_MODULE_12__[\"WorldMapViewComponent\"],\n            _storyteller_scenes_journey_step_journey_step_component__WEBPACK_IMPORTED_MODULE_13__[\"JourneyStepComponent\"],\n            _storyteller_scenes_roaming_step_roaming_step_component__WEBPACK_IMPORTED_MODULE_15__[\"RoamingStepComponent\"],\n            _storyteller_scenes_town_ui_town_ui_component__WEBPACK_IMPORTED_MODULE_14__[\"TownUIComponent\"],\n            _storyteller_scenes_passage_through_passage_through_component__WEBPACK_IMPORTED_MODULE_16__[\"PassageThroughComponent\"]\n        ]\n    })\n], AppModule);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/journey-departure.ts\":\n/*!********************************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/journey-departure.ts ***!\n  \\********************************************************/\n/*! exports provided: JourneyDeparture */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"JourneyDeparture\", function() { return JourneyDeparture; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n/* harmony import */ var _roaming__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./roaming */ \"./src/app/rpg-engine/scenes/roaming.ts\");\n/* harmony import */ var _world_world_position__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../world/world-position */ \"./src/app/rpg-engine/world/world-position.ts\");\n\n\n\n\nclass JourneyDeparture extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    constructor(game) {\n        super(game);\n        this.worldmap = game.worldmap;\n    }\n    sceneFinished() {\n        return !!this.destination;\n    }\n    setDestination(dest) {\n        // let startingpos = this.game.hero.coordinates;\n        // let destcoords = dest[\"coords\"];\n        this.destination = dest;\n    }\n    getFollowingScene() {\n        let next = null;\n        if (!this.destination.matchesPosition(this.game.hero.pos)) {\n            let direction = _world_world_position__WEBPACK_IMPORTED_MODULE_3__[\"WorldPosition\"].getRelativeGeneralDirection(this.game.hero.pos, this.destination.pos);\n            next = new _roaming__WEBPACK_IMPORTED_MODULE_2__[\"Roaming\"](this.game, this.game.hero.pos, direction);\n            // next.setStops(this.game.hero.coordinates, this.destination[\"coords\"]);\n        }\n        return next;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/journey.ts\":\n/*!**********************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/journey.ts ***!\n  \\**********************************************/\n/*! exports provided: Journey */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Journey\", function() { return Journey; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\nclass Journey extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    // NOTE that start is optional and will default to player's position\n    constructor(game, dest, start) {\n        super(game);\n        this.start = !start ? game.hero.pos : start;\n        this.dest = dest;\n        this.course = game.worldmap.getCourse(this.start, this.dest.pos);\n        this.stepid = 0;\n    }\n    // TODO: add support for custom stops in case the player can  (interpolating)\n    step() {\n        this.stepid++;\n    }\n    getCurrentCoordinates() {\n        if (this.stepid < this.course.length) {\n            return this.course[this.stepid];\n        }\n        else {\n            return this.dest.pos;\n        }\n    }\n    sceneFinished() {\n        return this.stepid >= this.course.length;\n    }\n    getStepDirection(stepid) {\n        let cpos = this.course[stepid];\n        let nextpos = stepid + 1 < this.course.length ? this.course[stepid + 1] : this.dest.pos;\n        return [nextpos.x - cpos.x, nextpos.y - cpos.y];\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/passage-trail.ts\":\n/*!****************************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/passage-trail.ts ***!\n  \\****************************************************/\n/*! exports provided: PassageTrail */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PassageTrail\", function() { return PassageTrail; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n/* harmony import */ var _journey_departure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./journey-departure */ \"./src/app/rpg-engine/scenes/journey-departure.ts\");\n\n\n\nclass PassageTrail extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    constructor(game, passage, started = false) {\n        super(game);\n        this.passage = passage;\n        // progress is the speed, negative allows to go back and reverse\n        this.resetTrail(started);\n        this.days = 0;\n        this.leaving = false;\n    }\n    resetTrail(started = false) {\n        const reversed = this.passage.exitpoint.matches(this.game.hero.pos);\n        this.trail_start = reversed ? this.passage.exitpoint : this.passage.pos;\n        this.trail_end = reversed ? this.passage.pos : this.passage.exitpoint;\n        this.trail_length = this.passage.length();\n        this.progress = started ? 0 : -1;\n    }\n    sceneFinished() {\n        // boolean set by UI\n        console.log(\"is at exit? \" + this.isAtExitPoint() + \"is leaving? \" + this.leaving);\n        return this.isAtExitPoint() && this.leaving;\n    }\n    getFollowingScene() {\n        return new _journey_departure__WEBPACK_IMPORTED_MODULE_2__[\"JourneyDeparture\"](this.game);\n    }\n    isAtExitPoint() {\n        return this.progress === -1 || this.progress === this.passage.length();\n    }\n    step() {\n        this.progress += 1;\n        // this.progress += direction;\n        this.progress = Math.min(Math.max(this.progress, -1), this.passage.length());\n        if (this.progress === this.passage.length()) {\n            this.game.hero.setCoordinates(this.trail_end);\n            this.resetTrail();\n        }\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/roaming.ts\":\n/*!**********************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/roaming.ts ***!\n  \\**********************************************/\n/*! exports provided: Roaming */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Roaming\", function() { return Roaming; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\nclass Roaming extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    // NOTE that start is optional and will default to player's position, direction to N?\n    constructor(game, start, direction) {\n        super(game);\n        this.direction = !direction ? [0, -1] : direction;\n        this.start = !start ? this.game.hero.pos : start;\n        this.current = this.start;\n        this.steps = 0;\n        this.startloc = this.game.worldmap.getLocationAt(this.start.getCoords());\n    }\n    sceneFinished() {\n        // scene ends when you reach a Place\n        return this.game.worldmap.getLocationAt(this.current.getCoords()) != null;\n    }\n    stepInto(pos) {\n        this.direction = [pos.x - this.current.x, pos.y - this.current.y];\n        this.current = pos;\n    }\n    stepForward() {\n        this.steps++;\n        this.stepInto(this.current.getShifted(this.direction[0], this.direction[1]));\n    }\n    getCurrentDirectionIndex() {\n        for (let i = 0; i < Roaming.DIRECTIONS.length; i++) {\n            if (Roaming.DIRECTIONS[i][0] === this.direction[0] && Roaming.DIRECTIONS[i][1] === this.direction[1]) {\n                return i;\n            }\n        }\n        return null;\n    }\n    // steps are in CLOCKWISE order\n    changeDirection(steps) {\n        let cidx = this.getCurrentDirectionIndex();\n        let nidx = (cidx + Roaming.DIRECTIONS.length + steps) % Roaming.DIRECTIONS.length;\n        this.direction = Roaming.DIRECTIONS[nidx];\n    }\n}\nRoaming.DIRECTIONS = [\n    [0, -1],\n    [1, -1],\n    [1, 0],\n    [1, 1],\n    [0, 1],\n    [-1, 1],\n    [-1, 0],\n    [-1, -1]\n];\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/scenes/town-nav.ts\":\n/*!***********************************************!*\\\n  !*** ./src/app/rpg-engine/scenes/town-nav.ts ***!\n  \\***********************************************/\n/*! exports provided: TownNav */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TownNav\", function() { return TownNav; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n/* harmony import */ var _journey_departure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./journey-departure */ \"./src/app/rpg-engine/scenes/journey-departure.ts\");\n\n\n\nclass TownNav extends _wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    constructor(game, place) {\n        super(game);\n        this.town = place;\n    }\n    getFollowingScene() {\n        return new _journey_departure__WEBPACK_IMPORTED_MODULE_2__[\"JourneyDeparture\"](this.game);\n    }\n    sceneFinished() {\n        return this.locpoint === -1;\n    }\n}\nTownNav.LOC_LEAVE = -1;\nTownNav.LOC_OUTSKIRTS = 0;\nTownNav.LOC_GATES = 1;\nTownNav.LOC_MAINSTREET = 2;\nTownNav.LOC_MARKET = 3;\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/wander-game.ts\":\n/*!*******************************************!*\\\n  !*** ./src/app/rpg-engine/wander-game.ts ***!\n  \\*******************************************/\n/*! exports provided: WanderGame */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WanderGame\", function() { return WanderGame; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _world_world_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./world/world-map */ \"./src/app/rpg-engine/world/world-map.ts\");\n/* harmony import */ var _wander_hero__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wander-hero */ \"./src/app/rpg-engine/wander-hero.ts\");\n\n\n\nclass WanderGame {\n    static loadGame(http, callback) {\n        const loader = new GameFactory(http);\n        loader.loadDemoGame(function (game, factory) {\n            console.log(\"loaded game \", game);\n            console.log(\"built from factory \", factory);\n            callback(game);\n        });\n    }\n    // DEBUG FUNCTIONS FOR QUICK TESTING\n    setHero(hero) {\n        this.hero = hero;\n    }\n    setWorldMap(worldmap) {\n        this.worldmap = worldmap;\n    }\n    setActiveScene(scene) {\n        console.log(\"setting activescene to \", scene);\n        this.activescene = scene;\n    }\n    getActiveScene() {\n        return this.activescene;\n    }\n}\nclass GameFactory {\n    constructor(http) {\n        this.http = http;\n        this.dataset = {\n            \"locs\": null,\n            \"terrain\": null,\n            \"player\": null\n        };\n    }\n    loadDataFile(filepath, callback) {\n        const locdata = this.http.get(filepath);\n        locdata.subscribe(function (response) {\n            console.log(\"LOAD RESULT\", response);\n            callback(response);\n        });\n    }\n    loadDemoGame(callback) {\n        const sources = {\n            \"locs\": \"./assets/gamedata/testlocations.json\",\n            \"terrain\": \"./assets/gamedata/testmapgame.json\",\n            \"player\": \"./assets/gamedata/playerdata.json\"\n        };\n        let loader = this;\n        function getCheckerFunction(key) {\n            return function (data) {\n                loader.setData(key, data, callback);\n            };\n        }\n        for (let key of Object.keys(sources)) {\n            let path = sources[key];\n            let checker = getCheckerFunction(key);\n            this.loadDataFile(path, checker);\n        }\n    }\n    setData(key, data, completer) {\n        this.dataset[key] = data;\n        let has_all = true;\n        for (let datakey of Object.keys(this.dataset)) {\n            if (this.dataset[datakey] == null) {\n                has_all = false;\n            }\n        }\n        if (has_all) {\n            // completer(this);\n            this.createGameInstance(completer);\n        }\n    }\n    createGameInstance(completer) {\n        let game = new WanderGame();\n        console.log(\"loaded terrain\", this.dataset[\"terrain\"]);\n        console.log(\"loaded locs\", this.dataset[\"locs\"]);\n        console.log(\"loaded player\", this.dataset[\"player\"]);\n        let worldmap = _world_world_map__WEBPACK_IMPORTED_MODULE_1__[\"WorldMap\"].fromJSON(this.dataset[\"terrain\"], this.dataset[\"locs\"]);\n        let hero = _wander_hero__WEBPACK_IMPORTED_MODULE_2__[\"WanderHero\"].fromJSON(this.dataset[\"player\"]);\n        game.setWorldMap(worldmap);\n        game.setHero(hero);\n        completer(game, this);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/wander-hero.ts\":\n/*!*******************************************!*\\\n  !*** ./src/app/rpg-engine/wander-hero.ts ***!\n  \\*******************************************/\n/*! exports provided: WanderHero */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WanderHero\", function() { return WanderHero; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _world_world_position__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./world/world-position */ \"./src/app/rpg-engine/world/world-position.ts\");\n\n\nclass WanderHero {\n    constructor() {\n        this.pos = null;\n    }\n    static fromJSON(src) {\n        let hero = new WanderHero();\n        // TODO: add potentials etc\n        // hero.setCoordinates(rawdata[\"coords\"][0], rawdata[\"coords\"][1]);\n        hero.setCoordinates(_world_world_position__WEBPACK_IMPORTED_MODULE_1__[\"WorldPosition\"].fromCoordsArray(src[\"position\"][\"coords\"]));\n        return hero;\n    }\n    setCoordinates(pos) {\n        // console.log(\"replacing coords\", this.pos, \"w pos \", pos);\n        this.pos = pos;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/wander-scene.ts\":\n/*!********************************************!*\\\n  !*** ./src/app/rpg-engine/wander-scene.ts ***!\n  \\********************************************/\n/*! exports provided: WanderScene, WanderSceneTrigger, WanderSceneTriggerCondition */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WanderScene\", function() { return WanderScene; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WanderSceneTrigger\", function() { return WanderSceneTrigger; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WanderSceneTriggerCondition\", function() { return WanderSceneTriggerCondition; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass WanderScene {\n    constructor(game) {\n        this.game = game;\n        // narrative should be set outside the constructor\n        this.narrative = null;\n        // TODO: TBA (note: should get value AFTER constructor anyway?)\n        this.leaf = null;\n        this.driver = null;\n    }\n    setNarrative(narrative) {\n        this.narrative = narrative;\n    }\n    /**\n     * Acts as default, subclasses can override if they have specific return codes > 0 (for success and < -1 for failure?)\n     * If the scene is unfinished, subclasses should still respect the UNFINISHED constant\n     */\n    returnState() {\n        // Scenes that do not have a set of return values always return 0 on end OR -1 if not finished\n        return this.sceneFinished() ? WanderScene.LEAVESTATE_FINISHED : WanderScene.LEAVESTATE_UNFINISHED;\n    }\n    /**\n     * Acts as default, subclasses can override if they chain to a scene they create\n     */\n    getFollowingScene() {\n        return this.narrative;\n    }\n}\nWanderScene.LEAVESTATE_UNFINISHED = -1;\nWanderScene.LEAVESTATE_FINISHED = 0;\n/**\n * Wrapper for Map type for syntactical cleanup\n */\nclass LeaveStatesMap extends Map {\n}\nclass WanderSceneTrigger {\n    constructor() {\n        this.needed = [];\n        this.blockers = [];\n    }\n    /**\n     * Adds a condition, by default as needed unless specified as blocker\n     * @param condition trigger condition for this scene\n     * @param asblocker whether the condition is a blocker, defaults to needed\n     */\n    addCondition(condition, asblocker = false) {\n        (asblocker ? this.blockers : this.needed).push(condition);\n    }\n    isActive(leavestates) {\n        for (let triggercondition of this.blockers) {\n            if (triggercondition.checkCondition(leavestates)) {\n                return false;\n            }\n        }\n        for (let triggercondition of this.needed) {\n            if (!triggercondition.checkCondition(leavestates)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    static createFromJSON(src) {\n        const trigger = new WanderSceneTrigger();\n        if (src.hasOwnProperty(\"c_for\")) {\n            for (let conditiondef of src[\"c_for\"]) {\n                trigger.addCondition(WanderSceneTriggerCondition.createFromJSON(conditiondef), false);\n            }\n        }\n        if (src.hasOwnProperty(\"c_against\")) {\n            for (let conditiondef of src[\"c_against\"]) {\n                trigger.addCondition(WanderSceneTriggerCondition.createFromJSON(conditiondef), true);\n            }\n        }\n        return trigger;\n    }\n}\nclass WanderSceneTriggerCondition {\n    constructor(sceneid, valuestate, mustmeet) {\n        this.sceneid = sceneid;\n        this.statevalue = valuestate;\n        this.mustmeet = mustmeet;\n    }\n    checkCondition(leavestates) {\n        let leavestate = leavestates.has(this.sceneid) ? leavestates.get(this.sceneid) : WanderScene.LEAVESTATE_UNFINISHED;\n        return this.mustmeet ? leavestate === this.statevalue : leavestate !== this.statevalue;\n    }\n    static createFromJSON(src) {\n        const sceneid = src[\"sceneid\"];\n        const statevalue = src[\"endstate\"];\n        let mustmeet = true;\n        if (src.hasOwnProperty(\"mustnot\")) {\n            mustmeet = !src[\"mustnot\"];\n        }\n        return new WanderSceneTriggerCondition(sceneid, statevalue, mustmeet);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/world/locs/Place.ts\":\n/*!************************************************!*\\\n  !*** ./src/app/rpg-engine/world/locs/Place.ts ***!\n  \\************************************************/\n/*! exports provided: Place */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Place\", function() { return Place; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass Place {\n    constructor(pos) {\n        this.pos = pos;\n    }\n    // public abstract getName (): string;\n    getCoords() {\n        return this.pos.getCoords();\n    }\n    matchesPosition(pos) {\n        return this.pos.matches(pos);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/world/locs/PlaceFactory.ts\":\n/*!*******************************************************!*\\\n  !*** ./src/app/rpg-engine/world/locs/PlaceFactory.ts ***!\n  \\*******************************************************/\n/*! exports provided: PlaceFactory */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlaceFactory\", function() { return PlaceFactory; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _Town__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Town */ \"./src/app/rpg-engine/world/locs/Town.ts\");\n/* harmony import */ var _TerrainPass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TerrainPass */ \"./src/app/rpg-engine/world/locs/TerrainPass.ts\");\n\n\n\nclass PlaceFactory {\n    static fromJSON(placetype, placeid, src) {\n        let builderclass = PlaceFactory.CLASSES[placetype];\n        return builderclass.fromJSON(placeid, src);\n    }\n}\nPlaceFactory.CLASSES = {\n    \"towns\": _Town__WEBPACK_IMPORTED_MODULE_1__[\"Town\"],\n    \"passes\": _TerrainPass__WEBPACK_IMPORTED_MODULE_2__[\"TerrainPass\"]\n};\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/world/locs/TerrainPass.ts\":\n/*!******************************************************!*\\\n  !*** ./src/app/rpg-engine/world/locs/TerrainPass.ts ***!\n  \\******************************************************/\n/*! exports provided: TerrainPass */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TerrainPass\", function() { return TerrainPass; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _Place__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Place */ \"./src/app/rpg-engine/world/locs/Place.ts\");\n/* harmony import */ var _world_position__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../world-position */ \"./src/app/rpg-engine/world/world-position.ts\");\n\n\n\nclass TerrainPass extends _Place__WEBPACK_IMPORTED_MODULE_1__[\"Place\"] {\n    constructor(locid, entrypos, exitpos, course) {\n        super(entrypos);\n        this.loctype = \"passes\";\n        this.locid = locid;\n        this.exitpoint = exitpos;\n        this.course = course;\n    }\n    length() {\n        return this.course.length;\n    }\n    static fromJSON(placeid, desc) {\n        let entrypoint = desc[\"entry\"];\n        let exitpoint = desc[\"exit\"];\n        let course = desc[\"sequence\"];\n        let loaded = new TerrainPass(placeid, new _world_position__WEBPACK_IMPORTED_MODULE_2__[\"WorldPosition\"](entrypoint[0], entrypoint[1]), new _world_position__WEBPACK_IMPORTED_MODULE_2__[\"WorldPosition\"](exitpoint[0], exitpoint[1]), course);\n        loaded.name = desc[\"name\"];\n        return loaded;\n    }\n    matchesPosition(pos) {\n        return this.pos.matches(pos) || this.exitpoint.matches(pos);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/world/locs/Town.ts\":\n/*!***********************************************!*\\\n  !*** ./src/app/rpg-engine/world/locs/Town.ts ***!\n  \\***********************************************/\n/*! exports provided: Town */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Town\", function() { return Town; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _Place__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Place */ \"./src/app/rpg-engine/world/locs/Place.ts\");\n/* harmony import */ var _world_position__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../world-position */ \"./src/app/rpg-engine/world/world-position.ts\");\n\n\n\nclass Town extends _Place__WEBPACK_IMPORTED_MODULE_1__[\"Place\"] {\n    constructor(locid, coords) {\n        super(coords);\n        this.loctype = \"towns\";\n        this.locid = locid;\n    }\n    static fromJSON(placeid, desc) {\n        let coords = desc[\"coords\"];\n        let loaded = new Town(placeid, new _world_position__WEBPACK_IMPORTED_MODULE_2__[\"WorldPosition\"](coords[0], coords[1]));\n        loaded.name = desc[\"name\"];\n        return loaded;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/world/world-map.ts\":\n/*!***********************************************!*\\\n  !*** ./src/app/rpg-engine/world/world-map.ts ***!\n  \\***********************************************/\n/*! exports provided: WorldMap */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WorldMap\", function() { return WorldMap; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _locs_TerrainPass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locs/TerrainPass */ \"./src/app/rpg-engine/world/locs/TerrainPass.ts\");\n/* harmony import */ var _locs_PlaceFactory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./locs/PlaceFactory */ \"./src/app/rpg-engine/world/locs/PlaceFactory.ts\");\n/* harmony import */ var _world_position__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./world-position */ \"./src/app/rpg-engine/world/world-position.ts\");\n\n\n\n\nclass WorldMap {\n    constructor(sizeX, sizeY) {\n        this.sizeX = sizeX;\n        this.sizeY = sizeY;\n        this.locs = [];\n        this.terrain = [];\n        for (let x = 0; x < sizeX; x++) {\n            let tercol = [];\n            let loccol = [];\n            for (let y = 0; y < sizeY; y++) {\n                tercol.push(null);\n                loccol.push(null);\n            }\n            this.terrain.push(tercol);\n            this.locs.push(loccol);\n        }\n        this.places_bytypebyid = new Map();\n    }\n    static getCoordsHash(coordX, coordY) {\n        return coordX + \":\" + coordY;\n    }\n    static fromJSON(griddata, locationdata) {\n        // console.log(griddata);\n        let gridsizeX = griddata[\"mapgrid\"].length;\n        let gridsizeY = griddata[\"mapgrid\"][0].length;\n        let worldmap = new WorldMap(gridsizeX, gridsizeY);\n        // console.log(worldmap.terrain);\n        for (let x = 0; x < gridsizeX; x++) {\n            for (let y = 0; y < gridsizeY; y++) {\n                worldmap.terrain[x][y] = griddata[\"mapgrid\"][x][y];\n            }\n        }\n        // loop not technically needed but we might want to run generations etc on data in the future\n        // TODO : replace\n        for (let placetype of Object.keys(locationdata)) {\n            let places = locationdata[placetype];\n            let listed = new Map();\n            for (let placeid of Object.keys(places)) {\n                let placedesc = places[placeid];\n                let place = _locs_PlaceFactory__WEBPACK_IMPORTED_MODULE_2__[\"PlaceFactory\"].fromJSON(placetype, placeid, placedesc);\n                // let place = new Place(Position.fromCoords(placedesc[\"coords\"]));\n                // place.loctype = placetype;\n                // place.locid = placeid;\n                listed.set(placeid, place);\n                // console.log(\"adding place\", placetype, placedesc);\n                let coords;\n                worldmap.locs[place.pos.x][place.pos.y] = place;\n                if (place instanceof _locs_TerrainPass__WEBPACK_IMPORTED_MODULE_1__[\"TerrainPass\"]) {\n                    let exitpos = place.exitpoint;\n                    worldmap.locs[exitpos.x][exitpos.y] = place;\n                }\n            }\n            worldmap.places_bytypebyid.set(placetype, listed);\n        }\n        return worldmap;\n    }\n    getAllLocations() {\n        let listing = [];\n        for (let placetype of this.places_bytypebyid.keys()) {\n            // console.log(\"getting loctype \", loctype, this.places[loctype]);\n            for (let loc of this.places_bytypebyid.get(placetype).values()) {\n                listing.push(loc);\n            }\n        }\n        // console.log(\"all locations: \", listing);\n        return listing;\n    }\n    getLocationAt(coords) {\n        let loc = null;\n        try {\n            loc = this.locs[coords[0]][coords[1]];\n        }\n        catch (err) {\n            // return null;\n        }\n        // console.log(\"found loc \", loc);\n        // TODO: DEBUG ONLY!\n        // loc = null;\n        return loc;\n        /*\n        var coordhash = WorldMap.getCoordsHash(coordX, coordY);\n        // TODO: optimize so we don't go through the whole places data\n        for (var placetype in this.places)\n        {\n            for (var placeid in this.places[placetype])\n            {\n                var placecoords = this.places[placetype][placeid][\"coords\"];\n                if (WorldMap.getCoordsHash(placecoords[0], placecoords[1])==coordhash)\n                {\n                    return this.places[placetype][placeid];\n                }\n            }\n        }\n        return null;\n        */\n    }\n    getCourse(cfrom, cto) {\n        // TODO: straight course for now\n        let distX = cto.x - cfrom.x;\n        let distY = cto.y - cfrom.y;\n        let maxdist = Math.max(Math.abs(distX), Math.abs(distY));\n        let course = [];\n        for (let i = 0; i < maxdist; i++) {\n            let section = i / maxdist;\n            let sectionX = Math.round(distX * section);\n            let sectionY = Math.round(distY * section);\n            course.push(new _world_position__WEBPACK_IMPORTED_MODULE_3__[\"WorldPosition\"](cfrom.x + sectionX, cfrom.y + sectionY));\n        }\n        console.log(\"course from \", cfrom, \" to \", cto, \": \" + course.length + \" steps (\", course, \")\");\n        return course;\n    }\n    getTerrainAt(x, y) {\n        try {\n            return this.terrain[x][y];\n        }\n        catch (err) {\n            return null;\n        }\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/rpg-engine/world/world-position.ts\":\n/*!****************************************************!*\\\n  !*** ./src/app/rpg-engine/world/world-position.ts ***!\n  \\****************************************************/\n/*! exports provided: WorldPosition */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WorldPosition\", function() { return WorldPosition; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass WorldPosition {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    static fromCoordsArray(coords) {\n        return new WorldPosition(coords[0], coords[1]);\n    }\n    getCoords() {\n        return [this.x, this.y];\n    }\n    getShifted(x, y) {\n        return new WorldPosition(this.x + x, this.y + y);\n    }\n    matches(other) {\n        console.log(\"checking if we have a match between \", this, \"and\", other);\n        return this.x === other.x && this.y === other.y;\n    }\n    static getRelativeGeneralDirection(pfrom, pto) {\n        const distX = pto.x - pfrom.x;\n        const distY = pto.y - pfrom.y;\n        let dirX = 0;\n        let dirY = 0;\n        if (distX === 0) {\n            dirX = 0;\n            dirY = distY > 0 ? 1 : -1;\n        }\n        else if (distY === 0) {\n            dirY = 0;\n            dirX = distX > 0 ? 1 : -1;\n        }\n        else {\n            let absX = Math.abs(distX);\n            let absY = Math.abs(distY);\n            if (absY > 3 * absY) {\n                dirX = 0;\n                dirY = distY > 0 ? 1 : -1;\n            }\n            else if (absY * 3 < absX) {\n                dirX = distX > 0 ? 1 : -1;\n                dirY = 0;\n            }\n            else {\n                dirX = distX > 0 ? 1 : -1;\n                dirY = distY > 0 ? 1 : -1;\n            }\n        }\n        return [dirX, dirY];\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/insertion.directive.ts\":\n/*!*************************************************!*\\\n  !*** ./src/app/scene-ui/insertion.directive.ts ***!\n  \\*************************************************/\n/*! exports provided: InsertionDirective */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InsertionDirective\", function() { return InsertionDirective; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n\n\nlet InsertionDirective = class InsertionDirective {\n    constructor(viewContainerRef) {\n        this.viewContainerRef = viewContainerRef;\n    }\n};\nInsertionDirective.ctorParameters = () => [\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewContainerRef\"] }\n];\nInsertionDirective = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Directive\"])({\n        selector: '[appInsertion]',\n    })\n], InsertionDirective);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/scene-injector.ts\":\n/*!********************************************!*\\\n  !*** ./src/app/scene-ui/scene-injector.ts ***!\n  \\********************************************/\n/*! exports provided: SceneInjector */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneInjector\", function() { return SceneInjector; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass SceneInjector {\n    constructor(_parentInjector, _additionalTokens) {\n        this._parentInjector = _parentInjector;\n        this._additionalTokens = _additionalTokens;\n    }\n    get(token, notFoundValue, flags) {\n        const value = this._additionalTokens.get(token);\n        if (value) {\n            return value;\n        }\n        return this._parentInjector.get(token, notFoundValue);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/scene-ref.ts\":\n/*!***************************************!*\\\n  !*** ./src/app/scene-ui/scene-ref.ts ***!\n  \\***************************************/\n/*! exports provided: SceneRef */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneRef\", function() { return SceneRef; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm2015/index.js\");\n\n\nclass SceneRef {\n    constructor() {\n        this._afterClosed = new rxjs__WEBPACK_IMPORTED_MODULE_1__[\"Subject\"]();\n        this.afterClosed = this._afterClosed.asObservable();\n        this._sceneCheck = new rxjs__WEBPACK_IMPORTED_MODULE_1__[\"Subject\"]();\n        this.sceneCheck = this._sceneCheck.asObservable();\n    }\n    setContext(scene) {\n        this.scene = scene;\n        this.game = scene.game;\n    }\n    close(result) {\n        this._afterClosed.next(result);\n    }\n    triggerSceneCheck() {\n        console.log(\"sending check event for scene \", this.scene, this.scene.sceneFinished());\n        this._sceneCheck.next();\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/scene-ui.component.scss\":\n/*!**************************************************!*\\\n  !*** ./src/app/scene-ui/scene-ui.component.scss ***!\n  \\**************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".uiwrapper {\\n  display: flex;\\n  flex-direction: column;\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background: transparent;\\n  align-items: center;\\n  justify-content: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3NjZW5lLXVpL3NjZW5lLXVpLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zY2VuZS11aS9zY2VuZS11aS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLGVBQUE7RUFDQSxNQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9zY2VuZS11aS9zY2VuZS11aS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi51aXdyYXBwZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuIiwiLnVpd3JhcHBlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAwO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59Il19 */\");\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/scene-ui.component.ts\":\n/*!************************************************!*\\\n  !*** ./src/app/scene-ui/scene-ui.component.ts ***!\n  \\************************************************/\n/*! exports provided: SceneUIComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneUIComponent\", function() { return SceneUIComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ \"./node_modules/rxjs/_esm2015/index.js\");\n/* harmony import */ var _insertion_directive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./insertion.directive */ \"./src/app/scene-ui/insertion.directive.ts\");\n\n\n\n\nlet SceneUIComponent = class SceneUIComponent {\n    constructor(componentFactoryResolver, cd) {\n        this.componentFactoryResolver = componentFactoryResolver;\n        this.cd = cd;\n        this._onClose = new rxjs__WEBPACK_IMPORTED_MODULE_2__[\"Subject\"]();\n        this.onClose = this._onClose.asObservable();\n    }\n    // LIFECYCLE\n    // note: ngOnInit not strictly necessary for this use\n    // ngOnInit() {\n    // }\n    ngAfterViewInit() {\n        this.loadChildComponent(this.childComponentType);\n        this.cd.detectChanges();\n    }\n    ngOnDestroy() {\n        if (this.componentRef) {\n            this.componentRef.destroy();\n        }\n    }\n    // child loading\n    loadChildComponent(componentType) {\n        let componentFactory = this.componentFactoryResolver.resolveComponentFactory(componentType);\n        let viewContainerRef = this.insertionPoint.viewContainerRef;\n        viewContainerRef.clear();\n        this.componentRef = viewContainerRef.createComponent(componentFactory);\n    }\n    // for dialog-like behaviour, revise\n    onOverlayClicked(evt) {\n        // close the scene\n        console.warn(\"on overlay click\");\n        // console.log(\"closing sceneref\");\n        // console.log(\"removing \", this.componentRef);\n        // this.componentRef.destroy();\n    }\n    onDialogClicked(evt) {\n        evt.stopPropagation();\n    }\n};\nSceneUIComponent.ctorParameters = () => [\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ComponentFactoryResolver\"] },\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ChangeDetectorRef\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(_insertion_directive__WEBPACK_IMPORTED_MODULE_3__[\"InsertionDirective\"], { static: false })\n], SceneUIComponent.prototype, \"insertionPoint\", void 0);\nSceneUIComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-scene-ui',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./scene-ui.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/scene-ui/scene-ui.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./scene-ui.component.scss */ \"./src/app/scene-ui/scene-ui.component.scss\")).default]\n    })\n], SceneUIComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/scene-ui.module.ts\":\n/*!*********************************************!*\\\n  !*** ./src/app/scene-ui/scene-ui.module.ts ***!\n  \\*********************************************/\n/*! exports provided: SceneUIModule */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneUIModule\", function() { return SceneUIModule; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ \"./node_modules/@angular/common/fesm2015/common.js\");\n/* harmony import */ var _insertion_directive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./insertion.directive */ \"./src/app/scene-ui/insertion.directive.ts\");\n/* harmony import */ var _scene_ui_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scene-ui.component */ \"./src/app/scene-ui/scene-ui.component.ts\");\n\n\n\n\n\nlet SceneUIModule = class SceneUIModule {\n};\nSceneUIModule = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"NgModule\"])({\n        imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__[\"CommonModule\"]],\n        declarations: [_scene_ui_component__WEBPACK_IMPORTED_MODULE_4__[\"SceneUIComponent\"], _insertion_directive__WEBPACK_IMPORTED_MODULE_3__[\"InsertionDirective\"]],\n        entryComponents: [_scene_ui_component__WEBPACK_IMPORTED_MODULE_4__[\"SceneUIComponent\"]],\n    })\n], SceneUIModule);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/scene-ui/scene-ui.service.ts\":\n/*!**********************************************!*\\\n  !*** ./src/app/scene-ui/scene-ui.service.ts ***!\n  \\**********************************************/\n/*! exports provided: SceneUIService */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneUIService\", function() { return SceneUIService; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scene-ui.component */ \"./src/app/scene-ui/scene-ui.component.ts\");\n/* harmony import */ var _scene_ref__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _scene_injector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scene-injector */ \"./src/app/scene-ui/scene-injector.ts\");\n\n\n\n\n\nlet SceneUIService = class SceneUIService {\n    constructor(componentFactoryResolver, appRef, injector) {\n        this.componentFactoryResolver = componentFactoryResolver;\n        this.appRef = appRef;\n        this.injector = injector;\n    }\n    bindStoryTellerUI(storyteller) {\n        this.storyteller = storyteller;\n    }\n    open(componentType, scene) {\n        let sceneref = this.appendSceneUI(scene);\n        this.sceneRef.instance.childComponentType = componentType;\n        return sceneref;\n    }\n    appendSceneUI(scene) {\n        const map = new WeakMap();\n        // map.set(DialogConfig, config);\n        // add the DialogRef to dependency injection\n        const sceneRef = new _scene_ref__WEBPACK_IMPORTED_MODULE_3__[\"SceneRef\"]();\n        sceneRef.setContext(scene);\n        map.set(_scene_ref__WEBPACK_IMPORTED_MODULE_3__[\"SceneRef\"], sceneRef);\n        // we want to know when somebody called the close mehtod\n        const sub = sceneRef.afterClosed.subscribe(() => {\n            // close the dialog\n            console.log(\"running AFTERCLOSE\");\n            this.removeSceneUI();\n            sub.unsubscribe();\n            console.log(\"getting follower scene \", scene.getFollowingScene());\n            this.storyteller.checkUpdateSceneRender();\n        });\n        const checksub = sceneRef.sceneCheck.subscribe(() => {\n            console.log(\"running SCENECHECK on scene \", scene);\n            if (scene.sceneFinished()) {\n                console.log(\"scene IS finished!\");\n            }\n            else {\n                console.log(\"scene NOT finished\");\n            }\n            if (scene.sceneFinished()) {\n                sceneRef.close();\n            }\n        });\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(_scene_ui_component__WEBPACK_IMPORTED_MODULE_2__[\"SceneUIComponent\"]);\n        const componentRef = componentFactory.create(new _scene_injector__WEBPACK_IMPORTED_MODULE_4__[\"SceneInjector\"](this.injector, map));\n        this.appRef.attachView(componentRef.hostView);\n        const domElem = componentRef.hostView.rootNodes[0];\n        document.body.appendChild(domElem);\n        this.sceneRef = componentRef;\n        // console.log(\"SceneUI.sceneRef: \", this.sceneRef);\n        // console.log(\"SceneUI.sceneRef.instance: \", this.sceneRef.instance);\n        // console.log(\"SceneUI.sceneRef.childCompo: \", this.sceneRef.instance.componentRef);\n        this.sceneRef.instance.onClose.subscribe(() => {\n            console.log(\"running ONCLOSE\");\n            this.removeSceneUI();\n            // console.log(\"getting follower scene \", scene.getFollowingScene());\n            // this.storyteller.checkUpdateSceneRender();\n        });\n        // return the dialogRef\n        return sceneRef;\n    }\n    removeSceneUI() {\n        console.log(\"removing scene ref \", this.sceneRef);\n        this.appRef.detachView(this.sceneRef.hostView);\n        this.sceneRef.destroy();\n    }\n};\nSceneUIService.ctorParameters = () => [\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ComponentFactoryResolver\"] },\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ApplicationRef\"] },\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Injector\"] }\n];\nSceneUIService = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Injectable\"])({\n        providedIn: 'root'\n    })\n], SceneUIService);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.scss\":\n/*!**************************************************************************************!*\\\n  !*** ./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.scss ***!\n  \\**************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".scenescreen {\\n  background-color: darkseagreen;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1ibHVlLXNjcmVlbi90ZXN0LWJsdWUtc2NyZWVuLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3QtYmx1ZS1zY3JlZW4vdGVzdC1ibHVlLXNjcmVlbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLDhCQUFBO0FDQUQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3QtYmx1ZS1zY3JlZW4vdGVzdC1ibHVlLXNjcmVlbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zY2VuZXNjcmVlblxue1xuXHRiYWNrZ3JvdW5kLWNvbG9yOlx0XHRcdGRhcmtzZWFncmVlbjtcbn1cbiIsIi5zY2VuZXNjcmVlbiB7XG4gIGJhY2tncm91bmQtY29sb3I6IGRhcmtzZWFncmVlbjtcbn0iXX0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.ts\":\n/*!************************************************************************************!*\\\n  !*** ./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.ts ***!\n  \\************************************************************************************/\n/*! exports provided: TestBlueScreenComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TestBlueScreenComponent\", function() { return TestBlueScreenComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _test_screen_generic_test_screen_generic_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../test-screen-generic/test-screen-generic.component */ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.ts\");\n\n\n\n\nlet TestBlueScreenComponent = class TestBlueScreenComponent extends _test_screen_generic_test_screen_generic_component__WEBPACK_IMPORTED_MODULE_3__[\"TestScreenGenericComponent\"] {\n    constructor(sceneref) {\n        super();\n        this.sceneref = sceneref;\n    }\n    ngOnInit() {\n    }\n    onClose() {\n        this.sceneref.close('BYE BLUE');\n    }\n};\nTestBlueScreenComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__[\"SceneRef\"] }\n];\nTestBlueScreenComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-test-blue-screen',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./test-blue-screen.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ../test-screen-generic/test-screen-generic.component.scss */ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.scss\")).default, tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./test-blue-screen.component.scss */ \"./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.scss\")).default]\n    })\n], TestBlueScreenComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.scss\":\n/*!****************************************************************************************!*\\\n  !*** ./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.scss ***!\n  \\****************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".scenescreen {\\n  background-color: lightsteelblue;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1ncmVlbi1zY3JlZW4vdGVzdC1ncmVlbi1zY3JlZW4uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1ncmVlbi1zY3JlZW4vdGVzdC1ncmVlbi1zY3JlZW4uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFQyxnQ0FBQTtBQ0FEIiwiZmlsZSI6InNyYy9hcHAvc3RvcnktdGVzdGVyL3NjZW5lcy90ZXN0LWdyZWVuLXNjcmVlbi90ZXN0LWdyZWVuLXNjcmVlbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zY2VuZXNjcmVlblxue1xuXHRiYWNrZ3JvdW5kLWNvbG9yOlx0XHRcdGxpZ2h0c3RlZWxibHVlO1xufVxuIiwiLnNjZW5lc2NyZWVuIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRzdGVlbGJsdWU7XG59Il19 */\");\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.ts\":\n/*!**************************************************************************************!*\\\n  !*** ./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.ts ***!\n  \\**************************************************************************************/\n/*! exports provided: TestGreenScreenComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TestGreenScreenComponent\", function() { return TestGreenScreenComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _test_screen_generic_test_screen_generic_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../test-screen-generic/test-screen-generic.component */ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.ts\");\n\n\n\n\nlet TestGreenScreenComponent = class TestGreenScreenComponent extends _test_screen_generic_test_screen_generic_component__WEBPACK_IMPORTED_MODULE_3__[\"TestScreenGenericComponent\"] {\n    constructor(sceneref) {\n        super();\n        this.sceneref = sceneref;\n    }\n    ngOnInit() {\n    }\n    onClose() {\n        this.sceneref.close('BYE GREEN');\n    }\n};\nTestGreenScreenComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__[\"SceneRef\"] }\n];\nTestGreenScreenComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-test-green-screen',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./test-green-screen.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ../test-screen-generic/test-screen-generic.component.scss */ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.scss\")).default, tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./test-green-screen.component.scss */ \"./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.scss\")).default]\n    })\n], TestGreenScreenComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.scss\":\n/*!********************************************************************************************!*\\\n  !*** ./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.scss ***!\n  \\********************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".overlay {\\n  display: flex;\\n  flex-direction: column;\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background: rgba(0, 0, 0, 0.7);\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.dialog {\\n  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\\n  background-color: white;\\n  width: 50%;\\n  height: 50%;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1zY3JlZW4tZ2VuZXJpYy90ZXN0LXNjcmVlbi1nZW5lcmljLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3Qtc2NyZWVuLWdlbmVyaWMvdGVzdC1zY3JlZW4tZ2VuZXJpYy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLGVBQUE7RUFDQSxNQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsOEJBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FDQ0Y7O0FERUE7RUFDRSw0RUFBQTtFQUNBLHVCQUFBO0VBQ0EsVUFBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxZQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3Qtc2NyZWVuLWdlbmVyaWMvdGVzdC1zY3JlZW4tZ2VuZXJpYy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5vdmVybGF5IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5kaWFsb2cge1xuICBib3gtc2hhZG93OiAwIDE0cHggMjhweCByZ2JhKDAsIDAsIDAsIDAuMjUpLCAwIDEwcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMjIpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgd2lkdGg6IDUwJTtcbiAgaGVpZ2h0OiA1MCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDhweDtcbn1cbiIsIi5vdmVybGF5IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5kaWFsb2cge1xuICBib3gtc2hhZG93OiAwIDE0cHggMjhweCByZ2JhKDAsIDAsIDAsIDAuMjUpLCAwIDEwcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMjIpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgd2lkdGg6IDUwJTtcbiAgaGVpZ2h0OiA1MCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDhweDtcbn0iXX0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.ts\":\n/*!******************************************************************************************!*\\\n  !*** ./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.ts ***!\n  \\******************************************************************************************/\n/*! exports provided: TestScreenGenericComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TestScreenGenericComponent\", function() { return TestScreenGenericComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n\n\nlet TestScreenGenericComponent = class TestScreenGenericComponent {\n    constructor() {\n    }\n    ngOnInit() {\n    }\n};\nTestScreenGenericComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-test-screen-generic',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./test-screen-generic.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./test-screen-generic.component.scss */ \"./src/app/story-tester/scenes/test-screen-generic/test-screen-generic.component.scss\")).default]\n    })\n], TestScreenGenericComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/story-tester.component.scss\":\n/*!**********************************************************!*\\\n  !*** ./src/app/story-tester/story-tester.component.scss ***!\n  \\**********************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#storyteller-outside {\\n  background-color: #9a93ff;\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n#storyteller-tester {\\n  position: fixed;\\n  top: 8px;\\n  left: 8px;\\n  right: 8px;\\n  bottom: 8px;\\n  /*background-color:\\t\\tlightgreen;*/\\n  background-image: url(\\\"/assets/ui/temporaryparchment.jpg\\\");\\n}\\n\\n#scenerender-test {\\n  background-color: grey;\\n  width: 200px;\\n  height: 300px;\\n  border: 2px solid white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zdG9yeS10ZXN0ZXIuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N0b3J5LXRlc3Rlci9zdG9yeS10ZXN0ZXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFQyx5QkFBQTtFQUNBLGVBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0FDQUQ7O0FESUE7RUFFQyxlQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLGlDQUFBO0VBQ0EsMERBQUE7QUNGRDs7QURPQTtFQUdDLHNCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtBQ05EIiwiZmlsZSI6InNyYy9hcHAvc3RvcnktdGVzdGVyL3N0b3J5LXRlc3Rlci5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNzdG9yeXRlbGxlci1vdXRzaWRlXG57XG5cdGJhY2tncm91bmQtY29sb3I6ICM5YTkzZmY7XG5cdHBvc2l0aW9uOlx0XHRcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHRcdFx0MDtcblx0bGVmdDpcdFx0XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0XHRcdDA7XG5cdGJvdHRvbTpcdFx0XHRcdFx0MDtcbn1cblxuXG4jc3Rvcnl0ZWxsZXItdGVzdGVyXG57XG5cdHBvc2l0aW9uOlx0XHRcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHRcdFx0OHB4O1xuXHRsZWZ0Olx0XHRcdFx0XHQ4cHg7XG5cdHJpZ2h0Olx0XHRcdFx0XHQ4cHg7XG5cdGJvdHRvbTpcdFx0XHRcdFx0OHB4O1xuXHQvKmJhY2tncm91bmQtY29sb3I6XHRcdGxpZ2h0Z3JlZW47Ki9cblx0YmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy91aS90ZW1wb3JhcnlwYXJjaG1lbnQuanBnXCIpO1xuXG59XG5cblxuI3NjZW5lcmVuZGVyLXRlc3RcbntcblxuXHRiYWNrZ3JvdW5kLWNvbG9yOlx0XHRncmV5O1xuXHR3aWR0aDpcdFx0XHRcdFx0MjAwcHg7XG5cdGhlaWdodDpcdFx0XHRcdFx0MzAwcHg7XG5cdGJvcmRlcjpcdFx0XHRcdFx0MnB4IHNvbGlkIHdoaXRlO1xufVxuXG5cbiIsIiNzdG9yeXRlbGxlci1vdXRzaWRlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzlhOTNmZjtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbiNzdG9yeXRlbGxlci10ZXN0ZXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogOHB4O1xuICBsZWZ0OiA4cHg7XG4gIHJpZ2h0OiA4cHg7XG4gIGJvdHRvbTogOHB4O1xuICAvKmJhY2tncm91bmQtY29sb3I6XHRcdGxpZ2h0Z3JlZW47Ki9cbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy91aS90ZW1wb3JhcnlwYXJjaG1lbnQuanBnXCIpO1xufVxuXG4jc2NlbmVyZW5kZXItdGVzdCB7XG4gIGJhY2tncm91bmQtY29sb3I6IGdyZXk7XG4gIHdpZHRoOiAyMDBweDtcbiAgaGVpZ2h0OiAzMDBweDtcbiAgYm9yZGVyOiAycHggc29saWQgd2hpdGU7XG59Il19 */\");\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/story-tester.component.ts\":\n/*!********************************************************!*\\\n  !*** ./src/app/story-tester/story-tester.component.ts ***!\n  \\********************************************************/\n/*! exports provided: StoryTesterComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StoryTesterComponent\", function() { return StoryTesterComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ui_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scene-ui/scene-ui.service */ \"./src/app/scene-ui/scene-ui.service.ts\");\n/* harmony import */ var _scenes_test_blue_screen_test_blue_screen_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scenes/test-blue-screen/test-blue-screen.component */ \"./src/app/story-tester/scenes/test-blue-screen/test-blue-screen.component.ts\");\n/* harmony import */ var _scenes_test_green_screen_test_green_screen_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scenes/test-green-screen/test-green-screen.component */ \"./src/app/story-tester/scenes/test-green-screen/test-green-screen.component.ts\");\n/* harmony import */ var _tester_scene__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tester-scene */ \"./src/app/story-tester/tester-scene.ts\");\n\n\n\n\n\n\nlet StoryTesterComponent = class StoryTesterComponent {\n    constructor(sceneui) {\n        this.sceneui = sceneui;\n    }\n    ngOnInit() {\n    }\n    loadBlueScreen() {\n        let scene = new _tester_scene__WEBPACK_IMPORTED_MODULE_5__[\"TesterScene\"]();\n        let ref = this.sceneui.open(_scenes_test_blue_screen_test_blue_screen_component__WEBPACK_IMPORTED_MODULE_3__[\"TestBlueScreenComponent\"], scene);\n        ref.afterClosed.subscribe(result => {\n            console.log('Scene (BLUE) closed', result);\n        });\n    }\n    loadGreenScreen() {\n        let scene = new _tester_scene__WEBPACK_IMPORTED_MODULE_5__[\"TesterScene\"]();\n        let ref = this.sceneui.open(_scenes_test_green_screen_test_green_screen_component__WEBPACK_IMPORTED_MODULE_4__[\"TestGreenScreenComponent\"], scene);\n        ref.afterClosed.subscribe(result => {\n            console.log('Scene (GREEN) closed', result);\n        });\n    }\n};\nStoryTesterComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ui_service__WEBPACK_IMPORTED_MODULE_2__[\"SceneUIService\"] }\n];\nStoryTesterComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-story-tester',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./story-tester.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/story-tester/story-tester.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./story-tester.component.scss */ \"./src/app/story-tester/story-tester.component.scss\")).default]\n    })\n], StoryTesterComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/story-tester/tester-scene.ts\":\n/*!**********************************************!*\\\n  !*** ./src/app/story-tester/tester-scene.ts ***!\n  \\**********************************************/\n/*! exports provided: TesterScene */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TesterScene\", function() { return TesterScene; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _rpg_engine_wander_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../rpg-engine/wander-scene */ \"./src/app/rpg-engine/wander-scene.ts\");\n\n\n/**\n * Empty scene object so test layouts can work without loading an actual game\n */\nclass TesterScene extends _rpg_engine_wander_scene__WEBPACK_IMPORTED_MODULE_1__[\"WanderScene\"] {\n    constructor() {\n        super(null);\n    }\n    sceneFinished() {\n        return false;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/journey-step/journey-step.component.scss\":\n/*!*****************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/journey-step/journey-step.component.scss ***!\n  \\*****************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#journeyrender {\\n  position: fixed;\\n  top: 8px;\\n  left: 8px;\\n  right: 8px;\\n  bottom: 30vh;\\n  border: 1px dashed black;\\n  overflow: auto;\\n}\\n\\n#viewrender {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n#journeyinfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 28vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\nbutton.journeychoice {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9qb3VybmV5LXN0ZXAvam91cm5leS1zdGVwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvam91cm5leS1zdGVwL2pvdXJuZXktc3RlcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLFVBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7RUFDQSxjQUFBO0FDQUQ7O0FER0E7RUFFQyxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7QUNERDs7QURJQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDSEQ7O0FET0E7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ05EIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL2pvdXJuZXktc3RlcC9qb3VybmV5LXN0ZXAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjam91cm5leXJlbmRlclxue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHQ4cHg7XG5cdGxlZnQ6XHRcdFx0OHB4O1xuXHRyaWdodDpcdFx0XHQ4cHg7XG5cdGJvdHRvbTpcdFx0XHQzMHZoO1xuXHRib3JkZXI6XHRcdFx0MXB4IGRhc2hlZCBibGFjaztcblx0b3ZlcmZsb3c6XHRcdGF1dG87XG59XG5cbiN2aWV3cmVuZGVyXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblx0dG9wOlx0XHRcdDA7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG59XG5cbiNqb3VybmV5aW5mb1xue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdGhlaWdodDpcdFx0XHQyOHZoO1xuXHRmb250LXNpemU6XHRcdDh2aDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG59XG5cblxuYnV0dG9uLmpvdXJuZXljaG9pY2Vcbntcblx0Ym9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0cGFkZGluZzpcdFx0MnB0IDhwdDtcblxuXHRmb250LXNpemU6XHRcdDR2aDtcbn1cbiIsIiNqb3VybmV5cmVuZGVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDhweDtcbiAgbGVmdDogOHB4O1xuICByaWdodDogOHB4O1xuICBib3R0b206IDMwdmg7XG4gIGJvcmRlcjogMXB4IGRhc2hlZCBibGFjaztcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG5cbiN2aWV3cmVuZGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbiNqb3VybmV5aW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiAyOHZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5idXR0b24uam91cm5leWNob2ljZSB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBwYWRkaW5nOiAycHQgOHB0O1xuICBmb250LXNpemU6IDR2aDtcbn0iXX0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/journey-step/journey-step.component.ts\":\n/*!***************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/journey-step/journey-step.component.ts ***!\n  \\***************************************************************************/\n/*! exports provided: JourneyStepComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"JourneyStepComponent\", function() { return JourneyStepComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _lib_walk_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/walk-renderer */ \"./src/app/storyteller/scenes/lib/walk-renderer.ts\");\n\n\n\n\n\nlet JourneyStepComponent = class JourneyStepComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_2__[\"SceneRenderer\"] {\n    constructor(sceneref) {\n        super(sceneref);\n        this.sceneref = sceneref;\n        this.journeyscene = this.sceneref.scene;\n        console.log(\"journey path: \", JSON.stringify(this.journeyscene.course));\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n        this.viewrenderer = new _lib_walk_renderer__WEBPACK_IMPORTED_MODULE_4__[\"WalkRenderer\"](this.journeyscene.game.worldmap, this.renderview);\n        let ui = this;\n        this.viewrenderer.loadAssets(function () {\n            ui.renderStep();\n        });\n    }\n    setCamp() {\n        console.log(\"clicked SET CAMP\");\n    }\n    continueJourney() {\n        console.log(\"clicked JOURNEY ONWARDs\");\n        this.journeyscene.step();\n        this.journeyscene.game.hero.setCoordinates(this.journeyscene.getCurrentCoordinates());\n        if (!this.journeyscene.sceneFinished()) {\n            this.renderStep();\n        }\n        else {\n            this.sceneref.triggerSceneCheck();\n        }\n    }\n    renderStep() {\n        const vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n        this.viewrenderer.renderView(this.journeyscene.getCurrentCoordinates(), vector);\n    }\n    showMap() {\n        console.log(\"clicked SHOW MAP\");\n    }\n    getDirectionDescription() {\n        let vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n        let dirstring = \"\";\n        if (vector[1] > 0) {\n            dirstring += \"South\";\n        }\n        else if (vector[1] < 0) {\n            dirstring += \"North\";\n        }\n        if (vector[0] > 0) {\n            dirstring += \"East\";\n        }\n        else if (vector[0] < 0) {\n            dirstring += \"West\";\n        }\n        return dirstring;\n    }\n};\nJourneyStepComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__[\"SceneRef\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"renderholder\", { static: false })\n], JourneyStepComponent.prototype, \"renderholder\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"renderview\", { static: false })\n], JourneyStepComponent.prototype, \"renderview\", void 0);\nJourneyStepComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-journey-step',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./journey-step.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/journey-step/journey-step.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./journey-step.component.scss */ \"./src/app/storyteller/scenes/journey-step/journey-step.component.scss\")).default]\n    })\n], JourneyStepComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/lib/walk-renderer.ts\":\n/*!*********************************************************!*\\\n  !*** ./src/app/storyteller/scenes/lib/walk-renderer.ts ***!\n  \\*********************************************************/\n/*! exports provided: WalkRenderer */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WalkRenderer\", function() { return WalkRenderer; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! konva */ \"./node_modules/konva/lib/index.js\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(konva__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass WalkRenderer {\n    constructor(worldmap, target) {\n        // NOTE: these could be configured via a tileset theme\n        // TILESBYTERRRAIN = {\n        // \t\"M\": \"basetilemountain400.png\",\n        // \t\"H\": \"basetilehills400.png\",\n        // \t\"F\": \"basetileforest400.png\",\n        // \t\"P\": \"basetileplains400.png\",\n        // };\n        this.TILESBYTERRRAIN = {\n            \"M\": \"basetilemountain.png\",\n            \"H\": \"basetilehills.png\",\n            \"F\": \"basetileforest.png\",\n            \"P\": \"basetileplains.png\",\n        };\n        this.PATH_TILES = \"assets/graph/fptiles/\";\n        this.MARKERSBYID = {\n            \"towns\": \"basetilecitadel.png\",\n        };\n        this.PATH_MARKERS = \"assets/graph/fptiles/\";\n        this.EXTRAIMGS = {\n            // \"skybgr\": \"/assets/graph/bgr/sunspearsky.jpg\",\n            \"skybgr\": \"assets/graph/bgr/sunspearsky_gscale.png\"\n        };\n        this.worldmap = worldmap;\n        this.renderview = target;\n        console.log(this.renderview);\n        console.log(\"render view id\", this.renderview.nativeElement.id);\n    }\n    loadAssets(callback) {\n        this.terraintiles = new Map();\n        this.tileimages = new Map();\n        this.markerfiles = new Map();\n        this.markerimages = new Map();\n        this.extrafiles = new Map();\n        this.extraimages = new Map();\n        for (let key in this.TILESBYTERRRAIN) {\n            this.terraintiles.set(key, this.PATH_TILES + this.TILESBYTERRRAIN[key]);\n        }\n        this.tileimages = new Map();\n        for (let terrain of this.terraintiles.keys()) {\n            this.tileimages.set(terrain, null);\n        }\n        for (let key in this.MARKERSBYID) {\n            this.markerfiles.set(key, this.PATH_MARKERS + this.MARKERSBYID[key]);\n        }\n        this.markerimages = new Map();\n        for (let markerid of this.markerfiles.keys()) {\n            this.markerimages.set(markerid, null);\n        }\n        for (let key in this.EXTRAIMGS) {\n            this.extrafiles.set(key, this.EXTRAIMGS[key]);\n        }\n        this.extraimages = new Map();\n        for (let fileid of this.extrafiles.keys()) {\n            this.extraimages.set(fileid, null);\n        }\n        // LOADING ASSETS\n        let ui = this;\n        for (let terrain of this.terraintiles.keys()) {\n            let imageObj = new Image();\n            imageObj.onload = function () {\n                ui.tileimages.set(terrain, imageObj);\n                ui.checkReadyRender(callback);\n            };\n            imageObj.src = this.terraintiles.get(terrain);\n        }\n        for (let markerid of this.markerfiles.keys()) {\n            let imageObj = new Image();\n            imageObj.onload = function () {\n                ui.markerimages.set(markerid, imageObj);\n                ui.checkReadyRender(callback);\n            };\n            imageObj.src = this.markerfiles.get(markerid);\n        }\n        for (let fileid of this.extrafiles.keys()) {\n            let imageObj = new Image();\n            imageObj.onload = function () {\n                ui.extraimages.set(fileid, imageObj);\n                ui.checkReadyRender(callback);\n            };\n            imageObj.src = this.extrafiles.get(fileid);\n        }\n    }\n    checkReadyRender(callback) {\n        for (let terrain of this.tileimages.keys()) {\n            if (this.tileimages.get(terrain) == null) {\n                // console.log(\"missing maptile\", terrain, \"wait\");\n                return;\n            }\n        }\n        for (let markerid of this.markerimages.keys()) {\n            if (this.markerimages.get(markerid) == null) {\n                // console.log(\"missing mapmarker\", markerid, \"wait\");\n                return;\n            }\n        }\n        for (let fileid of this.extraimages.keys()) {\n            if (this.extraimages.get(fileid) == null) {\n                // console.log(\"missing mapmarker\", markerid, \"wait\");\n                return;\n            }\n        }\n        callback();\n    }\n    renderView(pos, vector) {\n        // console.log(\"rendering step \", this.journeyscene.stepid);\n        // const vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n        // console.log(\"checking step view in dir \", vector, \"from\", this.journeyscene.getCurrentCoordinates().getCoords());\n        const FOV = 90;\n        let rect = this.renderview.nativeElement.getBoundingClientRect();\n        console.log(\"RECT:\", rect);\n        const VPW = this.renderview.nativeElement.clientWidth;\n        const VPH = this.renderview.nativeElement.clientHeight;\n        const PANWIDTH = VPW / (FOV / 360);\n        console.log(\"using fov\", FOV, \"on \" + VPW + \"*\" + VPH + \": pan to \" + PANWIDTH + \"px\");\n        const MAXDIST = 9;\n        let rendergrid = this.getRenderGrid(pos, vector, MAXDIST);\n        let stage = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Stage({\n            container: this.renderview.nativeElement.id,\n            width: VPW,\n            height: VPH,\n        });\n        // console.log(rendergrid);\n        // NOTE: following works ONLY with 90 FOV\n        // also we are actually half step inside each tile but since dist and angle stay the same we ignore\n        const HCENTER = VPW * 0.5;\n        const VCENTER = VPH * 0.4;\n        const PHEIGHT = VPH - VCENTER;\n        let tilelayer = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Layer({});\n        stage.add(tilelayer);\n        // BGR + CUT\n        let bgrimg = this.extraimages.get(\"skybgr\");\n        // let filename = terraintiles.get(terrain);\n        let bgr = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Image({\n            image: bgrimg,\n            x: 0,\n            y: 0,\n            width: VPW,\n            height: VPH * 0.8\n        });\n        tilelayer.add(bgr);\n        let bgrcut = VCENTER + PHEIGHT / MAXDIST;\n        let rect1 = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Rect({\n            x: 0,\n            y: bgrcut,\n            width: VPW,\n            height: VPH - (bgrcut),\n            fill: 'white',\n        });\n        // add the shape to the layer\n        tilelayer.add(rect1);\n        for (let gp of rendergrid) {\n            // field size at dist:\n            // 1: 1, 2: 3, 3: 5, 4: 7\n            // y = x + (x-1)\n            let fsize = gp.dist + (gp.dist - 1);\n            let gsize = VPH / fsize;\n            gsize = VPW / fsize;\n            // let relpos = gp.angrel - 0.5;\n            // let hpixpos = HCENTER + ();\n            let hpixpos = gp.angrel * VPW - (gsize * 0.5);\n            hpixpos = VPW - hpixpos - gsize; // fix mirroring\n            let vpixpos = (VCENTER + PHEIGHT / gp.dist) - gsize;\n            let terrain = this.worldmap.getTerrainAt(gp.coords[0], gp.coords[1]);\n            let loc = this.worldmap.getLocationAt(gp.coords);\n            if (terrain == null && loc == null) {\n                continue;\n            }\n            let tileimg;\n            if (terrain != null) {\n                tileimg = this.tileimages.get(terrain);\n                // let filename = terraintiles.get(terrain);\n                let tile = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Image({\n                    image: tileimg,\n                    x: hpixpos,\n                    y: vpixpos,\n                    width: gsize,\n                    height: gsize\n                });\n                tilelayer.add(tile);\n            }\n            if (loc != null) {\n                tileimg = this.markerimages.get(loc.loctype);\n                // let filename = terraintiles.get(terrain);\n                let tile = new konva__WEBPACK_IMPORTED_MODULE_1___default.a.Image({\n                    image: tileimg,\n                    x: hpixpos,\n                    y: vpixpos,\n                    width: gsize,\n                    height: gsize\n                });\n                tilelayer.add(tile);\n            }\n        }\n        tilelayer.batchDraw();\n        function parchifyWhite(imageData) {\n            // let ctx = canvas.getContext('2d');\n            // let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n            let nPixels = imageData.data.length;\n            for (let i = 0; i < nPixels; i += 4) {\n                let r = imageData.data[i];\n                let g = imageData.data[i + 1];\n                let b = imageData.data[i + 2];\n                let a = imageData.data[i + 3];\n                if (a > 200) {\n                    // using brightness (0.21  R) + (0.72  G) + (0.07  B)\n                    // instead of average ((r + g + b) / 3)\n                    imageData.data[i + 3] = 255 - ((0.21 * r) + (0.72 * g) + (0.07 * b));\n                }\n            }\n            //\n            // for (let i = 3; i < nPixels; i += 4) {\n            // \tif (imageData.data[i] > 0) {\n            // \t\timageData.data[i] = 255;\n            // \t}\n            // }\n            // ctx.clearRect(0, 0, canvas.width, canvas.height);\n            // ctx.putImageData(imageData, 0, 0);\n            // return canvas;\n        }\n        tilelayer.cache();\n        tilelayer.filters([parchifyWhite]);\n        // tilelayer.filters([Konva.Filters.Brighten]);\n        // tilelayer.brightness(0.8);\n        tilelayer.batchDraw();\n    }\n    getRenderGrid(pov, vector, maxdist) {\n        // const pov = this.journeyscene.getCurrentCoordinates();\n        const povX = pov.x;\n        const povY = pov.y;\n        // const vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n        const angle = WalkRenderer.calcAngleDegreesEast(vector[0], vector[1]);\n        // base angle is EAST\n        const FOV = 90;\n        let angmin = ((angle - FOV / 2) + 360) % 360;\n        let angmax = ((angle + FOV / 2) + 360) % 360;\n        let angflip = angmin > angmax;\n        if (angflip) {\n            angmax += 360;\n        }\n        let angv = (angle + 360) % 360;\n        let angdiff = angmax - angmin;\n        console.log(\"dir angle is \", angv, \"checking between \", angmin, angmax);\n        let totvis = 0;\n        let tfrom = new Date().getTime();\n        let rendergrid = [];\n        for (let x = povX - maxdist; x <= povX + maxdist; x++) {\n            for (let y = povY - maxdist; y <= povY + maxdist; y++) {\n                if (x === povX && y === povY) {\n                    continue;\n                }\n                let deltaX = x - povX;\n                let deltaY = y - povY;\n                let angr = WalkRenderer.calcAngleDegreesEast(deltaX, deltaY);\n                angr = (angr + 360) % 360;\n                if (angflip && angr <= 45) {\n                    angr += 360;\n                }\n                if (angmin <= angr && angr <= angmax) {\n                    totvis++;\n                    let angrel = (angmax - angr) / FOV;\n                    let dist = Math.sqrt((Math.pow(deltaX, 2)) + (Math.pow(deltaY, 2)));\n                    if (dist <= maxdist) {\n                        // we are using a SQUARE box to get the points\n                        // console.log(x, y, angr);\n                        rendergrid.push({ coords: [x, y], angrel: angrel, dist: dist });\n                    }\n                }\n            }\n        }\n        let tto = new Date().getTime();\n        console.log(\"tot vis tiles\", totvis, tto - tfrom);\n        // sorting far to close THEN left to right, second sort is not strictily necessary\n        rendergrid.sort(function (a, b) {\n            // if (a.dist !== b.dist)\n            // {\n            // \treturn b.dist - a.dist;\n            // }\n            // else {\n            // \treturn a.angrel - b.angrel;\n            // }\n            return b.dist - a.dist;\n        });\n        return rendergrid;\n    }\n    static calcAngleDegreesEast(x, y) {\n        return Math.atan2(y, x) * 180 / Math.PI;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/passage-through/passage-through.component.scss\":\n/*!***********************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/passage-through/passage-through.component.scss ***!\n  \\***********************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\".trailview {\\n  position: fixed;\\n  left: 1vw;\\n  right: 1vw;\\n  top: 1vw;\\n  height: 48vh;\\n  border: 2px dashed black;\\n}\\n\\n.trailcontext {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 48vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n.trailcontrols {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9wYXNzYWdlLXRocm91Z2gvcGFzc2FnZS10aHJvdWdoLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvcGFzc2FnZS10aHJvdWdoL3Bhc3NhZ2UtdGhyb3VnaC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxTQUFBO0VBQ0EsVUFBQTtFQUNBLFFBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7QUNBRDs7QURHQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDRkQ7O0FETUE7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ0xEIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3Bhc3NhZ2UtdGhyb3VnaC9wYXNzYWdlLXRocm91Z2guY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudHJhaWx2aWV3XG57XG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0bGVmdDpcdFx0XHQxdnc7XG5cdHJpZ2h0Olx0XHRcdDF2dztcblx0dG9wOlx0XHRcdDF2dztcblx0aGVpZ2h0Olx0XHRcdDQ4dmg7XG5cdGJvcmRlcjpcdFx0XHQycHggZGFzaGVkIGJsYWNrO1xufVxuXG4udHJhaWxjb250ZXh0XG57XG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0bGVmdDpcdFx0XHQwO1xuXHRyaWdodDpcdFx0XHQwO1xuXHRib3R0b206XHRcdFx0MDtcblx0aGVpZ2h0Olx0XHRcdDQ4dmg7XG5cdGZvbnQtc2l6ZTpcdFx0OHZoO1xuXG5cdHRleHQtYWxpZ246XHRcdGNlbnRlcjtcbn1cblxuXG4udHJhaWxjb250cm9sc1xue1xuXHRib3JkZXI6XHRcdFx0MXB4IHNvbGlkIGJsYWNrO1xuXHRwYWRkaW5nOlx0XHQycHQgOHB0O1xuXG5cdGZvbnQtc2l6ZTpcdFx0NHZoO1xufVxuIiwiLnRyYWlsdmlldyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMXZ3O1xuICByaWdodDogMXZ3O1xuICB0b3A6IDF2dztcbiAgaGVpZ2h0OiA0OHZoO1xuICBib3JkZXI6IDJweCBkYXNoZWQgYmxhY2s7XG59XG5cbi50cmFpbGNvbnRleHQge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG4gIGhlaWdodDogNDh2aDtcbiAgZm9udC1zaXplOiA4dmg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnRyYWlsY29udHJvbHMge1xuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgcGFkZGluZzogMnB0IDhwdDtcbiAgZm9udC1zaXplOiA0dmg7XG59Il19 */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/passage-through/passage-through.component.ts\":\n/*!*********************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/passage-through/passage-through.component.ts ***!\n  \\*********************************************************************************/\n/*! exports provided: PassageThroughComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PassageThroughComponent\", function() { return PassageThroughComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n\n\n\n\nlet PassageThroughComponent = class PassageThroughComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_2__[\"SceneRenderer\"] {\n    constructor(sceneref) {\n        super(sceneref);\n        this.sceneref = sceneref;\n        this.trail = this.sceneref.scene;\n    }\n    isTrailing() {\n        return this.trail.progress > -1 && this.trail.progress < this.trail.passage.length();\n    }\n    journeyOnwards() {\n        this.trail.step();\n    }\n    leaveTrail() {\n        this.trail.leaving = true;\n        this.sceneref.triggerSceneCheck();\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n    }\n};\nPassageThroughComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__[\"SceneRef\"] }\n];\nPassageThroughComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-passage-through',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./passage-through.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/passage-through/passage-through.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./passage-through.component.scss */ \"./src/app/storyteller/scenes/passage-through/passage-through.component.scss\")).default]\n    })\n], PassageThroughComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/roaming-step/roaming-step.component.scss\":\n/*!*****************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/roaming-step/roaming-step.component.scss ***!\n  \\*****************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#journeyrender {\\n  position: fixed;\\n  top: 8px;\\n  left: 8px;\\n  right: 8px;\\n  bottom: 30vh;\\n  border: 1px dashed black;\\n  overflow: auto;\\n}\\n\\n#viewrender {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n#journeyinfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 28vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\nbutton.journeychoice {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9yb2FtaW5nLXN0ZXAvcm9hbWluZy1zdGVwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvcm9hbWluZy1zdGVwL3JvYW1pbmctc3RlcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLFVBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7RUFDQSxjQUFBO0FDQUQ7O0FER0E7RUFFQyxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7QUNERDs7QURJQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDSEQ7O0FET0E7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ05EIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3JvYW1pbmctc3RlcC9yb2FtaW5nLXN0ZXAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjam91cm5leXJlbmRlclxue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHQ4cHg7XG5cdGxlZnQ6XHRcdFx0OHB4O1xuXHRyaWdodDpcdFx0XHQ4cHg7XG5cdGJvdHRvbTpcdFx0XHQzMHZoO1xuXHRib3JkZXI6XHRcdFx0MXB4IGRhc2hlZCBibGFjaztcblx0b3ZlcmZsb3c6XHRcdGF1dG87XG59XG5cbiN2aWV3cmVuZGVyXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblx0dG9wOlx0XHRcdDA7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG59XG5cbiNqb3VybmV5aW5mb1xue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdGhlaWdodDpcdFx0XHQyOHZoO1xuXHRmb250LXNpemU6XHRcdDh2aDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG59XG5cblxuYnV0dG9uLmpvdXJuZXljaG9pY2Vcbntcblx0Ym9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0cGFkZGluZzpcdFx0MnB0IDhwdDtcblxuXHRmb250LXNpemU6XHRcdDR2aDtcbn1cbiIsIiNqb3VybmV5cmVuZGVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDhweDtcbiAgbGVmdDogOHB4O1xuICByaWdodDogOHB4O1xuICBib3R0b206IDMwdmg7XG4gIGJvcmRlcjogMXB4IGRhc2hlZCBibGFjaztcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG5cbiN2aWV3cmVuZGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbiNqb3VybmV5aW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiAyOHZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5idXR0b24uam91cm5leWNob2ljZSB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBwYWRkaW5nOiAycHQgOHB0O1xuICBmb250LXNpemU6IDR2aDtcbn0iXX0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/roaming-step/roaming-step.component.ts\":\n/*!***************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/roaming-step/roaming-step.component.ts ***!\n  \\***************************************************************************/\n/*! exports provided: RoamingStepComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RoamingStepComponent\", function() { return RoamingStepComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _lib_walk_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/walk-renderer */ \"./src/app/storyteller/scenes/lib/walk-renderer.ts\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n\n\n\n\n\nlet RoamingStepComponent = class RoamingStepComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_4__[\"SceneRenderer\"] {\n    constructor(sceneref) {\n        super(sceneref);\n        this.sceneref = sceneref;\n        this.roamingscene = this.sceneref.scene;\n        console.log(\"roaming scene: \", this.roamingscene);\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n        this.viewrenderer = new _lib_walk_renderer__WEBPACK_IMPORTED_MODULE_2__[\"WalkRenderer\"](this.roamingscene.game.worldmap, this.renderview);\n        let ui = this;\n        this.viewrenderer.loadAssets(function () {\n            ui.renderStep();\n        });\n    }\n    renderStep() {\n        const vector = this.roamingscene.direction;\n        this.viewrenderer.renderView(this.roamingscene.current, vector);\n    }\n    getDirectionDescription() {\n        let vector = this.roamingscene.direction;\n        let dirstring = \"\";\n        if (vector[1] > 0) {\n            dirstring += \"South\";\n        }\n        else if (vector[1] < 0) {\n            dirstring += \"North\";\n        }\n        if (vector[0] > 0) {\n            dirstring += \"East\";\n        }\n        else if (vector[0] < 0) {\n            dirstring += \"West\";\n        }\n        return dirstring;\n    }\n    getDayOfTravel() {\n        return this.roamingscene.steps + 1;\n    }\n    moveTurnLeft() {\n        this.roamingscene.changeDirection(-1);\n        this.renderStep();\n    }\n    moveTurnRight() {\n        this.roamingscene.changeDirection(1);\n        this.renderStep();\n    }\n    moveForward() {\n        this.roamingscene.stepForward();\n        this.roamingscene.game.hero.setCoordinates(this.roamingscene.current);\n        if (!this.roamingscene.sceneFinished()) {\n            this.renderStep();\n        }\n        else {\n            this.sceneref.triggerSceneCheck();\n        }\n    }\n    actionSetCamp() {\n    }\n    showMap() {\n        // tba\n    }\n};\nRoamingStepComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_3__[\"SceneRef\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"renderholder\", { static: false })\n], RoamingStepComponent.prototype, \"renderholder\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"renderview\", { static: false })\n], RoamingStepComponent.prototype, \"renderview\", void 0);\nRoamingStepComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-roaming-step',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./roaming-step.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/roaming-step/roaming-step.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./roaming-step.component.scss */ \"./src/app/storyteller/scenes/roaming-step/roaming-step.component.scss\")).default]\n    })\n], RoamingStepComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/scene-renderer.ts\":\n/*!******************************************************!*\\\n  !*** ./src/app/storyteller/scenes/scene-renderer.ts ***!\n  \\******************************************************/\n/*! exports provided: SceneRenderer */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneRenderer\", function() { return SceneRenderer; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n\nclass SceneRenderer {\n    constructor(sceneref) {\n        this.sceneref = sceneref;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/town-ui/town-ui.component.scss\":\n/*!*******************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/town-ui/town-ui.component.scss ***!\n  \\*******************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#towninfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 48vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n.movecontrols {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy90b3duLXVpL3Rvd24tdWkuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy90b3duLXVpL3Rvd24tdWkuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFQyxlQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7RUFFQSxrQkFBQTtBQ0REOztBREtBO0VBRUMsdUJBQUE7RUFDQSxnQkFBQTtFQUVBLGNBQUE7QUNKRCIsImZpbGUiOiJzcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy90b3duLXVpL3Rvd24tdWkuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjdG93bmluZm9cbntcblx0cG9zaXRpb246XHRcdGZpeGVkO1xuXHRsZWZ0Olx0XHRcdDA7XG5cdHJpZ2h0Olx0XHRcdDA7XG5cdGJvdHRvbTpcdFx0XHQwO1xuXHRoZWlnaHQ6XHRcdFx0NDh2aDtcblx0Zm9udC1zaXplOlx0XHQ4dmg7XG5cblx0dGV4dC1hbGlnbjpcdFx0Y2VudGVyO1xufVxuXG5cbi5tb3ZlY29udHJvbHNcbntcblx0Ym9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0cGFkZGluZzpcdFx0MnB0IDhwdDtcblxuXHRmb250LXNpemU6XHRcdDR2aDtcbn1cbiIsIiN0b3duaW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiA0OHZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4ubW92ZWNvbnRyb2xzIHtcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gIHBhZGRpbmc6IDJwdCA4cHQ7XG4gIGZvbnQtc2l6ZTogNHZoO1xufSJdfQ== */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/town-ui/town-ui.component.ts\":\n/*!*****************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/town-ui/town-ui.component.ts ***!\n  \\*****************************************************************/\n/*! exports provided: TownUIComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TownUIComponent\", function() { return TownUIComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n/* harmony import */ var _rpg_engine_scenes_town_nav__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../rpg-engine/scenes/town-nav */ \"./src/app/rpg-engine/scenes/town-nav.ts\");\n\n\n\n\n\nlet TownUIComponent = class TownUIComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_3__[\"SceneRenderer\"] {\n    constructor(sceneref) {\n        super(sceneref);\n        this.sceneref = sceneref;\n        this.townscene = this.sceneref.scene;\n        console.log(\"town info: \", JSON.stringify(this.townscene.town));\n    }\n    ngOnInit() {\n    }\n    ngAfterViewInit() {\n    }\n    leaveTown() {\n        this.townscene.locpoint = _rpg_engine_scenes_town_nav__WEBPACK_IMPORTED_MODULE_4__[\"TownNav\"].LOC_LEAVE;\n        this.sceneref.triggerSceneCheck();\n    }\n};\nTownUIComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__[\"SceneRef\"] }\n];\nTownUIComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-town-ui',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./town-ui.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/town-ui/town-ui.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./town-ui.component.scss */ \"./src/app/storyteller/scenes/town-ui/town-ui.component.scss\")).default]\n    })\n], TownUIComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/world-map-view/world-map-view.component.scss\":\n/*!*********************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/world-map-view/world-map-view.component.scss ***!\n  \\*********************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#mapholder {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy93b3JsZC1tYXAtdmlldy93b3JsZC1tYXAtdmlldy5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3dvcmxkLW1hcC12aWV3L3dvcmxkLW1hcC12aWV3LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUMsa0JBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0FDQUQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvd29ybGQtbWFwLXZpZXcvd29ybGQtbWFwLXZpZXcuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjbWFwaG9sZGVyXG57XG5cdHBvc2l0aW9uOlx0YWJzb2x1dGU7XG5cdHRvcDpcdFx0MDtcblx0bGVmdDpcdFx0MDtcblx0cmlnaHQ6XHRcdDA7XG5cdGJvdHRvbTpcdFx0MDtcbn1cblxuIiwiI21hcGhvbGRlciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xufSJdfQ== */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/scenes/world-map-view/world-map-view.component.ts\":\n/*!*******************************************************************************!*\\\n  !*** ./src/app/storyteller/scenes/world-map-view/world-map-view.component.ts ***!\n  \\*******************************************************************************/\n/*! exports provided: WorldMapViewComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WorldMapViewComponent\", function() { return WorldMapViewComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../scene-ui/scene-ref */ \"./src/app/scene-ui/scene-ref.ts\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! konva */ \"./node_modules/konva/lib/index.js\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(konva__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _scene_renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../scene-renderer */ \"./src/app/storyteller/scenes/scene-renderer.ts\");\n\n\n\n\n\nlet WorldMapViewComponent = class WorldMapViewComponent extends _scene_renderer__WEBPACK_IMPORTED_MODULE_4__[\"SceneRenderer\"] {\n    constructor(sceneref) {\n        super(sceneref);\n        this.sceneref = sceneref;\n        this.scenecheck = new _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"EventEmitter\"]();\n        this.TILESIZE = 48;\n        this.TILESBYTERRRAIN = {\n            \"M\": \"worldmaptile_mountains_trans.png\",\n            \"H\": \"worldmaptile_hills_trans.png\",\n            \"F\": \"worldmaptile_woods_trans.png\",\n            \"P\": \"worldmaptile_empty.png\",\n        };\n        this.PATH_TILES = \"assets/graph/maptiles/\";\n        this.MARKERSBYID = {\n            \"towns\": \"worldmapmarker_castle_trans.png\",\n            \"passes\": \"worldmapmarker_mountainpass_trans.png\",\n            \"hero\": \"worldmapmarker_hero_trans.png\",\n        };\n        this.PATH_MARKERS = \"assets/graph/mapmarkers/\";\n        console.log(\"constructor w sref game \", this.sceneref.game);\n        this.mapscene = this.sceneref.scene;\n        this.prepareAssetsHolders();\n    }\n    prepareAssetsHolders() {\n        this.terraintiles = new Map();\n        this.tileimages = new Map();\n        this.markerfiles = new Map();\n        this.markerimages = new Map();\n        for (let key in this.TILESBYTERRRAIN) {\n            this.terraintiles.set(key, this.PATH_TILES + this.TILESBYTERRRAIN[key]);\n        }\n        this.tileimages = new Map();\n        for (let terrain of this.terraintiles.keys()) {\n            this.tileimages.set(terrain, null);\n        }\n        for (let key in this.MARKERSBYID) {\n            this.markerfiles.set(key, this.PATH_MARKERS + this.MARKERSBYID[key]);\n        }\n        this.markerimages = new Map();\n        for (let markerid of this.markerfiles.keys()) {\n            this.markerimages.set(markerid, null);\n        }\n    }\n    ngOnInit() {\n        console.log(\"starting worldmap w sref game \", this.sceneref);\n        this.worldmap = this.sceneref.game.worldmap;\n        this.loadAssets();\n    }\n    ngAfterViewInit() {\n        // this.loadAssets();\n    }\n    loadAssets() {\n        let ui = this;\n        for (let terrain of this.terraintiles.keys()) {\n            let imageObj = new Image();\n            imageObj.onload = function () {\n                ui.tileimages.set(terrain, imageObj);\n                ui.checkReadyRender();\n            };\n            imageObj.src = this.terraintiles.get(terrain);\n        }\n        for (let markerid of this.markerfiles.keys()) {\n            let imageObj = new Image();\n            imageObj.onload = function () {\n                ui.markerimages.set(markerid, imageObj);\n                ui.checkReadyRender();\n            };\n            imageObj.src = this.markerfiles.get(markerid);\n        }\n    }\n    checkReadyRender() {\n        for (let terrain of this.tileimages.keys()) {\n            if (this.tileimages.get(terrain) == null) {\n                // console.log(\"missing maptile\", terrain, \"wait\");\n                return;\n            }\n        }\n        for (let markerid of this.markerimages.keys()) {\n            if (this.markerimages.get(markerid) == null) {\n                // console.log(\"missing mapmarker\", markerid, \"wait\");\n                return;\n            }\n        }\n        // console.log(\"ready on all terrains\");\n        this.initRender();\n    }\n    initRender() {\n        const vpw = this.container.nativeElement.offsetWidth;\n        const vph = this.container.nativeElement.offsetHeight;\n        this.TILESIZE = Math.min(vpw, vph) / 18;\n        let tilesX = this.worldmap.sizeX;\n        let tilesY = this.worldmap.sizeY;\n        let mapWidth = tilesX * this.TILESIZE;\n        let mapHeight = tilesY * this.TILESIZE;\n        // console.log(this.TILESIZE, tilesX, tilesY, mapWidth, mapHeight);\n        let stage = new konva__WEBPACK_IMPORTED_MODULE_3___default.a.Stage({\n            container: \"mapholder\",\n            width: mapWidth,\n            height: mapHeight,\n        });\n        let container = this.container.nativeElement;\n        let contwidth = container.offsetWidth;\n        let contheight = container.offsetHeight;\n        // console.log(\"stage \", contwidth, contheight);\n        let bound_sx = -(mapWidth - contwidth);\n        let bound_dx = 0;\n        let bound_top = -(mapHeight - contheight);\n        let bound_bottom = 0;\n        // console.log(\"bounds\", bound_sx, bound_top, bound_dx, bound_bottom);\n        let tilelayer = new konva__WEBPACK_IMPORTED_MODULE_3___default.a.Layer({\n            draggable: true,\n            dragBoundFunc: function (pos) {\n                // console.log(\"tilelayer at\", tilelayer.x(), tilelayer.y());\n                // console.log(\"mouse at\", pos.x, pos.y);\n                let x = Math.min(Math.max(bound_sx, pos.x), bound_dx);\n                let y = Math.min(Math.max(bound_top, pos.y), bound_bottom);\n                return ({\n                    x: x,\n                    y: y\n                });\n            }\n        });\n        stage.add(tilelayer);\n        // let ts_a = new Date();\n        for (let x = 0; x < tilesX; x++) {\n            for (let y = 0; y < tilesY; y++) {\n                let terrain = this.worldmap.getTerrainAt(x, y);\n                // console.log(x, y, terrain);\n                if (terrain != null) {\n                    // let imageObj = new Image();\n                    // imageObj.src = terraintiles.get(terrain);\n                    // let filename = terraintiles.get(terrain);\n                    let tile = new konva__WEBPACK_IMPORTED_MODULE_3___default.a.Image({\n                        image: this.tileimages.get(terrain),\n                        x: x * this.TILESIZE,\n                        y: y * this.TILESIZE,\n                        width: this.TILESIZE,\n                        height: this.TILESIZE,\n                    });\n                    tilelayer.add(tile);\n                    // console.log(\"added \", tile, x * this.TILESIZE, y * this.TILESIZE);\n                }\n            }\n        }\n        // create location markers\n        let widget = this;\n        let locs = this.worldmap.getAllLocations();\n        for (let loc of locs) {\n            // console.log(\"adding location to map: \", loc, \"w coords\", loc[\"coords\"]);\n            // let coords = loc[\"coords\"];\n            // let loctype = loc[\"loctype\"];\n            let marker = new konva__WEBPACK_IMPORTED_MODULE_3___default.a.Image({\n                image: this.markerimages.get(loc.loctype),\n                x: loc.pos.x * this.TILESIZE,\n                y: loc.pos.y * this.TILESIZE,\n                width: this.TILESIZE,\n                height: this.TILESIZE,\n            });\n            // console.log(\"creating marker at\", loc.pos.x, loc.pos.y)\n            tilelayer.add(marker);\n            marker.on(\"click\", function (ev) {\n                console.log(\"marker click \", ev, \"on\", this, \"for loc\", loc);\n                widget.chooseDestination(loc);\n                ev.cancelBubble = true;\n            });\n        }\n        // create hero marker\n        let game = this.sceneref.game;\n        let playerpos = game.hero.pos.getCoords();\n        let imageref = this.markerimages.get(\"hero\");\n        // let imagepath = this.markerfiles.get(\"hero\");\n        let marker = new konva__WEBPACK_IMPORTED_MODULE_3___default.a.Image({\n            image: imageref,\n            x: playerpos[0] * this.TILESIZE,\n            y: playerpos[1] * this.TILESIZE,\n            width: this.TILESIZE,\n            height: this.TILESIZE,\n        });\n        marker.on(\"click\", function (ev) {\n            // console.log(\"marker click \", ev, \"on\", this, \"for loc\", loc);\n            let loc = game.worldmap.getLocationAt(playerpos);\n            if (!!loc) {\n                widget.chooseDestination(loc);\n                ev.cancelBubble = true;\n            }\n        });\n        tilelayer.add(marker);\n        tilelayer.batchDraw();\n        // loclayer.batchDraw();\n        // console.log(\"redraw\");\n        // console.log(\"mapdom size\", this.mapdom.nativeElement.offsetHeight, this.mapdom.nativeElement.offsetWidth);\n        // console.log(\"container size\", this.container.nativeElement.offsetHeight, this.container.nativeElement.offsetWidth);\n        let shiftX = playerpos[0] * this.TILESIZE - this.container.nativeElement.offsetWidth / 2;\n        let shiftY = playerpos[1] * this.TILESIZE - this.container.nativeElement.offsetHeight / 2;\n        tilelayer.setAbsolutePosition({ x: -shiftX, y: -shiftY });\n        // console.log(\"map ready\");\n    }\n    onClose() {\n        this.sceneref.close('BYE WORLD MAP');\n    }\n    chooseDestination(destination) {\n        console.log(\"chose destination \", destination, this.sceneref.scene);\n        /*\n        Place location =  caller.game.map.getPlace(vtag);\n        Position locpos = location.getCoords();\n\n        if ((locpos.x != heropos.x) || (locpos.y != heropos.y))\n        {\n            caller.startScene(new Journey(caller.game, caller.game.map.getPlace((String)view.getTag())));\n        }\n        else\n        {\n            // back to town gate screen, same as back\n            caller.startScene(new TownNav(caller.game));\n        }\n        */\n        // TODO: handle back to current\n        this.mapscene.setDestination(destination);\n        this.sceneref.triggerSceneCheck();\n    }\n};\nWorldMapViewComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ref__WEBPACK_IMPORTED_MODULE_2__[\"SceneRef\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"mapview\", { static: false })\n], WorldMapViewComponent.prototype, \"mapdom\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"mapholder\", { static: false })\n], WorldMapViewComponent.prototype, \"container\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Output\"])()\n], WorldMapViewComponent.prototype, \"scenecheck\", void 0);\nWorldMapViewComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-world-map-view',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./world-map-view.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/scenes/world-map-view/world-map-view.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./world-map-view.component.scss */ \"./src/app/storyteller/scenes/world-map-view/world-map-view.component.scss\")).default]\n    })\n], WorldMapViewComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/storyteller.component.scss\":\n/*!********************************************************!*\\\n  !*** ./src/app/storyteller/storyteller.component.scss ***!\n  \\********************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"#st-page {\\n  background-image: url(\\\"/assets/ui/temporaryparchment.jpg\\\");\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3N0b3J5dGVsbGVyLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zdG9yeXRlbGxlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLDBEQUFBO0FDQUQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeXRlbGxlci9zdG9yeXRlbGxlci5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNzdC1wYWdlXG57XG5cdGJhY2tncm91bmQtaW1hZ2U6IHVybChcIi9hc3NldHMvdWkvdGVtcG9yYXJ5cGFyY2htZW50LmpwZ1wiKTtcbn1cbiIsIiNzdC1wYWdlIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy91aS90ZW1wb3JhcnlwYXJjaG1lbnQuanBnXCIpO1xufSJdfQ== */\");\n\n/***/ }),\n\n/***/ \"./src/app/storyteller/storyteller.component.ts\":\n/*!******************************************************!*\\\n  !*** ./src/app/storyteller/storyteller.component.ts ***!\n  \\******************************************************/\n/*! exports provided: StorytellerComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StorytellerComponent\", function() { return StorytellerComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _scene_ui_scene_ui_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../scene-ui/scene-ui.service */ \"./src/app/scene-ui/scene-ui.service.ts\");\n/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common/http */ \"./node_modules/@angular/common/fesm2015/http.js\");\n/* harmony import */ var _rpg_engine_wander_game__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../rpg-engine/wander-game */ \"./src/app/rpg-engine/wander-game.ts\");\n/* harmony import */ var _scenes_world_map_view_world_map_view_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./scenes/world-map-view/world-map-view.component */ \"./src/app/storyteller/scenes/world-map-view/world-map-view.component.ts\");\n/* harmony import */ var _rpg_engine_scenes_journey_departure__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../rpg-engine/scenes/journey-departure */ \"./src/app/rpg-engine/scenes/journey-departure.ts\");\n/* harmony import */ var _rpg_engine_scenes_journey__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../rpg-engine/scenes/journey */ \"./src/app/rpg-engine/scenes/journey.ts\");\n/* harmony import */ var _scenes_journey_step_journey_step_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./scenes/journey-step/journey-step.component */ \"./src/app/storyteller/scenes/journey-step/journey-step.component.ts\");\n/* harmony import */ var _rpg_engine_world_locs_Town__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../rpg-engine/world/locs/Town */ \"./src/app/rpg-engine/world/locs/Town.ts\");\n/* harmony import */ var _rpg_engine_scenes_town_nav__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../rpg-engine/scenes/town-nav */ \"./src/app/rpg-engine/scenes/town-nav.ts\");\n/* harmony import */ var _scenes_town_ui_town_ui_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./scenes/town-ui/town-ui.component */ \"./src/app/storyteller/scenes/town-ui/town-ui.component.ts\");\n/* harmony import */ var _rpg_engine_scenes_roaming__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../rpg-engine/scenes/roaming */ \"./src/app/rpg-engine/scenes/roaming.ts\");\n/* harmony import */ var _scenes_roaming_step_roaming_step_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./scenes/roaming-step/roaming-step.component */ \"./src/app/storyteller/scenes/roaming-step/roaming-step.component.ts\");\n/* harmony import */ var _rpg_engine_scenes_passage_trail__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../rpg-engine/scenes/passage-trail */ \"./src/app/rpg-engine/scenes/passage-trail.ts\");\n/* harmony import */ var _scenes_passage_through_passage_through_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./scenes/passage-through/passage-through.component */ \"./src/app/storyteller/scenes/passage-through/passage-through.component.ts\");\n/* harmony import */ var _rpg_engine_world_locs_TerrainPass__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../rpg-engine/world/locs/TerrainPass */ \"./src/app/rpg-engine/world/locs/TerrainPass.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nlet StorytellerComponent = class StorytellerComponent {\n    constructor(sceneui, http) {\n        this.sceneui = sceneui;\n        this.http = http;\n    }\n    ngOnInit() {\n        this.sceneui.bindStoryTellerUI(this);\n        this.loadGameData();\n    }\n    loadGameData() {\n        let stui = this;\n        _rpg_engine_wander_game__WEBPACK_IMPORTED_MODULE_4__[\"WanderGame\"].loadGame(this.http, function (game) {\n            stui.game = game;\n            stui.checkReadyGame();\n        });\n    }\n    checkReadyGame() {\n        console.log(\"running Wander Game \", this.game);\n        this.checkUpdateSceneRender();\n    }\n    getLocationSensitiveScene() {\n        let ppos = this.game.hero.pos;\n        let place = this.game.worldmap.getLocationAt(ppos.getCoords());\n        console.log(\"place is town? \", place instanceof _rpg_engine_world_locs_Town__WEBPACK_IMPORTED_MODULE_9__[\"Town\"]);\n        let scene = null;\n        if (place instanceof _rpg_engine_world_locs_Town__WEBPACK_IMPORTED_MODULE_9__[\"Town\"]) {\n            scene = new _rpg_engine_scenes_town_nav__WEBPACK_IMPORTED_MODULE_10__[\"TownNav\"](this.game, place);\n        }\n        else if (place instanceof _rpg_engine_world_locs_TerrainPass__WEBPACK_IMPORTED_MODULE_16__[\"TerrainPass\"]) {\n            scene = new _rpg_engine_scenes_passage_trail__WEBPACK_IMPORTED_MODULE_14__[\"PassageTrail\"](this.game, place);\n        }\n        else {\n            // if all fails, go to map\n            scene = new _rpg_engine_scenes_journey_departure__WEBPACK_IMPORTED_MODULE_6__[\"JourneyDeparture\"](this.game);\n        }\n        return scene;\n    }\n    checkUpdateSceneRender() {\n        console.log(\"checkUpdateSceneRender\");\n        let scene = this.game.getActiveScene();\n        console.log(\"checking update on scene \", scene);\n        if (!!scene && scene.sceneFinished()) {\n            console.log(\"having scene finisher\");\n            scene = scene.getFollowingScene();\n            console.log(\"following scene is \", scene);\n        }\n        if (!scene) {\n            scene = this.getLocationSensitiveScene();\n        }\n        this.game.setActiveScene(scene);\n        console.log(\"using scene \", scene);\n        let renderer = this.getSceneRenderer(scene);\n        console.log(\"opening renderer \", renderer, \"for scene\", scene);\n        let ref = this.sceneui.open(renderer, scene);\n        console.log(\"opened as sceneref\", ref);\n        ref.afterClosed.subscribe(result => {\n            console.log('Closed scene', scene, renderer, \"w result\", result);\n        });\n    }\n    getSceneRenderer(scene) {\n        let renderer;\n        if (scene instanceof _rpg_engine_scenes_journey_departure__WEBPACK_IMPORTED_MODULE_6__[\"JourneyDeparture\"]) {\n            renderer = _scenes_world_map_view_world_map_view_component__WEBPACK_IMPORTED_MODULE_5__[\"WorldMapViewComponent\"];\n        }\n        else if (scene instanceof _rpg_engine_scenes_journey__WEBPACK_IMPORTED_MODULE_7__[\"Journey\"]) {\n            renderer = _scenes_journey_step_journey_step_component__WEBPACK_IMPORTED_MODULE_8__[\"JourneyStepComponent\"];\n        }\n        else if (scene instanceof _rpg_engine_scenes_town_nav__WEBPACK_IMPORTED_MODULE_10__[\"TownNav\"]) {\n            renderer = _scenes_town_ui_town_ui_component__WEBPACK_IMPORTED_MODULE_11__[\"TownUIComponent\"];\n        }\n        else if (scene instanceof _rpg_engine_scenes_roaming__WEBPACK_IMPORTED_MODULE_12__[\"Roaming\"]) {\n            renderer = _scenes_roaming_step_roaming_step_component__WEBPACK_IMPORTED_MODULE_13__[\"RoamingStepComponent\"];\n        }\n        else if (scene instanceof _rpg_engine_scenes_passage_trail__WEBPACK_IMPORTED_MODULE_14__[\"PassageTrail\"]) {\n            renderer = _scenes_passage_through_passage_through_component__WEBPACK_IMPORTED_MODULE_15__[\"PassageThroughComponent\"];\n        }\n        return renderer;\n    }\n};\nStorytellerComponent.ctorParameters = () => [\n    { type: _scene_ui_scene_ui_service__WEBPACK_IMPORTED_MODULE_2__[\"SceneUIService\"] },\n    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_3__[\"HttpClient\"] }\n];\nStorytellerComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-storyteller',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./storyteller.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/storyteller/storyteller.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./storyteller.component.scss */ \"./src/app/storyteller/storyteller.component.scss\")).default]\n    })\n], StorytellerComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/environments/environment.ts\":\n/*!*****************************************!*\\\n  !*** ./src/environments/environment.ts ***!\n  \\*****************************************/\n/*! exports provided: environment */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"environment\", function() { return environment; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nconst environment = {\n    production: false\n};\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n\n\n/***/ }),\n\n/***/ \"./src/main.ts\":\n/*!*********************!*\\\n  !*** ./src/main.ts ***!\n  \\*********************/\n/*! no exports provided */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ \"./node_modules/@angular/platform-browser-dynamic/fesm2015/platform-browser-dynamic.js\");\n/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/app.module */ \"./src/app/app.module.ts\");\n/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./environments/environment */ \"./src/environments/environment.ts\");\n\n\n\n\n\nif (_environments_environment__WEBPACK_IMPORTED_MODULE_4__[\"environment\"].production) {\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"enableProdMode\"])();\n}\nObject(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__[\"platformBrowserDynamic\"])().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_3__[\"AppModule\"])\n    .catch(err => console.error(err));\n\n\n/***/ }),\n\n/***/ 0:\n/*!***************************!*\\\n  !*** multi ./src/main.ts ***!\n  \\***************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! /home/drake/Code/Wander/WanderANG/src/main.ts */\"./src/main.ts\");\n\n\n/***/ })\n\n},[[0,\"runtime\",\"vendor\"]]]);\n//# sourceMappingURL=main-es2015.js.map","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","export default \"\\n\\n\\t<router-outlet></router-outlet>\\n\"","export default \"<div class=\\\"uiwrapper\\\" (click)=\\\"onOverlayClicked($event)\\\">\\n\\t<ng-template appInsertion> </ng-template>\\n</div>\\n\"","export default \"<div class=\\\"overlay\\\">\\n\\t<div class=\\\"dialog\\\">\\n\\t\\t<div class=\\\"scenescreen\\\">test-blue-screen works!</div>\\n\\t\\t<button (click)=\\\"onClose()\\\">BYE!</button>\\n\\t</div>\\n</div>\\n\"","export default \"<div class=\\\"overlay\\\">\\n\\t<div class=\\\"dialog\\\">\\n\\t\\t<div class=\\\"scenescreen\\\">test-green-screen works!</div>\\n\\t\\t<button (click)=\\\"onClose()\\\">BYE!</button>\\n\\t</div>\\n</div>\\n\"","export default \"<p>test-screen-generic works!</p>\\n\"","export default \"<div id=\\\"storyteller-outside\\\">\\n\\n\\t<div id=\\\"storyteller-tester\\\">\\n\\t\\t<p>story-tester works!</p>\\n\\n\\n\\t\\t<div id=\\\"scenerender-test\\\"></div>\\n\\n\\n\\t\\t<button (click)=\\\"loadGreenScreen()\\\">GREEN</button>\\n\\t\\t<button (click)=\\\"loadBlueScreen()\\\">BLUE</button>\\n\\t</div>\\n\\n</div>\\n\"","export default \"<div id=\\\"journeyrender\\\" #renderholder>\\n\\t<div id=\\\"viewrender\\\" #renderview></div>\\n</div>\\n\\n<div id=\\\"journeyinfo\\\" #sceneinfo>\\n\\tTravelling {{getDirectionDescription()}} to {{journeyscene.dest.name}}, day {{journeyscene.stepid}}/{{journeyscene.course.length}};\\n\\n\\t\\t<br>\\n\\n\\t<div class=\\\"journeycontrols\\\">\\n\\t<button class=\\\"journeychoice\\\" (click)=\\\"setCamp()\\\">SET CAMP</button> <button class=\\\"journeychoice\\\" (click)=\\\"continueJourney()\\\">JOURNEY ONWARDS</button> <button class=\\\"journeychoice\\\" (click)=\\\"showMap()\\\">SHOW MAP</button>\\n\\n\\t</div>\\n\\n\\n</div>\\n\"","export default \"<ng-template *ngIf=\\\"isTrailing(); then TrailingScene; else AccessScene\\\">\\n\\n</ng-template>\\n\\n<ng-template #AccessScene>\\n\\n\\t<div class=\\\"trailview\\\"></div>\\n\\t<div class=\\\"trailcontext\\\">\\n\\n\\t\\t<div class=\\\"traildescdebug\\\">\\n\\t\\t\\tAt the start of {{ trail.passage.name }}, {{trail.passage.length()}} days journey.\\n\\t\\t</div>\\n\\n\\t\\t\\t<button class=\\\"trailcontrols\\\"  (click)=\\\"journeyOnwards()\\\">ENTER</button>\\n\\t\\t\\t<button class=\\\"trailcontrols\\\" (click)=\\\"leaveTrail()\\\">LEAVE</button>\\n\\t</div>\\n\\n</ng-template>\\n\\n<ng-template #TrailingScene>\\n\\n\\t<div class=\\\"trailview\\\"></div>\\n\\t<div class=\\\"trailcontext\\\">\\n\\n\\t\\t<div class=\\\"traildescdebug\\\">\\n\\t\\t\\tDay {{trail.progress + 1}} of {{trail.passage.length()}} through the {{ trail.passage.name }}.\\n\\t\\t</div>\\n\\n\\t\\t<button class=\\\"trailcontrols\\\" (click)=\\\"journeyOnwards()\\\">FORWARD</button>\\n\\n\\t</div>\\n\\n\\n</ng-template>\\n\"","export default \"<div id=\\\"journeyrender\\\" #renderholder>\\n\\t<div id=\\\"viewrender\\\" #renderview></div>\\n</div>\\n\\n<div id=\\\"journeyinfo\\\" #sceneinfo>\\n\\tTravelling {{getDirectionDescription()}}, day {{getDayOfTravel()}}<span *ngIf=\\\"roamingscene.startloc !== null\\\"> from {{roamingscene.startloc.name}}</span>.\\n\\n\\t\\t<br>\\n\\n\\t<div class=\\\"journeycontrols\\\">\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"moveTurnLeft()\\\">LEFT 45</button>\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"moveForward()\\\">JOURNEY ONWARDS</button>\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"moveTurnRight()\\\">RIGHT 45</button>\\n\\t\\t<br>\\n\\n\\n\\t\\t<button class=\\\"journeychoice\\\" (click)=\\\"actionSetCamp()\\\">SET CAMP</button>  <button class=\\\"journeychoice\\\" (click)=\\\"showMap()\\\">SHOW MAP</button>\\n\\n\\t</div>\\n\\n\\n</div>\\n\"","export default \"<div id=\\\"towninfo\\\" #sceneinfo>\\nStanding before {{townscene.town.name}}.\\n\\n\\t\\t<br>\\n\\n\\t<div class=\\\"movecontrols\\\">\\n\\t\\t<button class=\\\"movecontrols\\\" (click)=\\\"leaveTown()\\\">LEAVE</button>\\n\\n\\t</div>\\n\\n\\n</div>\\n\"","export default \"<div id=\\\"mapholder\\\" #mapholder>\\n\\t<div id=\\\"maprender\\\" #mapview></div>\\n</div>\\n\"","export default \"<div id=\\\"st-page\\\">\\n\\n\\n</div>\\n\"","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {NgModule} from '@angular/core';\nimport {Routes, RouterModule} from '@angular/router';\nimport {StoryTesterComponent} from \"./story-tester/story-tester.component\";\nimport {StorytellerComponent} from \"./storyteller/storyteller.component\";\n\n\nconst routes: Routes = [\n\t{path: '', redirectTo: '/game', pathMatch: 'full'},\n\t{path: 'tester', component: StoryTesterComponent},\n\t{path: 'game', component: StorytellerComponent},\n\t\n];\n\n@NgModule({\n\timports: [RouterModule.forRoot(routes)],\n\texports: [RouterModule]\n})\nexport class AppRoutingModule {\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJ9 */\"","import {Component} from '@angular/core';\n\n@Component({\n\tselector: 'app-root',\n\ttemplateUrl: './app.component.html',\n\tstyleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n\ttitle = 'WanderANG';\n}\n","import {BrowserModule} from '@angular/platform-browser';\nimport {NgModule} from '@angular/core';\n\nimport {AppRoutingModule} from './app-routing.module';\nimport {AppComponent} from './app.component';\nimport {StorytellerComponent} from './storyteller/storyteller.component';\nimport {SceneUIComponent} from \"./scene-ui/scene-ui.component\";\nimport {TestGreenScreenComponent} from \"./story-tester/scenes/test-green-screen/test-green-screen.component\";\nimport {TestBlueScreenComponent} from \"./story-tester/scenes/test-blue-screen/test-blue-screen.component\";\nimport {SceneUIModule} from \"./scene-ui/scene-ui.module\";\nimport { StoryTesterComponent } from './story-tester/story-tester.component';\nimport {HttpClientModule} from \"@angular/common/http\";\nimport { WorldMapViewComponent } from './storyteller/scenes/world-map-view/world-map-view.component';\nimport { JourneyStepComponent } from './storyteller/scenes/journey-step/journey-step.component';\nimport { TownUIComponent } from './storyteller/scenes/town-ui/town-ui.component';\nimport { RoamingStepComponent } from './storyteller/scenes/roaming-step/roaming-step.component';\nimport { PassageThroughComponent } from './storyteller/scenes/passage-through/passage-through.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tAppComponent,\n\t\tStorytellerComponent,\n\t\tTestGreenScreenComponent,\n\t\tTestBlueScreenComponent,\n\t\tStoryTesterComponent,\n\t\tWorldMapViewComponent,\n\t\tJourneyStepComponent,\n\t\tTownUIComponent,\n\t\tRoamingStepComponent,\n\t\tPassageThroughComponent,\n\t],\n\timports: [\n\t\tHttpClientModule,\n\t\tBrowserModule,\n\t\tAppRoutingModule,\n\t\tSceneUIModule\n\t],\n\tproviders: [],\n\tbootstrap: [AppComponent],\n\tentryComponents: [\n\t\tSceneUIComponent,\n\t\tTestGreenScreenComponent,\n\t\tTestBlueScreenComponent,\n\t\tWorldMapViewComponent,\n\t\tJourneyStepComponent,\n\t\tRoamingStepComponent,\n\t\tTownUIComponent,\n\t\tPassageThroughComponent\n\t]\n})\nexport class AppModule {\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {WanderGame} from \"../wander-game\";\nimport {WorldMap} from \"../world/world-map\";\nimport {Place} from \"../world/locs/Place\";\nimport {Roaming} from \"./roaming\";\nimport {WorldPosition} from \"../world/world-position\";\n\nexport class JourneyDeparture  extends  WanderScene {\n\n\tworldmap: WorldMap;\n\n\tdestination: Place;\n\n\tconstructor (game: WanderGame)\n\t{\n\t\tsuper(game);\n\t\tthis.worldmap = game.worldmap;\n\t}\n\n\tsceneFinished(): boolean {\n\t\treturn !!this.destination;\n\t}\n\n\tsetDestination (dest: Place)\n\t{\n\t\t// let startingpos = this.game.hero.coordinates;\n\t\t// let destcoords = dest[\"coords\"];\n\t\tthis.destination = dest;\n\t}\n\n\tgetFollowingScene(): WanderScene\n\t{\n\t\tlet next = null;\n\t\tif (!this.destination.matchesPosition(this.game.hero.pos))\n\t\t{\n\t\t\tlet direction = WorldPosition.getRelativeGeneralDirection(this.game.hero.pos, this.destination.pos);\n\t\t\tnext = new Roaming(this.game, this.game.hero.pos, direction);\n\t\t\t// next.setStops(this.game.hero.coordinates, this.destination[\"coords\"]);\n\t\t}\n\t\treturn next;\n\t}\n\n\n\n}\n","import {WanderGame} from \"../wander-game\";\nimport {WanderScene} from \"../wander-scene\";\nimport {WorldPosition} from \"../world/world-position\";\nimport {Place} from \"../world/locs/Place\";\n\nexport class Journey extends WanderScene {\n\n\tstart: WorldPosition;\n\tdest: Place;\n\n\tcourse: WorldPosition[];\n\tstepid: number;\n\n\t// NOTE that start is optional and will default to player's position\n\tconstructor (game: WanderGame, dest: Place, start?: WorldPosition)\n\t{\n\t\tsuper(game);\n\n\t\tthis.start = !start ? game.hero.pos : start;\n\t\tthis.dest = dest;\n\t\tthis.course = game.worldmap.getCourse(this.start, this.dest.pos);\n\t\tthis.stepid = 0;\n\t}\n\n\t// TODO: add support for custom stops in case the player can  (interpolating)\n\n\tstep ()\n\t{\n\t\tthis.stepid++;\n\t}\n\n\tgetCurrentCoordinates (): WorldPosition\n\t{\n\t\tif (this.stepid < this.course.length)\n\t\t{\n\t\t\treturn this.course[this.stepid];\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.dest.pos;\n\t\t}\n\n\t}\n\n\tsceneFinished(): boolean {\n\t\treturn this.stepid >= this.course.length;\n\t}\n\n\tgetStepDirection (stepid: number): number[]\n\t{\n\t\tlet cpos = this.course[stepid];\n\t\tlet nextpos = stepid + 1 < this.course.length ? this.course[stepid + 1] : this.dest.pos;\n\t\treturn [nextpos.x - cpos.x, nextpos.y - cpos.y];\n\t}\n\n\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {WanderGame} from \"../wander-game\";\nimport {TerrainPass} from \"../world/locs/TerrainPass\";\nimport {JourneyDeparture} from \"./journey-departure\";\nimport {WorldPosition} from \"../world/world-position\";\n\nexport class PassageTrail extends WanderScene\n{\n\n\t/**\n\t * The TerrainPass location being traversed.\n\t * Since passes can generate TWO trails, back and forth, we extract the significant elemnents in the trail_* values with resetTrail() according to the current position of the player.\n\t * Since we are outside the normal map fl,ow, the position of the player is updated only at the end of the current trail.\n\t */\n\tpassage: TerrainPass;\n\n\t// trail_* are the values generated from passage with direction applied\n\ttrail_start: WorldPosition;\n\ttrail_end: WorldPosition;\n\ttrail_length: number;\n\n\t/**\n\t * where the player is on the current trail\n\t */\n\tprogress: number;\n\t/**\n\t * whether the player chose to leave AFTER reaching an end (for scenecheck)\n\t */\n\tleaving: boolean;\n\n\t// tracker for total number of days spent in the passage?\n\tdays: number;\n\n\tconstructor (game: WanderGame, passage: TerrainPass, started: boolean = false)\n\t{\n\t\tsuper(game);\n\t\tthis.passage = passage;\n\t\t// progress is the speed, negative allows to go back and reverse\n\t\tthis.resetTrail(started);\n\t\tthis.days = 0;\n\t\tthis.leaving = false;\n\t}\n\n\tresetTrail (started: boolean = false)\n\t{\n\t\tconst reversed = this.passage.exitpoint.matches(this.game.hero.pos);\n\t\tthis.trail_start = reversed ? this.passage.exitpoint : this.passage.pos;\n\t\tthis.trail_end = reversed ? this.passage.pos : this.passage.exitpoint;\n\t\tthis.trail_length = this.passage.length();\n\t\tthis.progress = started ? 0 : -1;\n\t}\n\n\tsceneFinished(): boolean\n\t{\n\t\t// boolean set by UI\n\t\tconsole.log(\"is at exit? \" + this.isAtExitPoint() + \"is leaving? \" + this.leaving);\n\t\treturn this.isAtExitPoint() && this.leaving;\n\t}\n\n\tgetFollowingScene(): WanderScene {\n\t\treturn new JourneyDeparture(this.game);\n\t}\n\n\tisAtExitPoint ()\n\t{\n\t\treturn this.progress === -1 || this.progress === this.passage.length();\n\t}\n\n\tstep ()\n\t{\n\t\tthis.progress += 1;\n\t\t// this.progress += direction;\n\t\tthis.progress = Math.min(Math.max(this.progress, -1), this.passage.length());\n\t\tif (this.progress === this.passage.length())\n\t\t{\n\t\t\tthis.game.hero.setCoordinates(this.trail_end);\n\t\t\tthis.resetTrail();\n\t\t}\n\t}\n\n\n\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {WorldPosition} from \"../world/world-position\";\nimport {WanderGame} from \"../wander-game\";\nimport {Place} from \"../world/locs/Place\";\n\nexport class Roaming extends WanderScene {\n\n\tstatic DIRECTIONS = [\n\t\t[0, -1], // NORTH\n\t\t[1, -1],\n\t\t[1, 0], // EAST\n\t\t[1, 1],\n\t\t[0, 1], // SOUTH\n\t\t[-1, 1],\n\t\t[-1, 0], // WEST\n\t\t[-1, -1]\n\t];\n\n\tcurrent: WorldPosition;\n\tdirection: number[];\n\n\t// starting point, just for narration (duplicated to first current)\n\tstart: WorldPosition;\n\tstartloc: Place;\n\n\t// steps so far, just for narration\n\tsteps: number;\n\n\t// NOTE that start is optional and will default to player's position, direction to N?\n\tconstructor (game: WanderGame, start?: WorldPosition, direction?: number[]) {\n\t\tsuper(game);\n\n\t\tthis.direction = !direction ? [0, -1] : direction;\n\t\tthis.start = !start ? this.game.hero.pos : start;\n\t\tthis.current = this.start;\n\t\tthis.steps = 0;\n\n\t\tthis.startloc = this.game.worldmap.getLocationAt(this.start.getCoords());\n\t}\n\n\tsceneFinished(): boolean {\n\t\t// scene ends when you reach a Place\n\t\treturn this.game.worldmap.getLocationAt(this.current.getCoords()) != null;\n\t}\n\n\tstepInto (pos: WorldPosition)\n\t{\n\t\tthis.direction = [pos.x - this.current.x, pos.y - this.current.y];\n\t\tthis.current = pos;\n\t}\n\n\tstepForward ()\n\t{\n\t\tthis.steps++;\n\t\tthis.stepInto(this.current.getShifted(this.direction[0], this.direction[1]));\n\t}\n\n\tprivate getCurrentDirectionIndex ()\n\t{\n\t\tfor (let i = 0; i < Roaming.DIRECTIONS.length; i++)\n\t\t{\n\t\t\tif (Roaming.DIRECTIONS[i][0] === this.direction[0] && Roaming.DIRECTIONS[i][1] === this.direction[1])\n\t\t\t{\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t// steps are in CLOCKWISE order\n\tchangeDirection (steps: number)\n\t{\n\t\tlet cidx = this.getCurrentDirectionIndex();\n\t\tlet nidx = (cidx + Roaming.DIRECTIONS.length + steps) % Roaming.DIRECTIONS.length;\n\t\tthis.direction = Roaming.DIRECTIONS[nidx];\n\t}\n}\n","import {WanderScene} from \"../wander-scene\";\nimport {WanderGame} from \"../wander-game\";\nimport {Town} from \"../world/locs/Town\";\nimport {Place} from \"../world/locs/Place\";\nimport {JourneyDeparture} from \"./journey-departure\";\n\nexport class TownNav extends WanderScene  {\n\n\ttown: Town;\n\tlocpoint: number;\n\n\tstatic LOC_LEAVE = -1;\n\n\tstatic LOC_OUTSKIRTS = 0;\n\tstatic LOC_GATES = 1;\n\tstatic LOC_MAINSTREET = 2;\n\tstatic LOC_MARKET = 3;\n\n\tconstructor (game: WanderGame, place?: Place)\n\t{\n\t\tsuper(game);\n\t\tthis.town = place as Town;\n\t}\n\n\tgetFollowingScene(): WanderScene {\n\t\treturn new JourneyDeparture(this.game);\n\t}\n\n\tsceneFinished(): boolean {\n\t\treturn this.locpoint === -1;\n\t}\n\n}\n","import {HttpClient} from \"@angular/common/http\";\nimport {WorldMap} from \"./world/world-map\";\nimport {WanderHero} from \"./wander-hero\";\nimport {WanderScene} from \"./wander-scene\";\n\nexport class WanderGame {\n\n\tactivescene: WanderScene;\n\thero: WanderHero;\n\tworldmap: WorldMap;\n\n\tstatic loadGame (http: HttpClient, callback: (game: WanderGame) => void): void\n\t{\n\t\tconst loader = new GameFactory(http);\n\t\tloader.loadDemoGame(function (game: WanderGame, factory: GameFactory)\n\t\t{\n\t\t\tconsole.log(\"loaded game \", game);\n\t\t\tconsole.log(\"built from factory \", factory);\n\t\t\tcallback(game);\n\t\t});\n\n\t}\n\n\t// DEBUG FUNCTIONS FOR QUICK TESTING\n\n\tsetHero (hero: WanderHero)\n\t{\n\t\tthis.hero = hero;\n\t}\n\n\tsetWorldMap (worldmap: WorldMap)\n\t{\n\t\tthis.worldmap = worldmap;\n\t}\n\n\tsetActiveScene (scene: WanderScene)\n\t{\n\t\tconsole.log(\"setting activescene to \", scene);\n\t\tthis.activescene = scene;\n\t}\n\n\tgetActiveScene (): WanderScene\n\t{\n\t\treturn this.activescene;\n\t}\n\n\n}\n\n\n\nclass GameFactory {\n\n\tdataset: object;\n\n\tconstructor(protected http: HttpClient) {\n\t\tthis.dataset = {\n\t\t\t\"locs\": null,\n\t\t\t\"terrain\": null,\n\t\t\t\"player\": null\n\t\t};\n\t}\n\n\tloadDataFile (filepath: string, callback: Function)\n\t{\n\t\tconst locdata = this.http.get(filepath);\n\t\tlocdata.subscribe(function (response) {\n\t\t\tconsole.log(\"LOAD RESULT\", response);\n\t\t\tcallback(response);\n\t\t});\n\t}\n\n\tloadDemoGame (callback: Function) {\n\n\t\tconst sources = {\n\t\t\t\"locs\": \"./assets/gamedata/testlocations.json\",\n\t\t\t\"terrain\": \"./assets/gamedata/testmapgame.json\",\n\t\t\t\"player\": \"./assets/gamedata/playerdata.json\"\n\t\t};\n\n\t\tlet loader: GameFactory = this;\n\n\t\tfunction getCheckerFunction(key: string): Function {\n\t\t\treturn function (data: any) {\n\t\t\t\tloader.setData(key, data, callback);\n\t\t\t};\n\t\t}\n\n\t\tfor (let key of Object.keys(sources)) {\n\t\t\tlet path = sources[key];\n\t\t\tlet checker = getCheckerFunction(key);\n\t\t\tthis.loadDataFile(path, checker);\n\t\t}\n\n\n\t}\n\n\tsetData(key: string, data: any, completer: Function): void {\n\t\tthis.dataset[key] = data;\n\n\t\tlet has_all = true;\n\t\tfor (let datakey of Object.keys(this.dataset)) {\n\t\t\tif (this.dataset[datakey] == null) {\n\t\t\t\thas_all = false;\n\t\t\t}\n\t\t}\n\n\t\tif (has_all) {\n\t\t\t// completer(this);\n\t\t\tthis.createGameInstance(completer);\n\t\t}\n\t}\n\n\tcreateGameInstance(completer: Function): void {\n\t\tlet game = new WanderGame();\n\n\t\tconsole.log(\"loaded terrain\", this.dataset[\"terrain\"]);\n\t\tconsole.log(\"loaded locs\", this.dataset[\"locs\"]);\n\t\tconsole.log(\"loaded player\", this.dataset[\"player\"]);\n\n\n\t\tlet worldmap = WorldMap.fromJSON(this.dataset[\"terrain\"], this.dataset[\"locs\"]);\n\t\tlet hero = WanderHero.fromJSON(this.dataset[\"player\"]);\n\t\tgame.setWorldMap(worldmap);\n\t\tgame.setHero(hero);\n\t\tcompleter(game, this);\n\n\t}\n\n}\n","import {WorldPosition} from \"./world/world-position\";\n\nexport class WanderHero\n{\n\n\tpos: WorldPosition;\n\n\tconstructor ()\n\t{\n\t\tthis.pos = null;\n\t}\n\n\tstatic fromJSON (src: object): WanderHero\n\t{\n\t\tlet hero = new WanderHero();\n\n\t\t// TODO: add potentials etc\n\n\t\t// hero.setCoordinates(rawdata[\"coords\"][0], rawdata[\"coords\"][1]);\n\n\t\thero.setCoordinates(WorldPosition.fromCoordsArray(src[\"position\"][\"coords\"]));\n\n\t\treturn hero;\n\n\t}\n\n\tsetCoordinates (pos: WorldPosition)\n\t{\n\t\t// console.log(\"replacing coords\", this.pos, \"w pos \", pos);\n\t\tthis.pos = pos;\n\t}\n\n\n}\n","import {WanderGame} from \"./wander-game\";\nimport {QuestTask} from \"./quests/quest-task\";\n\nexport abstract class WanderScene {\n\n\tstatic LEAVESTATE_UNFINISHED = -1;\n\tstatic LEAVESTATE_FINISHED = 0;\n\n\tgame: WanderGame;\n\t// a scene that CONTAINS the current scene, if applicable, so the Storyteller will know what scene to pass to when this ends.\n\tnarrative: WanderScene;\n\n\t// TODO: add interface for specific scene UI (not the SceneUI master wrapper) so the Scene can interact with its own display\n\tleaf: any;\n\n\t// TODO: add QuestTask class as driver for the scene\n\tdriver: QuestTask;\n\n\tprotected constructor (game: WanderGame)\n\t{\n\t\tthis.game = game;\n\n\t\t// narrative should be set outside the constructor\n\t\tthis.narrative = null;\n\n\t\t// TODO: TBA (note: should get value AFTER constructor anyway?)\n\t\tthis.leaf = null;\n\t\tthis.driver = null;\n\t}\n\n\tsetNarrative (narrative: WanderScene)\n\t{\n\t\tthis.narrative = narrative;\n\t}\n\n\tabstract sceneFinished(): boolean;\n\n\t/**\n\t * Acts as default, subclasses can override if they have specific return codes > 0 (for success and < -1 for failure?)\n\t * If the scene is unfinished, subclasses should still respect the UNFINISHED constant\n\t */\n\treturnState(): number\n\t{\n\t\t// Scenes that do not have a set of return values always return 0 on end OR -1 if not finished\n\t\treturn this.sceneFinished() ? WanderScene.LEAVESTATE_FINISHED : WanderScene.LEAVESTATE_UNFINISHED;\n\t}\n\n\t/**\n\t * Acts as default, subclasses can override if they chain to a scene they create\n\t */\n\tgetFollowingScene (): WanderScene\n\t{\n\t\treturn this.narrative;\n\t}\n\n}\n\n/**\n * Wrapper for Map type for syntactical cleanup\n */\nclass LeaveStatesMap extends Map<string, number> {}\n\nexport class WanderSceneTrigger {\n\n\t/*\n\t\t// if all conditions in this list are met, the trigger is triggered\n\t\tprivate ArrayList<SceneTriggerCondition> needed;\n\t\t// if any condition in this list is met, the trigger is not triggered\n\t\tprivate ArrayList<SceneTriggerCondition> blockers;\n\t*/\n\n\tneeded: WanderSceneTriggerCondition[];\n\tblockers: WanderSceneTriggerCondition[];\n\n\tconstructor ()\n\t{\n\t\tthis.needed = [];\n\t\tthis.blockers = [];\n\t}\n\n\t/**\n\t * Adds a condition, by default as needed unless specified as blocker\n\t * @param condition trigger condition for this scene\n\t * @param asblocker whether the condition is a blocker, defaults to needed\n\t */\n\taddCondition (condition: WanderSceneTriggerCondition, asblocker: boolean = false)\n\t{\n\t\t(asblocker ? this.blockers : this.needed).push(condition);\n\t}\n\n\tisActive (leavestates: LeaveStatesMap): boolean\n\t{\n\t\tfor (let triggercondition of this.blockers)\n\t\t{\n\t\t\tif (triggercondition.checkCondition(leavestates))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let triggercondition of this.needed)\n\t\t{\n\t\t\tif (!triggercondition.checkCondition(leavestates))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tstatic createFromJSON (src: object): WanderSceneTrigger\n\t{\n\t\tconst trigger = new WanderSceneTrigger();\n\t\tif (src.hasOwnProperty(\"c_for\"))\n\t\t{\n\t\t\tfor (let conditiondef of src[\"c_for\"])\n\t\t\t{\n\t\t\t\ttrigger.addCondition(WanderSceneTriggerCondition.createFromJSON(conditiondef), false);\n\t\t\t}\n\t\t}\n\t\tif (src.hasOwnProperty(\"c_against\"))\n\t\t{\n\t\t\tfor (let conditiondef of src[\"c_against\"])\n\t\t\t{\n\t\t\t\ttrigger.addCondition(WanderSceneTriggerCondition.createFromJSON(conditiondef), true);\n\t\t\t}\n\t\t}\n\t\treturn trigger;\n\t}\n\n}\n\nexport class WanderSceneTriggerCondition {\n\n\tsceneid: string;\n\tstatevalue: number;\n\tmustmeet: boolean;\n\n\n\tconstructor(sceneid: string, valuestate: number, mustmeet: boolean)\n\t{\n\t\tthis.sceneid = sceneid;\n\t\tthis.statevalue = valuestate;\n\t\tthis.mustmeet = mustmeet;\n\t}\n\n\tcheckCondition (leavestates: LeaveStatesMap): boolean\n\t{\n\t\tlet leavestate = leavestates.has(this.sceneid) ? leavestates.get(this.sceneid) : WanderScene.LEAVESTATE_UNFINISHED;\n\t\treturn this.mustmeet ? leavestate === this.statevalue : leavestate !== this.statevalue;\n\t}\n\n\tstatic createFromJSON (src: object): WanderSceneTriggerCondition\n\t{\n\t\tconst sceneid = src[\"sceneid\"];\n\t\tconst statevalue = src[\"endstate\"];\n\t\tlet mustmeet = true;\n\t\tif (src.hasOwnProperty(\"mustnot\")) {\n\t\t\tmustmeet = !src[\"mustnot\"];\n\t\t}\n\t\treturn new WanderSceneTriggerCondition(sceneid, statevalue, mustmeet);\n\t}\n\n}\n","import {WorldPosition} from \"../world-position\";\n\nexport class Place\n{\n\n\tpos: WorldPosition;\n\n\tlocid: string;\n\tloctype: string;\n\tname: string;\n\n\tconstructor (pos: WorldPosition)\n\t{\n\t\tthis.pos = pos;\n\t}\n\n\t// public abstract getName (): string;\n\n\tpublic getCoords (): number[]\n\t{\n\t\treturn this.pos.getCoords();\n\t}\n\n\tpublic matchesPosition (pos: WorldPosition): boolean\n\t{\n\t\treturn this.pos.matches(pos);\n\t}\n\n\n}\n\n","import {Town} from \"./Town\";\nimport {TerrainPass} from \"./TerrainPass\";\nimport {Place} from \"./Place\";\n\nexport class PlaceFactory\n{\n\tstatic CLASSES = {\n\t\t\"towns\": Town,\n\t\t\"passes\": TerrainPass\n\t};\n\n\tstatic fromJSON (placetype: string, placeid: string, src: object): Place\n\t{\n\t\tlet builderclass = PlaceFactory.CLASSES[placetype];\n\t\treturn builderclass.fromJSON(placeid, src);\n\t}\n}\n","import {Place} from \"./Place\";\nimport {WorldPosition} from \"../world-position\";\n\nexport class TerrainPass extends Place\n{\n\texitpoint: WorldPosition;\n\tcourse: string[];\n\n\tconstructor(locid: string, entrypos: WorldPosition, exitpos: WorldPosition, course: string[]) {\n\t\tsuper(entrypos);\n\t\tthis.loctype = \"passes\";\n\t\tthis.locid = locid;\n\t\tthis.exitpoint = exitpos;\n\t\tthis.course = course;\n\t}\n\n\tlength (): number\n\t{\n\t\treturn this.course.length;\n\t}\n\n\tstatic fromJSON (placeid: string, desc: object): TerrainPass\n\t{\n\t\tlet entrypoint = desc[\"entry\"];\n\t\tlet exitpoint = desc[\"exit\"];\n\t\tlet course = desc[\"sequence\"];\n\n\t\tlet loaded = new TerrainPass (placeid, new WorldPosition(entrypoint[0], entrypoint[1]), new WorldPosition(exitpoint[0], exitpoint[1]), course);\n\t\tloaded.name = desc[\"name\"];\n\n\t\treturn loaded;\n\t}\n\n\tmatchesPosition(pos: WorldPosition): boolean {\n\t\treturn this.pos.matches(pos) || this.exitpoint.matches(pos);\n\t}\n\n}\n","import {Place} from \"./Place\";\nimport {WorldPosition} from \"../world-position\";\n\nexport class Town extends Place\n{\n\n\tconstructor (locid: string, coords: WorldPosition)\n\t{\n\t\tsuper(coords);\n\t\tthis.loctype = \"towns\";\n\t\tthis.locid = locid;\n\t}\n\n\n\tstatic fromJSON (placeid: string, desc: object): Town\n\t{\n\t\tlet coords = desc[\"coords\"];\n\t\tlet loaded = new Town (placeid, new WorldPosition(coords[0], coords[1]));\n\t\tloaded.name = desc[\"name\"];\n\n\t\treturn loaded;\n\t}\n}\n","import {Place} from \"./locs/Place\";\nimport {TerrainPass} from \"./locs/TerrainPass\";\nimport {PlaceFactory} from \"./locs/PlaceFactory\";\nimport {WorldPosition} from \"./world-position\";\n\nexport class WorldMap {\n\n\tsizeX: number;\n\tsizeY: number;\n\n\tlocs: Place[][];\n\tterrain: string[][];\n\t// places_bycoords: any;\n\tplaces_bytypebyid: Map<string, Map<string, Place>>;\n\n\n\tconstructor(sizeX, sizeY) {\n\t\tthis.sizeX = sizeX;\n\t\tthis.sizeY = sizeY;\n\n\t\tthis.locs = [];\n\t\tthis.terrain = [];\n\t\tfor (let x = 0; x < sizeX; x++) {\n\t\t\tlet tercol = [];\n\t\t\tlet loccol = [];\n\t\t\tfor (let y = 0; y < sizeY; y++) {\n\t\t\t\ttercol.push(null);\n\t\t\t\tloccol.push(null);\n\t\t\t}\n\t\t\tthis.terrain.push(tercol);\n\t\t\tthis.locs.push(loccol);\n\t\t}\n\n\t\tthis.places_bytypebyid = new Map<string, Map<string, Place>>();\n\n\t}\n\n\n\tstatic getCoordsHash(coordX, coordY): String {\n\t\treturn coordX + \":\" + coordY;\n\t}\n\n\n\tstatic fromJSON(griddata, locationdata): WorldMap {\n\t\t// console.log(griddata);\n\t\tlet gridsizeX = griddata[\"mapgrid\"].length;\n\t\tlet gridsizeY = griddata[\"mapgrid\"][0].length;\n\t\tlet worldmap = new WorldMap(gridsizeX, gridsizeY);\n\t\t// console.log(worldmap.terrain);\n\t\tfor (let x = 0; x < gridsizeX; x++) {\n\t\t\tfor (let y = 0; y < gridsizeY; y++) {\n\t\t\t\tworldmap.terrain[x][y] = griddata[\"mapgrid\"][x][y];\n\t\t\t}\n\t\t}\n\n\n\t\t// loop not technically needed but we might want to run generations etc on data in the future\n\t\t// TODO : replace\n\t\tfor (let placetype of Object.keys(locationdata)) {\n\t\t\tlet places = locationdata[placetype];\n\t\t\tlet listed = new Map<string, Place>();\n\t\t\tfor (let placeid of Object.keys(places)) {\n\n\t\t\t\tlet placedesc = places[placeid];\n\t\t\t\tlet place = PlaceFactory.fromJSON(placetype, placeid, placedesc);\n\t\t\t\t// let place = new Place(Position.fromCoords(placedesc[\"coords\"]));\n\t\t\t\t// place.loctype = placetype;\n\t\t\t\t// place.locid = placeid;\n\t\t\t\tlisted.set(placeid, place);\n\t\t\t\t// console.log(\"adding place\", placetype, placedesc);\n\t\t\t\tlet coords;\n\t\t\t\tworldmap.locs[place.pos.x][place.pos.y] = place;\n\t\t\t\tif (place instanceof TerrainPass)\n\t\t\t\t{\n\t\t\t\t\tlet exitpos = (place as TerrainPass).exitpoint;\n\t\t\t\t\tworldmap.locs[exitpos.x][exitpos.y] = place;\n\t\t\t\t}\n\t\t\t}\n\t\t\tworldmap.places_bytypebyid.set(placetype, listed);\n\n\t\t}\n\n\t\treturn worldmap;\n\t}\n\n\n\n\tgetAllLocations(): Place[]\n\t{\n\t\tlet listing = [];\n\t\tfor (let placetype of this.places_bytypebyid.keys())\n\t\t{\n\t\t\t// console.log(\"getting loctype \", loctype, this.places[loctype]);\n\t\t\tfor (let loc of this.places_bytypebyid.get(placetype).values())\n\t\t\t{\n\t\t\t\tlisting.push(loc);\n\t\t\t}\n\t\t}\n\t\t// console.log(\"all locations: \", listing);\n\t\treturn listing;\n\t}\n\n\n\tgetLocationAt (coords: number[]): Place\n\t{\n\t\tlet loc = null;\n\t\ttry\n\t\t{\n\t\t\tloc = this.locs[coords[0]][coords[1]];\n\t\t} catch (err) {\n\t\t\t// return null;\n\t\t}\n\n\t\t// console.log(\"found loc \", loc);\n\t\t// TODO: DEBUG ONLY!\n\t\t// loc = null;\n\t\treturn loc;\n\n\n\t\t/*\n\t\tvar coordhash = WorldMap.getCoordsHash(coordX, coordY);\n\t\t// TODO: optimize so we don't go through the whole places data\n\t\tfor (var placetype in this.places)\n\t\t{\n\t\t\tfor (var placeid in this.places[placetype])\n\t\t\t{\n\t\t\t\tvar placecoords = this.places[placetype][placeid][\"coords\"];\n\t\t\t\tif (WorldMap.getCoordsHash(placecoords[0], placecoords[1])==coordhash)\n\t\t\t\t{\n\t\t\t\t\treturn this.places[placetype][placeid];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t\t*/\n\n\t}\n\n\tgetCourse (cfrom: WorldPosition, cto: WorldPosition): WorldPosition[]\n\t{\n\t\t// TODO: straight course for now\n\n\t\tlet distX = cto.x - cfrom.x;\n\t\tlet distY = cto.y - cfrom.y;\n\t\tlet maxdist = Math.max(Math.abs(distX), Math.abs(distY));\n\n\t\tlet course = [];\n\t\tfor (let i = 0; i < maxdist; i++)\n\t\t{\n\t\t\tlet section = i / maxdist;\n\t\t\tlet sectionX = Math.round(distX * section);\n\t\t\tlet sectionY = Math.round(distY * section);\n\t\t\tcourse.push(new WorldPosition(cfrom.x + sectionX, cfrom.y + sectionY));\n\t\t}\n\n\t\tconsole.log(\"course from \", cfrom, \" to \", cto, \": \" + course.length + \" steps (\", course, \")\");\n\n\t\treturn course;\n\t}\n\n\tgetTerrainAt (x, y)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this.terrain[x][y];\n\t\t} catch (err)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t}\n\n}\n\n","export class WorldPosition\n{\n\n\treadonly x: number;\n\treadonly y: number;\n\n\tconstructor (x: number, y: number)\n\t{\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tstatic fromCoordsArray (coords: number[]): WorldPosition\n\t{\n\t\treturn new WorldPosition(coords[0], coords[1]);\n\t}\n\n\tpublic getCoords (): number[]\n\t{\n\t\treturn [this.x, this.y];\n\t}\n\n\tpublic getShifted (x: number, y: number)\n\t{\n\t\treturn new WorldPosition(this.x + x, this.y + y);\n\t}\n\n\tpublic matches (other: WorldPosition)\n\t{\n\t\tconsole.log(\"checking if we have a match between \", this, \"and\", other);\n\t\treturn this.x === other.x && this.y === other.y;\n\t}\n\n\tstatic getRelativeGeneralDirection (pfrom: WorldPosition, pto: WorldPosition): number[]\n\t{\n\t\tconst distX = pto.x - pfrom.x;\n\t\tconst distY = pto.y - pfrom.y;\n\n\t\tlet dirX = 0;\n\t\tlet dirY = 0;\n\t\tif (distX === 0)\n\t\t{\n\t\t\tdirX = 0;\n\t\t\tdirY = distY > 0 ? 1 : -1;\n\t\t}\n\t\telse if (distY === 0)\n\t\t{\n\t\t\tdirY = 0;\n\t\t\tdirX = distX > 0 ? 1 : -1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet absX = Math.abs(distX);\n\t\t\tlet absY = Math.abs(distY);\n\t\t\tif (absY > 3 * absY)\n\t\t\t{\n\t\t\t\tdirX = 0;\n\t\t\t\tdirY = distY > 0 ? 1 : -1;\n\t\t\t}\n\t\t\telse if (absY * 3 < absX) {\n\t\t\t\tdirX = distX > 0 ? 1 : -1;\n\t\t\t\tdirY = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdirX = distX > 0 ? 1 : -1;\n\t\t\t\tdirY = distY > 0 ? 1 : -1;\n\t\t\t}\n\t\t}\n\n\t\treturn [dirX, dirY];\n\t}\n}\n","import {Directive, ViewContainerRef} from '@angular/core';\n\n@Directive({\n\tselector: '[appInsertion]',\n})\nexport class InsertionDirective {\n\tconstructor(public viewContainerRef: ViewContainerRef) {\n\t}\n}\n","import { Injector, Type, InjectionToken, InjectFlags } from '@angular/core';\n\nexport class SceneInjector implements Injector {\n\tconstructor(\n\t\tprivate _parentInjector: Injector,\n\t\tprivate _additionalTokens: WeakMap<any, any>)\n\t{\n\t}\n\n\tget<T>(\n\t\ttoken: Type<T> | InjectionToken<T>,\n\t\tnotFoundValue?: T,\n\t\tflags?: InjectFlags\n\t): T;\n\n\tget(token: any, notFoundValue?: any);\n\tget(token: any, notFoundValue?: any, flags?: any) {\n\n\t\tconst value = this._additionalTokens.get(token);\n\t\tif (value)\n\t\t{\n\t\t\treturn value;\n\t\t}\n\t\treturn this._parentInjector.get<any>(token, notFoundValue);\n\t}\n}\n","import {Observable, Subject} from \"rxjs\";\nimport {WanderGame} from \"../rpg-engine/wander-game\";\nimport {WanderScene} from \"../rpg-engine/wander-scene\";\n\nexport class SceneRef {\n\n\tprivate readonly _afterClosed = new Subject<any>();\n\tafterClosed: Observable<any> = this._afterClosed.asObservable();\n\n\tprivate readonly _sceneCheck = new Subject<any>();\n\tsceneCheck: Observable<any> = this._sceneCheck.asObservable();\n\n\n\tscene: WanderScene;\n\tgame: WanderGame;\n\n\tconstructor() {\n\t}\n\n\tsetContext (scene: WanderScene)\n\t{\n\t\tthis.scene = scene;\n\t\tthis.game = scene.game;\n\t}\n\n\tclose(result?: any) {\n\t\tthis._afterClosed.next(result);\n\t}\n\n\ttriggerSceneCheck ()\n\t{\n\t\tconsole.log(\"sending check event for scene \", this.scene, this.scene.sceneFinished());\n\t\tthis._sceneCheck.next();\n\t}\n\n\n\n\n}\n","export default \".uiwrapper {\\n  display: flex;\\n  flex-direction: column;\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background: transparent;\\n  align-items: center;\\n  justify-content: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3NjZW5lLXVpL3NjZW5lLXVpLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zY2VuZS11aS9zY2VuZS11aS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLGVBQUE7RUFDQSxNQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9zY2VuZS11aS9zY2VuZS11aS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi51aXdyYXBwZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuIiwiLnVpd3JhcHBlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAwO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59Il19 */\"","import {\n\tAfterViewInit, ChangeDetectorRef,\n\tComponent,\n\tComponentFactoryResolver,\n\tComponentRef, EventEmitter,\n\tOnDestroy, Output,\n\tType,\n\tViewChild\n} from '@angular/core';\nimport {Subject} from \"rxjs\";\nimport {InsertionDirective} from \"./insertion.directive\";\n\n@Component({\n\tselector: 'app-scene-ui',\n\ttemplateUrl: './scene-ui.component.html',\n\tstyleUrls: ['./scene-ui.component.scss']\n})\nexport class SceneUIComponent implements AfterViewInit, OnDestroy {\n\n\tprivate readonly _onClose = new Subject<any>();\n\n\tpublic componentRef: ComponentRef<any>;\n\tpublic childComponentType: Type<any>;\n\tpublic onClose = this._onClose.asObservable();\n\n\t@ViewChild(InsertionDirective, {static: false}) insertionPoint: InsertionDirective;\n\n\tconstructor(private componentFactoryResolver: ComponentFactoryResolver, private cd: ChangeDetectorRef)\n\t{\n\n\n\t}\n\n\t// LIFECYCLE\n\n\t// note: ngOnInit not strictly necessary for this use\n\t// ngOnInit() {\n\t// }\n\n\tngAfterViewInit(): void {\n\t\tthis.loadChildComponent(this.childComponentType);\n\t\tthis.cd.detectChanges();\n\t}\n\n\tngOnDestroy(): void {\n\t\tif (this.componentRef) {\n\t\t\tthis.componentRef.destroy();\n\t\t}\n\t}\n\n\t// child loading\n\n\tloadChildComponent(componentType: Type<any>) {\n\t\tlet componentFactory = this.componentFactoryResolver.resolveComponentFactory(componentType);\n\n\t\tlet viewContainerRef = this.insertionPoint.viewContainerRef;\n\t\tviewContainerRef.clear();\n\n\t\tthis.componentRef = viewContainerRef.createComponent(componentFactory);\n\t}\n\n\t// for dialog-like behaviour, revise\n\n\tonOverlayClicked(evt: MouseEvent) {\n\t\t// close the scene\n\t\tconsole.warn(\"on overlay click\");\n\t\t// console.log(\"closing sceneref\");\n\t\t// console.log(\"removing \", this.componentRef);\n\t\t// this.componentRef.destroy();\n\t}\n\n\tonDialogClicked(evt: MouseEvent) {\n\t\tevt.stopPropagation();\n\t}\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { InsertionDirective } from './insertion.directive';\nimport {SceneUIComponent} from \"./scene-ui.component\";\n\n\n\n@NgModule({\n\timports: [CommonModule],\n\tdeclarations: [SceneUIComponent, InsertionDirective],\n\tentryComponents: [SceneUIComponent],\n})\nexport class SceneUIModule { }\n","import {\n\tApplicationRef,\n\tComponentFactoryResolver,\n\tComponentRef,\n\tEmbeddedViewRef,\n\tInjectable,\n\tInjector, Type\n} from '@angular/core';\nimport {SceneUIComponent} from \"./scene-ui.component\";\nimport {SceneRef} from \"./scene-ref\";\nimport {SceneInjector} from \"./scene-injector\";\nimport {WanderScene} from \"../rpg-engine/wander-scene\";\nimport {SceneRenderer} from \"../storyteller/scenes/scene-renderer\";\nimport {StorytellerComponent} from \"../storyteller/storyteller.component\";\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SceneUIService {\n\n\tsceneRef: ComponentRef<SceneUIComponent>;\n\tprivate storyteller: StorytellerComponent;\n\n\tconstructor(\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\n\t\tprivate appRef: ApplicationRef,\n\t\tprivate injector: Injector) {\n\t}\n\n\tpublic bindStoryTellerUI (storyteller: StorytellerComponent)\n\t{\n\t\tthis.storyteller = storyteller;\n\t}\n\n\tpublic open(componentType: Type<SceneRenderer>, scene: WanderScene): SceneRef\n\t{\n\t\tlet sceneref = this.appendSceneUI(scene);\n\t\tthis.sceneRef.instance.childComponentType = componentType;\n\t\treturn sceneref;\n\t}\n\n\tprivate appendSceneUI (scene: WanderScene): SceneRef\n\t{\n\n\t\tconst map = new WeakMap();\n\t\t// map.set(DialogConfig, config);\n\n\t\t// add the DialogRef to dependency injection\n\t\tconst sceneRef = new SceneRef();\n\t\tsceneRef.setContext(scene);\n\t\tmap.set(SceneRef, sceneRef);\n\n\t\t// we want to know when somebody called the close mehtod\n\t\tconst sub = sceneRef.afterClosed.subscribe(() => {\n\t\t\t// close the dialog\n\t\t\tconsole.log(\"running AFTERCLOSE\");\n\t\t\tthis.removeSceneUI();\n\t\t\tsub.unsubscribe();\n\n\t\t\tconsole.log(\"getting follower scene \", scene.getFollowingScene());\n\t\t\tthis.storyteller.checkUpdateSceneRender();\n\t\t});\n\n\t\tconst checksub = sceneRef.sceneCheck.subscribe(() => {\n\t\t\tconsole.log(\"running SCENECHECK on scene \", scene);\n\t\t\tif (scene.sceneFinished())\n\t\t\t{\n\t\t\t\tconsole.log(\"scene IS finished!\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconsole.log(\"scene NOT finished\");\n\t\t\t}\n\t\t\tif (scene.sceneFinished())\n\t\t\t{\n\t\t\t\tsceneRef.close();\n\t\t\t}\n\t\t});\n\n\t\tconst componentFactory = this.componentFactoryResolver.resolveComponentFactory(SceneUIComponent);\n\t\tconst componentRef = componentFactory.create(new SceneInjector(this.injector, map));\n\n\t\tthis.appRef.attachView(componentRef.hostView);\n\n\t\tconst domElem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n\t\tdocument.body.appendChild(domElem);\n\n\t\tthis.sceneRef = componentRef;\n\t\t// console.log(\"SceneUI.sceneRef: \", this.sceneRef);\n\t\t// console.log(\"SceneUI.sceneRef.instance: \", this.sceneRef.instance);\n\t\t// console.log(\"SceneUI.sceneRef.childCompo: \", this.sceneRef.instance.componentRef);\n\t\tthis.sceneRef.instance.onClose.subscribe(() => {\n\t\t\tconsole.log(\"running ONCLOSE\");\n\t\t\tthis.removeSceneUI();\n\t\t\t// console.log(\"getting follower scene \", scene.getFollowingScene());\n\t\t\t// this.storyteller.checkUpdateSceneRender();\n\t\t});\n\n\t\t// return the dialogRef\n\t\treturn sceneRef;\n\n\t}\n\n\tprivate removeSceneUI () {\n\t\tconsole.log(\"removing scene ref \", this.sceneRef);\n\t\tthis.appRef.detachView(this.sceneRef.hostView);\n\t\tthis.sceneRef.destroy();\n\t}\n}\n","export default \".scenescreen {\\n  background-color: darkseagreen;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1ibHVlLXNjcmVlbi90ZXN0LWJsdWUtc2NyZWVuLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3QtYmx1ZS1zY3JlZW4vdGVzdC1ibHVlLXNjcmVlbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLDhCQUFBO0FDQUQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3QtYmx1ZS1zY3JlZW4vdGVzdC1ibHVlLXNjcmVlbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zY2VuZXNjcmVlblxue1xuXHRiYWNrZ3JvdW5kLWNvbG9yOlx0XHRcdGRhcmtzZWFncmVlbjtcbn1cbiIsIi5zY2VuZXNjcmVlbiB7XG4gIGJhY2tncm91bmQtY29sb3I6IGRhcmtzZWFncmVlbjtcbn0iXX0= */\"","import {Component, OnInit} from '@angular/core';\nimport {SceneUIComponent} from \"../../../scene-ui/scene-ui.component\";\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {TestScreenGenericComponent} from \"../test-screen-generic/test-screen-generic.component\";\n\n@Component({\n\tselector: 'app-test-blue-screen',\n\ttemplateUrl: './test-blue-screen.component.html',\n\tstyleUrls: ['../test-screen-generic/test-screen-generic.component.scss', './test-blue-screen.component.scss']\n})\nexport class TestBlueScreenComponent extends TestScreenGenericComponent implements OnInit {\n\n\tconstructor(public sceneref: SceneRef) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t}\n\n\tonClose() {\n\t\tthis.sceneref.close('BYE BLUE');\n\t}\n\n}\n","export default \".scenescreen {\\n  background-color: lightsteelblue;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1ncmVlbi1zY3JlZW4vdGVzdC1ncmVlbi1zY3JlZW4uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1ncmVlbi1zY3JlZW4vdGVzdC1ncmVlbi1zY3JlZW4uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFQyxnQ0FBQTtBQ0FEIiwiZmlsZSI6InNyYy9hcHAvc3RvcnktdGVzdGVyL3NjZW5lcy90ZXN0LWdyZWVuLXNjcmVlbi90ZXN0LWdyZWVuLXNjcmVlbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zY2VuZXNjcmVlblxue1xuXHRiYWNrZ3JvdW5kLWNvbG9yOlx0XHRcdGxpZ2h0c3RlZWxibHVlO1xufVxuIiwiLnNjZW5lc2NyZWVuIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRzdGVlbGJsdWU7XG59Il19 */\"","import {Component, OnInit} from '@angular/core';\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {TestScreenGenericComponent} from \"../test-screen-generic/test-screen-generic.component\";\n\n@Component({\n\tselector: 'app-test-green-screen',\n\ttemplateUrl: './test-green-screen.component.html',\n\tstyleUrls: ['../test-screen-generic/test-screen-generic.component.scss', './test-green-screen.component.scss']\n})\nexport class TestGreenScreenComponent extends TestScreenGenericComponent implements OnInit {\n\n\tconstructor(public sceneref: SceneRef)\n\t{\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t}\n\n\tonClose() {\n\t\tthis.sceneref.close('BYE GREEN');\n\t}\n\n\n}\n","export default \".overlay {\\n  display: flex;\\n  flex-direction: column;\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  background: rgba(0, 0, 0, 0.7);\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.dialog {\\n  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\\n  background-color: white;\\n  width: 50%;\\n  height: 50%;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zY2VuZXMvdGVzdC1zY3JlZW4tZ2VuZXJpYy90ZXN0LXNjcmVlbi1nZW5lcmljLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3Qtc2NyZWVuLWdlbmVyaWMvdGVzdC1zY3JlZW4tZ2VuZXJpYy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLGVBQUE7RUFDQSxNQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsOEJBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FDQ0Y7O0FERUE7RUFDRSw0RUFBQTtFQUNBLHVCQUFBO0VBQ0EsVUFBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxZQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9zdG9yeS10ZXN0ZXIvc2NlbmVzL3Rlc3Qtc2NyZWVuLWdlbmVyaWMvdGVzdC1zY3JlZW4tZ2VuZXJpYy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5vdmVybGF5IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5kaWFsb2cge1xuICBib3gtc2hhZG93OiAwIDE0cHggMjhweCByZ2JhKDAsIDAsIDAsIDAuMjUpLCAwIDEwcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMjIpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgd2lkdGg6IDUwJTtcbiAgaGVpZ2h0OiA1MCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDhweDtcbn1cbiIsIi5vdmVybGF5IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5kaWFsb2cge1xuICBib3gtc2hhZG93OiAwIDE0cHggMjhweCByZ2JhKDAsIDAsIDAsIDAuMjUpLCAwIDEwcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMjIpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgd2lkdGg6IDUwJTtcbiAgaGVpZ2h0OiA1MCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDhweDtcbn0iXX0= */\"","import {Component, OnInit} from '@angular/core';\n\n@Component({\n\tselector: 'app-test-screen-generic',\n\ttemplateUrl: './test-screen-generic.component.html',\n\tstyleUrls: ['./test-screen-generic.component.scss']\n})\nexport abstract class TestScreenGenericComponent implements OnInit {\n\n\tconstructor() {\n\t}\n\n\tngOnInit() {\n\t}\n\n}\n","export default \"#storyteller-outside {\\n  background-color: #9a93ff;\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n#storyteller-tester {\\n  position: fixed;\\n  top: 8px;\\n  left: 8px;\\n  right: 8px;\\n  bottom: 8px;\\n  /*background-color:\\t\\tlightgreen;*/\\n  background-image: url(\\\"/assets/ui/temporaryparchment.jpg\\\");\\n}\\n\\n#scenerender-test {\\n  background-color: grey;\\n  width: 200px;\\n  height: 300px;\\n  border: 2px solid white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5LXRlc3Rlci9zdG9yeS10ZXN0ZXIuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N0b3J5LXRlc3Rlci9zdG9yeS10ZXN0ZXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFQyx5QkFBQTtFQUNBLGVBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0FDQUQ7O0FESUE7RUFFQyxlQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLGlDQUFBO0VBQ0EsMERBQUE7QUNGRDs7QURPQTtFQUdDLHNCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtBQ05EIiwiZmlsZSI6InNyYy9hcHAvc3RvcnktdGVzdGVyL3N0b3J5LXRlc3Rlci5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNzdG9yeXRlbGxlci1vdXRzaWRlXG57XG5cdGJhY2tncm91bmQtY29sb3I6ICM5YTkzZmY7XG5cdHBvc2l0aW9uOlx0XHRcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHRcdFx0MDtcblx0bGVmdDpcdFx0XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0XHRcdDA7XG5cdGJvdHRvbTpcdFx0XHRcdFx0MDtcbn1cblxuXG4jc3Rvcnl0ZWxsZXItdGVzdGVyXG57XG5cdHBvc2l0aW9uOlx0XHRcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHRcdFx0OHB4O1xuXHRsZWZ0Olx0XHRcdFx0XHQ4cHg7XG5cdHJpZ2h0Olx0XHRcdFx0XHQ4cHg7XG5cdGJvdHRvbTpcdFx0XHRcdFx0OHB4O1xuXHQvKmJhY2tncm91bmQtY29sb3I6XHRcdGxpZ2h0Z3JlZW47Ki9cblx0YmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy91aS90ZW1wb3JhcnlwYXJjaG1lbnQuanBnXCIpO1xuXG59XG5cblxuI3NjZW5lcmVuZGVyLXRlc3RcbntcblxuXHRiYWNrZ3JvdW5kLWNvbG9yOlx0XHRncmV5O1xuXHR3aWR0aDpcdFx0XHRcdFx0MjAwcHg7XG5cdGhlaWdodDpcdFx0XHRcdFx0MzAwcHg7XG5cdGJvcmRlcjpcdFx0XHRcdFx0MnB4IHNvbGlkIHdoaXRlO1xufVxuXG5cbiIsIiNzdG9yeXRlbGxlci1vdXRzaWRlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzlhOTNmZjtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbiNzdG9yeXRlbGxlci10ZXN0ZXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogOHB4O1xuICBsZWZ0OiA4cHg7XG4gIHJpZ2h0OiA4cHg7XG4gIGJvdHRvbTogOHB4O1xuICAvKmJhY2tncm91bmQtY29sb3I6XHRcdGxpZ2h0Z3JlZW47Ki9cbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy91aS90ZW1wb3JhcnlwYXJjaG1lbnQuanBnXCIpO1xufVxuXG4jc2NlbmVyZW5kZXItdGVzdCB7XG4gIGJhY2tncm91bmQtY29sb3I6IGdyZXk7XG4gIHdpZHRoOiAyMDBweDtcbiAgaGVpZ2h0OiAzMDBweDtcbiAgYm9yZGVyOiAycHggc29saWQgd2hpdGU7XG59Il19 */\"","import {Component, OnInit} from '@angular/core';\nimport {SceneUIService} from \"../scene-ui/scene-ui.service\";\nimport {TestBlueScreenComponent} from \"./scenes/test-blue-screen/test-blue-screen.component\";\nimport {TestGreenScreenComponent} from \"./scenes/test-green-screen/test-green-screen.component\";\nimport {TesterScene} from \"./tester-scene\";\n\n@Component({\n\tselector: 'app-story-tester',\n\ttemplateUrl: './story-tester.component.html',\n\tstyleUrls: ['./story-tester.component.scss']\n})\nexport class StoryTesterComponent implements OnInit {\n\n\n\tconstructor(private sceneui: SceneUIService) {\n\t}\n\n\tngOnInit() {\n\t}\n\n\tloadBlueScreen() {\n\t\tlet scene = new TesterScene();\n\t\tlet ref = this.sceneui.open(TestBlueScreenComponent, scene);\n\t\tref.afterClosed.subscribe(result => {\n\t\t\tconsole.log('Scene (BLUE) closed', result);\n\t\t});\n\t}\n\n\tloadGreenScreen() {\n\t\tlet scene = new TesterScene();\n\t\tlet ref = this.sceneui.open(TestGreenScreenComponent, scene);\n\t\tref.afterClosed.subscribe(result => {\n\t\t\tconsole.log('Scene (GREEN) closed', result);\n\t\t});\n\t}\n}\n","import {WanderScene} from \"../rpg-engine/wander-scene\";\n\n/**\n * Empty scene object so test layouts can work without loading an actual game\n */\nexport class TesterScene extends WanderScene {\n\n\tconstructor ()\n\t{\n\t\tsuper(null);\n\t}\n\n\tsceneFinished(): boolean {\n\t\treturn false;\n\t}\n}\n","export default \"#journeyrender {\\n  position: fixed;\\n  top: 8px;\\n  left: 8px;\\n  right: 8px;\\n  bottom: 30vh;\\n  border: 1px dashed black;\\n  overflow: auto;\\n}\\n\\n#viewrender {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n#journeyinfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 28vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\nbutton.journeychoice {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9qb3VybmV5LXN0ZXAvam91cm5leS1zdGVwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvam91cm5leS1zdGVwL2pvdXJuZXktc3RlcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLFVBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7RUFDQSxjQUFBO0FDQUQ7O0FER0E7RUFFQyxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7QUNERDs7QURJQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDSEQ7O0FET0E7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ05EIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL2pvdXJuZXktc3RlcC9qb3VybmV5LXN0ZXAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjam91cm5leXJlbmRlclxue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHQ4cHg7XG5cdGxlZnQ6XHRcdFx0OHB4O1xuXHRyaWdodDpcdFx0XHQ4cHg7XG5cdGJvdHRvbTpcdFx0XHQzMHZoO1xuXHRib3JkZXI6XHRcdFx0MXB4IGRhc2hlZCBibGFjaztcblx0b3ZlcmZsb3c6XHRcdGF1dG87XG59XG5cbiN2aWV3cmVuZGVyXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblx0dG9wOlx0XHRcdDA7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG59XG5cbiNqb3VybmV5aW5mb1xue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdGhlaWdodDpcdFx0XHQyOHZoO1xuXHRmb250LXNpemU6XHRcdDh2aDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG59XG5cblxuYnV0dG9uLmpvdXJuZXljaG9pY2Vcbntcblx0Ym9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0cGFkZGluZzpcdFx0MnB0IDhwdDtcblxuXHRmb250LXNpemU6XHRcdDR2aDtcbn1cbiIsIiNqb3VybmV5cmVuZGVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDhweDtcbiAgbGVmdDogOHB4O1xuICByaWdodDogOHB4O1xuICBib3R0b206IDMwdmg7XG4gIGJvcmRlcjogMXB4IGRhc2hlZCBibGFjaztcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG5cbiN2aWV3cmVuZGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbiNqb3VybmV5aW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiAyOHZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5idXR0b24uam91cm5leWNob2ljZSB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBwYWRkaW5nOiAycHQgOHB0O1xuICBmb250LXNpemU6IDR2aDtcbn0iXX0= */\"","import {AfterViewInit, Component, ElementRef, OnInit, ViewChild} from '@angular/core';\nimport {SceneRenderer} from \"../scene-renderer\";\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {Journey} from \"../../../rpg-engine/scenes/journey\";\nimport {WalkRenderer} from \"../lib/walk-renderer\";\n\n@Component({\n\tselector: 'app-journey-step',\n\ttemplateUrl: './journey-step.component.html',\n\tstyleUrls: ['./journey-step.component.scss']\n})\nexport class JourneyStepComponent extends SceneRenderer implements OnInit, AfterViewInit {\n\n\t@ViewChild(\"renderholder\", {static: false}) renderholder: ElementRef;\n\t@ViewChild(\"renderview\", {static: false}) renderview: ElementRef;\n\n\tjourneyscene: Journey;\n\tviewrenderer: WalkRenderer;\n\n\n\tconstructor(public sceneref: SceneRef) {\n\t\tsuper(sceneref);\n\t\tthis.journeyscene = this.sceneref.scene as Journey;\n\t\tconsole.log(\"journey path: \", JSON.stringify(this.journeyscene.course));\n\t}\n\n\tngOnInit() {\n\n\t}\n\n\tngAfterViewInit(): void {\n\t\tthis.viewrenderer = new WalkRenderer(this.journeyscene.game.worldmap, this.renderview);\n\t\tlet ui = this;\n\t\tthis.viewrenderer.loadAssets(function ()\n\t\t{\n\t\t\tui.renderStep();\n\t\t});\n\t}\n\n\n\tsetCamp()\n\t{\n\t\tconsole.log(\"clicked SET CAMP\");\n\t}\n\n\tcontinueJourney()\n\t{\n\t\tconsole.log(\"clicked JOURNEY ONWARDs\");\n\n\t\tthis.journeyscene.step();\n\t\tthis.journeyscene.game.hero.setCoordinates(this.journeyscene.getCurrentCoordinates());\n\t\tif (!this.journeyscene.sceneFinished())\n\t\t{\n\t\t\tthis.renderStep();\n\t\t}\n\t\telse {\n\t\t\tthis.sceneref.triggerSceneCheck();\n\t\t}\n\n\n\t}\n\n\trenderStep ()\n\t{\n\t\tconst vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n\t\tthis.viewrenderer.renderView(this.journeyscene.getCurrentCoordinates(), vector);\n\t}\n\n\tshowMap()\n\t{\n\t\tconsole.log(\"clicked SHOW MAP\");\n\t}\n\n\tgetDirectionDescription (): string {\n\t\tlet vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n\t\tlet dirstring = \"\";\n\n\t\tif (vector[1] > 0) {\n\t\t\tdirstring += \"South\";\n\t\t} else if (vector[1] < 0) {\n\t\t\tdirstring += \"North\";\n\t\t}\n\t\tif (vector[0] > 0) {\n\t\t\tdirstring += \"East\";\n\t\t} else if (vector[0] < 0) {\n\t\t\tdirstring += \"West\";\n\t\t}\n\n\t\treturn dirstring;\n\t}\n\n\n\n\n\n\n\n\n}\n","import {WorldMap} from \"../../../rpg-engine/world/world-map\";\nimport Konva from \"konva\";\nimport {WorldPosition} from \"../../../rpg-engine/world/world-position\";\nimport {ElementRef} from \"@angular/core\";\n\nexport class WalkRenderer\n{\n\tworldmap: WorldMap;\n\n\t// NOTE: these could be configured via a tileset theme\n\n\t// TILESBYTERRRAIN = {\n\t// \t\"M\": \"basetilemountain400.png\",\n\t// \t\"H\": \"basetilehills400.png\",\n\t// \t\"F\": \"basetileforest400.png\",\n\t// \t\"P\": \"basetileplains400.png\",\n\t// };\n\n\tTILESBYTERRRAIN = {\n\t\t\"M\": \"basetilemountain.png\",\n\t\t\"H\": \"basetilehills.png\",\n\t\t\"F\": \"basetileforest.png\",\n\t\t\"P\": \"basetileplains.png\",\n\t};\n\tPATH_TILES = \"assets/graph/fptiles/\";\n\tterraintiles: Map<string, string>;\n\ttileimages: Map<string, HTMLImageElement>;\n\n\tMARKERSBYID = {\n\t\t\"towns\": \"basetilecitadel.png\",\n\t};\n\tPATH_MARKERS = \"assets/graph/fptiles/\";\n\tmarkerfiles: Map<string, string>;\n\tmarkerimages: Map<string, HTMLImageElement>;\n\n\n\tEXTRAIMGS = {\n\t\t// \"skybgr\": \"/assets/graph/bgr/sunspearsky.jpg\",\n\t\t\"skybgr\": \"assets/graph/bgr/sunspearsky_gscale.png\"\n\t};\n\n\textrafiles: Map<string, string>;\n\textraimages: Map<string, HTMLImageElement>;\n\n\trenderview: ElementRef;\n\n\tconstructor (worldmap: WorldMap, target: ElementRef)\n\t{\n\t\tthis.worldmap = worldmap;\n\t\tthis.renderview = target;\n\t\tconsole.log(this.renderview);\n\t\tconsole.log(\"render view id\", this.renderview.nativeElement.id);\n\t}\n\n\tloadAssets (callback: Function)\n\t{\n\t\tthis.terraintiles = new Map<string, string>();\n\t\tthis.tileimages = new Map<string, HTMLImageElement>();\n\t\tthis.markerfiles = new Map<string, string>();\n\t\tthis.markerimages = new Map<string, HTMLImageElement>();\n\t\tthis.extrafiles = new Map<string, string>();\n\t\tthis.extraimages = new Map<string, HTMLImageElement>();\n\n\t\tfor (let key in this.TILESBYTERRRAIN) {\n\t\t\tthis.terraintiles.set(key, this.PATH_TILES + this.TILESBYTERRRAIN[key]);\n\t\t}\n\t\tthis.tileimages = new Map<string, HTMLImageElement>();\n\t\tfor (let terrain of this.terraintiles.keys()) {\n\t\t\tthis.tileimages.set(terrain, null);\n\t\t}\n\n\t\tfor (let key in this.MARKERSBYID) {\n\t\t\tthis.markerfiles.set(key, this.PATH_MARKERS + this.MARKERSBYID[key]);\n\t\t}\n\t\tthis.markerimages = new Map<string, HTMLImageElement>();\n\t\tfor (let markerid of this.markerfiles.keys()) {\n\t\t\tthis.markerimages.set(markerid, null);\n\t\t}\n\n\t\tfor (let key in this.EXTRAIMGS) {\n\t\t\tthis.extrafiles.set(key, this.EXTRAIMGS[key]);\n\t\t}\n\t\tthis.extraimages = new Map<string, HTMLImageElement>();\n\t\tfor (let fileid of this.extrafiles.keys()) {\n\t\t\tthis.extraimages.set(fileid, null);\n\t\t}\n\n\t\t// LOADING ASSETS\n\t\tlet ui = this;\n\t\tfor (let terrain of this.terraintiles.keys()) {\n\t\t\tlet imageObj = new Image();\n\t\t\timageObj.onload = function () {\n\t\t\t\tui.tileimages.set(terrain, imageObj);\n\t\t\t\tui.checkReadyRender(callback);\n\t\t\t};\n\t\t\timageObj.src = this.terraintiles.get(terrain);\n\t\t}\n\n\t\tfor (let markerid of this.markerfiles.keys()) {\n\t\t\tlet imageObj = new Image();\n\t\t\timageObj.onload = function () {\n\t\t\t\tui.markerimages.set(markerid, imageObj);\n\t\t\t\tui.checkReadyRender(callback);\n\t\t\t};\n\t\t\timageObj.src = this.markerfiles.get(markerid);\n\t\t}\n\n\t\tfor (let fileid of this.extrafiles.keys()) {\n\t\t\tlet imageObj = new Image();\n\t\t\timageObj.onload = function () {\n\t\t\t\tui.extraimages.set(fileid, imageObj);\n\t\t\t\tui.checkReadyRender(callback);\n\t\t\t};\n\t\t\timageObj.src = this.extrafiles.get(fileid);\n\t\t}\n\n\n\t}\n\n\tcheckReadyRender (callback: Function)\n\t{\n\t\tfor (let terrain of this.tileimages.keys()) {\n\t\t\tif (this.tileimages.get(terrain) == null) {\n\t\t\t\t// console.log(\"missing maptile\", terrain, \"wait\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor (let markerid of this.markerimages.keys()) {\n\t\t\tif (this.markerimages.get(markerid) == null) {\n\t\t\t\t// console.log(\"missing mapmarker\", markerid, \"wait\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor (let fileid of this.extraimages.keys()) {\n\t\t\tif (this.extraimages.get(fileid) == null) {\n\t\t\t\t// console.log(\"missing mapmarker\", markerid, \"wait\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\n\t\tcallback();\n\t}\n\n\n\trenderView (pos: WorldPosition, vector: number[])\n\t{\n\t\t// console.log(\"rendering step \", this.journeyscene.stepid);\n\t\t// const vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n\n\t\t// console.log(\"checking step view in dir \", vector, \"from\", this.journeyscene.getCurrentCoordinates().getCoords());\n\t\tconst FOV = 90;\n\t\tlet rect = this.renderview.nativeElement.getBoundingClientRect();\n\t\tconsole.log(\"RECT:\", rect);\n\t\tconst VPW = this.renderview.nativeElement.clientWidth;\n\t\tconst VPH = this.renderview.nativeElement.clientHeight;\n\n\t\tconst PANWIDTH = VPW / (FOV / 360);\n\n\t\tconsole.log(\"using fov\", FOV, \"on \" + VPW + \"*\" + VPH + \": pan to \" + PANWIDTH + \"px\");\n\n\t\tconst MAXDIST = 9;\n\n\t\tlet rendergrid = this.getRenderGrid(pos, vector, MAXDIST);\n\n\n\t\tlet stage = new Konva.Stage({\n\t\t\tcontainer: this.renderview.nativeElement.id,\n\t\t\twidth: VPW,\n\t\t\theight: VPH,\n\n\t\t});\n\n\t\t// console.log(rendergrid);\n\t\t// NOTE: following works ONLY with 90 FOV\n\t\t// also we are actually half step inside each tile but since dist and angle stay the same we ignore\n\n\t\tconst HCENTER = VPW * 0.5;\n\t\tconst VCENTER = VPH * 0.4;\n\t\tconst PHEIGHT = VPH - VCENTER;\n\n\n\t\tlet tilelayer = new Konva.Layer({\n\t\t});\n\t\tstage.add(tilelayer);\n\n\t\t// BGR + CUT\n\n\t\tlet bgrimg = this.extraimages.get(\"skybgr\");\n\t\t// let filename = terraintiles.get(terrain);\n\t\tlet bgr = new Konva.Image({\n\t\t\timage: bgrimg,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\twidth: VPW,\n\t\t\theight: VPH * 0.8\n\t\t});\n\t\ttilelayer.add(bgr);\n\n\t\tlet bgrcut = VCENTER + PHEIGHT / MAXDIST;\n\t\tlet rect1 = new Konva.Rect({\n\t\t\tx: 0,\n\t\t\ty:  bgrcut,\n\t\t\twidth: VPW,\n\t\t\theight: VPH - (bgrcut),\n\t\t\tfill: 'white',\n\t\t\t// stroke: 'black',\n\t\t\t// strokeWidth: 4\n\t\t});\n\t\t// add the shape to the layer\n\t\ttilelayer.add(rect1);\n\n\n\n\t\tfor (let gp of rendergrid)\n\t\t{\n\t\t\t// field size at dist:\n\t\t\t// 1: 1, 2: 3, 3: 5, 4: 7\n\t\t\t// y = x + (x-1)\n\t\t\tlet fsize = gp.dist + (gp.dist - 1);\n\t\t\tlet gsize = VPH / fsize;\n\t\t\tgsize = VPW / fsize;\n\n\t\t\t// let relpos = gp.angrel - 0.5;\n\t\t\t// let hpixpos = HCENTER + ();\n\n\t\t\tlet hpixpos = gp.angrel * VPW - (gsize * 0.5);\n\t\t\thpixpos = VPW - hpixpos - gsize; // fix mirroring\n\t\t\tlet vpixpos = (VCENTER + PHEIGHT / gp.dist) - gsize;\n\n\t\t\tlet terrain = this.worldmap.getTerrainAt(gp.coords[0], gp.coords[1]);\n\t\t\tlet loc = this.worldmap.getLocationAt(gp.coords);\n\n\t\t\tif (terrain == null && loc == null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet tileimg;\n\t\t\tif (terrain != null) {\n\t\t\t\ttileimg = this.tileimages.get(terrain);\n\t\t\t\t// let filename = terraintiles.get(terrain);\n\t\t\t\tlet tile = new Konva.Image({\n\t\t\t\t\timage: tileimg,\n\t\t\t\t\tx: hpixpos,\n\t\t\t\t\ty: vpixpos,\n\t\t\t\t\twidth: gsize,\n\t\t\t\t\theight: gsize\n\t\t\t\t});\n\t\t\t\ttilelayer.add(tile);\n\t\t\t}\n\n\t\t\tif (loc != null)\n\t\t\t{\n\t\t\t\ttileimg = this.markerimages.get(loc.loctype);\n\t\t\t\t// let filename = terraintiles.get(terrain);\n\t\t\t\tlet tile = new Konva.Image({\n\t\t\t\t\timage: tileimg,\n\t\t\t\t\tx: hpixpos,\n\t\t\t\t\ty: vpixpos,\n\t\t\t\t\twidth: gsize,\n\t\t\t\t\theight: gsize\n\t\t\t\t});\n\t\t\t\ttilelayer.add(tile);\n\t\t\t}\n\n\t\t}\n\t\ttilelayer.batchDraw();\n\n\n\t\tfunction parchifyWhite (imageData) {\n\t\t\t// let ctx = canvas.getContext('2d');\n\t\t\t// let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\t\t\tlet nPixels = imageData.data.length;\n\t\t\tfor (let i = 0; i < nPixels; i += 4)\n\t\t\t{\n\t\t\t\tlet r = imageData.data[i];\n\t\t\t\tlet g = imageData.data[i + 1];\n\t\t\t\tlet b = imageData.data[i + 2];\n\t\t\t\tlet a = imageData.data[i + 3];\n\t\t\t\tif (a > 200)\n\t\t\t\t{\n\t\t\t\t\t// using brightness (0.21  R) + (0.72  G) + (0.07  B)\n\t\t\t\t\t// instead of average ((r + g + b) / 3)\n\t\t\t\t\timageData.data[i + 3] = 255 - ((0.21 * r) + (0.72 * g) + (0.07 * b));\n\t\t\t\t}\n\t\t\t}\n\t\t\t//\n\t\t\t// for (let i = 3; i < nPixels; i += 4) {\n\t\t\t// \tif (imageData.data[i] > 0) {\n\t\t\t// \t\timageData.data[i] = 255;\n\t\t\t// \t}\n\t\t\t// }\n\t\t\t// ctx.clearRect(0, 0, canvas.width, canvas.height);\n\t\t\t// ctx.putImageData(imageData, 0, 0);\n\t\t\t// return canvas;\n\t\t}\n\n\t\ttilelayer.cache();\n\t\ttilelayer.filters([parchifyWhite]);\n\t\t// tilelayer.filters([Konva.Filters.Brighten]);\n\t\t// tilelayer.brightness(0.8);\n\t\ttilelayer.batchDraw();\n\n\n\t}\n\n\n\n\tgetRenderGrid (pov: WorldPosition, vector: number[], maxdist: number)\n\t{\n\t\t// const pov = this.journeyscene.getCurrentCoordinates();\n\t\tconst povX = pov.x;\n\t\tconst povY = pov.y;\n\t\t// const vector = this.journeyscene.getStepDirection(this.journeyscene.stepid);\n\t\tconst angle = WalkRenderer.calcAngleDegreesEast(vector[0], vector[1]);\n\n\n\n\t\t// base angle is EAST\n\n\t\tconst FOV = 90;\n\n\t\tlet angmin = ((angle - FOV / 2) + 360) % 360;\n\t\tlet angmax = ((angle + FOV / 2) + 360) % 360;\n\t\tlet angflip = angmin > angmax;\n\t\tif (angflip)\n\t\t{\n\t\t\tangmax += 360;\n\t\t}\n\t\tlet angv = (angle + 360) % 360;\n\t\tlet angdiff = angmax - angmin;\n\n\t\tconsole.log(\"dir angle is \", angv, \"checking between \", angmin, angmax);\n\n\t\tlet totvis = 0;\n\t\tlet tfrom = new Date().getTime();\n\t\tlet rendergrid: GridPoint[] = [];\n\t\tfor (let x = povX - maxdist; x <= povX + maxdist; x++)\n\t\t{\n\t\t\tfor (let y = povY - maxdist; y <= povY + maxdist; y++)\n\t\t\t{\n\t\t\t\tif (x === povX && y === povY)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet deltaX = x - povX;\n\t\t\t\tlet deltaY = y - povY;\n\t\t\t\tlet angr = WalkRenderer.calcAngleDegreesEast(deltaX, deltaY);\n\t\t\t\tangr = (angr + 360) % 360;\n\t\t\t\tif (angflip && angr <= 45)\n\t\t\t\t{\n\t\t\t\t\tangr += 360;\n\t\t\t\t}\n\n\t\t\t\tif (angmin <= angr && angr <= angmax)\n\t\t\t\t{\n\t\t\t\t\ttotvis++;\n\t\t\t\t\tlet angrel = (angmax - angr) / FOV;\n\t\t\t\t\tlet dist = Math.sqrt((deltaX ** 2) + (deltaY ** 2));\n\t\t\t\t\tif (dist <= maxdist)\n\t\t\t\t\t{\n\t\t\t\t\t\t// we are using a SQUARE box to get the points\n\t\t\t\t\t\t// console.log(x, y, angr);\n\t\t\t\t\t\trendergrid.push({coords: [x, y], angrel: angrel, dist: dist});\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t}\n\t\tlet tto = new Date().getTime();\n\t\tconsole.log(\"tot vis tiles\", totvis,  tto - tfrom);\n\n\t\t// sorting far to close THEN left to right, second sort is not strictily necessary\n\t\trendergrid.sort(function (a: GridPoint, b: GridPoint) {\n\t\t\t// if (a.dist !== b.dist)\n\t\t\t// {\n\t\t\t// \treturn b.dist - a.dist;\n\t\t\t// }\n\t\t\t// else {\n\t\t\t// \treturn a.angrel - b.angrel;\n\t\t\t// }\n\t\t\treturn b.dist - a.dist;\n\t\t});\n\n\t\treturn rendergrid;\n\t}\n\n\n\tstatic calcAngleDegreesEast (x, y) {\n\t\treturn Math.atan2(y, x) * 180 / Math.PI;\n\t}\n\n}\n\n\ninterface GridPoint {\n\n\tcoords: number[];\n\tangrel: number;\n\tdist:\tnumber;\n\n}\n","export default \".trailview {\\n  position: fixed;\\n  left: 1vw;\\n  right: 1vw;\\n  top: 1vw;\\n  height: 48vh;\\n  border: 2px dashed black;\\n}\\n\\n.trailcontext {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 48vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n.trailcontrols {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9wYXNzYWdlLXRocm91Z2gvcGFzc2FnZS10aHJvdWdoLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvcGFzc2FnZS10aHJvdWdoL3Bhc3NhZ2UtdGhyb3VnaC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxTQUFBO0VBQ0EsVUFBQTtFQUNBLFFBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7QUNBRDs7QURHQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDRkQ7O0FETUE7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ0xEIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3Bhc3NhZ2UtdGhyb3VnaC9wYXNzYWdlLXRocm91Z2guY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudHJhaWx2aWV3XG57XG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0bGVmdDpcdFx0XHQxdnc7XG5cdHJpZ2h0Olx0XHRcdDF2dztcblx0dG9wOlx0XHRcdDF2dztcblx0aGVpZ2h0Olx0XHRcdDQ4dmg7XG5cdGJvcmRlcjpcdFx0XHQycHggZGFzaGVkIGJsYWNrO1xufVxuXG4udHJhaWxjb250ZXh0XG57XG5cdHBvc2l0aW9uOlx0XHRmaXhlZDtcblx0bGVmdDpcdFx0XHQwO1xuXHRyaWdodDpcdFx0XHQwO1xuXHRib3R0b206XHRcdFx0MDtcblx0aGVpZ2h0Olx0XHRcdDQ4dmg7XG5cdGZvbnQtc2l6ZTpcdFx0OHZoO1xuXG5cdHRleHQtYWxpZ246XHRcdGNlbnRlcjtcbn1cblxuXG4udHJhaWxjb250cm9sc1xue1xuXHRib3JkZXI6XHRcdFx0MXB4IHNvbGlkIGJsYWNrO1xuXHRwYWRkaW5nOlx0XHQycHQgOHB0O1xuXG5cdGZvbnQtc2l6ZTpcdFx0NHZoO1xufVxuIiwiLnRyYWlsdmlldyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMXZ3O1xuICByaWdodDogMXZ3O1xuICB0b3A6IDF2dztcbiAgaGVpZ2h0OiA0OHZoO1xuICBib3JkZXI6IDJweCBkYXNoZWQgYmxhY2s7XG59XG5cbi50cmFpbGNvbnRleHQge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG4gIGhlaWdodDogNDh2aDtcbiAgZm9udC1zaXplOiA4dmg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnRyYWlsY29udHJvbHMge1xuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgcGFkZGluZzogMnB0IDhwdDtcbiAgZm9udC1zaXplOiA0dmg7XG59Il19 */\"","import {AfterViewInit, Component, OnInit} from '@angular/core';\nimport {SceneRenderer} from \"../scene-renderer\";\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {PassageTrail} from \"../../../rpg-engine/scenes/passage-trail\";\n\n@Component({\n\tselector: 'app-passage-through',\n\ttemplateUrl: './passage-through.component.html',\n\tstyleUrls: ['./passage-through.component.scss']\n})\nexport class PassageThroughComponent  extends SceneRenderer implements OnInit, AfterViewInit {\n\n\ttrail: PassageTrail;\n\tdirection: number;\n\n\tconstructor(public sceneref: SceneRef) {\n\t\tsuper(sceneref);\n\t\tthis.trail = this.sceneref.scene as PassageTrail;\n\t}\n\n\tisTrailing ()\n\t{\n\t\treturn this.trail.progress > -1 && this.trail.progress < this.trail.passage.length();\n\t}\n\n\tjourneyOnwards ()\n\t{\n\t\tthis.trail.step();\n\t}\n\n\tleaveTrail ()\n\t{\n\t\tthis.trail.leaving = true;\n\t\tthis.sceneref.triggerSceneCheck();\n\t}\n\n\tngOnInit() {\n\t}\n\n\tngAfterViewInit(): void {\n\t}\n\n}\n","export default \"#journeyrender {\\n  position: fixed;\\n  top: 8px;\\n  left: 8px;\\n  right: 8px;\\n  bottom: 30vh;\\n  border: 1px dashed black;\\n  overflow: auto;\\n}\\n\\n#viewrender {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n\\n#journeyinfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 28vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\nbutton.journeychoice {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy9yb2FtaW5nLXN0ZXAvcm9hbWluZy1zdGVwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvcm9hbWluZy1zdGVwL3JvYW1pbmctc3RlcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLGVBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLFVBQUE7RUFDQSxZQUFBO0VBQ0Esd0JBQUE7RUFDQSxjQUFBO0FDQUQ7O0FER0E7RUFFQyxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7QUNERDs7QURJQTtFQUVDLGVBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtFQUVBLGtCQUFBO0FDSEQ7O0FET0E7RUFFQyx1QkFBQTtFQUNBLGdCQUFBO0VBRUEsY0FBQTtBQ05EIiwiZmlsZSI6InNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3JvYW1pbmctc3RlcC9yb2FtaW5nLXN0ZXAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjam91cm5leXJlbmRlclxue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdHRvcDpcdFx0XHQ4cHg7XG5cdGxlZnQ6XHRcdFx0OHB4O1xuXHRyaWdodDpcdFx0XHQ4cHg7XG5cdGJvdHRvbTpcdFx0XHQzMHZoO1xuXHRib3JkZXI6XHRcdFx0MXB4IGRhc2hlZCBibGFjaztcblx0b3ZlcmZsb3c6XHRcdGF1dG87XG59XG5cbiN2aWV3cmVuZGVyXG57XG5cdHBvc2l0aW9uOlx0XHRhYnNvbHV0ZTtcblx0dG9wOlx0XHRcdDA7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG59XG5cbiNqb3VybmV5aW5mb1xue1xuXHRwb3NpdGlvbjpcdFx0Zml4ZWQ7XG5cdGxlZnQ6XHRcdFx0MDtcblx0cmlnaHQ6XHRcdFx0MDtcblx0Ym90dG9tOlx0XHRcdDA7XG5cdGhlaWdodDpcdFx0XHQyOHZoO1xuXHRmb250LXNpemU6XHRcdDh2aDtcblxuXHR0ZXh0LWFsaWduOlx0XHRjZW50ZXI7XG59XG5cblxuYnV0dG9uLmpvdXJuZXljaG9pY2Vcbntcblx0Ym9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0cGFkZGluZzpcdFx0MnB0IDhwdDtcblxuXHRmb250LXNpemU6XHRcdDR2aDtcbn1cbiIsIiNqb3VybmV5cmVuZGVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDhweDtcbiAgbGVmdDogOHB4O1xuICByaWdodDogOHB4O1xuICBib3R0b206IDMwdmg7XG4gIGJvcmRlcjogMXB4IGRhc2hlZCBibGFjaztcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG5cbiN2aWV3cmVuZGVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG59XG5cbiNqb3VybmV5aW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiAyOHZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5idXR0b24uam91cm5leWNob2ljZSB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBwYWRkaW5nOiAycHQgOHB0O1xuICBmb250LXNpemU6IDR2aDtcbn0iXX0= */\"","import {AfterViewInit, Component, ElementRef, OnInit, ViewChild} from '@angular/core';\nimport {WalkRenderer} from \"../lib/walk-renderer\";\nimport {Roaming} from \"../../../rpg-engine/scenes/roaming\";\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {SceneRenderer} from \"../scene-renderer\";\n\n@Component({\n\tselector: 'app-roaming-step',\n\ttemplateUrl: './roaming-step.component.html',\n\tstyleUrls: ['./roaming-step.component.scss']\n})\nexport class RoamingStepComponent extends SceneRenderer implements OnInit, AfterViewInit {\n\n\t@ViewChild(\"renderholder\", {static: false}) renderholder: ElementRef;\n\t@ViewChild(\"renderview\", {static: false}) renderview: ElementRef;\n\n\troamingscene: Roaming;\n\tviewrenderer: WalkRenderer;\n\n\n\n\tconstructor(public sceneref: SceneRef) {\n\t\tsuper(sceneref);\n\t\tthis.roamingscene = this.sceneref.scene as Roaming;\n\t\tconsole.log(\"roaming scene: \", this.roamingscene);\n\n\t}\n\n\n\tngOnInit() {\n\t}\n\n\n\tngAfterViewInit(): void {\n\t\tthis.viewrenderer = new WalkRenderer(this.roamingscene.game.worldmap, this.renderview);\n\t\tlet ui = this;\n\t\tthis.viewrenderer.loadAssets(function ()\n\t\t{\n\t\t\tui.renderStep();\n\t\t});\n\t}\n\n\trenderStep ()\n\t{\n\t\tconst vector = this.roamingscene.direction;\n\t\tthis.viewrenderer.renderView(this.roamingscene.current, vector);\n\t}\n\n\n\tgetDirectionDescription (): string {\n\t\tlet vector = this.roamingscene.direction;\n\t\tlet dirstring = \"\";\n\n\t\tif (vector[1] > 0) {\n\t\t\tdirstring += \"South\";\n\t\t} else if (vector[1] < 0) {\n\t\t\tdirstring += \"North\";\n\t\t}\n\t\tif (vector[0] > 0) {\n\t\t\tdirstring += \"East\";\n\t\t} else if (vector[0] < 0) {\n\t\t\tdirstring += \"West\";\n\t\t}\n\n\t\treturn dirstring;\n\t}\n\tgetDayOfTravel ()\n\t{\n\t\treturn this.roamingscene.steps + 1;\n\t}\n\n\tmoveTurnLeft ()\n\t{\n\t\tthis.roamingscene.changeDirection(-1);\n\t\tthis.renderStep();\n\t}\n\n\tmoveTurnRight ()\n\t{\n\t\tthis.roamingscene.changeDirection(1);\n\t\tthis.renderStep();\n\t}\n\n\tmoveForward ()\n\t{\n\t\tthis.roamingscene.stepForward();\n\t\tthis.roamingscene.game.hero.setCoordinates(this.roamingscene.current);\n\t\tif (!this.roamingscene.sceneFinished())\n\t\t{\n\t\t\tthis.renderStep();\n\t\t}\n\t\telse {\n\t\t\tthis.sceneref.triggerSceneCheck();\n\t\t}\n\t}\n\n\tactionSetCamp ()\n\t{\n\n\t}\n\n\n\tshowMap ()\n\t{\n\t\t// tba\n\t}\n\n\n}\n","import {SceneRef} from \"../../scene-ui/scene-ref\";\n\nexport abstract class SceneRenderer {\n\n\tprotected constructor(public sceneref: SceneRef)\n\t{\n\n\t}\n}\n","export default \"#towninfo {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 48vh;\\n  font-size: 8vh;\\n  text-align: center;\\n}\\n\\n.movecontrols {\\n  border: 1px solid black;\\n  padding: 2pt 8pt;\\n  font-size: 4vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy90b3duLXVpL3Rvd24tdWkuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy90b3duLXVpL3Rvd24tdWkuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFQyxlQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7RUFFQSxrQkFBQTtBQ0REOztBREtBO0VBRUMsdUJBQUE7RUFDQSxnQkFBQTtFQUVBLGNBQUE7QUNKRCIsImZpbGUiOiJzcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy90b3duLXVpL3Rvd24tdWkuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjdG93bmluZm9cbntcblx0cG9zaXRpb246XHRcdGZpeGVkO1xuXHRsZWZ0Olx0XHRcdDA7XG5cdHJpZ2h0Olx0XHRcdDA7XG5cdGJvdHRvbTpcdFx0XHQwO1xuXHRoZWlnaHQ6XHRcdFx0NDh2aDtcblx0Zm9udC1zaXplOlx0XHQ4dmg7XG5cblx0dGV4dC1hbGlnbjpcdFx0Y2VudGVyO1xufVxuXG5cbi5tb3ZlY29udHJvbHNcbntcblx0Ym9yZGVyOlx0XHRcdDFweCBzb2xpZCBibGFjaztcblx0cGFkZGluZzpcdFx0MnB0IDhwdDtcblxuXHRmb250LXNpemU6XHRcdDR2aDtcbn1cbiIsIiN0b3duaW5mbyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiA0OHZoO1xuICBmb250LXNpemU6IDh2aDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4ubW92ZWNvbnRyb2xzIHtcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gIHBhZGRpbmc6IDJwdCA4cHQ7XG4gIGZvbnQtc2l6ZTogNHZoO1xufSJdfQ== */\"","import {AfterViewInit, Component, OnInit} from '@angular/core';\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {SceneRenderer} from \"../scene-renderer\";\nimport {TownNav} from \"../../../rpg-engine/scenes/town-nav\";\n\n@Component({\n\tselector: 'app-town-ui',\n\ttemplateUrl: './town-ui.component.html',\n\tstyleUrls: ['./town-ui.component.scss']\n})\nexport class TownUIComponent extends SceneRenderer implements OnInit, AfterViewInit {\n\n\n\ttownscene: TownNav;\n\n\tconstructor(public sceneref: SceneRef) {\n\t\tsuper(sceneref);\n\t\tthis.townscene = this.sceneref.scene as TownNav;\n\t\tconsole.log(\"town info: \", JSON.stringify(this.townscene.town));\n\t}\n\n\tngOnInit() {\n\t}\n\n\tngAfterViewInit(): void {\n\t}\n\n\tleaveTown ()\n\t{\n\t\tthis.townscene.locpoint = TownNav.LOC_LEAVE;\n\t\tthis.sceneref.triggerSceneCheck();\n\t}\n\n}\n","export default \"#mapholder {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3NjZW5lcy93b3JsZC1tYXAtdmlldy93b3JsZC1tYXAtdmlldy5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvc3Rvcnl0ZWxsZXIvc2NlbmVzL3dvcmxkLW1hcC12aWV3L3dvcmxkLW1hcC12aWV3LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUMsa0JBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0FDQUQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeXRlbGxlci9zY2VuZXMvd29ybGQtbWFwLXZpZXcvd29ybGQtbWFwLXZpZXcuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjbWFwaG9sZGVyXG57XG5cdHBvc2l0aW9uOlx0YWJzb2x1dGU7XG5cdHRvcDpcdFx0MDtcblx0bGVmdDpcdFx0MDtcblx0cmlnaHQ6XHRcdDA7XG5cdGJvdHRvbTpcdFx0MDtcbn1cblxuIiwiI21hcGhvbGRlciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xufSJdfQ== */\"","import {AfterViewInit, Component, ElementRef, EventEmitter, OnInit, Output, ViewChild} from '@angular/core';\nimport {SceneRef} from \"../../../scene-ui/scene-ref\";\nimport {WorldMap} from \"../../../rpg-engine/world/world-map\";\nimport Konva from 'konva';\nimport {SceneRenderer} from \"../scene-renderer\";\nimport {JourneyDeparture} from \"../../../rpg-engine/scenes/journey-departure\";\nimport {Place} from \"../../../rpg-engine/world/locs/Place\";\n\n@Component({\n\tselector: 'app-world-map-view',\n\ttemplateUrl: './world-map-view.component.html',\n\tstyleUrls: ['./world-map-view.component.scss']\n})\nexport class WorldMapViewComponent extends SceneRenderer implements OnInit, AfterViewInit {\n\n\t@ViewChild(\"mapview\", {static: false}) mapdom: ElementRef;\n\t@ViewChild(\"mapholder\", {static: false}) container: ElementRef;\n\t@Output() scenecheck = new EventEmitter<object>();\n\n\n\tTILESIZE = 48;\n\n\n\tTILESBYTERRRAIN = {\n\t\t\"M\": \"worldmaptile_mountains_trans.png\",\n\t\t\"H\": \"worldmaptile_hills_trans.png\",\n\t\t\"F\": \"worldmaptile_woods_trans.png\",\n\t\t\"P\": \"worldmaptile_empty.png\",\n\t};\n\tPATH_TILES = \"assets/graph/maptiles/\";\n\tterraintiles: Map<string, string>;\n\ttileimages: Map<string, HTMLImageElement>;\n\n\tMARKERSBYID = {\n\t\t\"towns\": \"worldmapmarker_castle_trans.png\",\n\t\t\"passes\": \"worldmapmarker_mountainpass_trans.png\",\n\t\t\"hero\": \"worldmapmarker_hero_trans.png\",\n\t};\n\tPATH_MARKERS = \"assets/graph/mapmarkers/\";\n\tmarkerfiles: Map<string, string>;\n\tmarkerimages: Map<string, HTMLImageElement>;\n\n\tworldmap: WorldMap;\n\n\tmapscene: JourneyDeparture;\n\n\tconstructor(public sceneref: SceneRef) {\n\t\tsuper(sceneref);\n\n\t\tconsole.log(\"constructor w sref game \", this.sceneref.game);\n\n\t\tthis.mapscene = this.sceneref.scene as JourneyDeparture;\n\t\tthis.prepareAssetsHolders();\n\t}\n\n\tprepareAssetsHolders ()\n\t{\n\t\tthis.terraintiles = new Map<string, string>();\n\t\tthis.tileimages = new Map<string, HTMLImageElement>();\n\t\tthis.markerfiles = new Map<string, string>();\n\t\tthis.markerimages = new Map<string, HTMLImageElement>();\n\t\tfor (let key in this.TILESBYTERRRAIN) {\n\t\t\tthis.terraintiles.set(key, this.PATH_TILES + this.TILESBYTERRRAIN[key]);\n\t\t}\n\t\tthis.tileimages = new Map<string, HTMLImageElement>();\n\t\tfor (let terrain of this.terraintiles.keys()) {\n\t\t\tthis.tileimages.set(terrain, null);\n\t\t}\n\n\t\tfor (let key in this.MARKERSBYID) {\n\t\t\tthis.markerfiles.set(key, this.PATH_MARKERS + this.MARKERSBYID[key]);\n\t\t}\n\t\tthis.markerimages = new Map<string, HTMLImageElement>();\n\t\tfor (let markerid of this.markerfiles.keys()) {\n\t\t\tthis.markerimages.set(markerid, null);\n\t\t}\n\n\t}\n\n\tngOnInit() {\n\n\t\tconsole.log(\"starting worldmap w sref game \", this.sceneref);\n\t\tthis.worldmap = this.sceneref.game.worldmap;\n\n\t\tthis.loadAssets();\n\n\t}\n\n\n\tngAfterViewInit() {\n\t\t// this.loadAssets();\n\n\n\t}\n\n\tloadAssets() {\n\t\tlet ui = this;\n\t\tfor (let terrain of this.terraintiles.keys()) {\n\t\t\tlet imageObj = new Image();\n\t\t\timageObj.onload = function () {\n\t\t\t\tui.tileimages.set(terrain, imageObj);\n\t\t\t\tui.checkReadyRender();\n\t\t\t};\n\t\t\timageObj.src = this.terraintiles.get(terrain);\n\t\t}\n\n\t\tfor (let markerid of this.markerfiles.keys()) {\n\t\t\tlet imageObj = new Image();\n\t\t\timageObj.onload = function () {\n\t\t\t\tui.markerimages.set(markerid, imageObj);\n\t\t\t\tui.checkReadyRender();\n\t\t\t};\n\t\t\timageObj.src = this.markerfiles.get(markerid);\n\t\t}\n\n\t}\n\n\tcheckReadyRender() {\n\n\t\tfor (let terrain of this.tileimages.keys()) {\n\t\t\tif (this.tileimages.get(terrain) == null) {\n\t\t\t\t// console.log(\"missing maptile\", terrain, \"wait\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfor (let markerid of this.markerimages.keys()) {\n\t\t\tif (this.markerimages.get(markerid) == null) {\n\t\t\t\t// console.log(\"missing mapmarker\", markerid, \"wait\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// console.log(\"ready on all terrains\");\n\t\tthis.initRender();\n\t}\n\n\tinitRender() {\n\n\n\t\tconst vpw = this.container.nativeElement.offsetWidth;\n\t\tconst vph = this.container.nativeElement.offsetHeight;\n\n\t\tthis.TILESIZE = Math.min(vpw, vph) / 18;\n\n\t\tlet tilesX = this.worldmap.sizeX;\n\t\tlet tilesY = this.worldmap.sizeY;\n\n\n\t\tlet mapWidth = tilesX * this.TILESIZE;\n\t\tlet mapHeight = tilesY * this.TILESIZE;\n\n\n\t\t// console.log(this.TILESIZE, tilesX, tilesY, mapWidth, mapHeight);\n\n\t\tlet stage = new Konva.Stage({\n\t\t\tcontainer: \"mapholder\",\n\t\t\twidth: mapWidth,\n\t\t\theight: mapHeight,\n\n\t\t});\n\n\t\tlet container = (this.container.nativeElement as HTMLElement);\n\t\tlet contwidth = container.offsetWidth;\n\t\tlet contheight = container.offsetHeight;\n\n\t\t// console.log(\"stage \", contwidth, contheight);\n\n\t\tlet bound_sx = -(mapWidth - contwidth);\n\t\tlet bound_dx = 0;\n\n\n\n\t\tlet bound_top = -(mapHeight - contheight);\n\t\tlet bound_bottom = 0;\n\n\t\t// console.log(\"bounds\", bound_sx, bound_top, bound_dx, bound_bottom);\n\n\t\tlet tilelayer = new Konva.Layer({\n\t\t\tdraggable: true,\n\t\t\tdragBoundFunc: function (pos: Konva.Vector2d): Konva.Vector2d {\n\t\t\t\t// console.log(\"tilelayer at\", tilelayer.x(), tilelayer.y());\n\t\t\t\t// console.log(\"mouse at\", pos.x, pos.y);\n\t\t\t\tlet x = Math.min(Math.max(bound_sx, pos.x), bound_dx);\n\t\t\t\tlet y = Math.min(Math.max(bound_top, pos.y), bound_bottom);\n\n\t\t\t\treturn ({\n\t\t\t\t\tx: x,\n\t\t\t\t\ty: y\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tstage.add(tilelayer);\n\n\t\t// let ts_a = new Date();\n\t\tfor (let x = 0; x < tilesX; x++) {\n\t\t\tfor (let y = 0; y < tilesY; y++) {\n\t\t\t\tlet terrain = this.worldmap.getTerrainAt(x, y);\n\t\t\t\t// console.log(x, y, terrain);\n\t\t\t\tif (terrain != null) {\n\t\t\t\t\t// let imageObj = new Image();\n\t\t\t\t\t// imageObj.src = terraintiles.get(terrain);\n\n\t\t\t\t\t// let filename = terraintiles.get(terrain);\n\t\t\t\t\tlet tile = new Konva.Image({\n\t\t\t\t\t\timage: this.tileimages.get(terrain),\n\t\t\t\t\t\tx: x * this.TILESIZE,\n\t\t\t\t\t\ty: y * this.TILESIZE,\n\t\t\t\t\t\twidth: this.TILESIZE,\n\t\t\t\t\t\theight: this.TILESIZE,\n\t\t\t\t\t});\n\t\t\t\t\ttilelayer.add(tile);\n\t\t\t\t\t// console.log(\"added \", tile, x * this.TILESIZE, y * this.TILESIZE);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// create location markers\n\n\t\tlet widget = this;\n\n\t\tlet locs = this.worldmap.getAllLocations();\n\t\tfor (let loc of locs) {\n\t\t\t// console.log(\"adding location to map: \", loc, \"w coords\", loc[\"coords\"]);\n\t\t\t// let coords = loc[\"coords\"];\n\t\t\t// let loctype = loc[\"loctype\"];\n\n\t\t\tlet marker = new Konva.Image({\n\t\t\t\timage: this.markerimages.get(loc.loctype),\n\t\t\t\tx: loc.pos.x * this.TILESIZE,\n\t\t\t\ty: loc.pos.y * this.TILESIZE,\n\t\t\t\twidth: this.TILESIZE,\n\t\t\t\theight: this.TILESIZE,\n\t\t\t});\n\t\t\t// console.log(\"creating marker at\", loc.pos.x, loc.pos.y)\n\t\t\ttilelayer.add(marker);\n\n\t\t\tmarker.on(\"click\", function (ev) {\n\t\t\t\tconsole.log(\"marker click \", ev, \"on\", this, \"for loc\", loc);\n\t\t\t\twidget.chooseDestination(loc);\n\t\t\t\tev.cancelBubble = true;\n\t\t\t});\n\t\t}\n\n\t\t// create hero marker\n\t\tlet game = this.sceneref.game;\n\t\tlet playerpos = game.hero.pos.getCoords();\n\n\t\tlet imageref = this.markerimages.get(\"hero\");\n\t\t// let imagepath = this.markerfiles.get(\"hero\");\n\t\tlet marker = new Konva.Image({\n\t\t\timage: imageref,\n\t\t\tx: playerpos[0] * this.TILESIZE,\n\t\t\ty: playerpos[1] * this.TILESIZE,\n\t\t\twidth: this.TILESIZE,\n\t\t\theight: this.TILESIZE,\n\t\t});\n\n\t\tmarker.on(\"click\", function (ev) {\n\t\t\t// console.log(\"marker click \", ev, \"on\", this, \"for loc\", loc);\n\t\t\tlet loc = game.worldmap.getLocationAt(playerpos);\n\t\t\tif (!!loc)\n\t\t\t{\n\t\t\t\twidget.chooseDestination(loc);\n\t\t\t\tev.cancelBubble = true;\n\t\t\t}\n\t\t});\n\n\t\ttilelayer.add(marker);\n\n\n\t\ttilelayer.batchDraw();\n\t\t// loclayer.batchDraw();\n\t\t// console.log(\"redraw\");\n\n\t\t// console.log(\"mapdom size\", this.mapdom.nativeElement.offsetHeight, this.mapdom.nativeElement.offsetWidth);\n\t\t// console.log(\"container size\", this.container.nativeElement.offsetHeight, this.container.nativeElement.offsetWidth);\n\n\t\tlet shiftX = playerpos[0] * this.TILESIZE - this.container.nativeElement.offsetWidth / 2;\n\t\tlet shiftY = playerpos[1] * this.TILESIZE - this.container.nativeElement.offsetHeight / 2;\n\n\n\t\ttilelayer.setAbsolutePosition({x: -shiftX, y: -shiftY});\n\n\t\t// console.log(\"map ready\");\n\t}\n\n\tonClose() {\n\t\tthis.sceneref.close('BYE WORLD MAP');\n\t}\n\n\tchooseDestination(destination: Place)\n\t{\n\t\tconsole.log(\"chose destination \", destination, this.sceneref.scene);\n\n\n\t\t/*\n\t\tPlace location =  caller.game.map.getPlace(vtag);\n\t\tPosition locpos = location.getCoords();\n\n\t\tif ((locpos.x != heropos.x) || (locpos.y != heropos.y))\n\t\t{\n\t\t\tcaller.startScene(new Journey(caller.game, caller.game.map.getPlace((String)view.getTag())));\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// back to town gate screen, same as back\n\t\t\tcaller.startScene(new TownNav(caller.game));\n\t\t}\n\t\t*/\n\n\t\t// TODO: handle back to current\n\t\tthis.mapscene.setDestination(destination);\n\t\tthis.sceneref.triggerSceneCheck();\n\t}\n}\n\n","export default \"#st-page {\\n  background-image: url(\\\"/assets/ui/temporaryparchment.jpg\\\");\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RyYWtlL0NvZGUvV2FuZGVyL1dhbmRlckFORy9zcmMvYXBwL3N0b3J5dGVsbGVyL3N0b3J5dGVsbGVyLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9zdG9yeXRlbGxlci9zdG9yeXRlbGxlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVDLDBEQUFBO0FDQUQiLCJmaWxlIjoic3JjL2FwcC9zdG9yeXRlbGxlci9zdG9yeXRlbGxlci5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNzdC1wYWdlXG57XG5cdGJhY2tncm91bmQtaW1hZ2U6IHVybChcIi9hc3NldHMvdWkvdGVtcG9yYXJ5cGFyY2htZW50LmpwZ1wiKTtcbn1cbiIsIiNzdC1wYWdlIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiL2Fzc2V0cy91aS90ZW1wb3JhcnlwYXJjaG1lbnQuanBnXCIpO1xufSJdfQ== */\"","import {Component, OnInit, Type} from '@angular/core';\nimport {SceneUIService} from \"../scene-ui/scene-ui.service\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {WanderGame} from \"../rpg-engine/wander-game\";\nimport {WorldMapViewComponent} from \"./scenes/world-map-view/world-map-view.component\";\nimport {SceneRenderer} from \"./scenes/scene-renderer\";\nimport {WanderScene} from \"../rpg-engine/wander-scene\";\nimport {JourneyDeparture} from \"../rpg-engine/scenes/journey-departure\";\nimport {Journey} from \"../rpg-engine/scenes/journey\";\nimport {JourneyStepComponent} from \"./scenes/journey-step/journey-step.component\";\nimport {Town} from \"../rpg-engine/world/locs/Town\";\nimport {TownNav} from \"../rpg-engine/scenes/town-nav\";\nimport {TownUIComponent} from \"./scenes/town-ui/town-ui.component\";\nimport {Roaming} from \"../rpg-engine/scenes/roaming\";\nimport {RoamingStepComponent} from \"./scenes/roaming-step/roaming-step.component\";\nimport {PassageTrail} from \"../rpg-engine/scenes/passage-trail\";\nimport {PassageThroughComponent} from \"./scenes/passage-through/passage-through.component\";\nimport {TerrainPass} from \"../rpg-engine/world/locs/TerrainPass\";\n\n@Component({\n\tselector: 'app-storyteller',\n\ttemplateUrl: './storyteller.component.html',\n\tstyleUrls: ['./storyteller.component.scss']\n})\nexport class StorytellerComponent implements OnInit {\n\n\tgame: WanderGame;\n\n\n\tconstructor(private sceneui: SceneUIService, private http: HttpClient) {\n\t}\n\n\tngOnInit() {\n\t\tthis.sceneui.bindStoryTellerUI(this);\n\t\tthis.loadGameData();\n\n\t}\n\n\tloadGameData() {\n\t\tlet stui = this;\n\t\tWanderGame.loadGame(this.http, function (game: WanderGame) {\n\t\t\tstui.game = game;\n\t\t\tstui.checkReadyGame();\n\t\t});\n\t}\n\n\tcheckReadyGame() {\n\t\tconsole.log(\"running Wander Game \", this.game);\n\n\t\tthis.checkUpdateSceneRender();\n\n\n\t}\n\n\tgetLocationSensitiveScene (): WanderScene\n\t{\n\t\tlet ppos = this.game.hero.pos;\n\t\tlet place = this.game.worldmap.getLocationAt(ppos.getCoords());\n\t\tconsole.log(\"place is town? \", place instanceof Town);\n\t\tlet scene = null;\n\t\tif (place instanceof Town)\n\t\t{\n\t\t\tscene = new TownNav (this.game, place);\n\t\t}\n\t\telse if (place instanceof TerrainPass)\n\t\t{\n\t\t\tscene = new PassageTrail(this.game, place);\n\t\t}\n\t\telse {\n\t\t\t// if all fails, go to map\n\t\t\tscene = new JourneyDeparture(this.game);\n\t\t}\n\t\treturn scene;\n\t}\n\n\tcheckUpdateSceneRender()\n\t{\n\t\tconsole.log(\"checkUpdateSceneRender\");\n\t\tlet scene = this.game.getActiveScene();\n\t\tconsole.log(\"checking update on scene \", scene);\n\t\tif (!!scene && scene.sceneFinished())\n\t\t{\n\t\t\tconsole.log(\"having scene finisher\");\n\t\t\tscene = scene.getFollowingScene();\n\t\t\tconsole.log(\"following scene is \", scene);\n\t\t}\n\t\tif (!scene)\n\t\t{\n\t\t\tscene = this.getLocationSensitiveScene();\n\t\t}\n\n\t\tthis.game.setActiveScene(scene);\n\t\tconsole.log(\"using scene \", scene);\n\n\t\tlet renderer = this.getSceneRenderer(scene);\n\t\tconsole.log(\"opening renderer \", renderer, \"for scene\", scene);\n\t\tlet ref = this.sceneui.open(renderer, scene);\n\t\tconsole.log(\"opened as sceneref\", ref);\n\t\tref.afterClosed.subscribe(result => {\n\t\t\tconsole.log('Closed scene', scene, renderer, \"w result\", result);\n\t\t});\n\t}\n\n\tgetSceneRenderer (scene: WanderScene): Type<SceneRenderer>\n\t{\n\t\tlet renderer;\n\t\tif (scene instanceof JourneyDeparture)\n\t\t{\n\t\t\trenderer = WorldMapViewComponent;\n\t\t}\n\t\telse if (scene instanceof Journey)\n\t\t{\n\t\t\trenderer = JourneyStepComponent;\n\t\t}\n\t\telse if (scene instanceof TownNav)\n\t\t{\n\t\t\trenderer = TownUIComponent;\n\t\t}\n\t\telse if (scene instanceof Roaming)\n\t\t{\n\t\t\trenderer = RoamingStepComponent;\n\t\t}\n\t\telse if (scene instanceof PassageTrail)\n\t\t{\n\t\t\trenderer = PassageThroughComponent;\n\t\t}\n\t\treturn renderer;\n\t}\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n\tproduction: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}